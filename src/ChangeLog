ChangeSet@1.2352, 2006-12-06 16:15:20+01:00, df@kahlann.erinye.com +3 -0
  apply magnus' rpl_000015 fix

  mysql-test/mysql-test-run.pl@1.244, 2006-12-06 16:15:18+01:00, df@kahlann.erinye.com +1 -0
    apply magnus' rpl_000015 fix

  mysql-test/r/rpl_000015.result@1.39, 2006-12-06 16:15:18+01:00, df@kahlann.erinye.com +1 -1
    apply magnus' rpl_000015 fix

  mysql-test/t/rpl_000015.test@1.37, 2006-12-06 16:15:18+01:00, df@kahlann.erinye.com +1 -1
    apply magnus' rpl_000015 fix

ChangeSet@1.2351, 2006-12-06 14:23:10+01:00, df@kahlann.erinye.com +1 -0
  stole magnus' fix for random im test failures from 5.1-maint

  server-tools/instance-manager/guardian.cc@1.35, 2006-12-06 14:23:08+01:00, df@kahlann.erinye.com +1 -0
    stole magnus' fix for random im test failures from 5.1-maint

ChangeSet@1.2350, 2006-12-06 09:54:21+01:00, kent@mysql.com +1 -0
  log_event.cc:
    On Windows, byte != char

  sql/log_event.cc@1.260, 2006-12-06 09:53:46+01:00, kent@mysql.com +6 -6
    On Windows, byte != char

ChangeSet@1.2349, 2006-12-06 09:17:08+01:00, df@kahlann.erinye.com +1 -0
  build fix for instance manager build on aix and hpux

  server-tools/instance-manager/Makefile.am@1.44, 2006-12-06 09:17:05+01:00, df@kahlann.erinye.com +1 -1
    remove -Wall and -W, not all compilers know these

ChangeSet@1.2348, 2006-12-05 10:51:30+01:00, df@kahlann.erinye.com +2 -0
  fix test cases after change to error messages file
  TAG: clone-5.1.14-build

  mysql-test/r/sp.result@1.235, 2006-12-05 10:51:28+01:00, df@kahlann.erinye.com +4 -4
    offset error number according to changed error messages file

  mysql-test/r/sp_gis.result@1.3, 2006-12-05 10:51:28+01:00, df@kahlann.erinye.com +2 -2
    offset error number according to changed error messages file

ChangeSet@1.1616.2847.20, 2006-12-05 10:03:24+01:00, df@kahlann.erinye.com +1 -0
  re-enable multiple test runs in sequence for 4.1 on non-windows

  mysql-test/mysql-test-run.pl@1.8.14.6, 2006-12-05 10:03:23+01:00, df@kahlann.erinye.com +3 -0
    delete $default_vardir if the 4.1 vardir trick is to be used to re-enable more than one test run in sequence

ChangeSet@1.2346, 2006-12-04 14:41:08-07:00, tsmith@siva.hindu.god +1 -0
  Change ::fileno() to fileno() in ndb/common/util/File.cpp.
  
  fileno(), and many other stdio functions, may be macros
  (at least on *BSD).
  
  Don't explicitly qualify it with global scope (::fileno()),
  because it causes syntax errors.
  
  <cstdio> doesn't define *most* of these macros.
  
  It still has a macro for fileno(), however, on FreeBSD 6.1,
  so even using <cstdio> isn't a fix for this.  Better to
  just avoid ::standard_library_function() in general, in
  order to be portable.

  storage/ndb/src/common/util/File.cpp@1.16, 2006-12-04 14:41:05-07:00, tsmith@siva.hindu.god +1 -1
    fileno(), and many other stdio functions, may be macros
    (at least on *BSD).
    
    Don't explicitly qualify it with global scope (::fileno()),
    because it causes syntax errors.
    
    Note that <cstdio> doesn't define *most* of these macros.
    It still has a macro for fileno(), however, on FreeBSD 6.1,
    so even using <cstdio> isn't a fix for this.  Better to
    just avoid ::standard_library_function() in general, in
    order to be portable.

ChangeSet@1.2345, 2006-12-04 11:38:40-07:00, tsmith@siva.hindu.god +9 -0
  Apply malff@weblab.(none) fix for bug 24736 directly to
  mysql-5.1-build tree, in order to get it into mysql-5.1
  faster.  See comments from Marc's original push for
  patch details.

  mysql-test/r/parser.result@1.3, 2006-12-04 11:38:35-07:00, tsmith@siva.hindu.god +101 -0
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

  mysql-test/r/udf.result@1.12, 2006-12-04 11:38:35-07:00, tsmith@siva.hindu.god +24 -2
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

  mysql-test/t/parser.test@1.3, 2006-12-04 11:38:35-07:00, tsmith@siva.hindu.god +110 -0
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

  mysql-test/t/udf.test@1.12, 2006-12-04 11:38:35-07:00, tsmith@siva.hindu.god +18 -2
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

  sql/item_create.cc@1.70, 2006-12-04 11:38:35-07:00, tsmith@siva.hindu.god +200 -78
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

  sql/share/errmsg.txt@1.136, 2006-12-04 11:38:36-07:00, tsmith@siva.hindu.god +2 -0
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

  sql/sql_lex.cc@1.211, 2006-12-04 11:38:36-07:00, tsmith@siva.hindu.god +0 -2
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

  sql/sql_lex.h@1.251, 2006-12-04 11:38:36-07:00, tsmith@siva.hindu.god +0 -2
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

  sql/sql_yacc.yy@1.522, 2006-12-04 11:38:36-07:00, tsmith@siva.hindu.god +4 -15
    Apply malff@weblab.(none) fix for bug 24736 directly to
    mysql-5.1-build tree, in order to get it into mysql-5.1
    faster.  See comments from Marc's original push for
    patch details.

ChangeSet@1.1810.2351.2, 2006-12-04 14:29:51+02:00, gkodinov@macbook.gmz +1 -0
  type_varchar.result:
    fixed a valgrind problem

  mysql-test/r/type_varchar.result@1.8.1.3, 2006-12-04 14:29:30+02:00, gkodinov@macbook.gmz +1 -0
    fixed a valgrind problem

ChangeSet@1.1810.2351.1, 2006-12-04 14:26:05+02:00, gkodinov@macbook.gmz +2 -0
  item_func.cc:
     fixed a valgrind warning
  type_varchar.test:
    fixed a valgrind warning

  mysql-test/t/type_varchar.test@1.8.1.3, 2006-12-04 14:25:29+02:00, gkodinov@macbook.gmz +1 -0
    fixed a valgrind warning

  sql/item_func.cc@1.270.31.1, 2006-12-04 14:25:41+02:00, gkodinov@macbook.gmz +14 -5
     fixed a valgrind warning

ChangeSet@1.2303.47.46, 2006-12-03 00:25:52+01:00, kent@mysql.com +1 -0
  Makefile.am:
    Disabled abi_check, as it was before merge

  include/Makefile.am@1.74, 2006-12-03 00:25:44+01:00, kent@mysql.com +2 -1
    Disabled abi_check, as it was before merge

ChangeSet@1.1810.1698.200, 2006-12-02 23:16:47+01:00, kent@mysql.com +3 -0
  mysql_install_db.sh:
    If --srcdir and --windows is given, check if error message file
    is in source or build tree (bug#24557)
  Makefile.am:
    Cleaned up "ali_check" target, to satisfy "distcleancheck" (bug#24557)
  mysql_install_db.sh:
    Added --srcdir=DIR option, used from top Makefile.am in dist-hook
    target, to find "fill_help_tables.sql" in VPATH build (bug#24557)
  Makefile.am:
    Work around problem with "distcleancheck", "sql_yacc.cc" might be in both
    the source and build tree.
    Call "mysql_install_db" with new option --srcdir, to enable the script
    to find all that is needed, if source and build directory is not the same
    (bug#24557)

  Makefile.am@1.68.1.24, 2006-12-02 23:13:30+01:00, kent@mysql.com +13 -11
    Work around problem with "distcleancheck", "sql_yacc.cc" might be in both
    the source and build tree.
    Call "mysql_install_db" with new option --srcdir, to enable the script
    to find all that is needed, if source and build directory is not the same
    (bug#24557)

  include/Makefile.am@1.52.2.9, 2006-12-02 23:15:51+01:00, kent@mysql.com +11 -12
    Cleaned up "ali_check" target, to satisfy "distcleancheck" (bug#24557)

  scripts/mysql_install_db.sh@1.64.1.3, 2006-12-02 23:11:15+01:00, kent@mysql.com +7 -1
    If --srcdir and --windows is given, check if error message file
    is in source or build tree (bug#24557)

  scripts/mysql_install_db.sh@1.64.1.2, 2006-12-02 20:09:01+01:00, kent@mysql.com +18 -10
    Added --srcdir=DIR option, used from top Makefile.am in dist-hook
    target, to find "fill_help_tables.sql" in VPATH build (bug#24557)

ChangeSet@1.1810.1698.199, 2006-12-02 06:06:31+01:00, kent@mysql.com +2 -0
  Makefile.am:
    Added "mysql_client_test.def"
  mysql_client_test.def:
    BitKeeper file /home/kent/bk/mysql-5.0-build/netware/mysql_client_test.def

  netware/Makefile.am@1.15.1.5, 2006-12-02 06:06:19+01:00, kent@mysql.com +2 -0
    Added "mysql_client_test.def"

  netware/mysql_client_test.def@1.1, 2006-12-02 06:02:14+01:00, kent@mysql.com +10 -0
    BitKeeper file /home/kent/bk/mysql-5.0-build/netware/mysql_client_test.def

  netware/mysql_client_test.def@1.0, 2006-12-02 06:02:14+01:00, kent@mysql.com +0 -0

ChangeSet@1.2303.47.43, 2006-12-02 04:25:41+01:00, kent@suse9-x86.mysql.com +5 -0
  myisampack.def, myisamlog.def, myisam_ftdump.def, myisamchk.def:
    Adjusted for storage path
  nwbootstrap:
    Corrected bad merge

  netware/BUILD/nwbootstrap@1.15, 2006-12-02 04:24:31+01:00, kent@suse9-x86.mysql.com +1 -2
    Corrected bad merge

  netware/myisam_ftdump.def@1.5, 2006-12-02 04:25:14+01:00, kent@suse9-x86.mysql.com +1 -1
    Adjusted for storage path

  netware/myisamchk.def@1.9, 2006-12-02 04:25:14+01:00, kent@suse9-x86.mysql.com +1 -1
    Adjusted for storage path

  netware/myisamlog.def@1.9, 2006-12-02 04:25:14+01:00, kent@suse9-x86.mysql.com +1 -1
    Adjusted for storage path

  netware/myisampack.def@1.9, 2006-12-02 04:25:14+01:00, kent@suse9-x86.mysql.com +1 -1
    Adjusted for storage path

ChangeSet@1.1810.1698.197, 2006-12-01 23:09:14+01:00, kent@mysql.com +29 -0
  mysql_upgrade.def Makefile.am:
    Added new "mysql_upgrade.def" for Netware (bug#23504)
  *.def:
    Allocate 128K stack for all executables (bug#23504)

  netware/Makefile.am@1.15.1.4, 2006-12-01 23:04:41+01:00, kent@mysql.com +2 -1
    Added "mysql_upgrade.def"

  netware/comp_err.def@1.4, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -0
    Allocate 128K stack for all executables (bug#23504)

  netware/isamchk.def@1.7, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/isamlog.def@1.6, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -0
    Allocate 128K stack for all executables (bug#23504)

  netware/libmysql.def@1.7, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/my_print_defaults.def@1.8, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/myisam_ftdump.def@1.4, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/myisamchk.def@1.8, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/myisamlog.def@1.8, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/myisampack.def@1.8, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysql.def@1.9, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysql_install_db.def@1.7, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysql_test_run.def@1.6, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysql_upgrade.def@1.1, 2006-12-01 23:04:11+01:00, kent@mysql.com +11 -0
    BitKeeper file /home/kent/bk/mysql-5.0-build/netware/mysql_upgrade.def

  netware/mysql_upgrade.def@1.0, 2006-12-01 23:04:11+01:00, kent@mysql.com +0 -0

  netware/mysql_waitpid.def@1.4, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqladmin.def@1.9, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqlbinlog.def@1.9, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqlcheck.def@1.9, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqld.def@1.5, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqld_safe.def@1.6, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqldump.def@1.9, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqlimport.def@1.9, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqlshow.def@1.7, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -0
    Allocate 128K stack for all executables (bug#23504)

  netware/mysqltest.def@1.6, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -0
    Allocate 128K stack for all executables (bug#23504)

  netware/pack_isam.def@1.8, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -0
    Allocate 128K stack for all executables (bug#23504)

  netware/perror.def@1.7, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/replace.def@1.6, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -0
    Allocate 128K stack for all executables (bug#23504)

  netware/resolve_stack_dump.def@1.4, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -1
    Allocate 128K stack for all executables (bug#23504)

  netware/resolveip.def@1.6, 2006-12-01 22:43:12+01:00, kent@mysql.com +1 -0
    Allocate 128K stack for all executables (bug#23504)

ChangeSet@1.2336.2.1, 2006-12-01 15:49:07+01:00, mskold@mysql.com +34 -0
  Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/include/ndb_setup_slave.inc@1.3, 2006-12-01 15:48:21+01:00, mskold@mysql.com +3 -3
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/lib/init_db.sql@1.29, 2006-12-01 15:48:22+01:00, mskold@mysql.com +1 -1
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/mysql-test-run.pl@1.238.2.1, 2006-12-01 15:48:20+01:00, mskold@mysql.com +4 -4
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/1st.result@1.2, 2006-12-01 15:48:22+01:00, mskold@mysql.com +1 -1
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/connect.result@1.26, 2006-12-01 15:48:22+01:00, mskold@mysql.com +3 -3
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/information_schema.result@1.141, 2006-12-01 15:48:22+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/log_tables.result@1.15, 2006-12-01 15:48:23+01:00, mskold@mysql.com +1 -1
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/mysqlcheck.result@1.12, 2006-12-01 15:48:23+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/ndb_binlog_basic.result@1.5, 2006-12-01 15:48:23+01:00, mskold@mysql.com +7 -7
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/ndb_binlog_ddl_multi.result@1.16, 2006-12-01 15:48:23+01:00, mskold@mysql.com +3 -3
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/ndb_binlog_multi.result@1.7, 2006-12-01 15:48:23+01:00, mskold@mysql.com +9 -9
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/ndb_restore_compat.result@1.3, 2006-12-01 15:48:23+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/rpl_ndb_dd_basic.result@1.9, 2006-12-01 15:48:23+01:00, mskold@mysql.com +1 -1
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/rpl_ndb_idempotent.result@1.5, 2006-12-01 15:48:23+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/rpl_ndb_log.result@1.16, 2006-12-01 15:48:23+01:00, mskold@mysql.com +12 -12
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/rpl_ndb_multi.result@1.4, 2006-12-01 15:48:23+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/rpl_truncate_7ndb.result@1.5, 2006-12-01 15:48:23+01:00, mskold@mysql.com +26 -26
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/r/system_mysql_db.result@1.44, 2006-12-01 15:48:23+01:00, mskold@mysql.com +1 -1
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/information_schema.test@1.90, 2006-12-01 15:48:23+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/ndb_autodiscover3.test@1.10, 2006-12-01 15:48:23+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/ndb_binlog_basic.test@1.5, 2006-12-01 15:48:24+01:00, mskold@mysql.com +9 -9
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/ndb_binlog_multi.test@1.7, 2006-12-01 15:48:24+01:00, mskold@mysql.com +5 -5
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/ndb_restore_compat.test@1.3, 2006-12-01 15:48:24+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/rpl_ndb_idempotent.test@1.6, 2006-12-01 15:48:24+01:00, mskold@mysql.com +3 -3
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/rpl_ndb_multi.test@1.4, 2006-12-01 15:48:24+01:00, mskold@mysql.com +3 -3
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/rpl_ndb_sync.test@1.11, 2006-12-01 15:48:24+01:00, mskold@mysql.com +3 -3
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  mysql-test/t/system_mysql_db_fix.test@1.28, 2006-12-01 15:48:25+01:00, mskold@mysql.com +1 -1
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  scripts/mysql_create_system_tables.sh@1.42, 2006-12-01 15:48:25+01:00, mskold@mysql.com +1 -1
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  scripts/mysql_fix_privilege_tables.sql@1.47, 2006-12-01 15:48:25+01:00, mskold@mysql.com +1 -1
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  sql/ha_ndbcluster.cc@1.369.1.1, 2006-12-01 15:48:25+01:00, mskold@mysql.com +7 -6
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  sql/ha_ndbcluster_binlog.cc@1.90, 2006-12-01 15:48:25+01:00, mskold@mysql.com +117 -117
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  sql/ha_ndbcluster_binlog.h@1.20, 2006-12-01 15:48:25+01:00, mskold@mysql.com +3 -3
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  sql/ha_ndbcluster_tables.h@1.4, 2006-12-01 15:48:28+01:00, mskold@mysql.com +4 -3
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

  storage/ndb/tools/restore/Restore.cpp@1.43, 2006-12-01 15:48:28+01:00, mskold@mysql.com +2 -2
    Changed mysql.apply_status, mysql.binlog_index, and mysql.schema to mysql.ndb_apply_status, mysql.ndb_binlog_index, and mysql.ndb_schema

ChangeSet@1.2303.47.40, 2006-12-01 14:25:32+01:00, df@kahlann.erinye.com +1 -0
  fix build failure introduced by 5.1-marvel merge

  include/m_ctype.h@1.131, 2006-12-01 14:25:29+01:00, df@kahlann.erinye.com +1 -1
    update prototype to reflect changes to my_strchr.c

ChangeSet@1.2303.71.18, 2006-12-01 14:04:06+01:00, jonas@perch.ndb.mysql.com +3 -0
  ndb - bug#24655
    Handle events "differently" so that dict doesnt get lock too often

  storage/ndb/src/kernel/blocks/dbdict/Dbdict.cpp@1.104.2.2, 2006-12-01 14:04:04+01:00, jonas@perch.ndb.mysql.com +14 -1
    Handle event separatly as they dont set block_state :-(

  storage/ndb/src/kernel/blocks/dbdict/Dbdict.hpp@1.44, 2006-12-01 14:04:04+01:00, jonas@perch.ndb.mysql.com +4 -4
    Handle event separatly as they dont set block_state :-(

  storage/ndb/src/kernel/vm/KeyTable2.hpp@1.3, 2006-12-01 14:04:04+01:00, jonas@perch.ndb.mysql.com +72 -0
    Handle event separatly as they dont set block_state :-(

ChangeSet@1.1810.2124.32, 2006-12-01 13:57:29+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#24752
    This prevent any subsequent node restarts, but it's better than crashing an alive node

  ndb/src/kernel/blocks/dbdict/Dbdict.cpp@1.40.36.1, 2006-12-01 13:57:28+01:00, jonas@perch.ndb.mysql.com +9 -0
    Fix for bug#24752
    This prevent any subsequent node restarts, but it's better than crashing an alive node

ChangeSet@1.1810.2124.31, 2006-12-01 11:24:37+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#24748
    Skip rollback if only committedRead in transaction

  ndb/src/ndbapi/NdbTransaction.cpp@1.43.19.1, 2006-12-01 11:24:35+01:00, jonas@perch.ndb.mysql.com +4 -1
    Skip rollback if only committedRead in transaction

ChangeSet@1.2303.71.15, 2006-12-01 11:08:53+01:00, jonas@perch.ndb.mysql.com +3 -0
  ndb - bug#24717
    fixes to testprogram to test new impl. in 5.1

  storage/ndb/include/kernel/signaldata/DumpStateOrd.hpp@1.12, 2006-12-01 11:08:51+01:00, jonas@perch.ndb.mysql.com +1 -1
    move tsman dumps

  storage/ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.32.3.4, 2006-12-01 11:08:51+01:00, jonas@perch.ndb.mysql.com +9 -5
    add more support for connection handling using dumps

  storage/ndb/test/ndbapi/testNodeRestart.cpp@1.35, 2006-12-01 11:08:51+01:00, jonas@perch.ndb.mysql.com +3 -1
    port testprogram to 5.1 to avoid "extra" safety net in LQH

ChangeSet@1.2303.71.13, 2006-12-01 10:29:45+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb -
    fix merge error

  storage/ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.32.3.2, 2006-12-01 10:29:43+01:00, jonas@perch.ndb.mysql.com +1 -1
    fix merge error

ChangeSet@1.1810.2124.30, 2006-12-01 10:25:11+01:00, jonas@perch.ndb.mysql.com +5 -0
  ndb -
    add testcase for bug#24717
   + fix typo

  ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.18.10.1, 2006-12-01 10:25:10+01:00, jonas@perch.ndb.mysql.com +18 -4
    Add new error insert 9002
      which is 9000, but will auto enable when started

  ndb/src/kernel/blocks/cmvmi/Cmvmi.hpp@1.2.2.1, 2006-12-01 10:25:10+01:00, jonas@perch.ndb.mysql.com +2 -1
    Add new error insert 9002
      which is 9000, but will auto enable when started

  ndb/src/kernel/blocks/dbdih/DbdihInit.cpp@1.6.7.1, 2006-12-01 10:25:10+01:00, jonas@perch.ndb.mysql.com +1 -1
    Fix typo

  ndb/test/ndbapi/testNodeRestart.cpp@1.13.12.1, 2006-12-01 10:25:10+01:00, jonas@perch.ndb.mysql.com +39 -0
    add testcase for bug#24717

  ndb/test/run-test/daily-basic-tests.txt@1.27.20.1, 2006-12-01 10:25:10+01:00, jonas@perch.ndb.mysql.com +4 -0
    add testcase for bug#24717

ChangeSet@1.2303.71.12, 2006-12-01 09:37:17+01:00, jonas@perch.ndb.mysql.com +7 -0
  ndb - bug#24717
    5.1 version
    remove 5.0 version
    add general routing signal
    send tckeyref routed if needed...

  storage/ndb/include/kernel/GlobalSignalNumbers.h@1.30, 2006-12-01 09:37:15+01:00, jonas@perch.ndb.mysql.com +1 -2
    Add general routing signal

  storage/ndb/include/kernel/signaldata/RouteOrd.hpp@1.1, 2006-12-01 09:37:15+01:00, jonas@perch.ndb.mysql.com +35 -0
    New BitKeeper file ``storage/ndb/include/kernel/signaldata/RouteOrd.hpp''

  storage/ndb/include/kernel/signaldata/RouteOrd.hpp@1.0, 2006-12-01 09:37:15+01:00, jonas@perch.ndb.mysql.com +0 -0

  storage/ndb/src/common/debugger/signaldata/SignalNames.cpp@1.15, 2006-12-01 09:37:15+01:00, jonas@perch.ndb.mysql.com +2 -0
    Add general routing signal

  storage/ndb/src/kernel/blocks/dblqh/DblqhMain.cpp@1.125.1.2, 2006-12-01 09:37:15+01:00, jonas@perch.ndb.mysql.com +27 -7
    send TCKEYREF routed if needed

  storage/ndb/src/kernel/blocks/dbtc/Dbtc.hpp@1.44, 2006-12-01 09:37:15+01:00, jonas@perch.ndb.mysql.com +2 -4
    add general routing 
    remove node started state

  storage/ndb/src/kernel/blocks/dbtc/DbtcInit.cpp@1.18, 2006-12-01 09:37:15+01:00, jonas@perch.ndb.mysql.com +1 -1
    add general routing 
    remove node started state

  storage/ndb/src/kernel/blocks/dbtc/DbtcMain.cpp@1.127, 2006-12-01 09:37:15+01:00, jonas@perch.ndb.mysql.com +56 -35
    add general routing 
    remove node started state
    remove "avoid sending committed read to early" as it now should be handled correctly

ChangeSet@1.1810.2124.29, 2006-12-01 09:06:01+01:00, jonas@perch.ndb.mysql.com +10 -0
  ndb - bug#24717
    5.0 version
    Add some extra state to try to prevent sending committedread to node too early

  ndb/src/kernel/blocks/dbdih/Dbdih.hpp@1.8.7.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +1 -1
    remove extra virtual-indirection

  ndb/src/kernel/blocks/dbdih/DbdihInit.cpp@1.6.6.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +2 -1
    remove extra virtual-indirection

  ndb/src/kernel/blocks/dbdih/DbdihMain.cpp@1.24.58.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +1 -1
    remove extra virtual-indirection

  ndb/src/kernel/blocks/dblqh/Dblqh.hpp@1.32.11.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +2 -0
    Add retry mechanism to send TCKEYREF
      (as extra safety)

  ndb/src/kernel/blocks/dblqh/DblqhMain.cpp@1.66.30.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +41 -3
    Add retry mechanism to send TCKEYREF
      (as extra safety)

  ndb/src/kernel/blocks/dbtc/Dbtc.hpp@1.26.10.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +3 -1
    Add extra state to prevent sending committed reads to node to early
      (before connection establishment)

  ndb/src/kernel/blocks/dbtc/DbtcInit.cpp@1.8.7.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +2 -1
    Add extra state to prevent sending committed reads to node to early
      (before connection establishment)

  ndb/src/kernel/blocks/dbtc/DbtcMain.cpp@1.73.31.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +35 -1
    Add extra state to prevent sending committed reads to node to early
      (before connection establishment)

  ndb/src/kernel/vm/SimulatedBlock.cpp@1.17.10.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +0 -9
    remove extra virtual-indirection

  ndb/src/kernel/vm/SimulatedBlock.hpp@1.11.8.1, 2006-12-01 09:05:59+01:00, jonas@perch.ndb.mysql.com +0 -1
    remove extra virtual-indirection

ChangeSet@1.2303.71.10, 2006-12-01 08:54:28+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#24476
    Fix typo that yeilded rare crash in ACC

  storage/ndb/src/kernel/blocks/dbacc/DbaccMain.cpp@1.77.1.1, 2006-12-01 08:54:27+01:00, jonas@perch.ndb.mysql.com +3 -2
    fix typo, where elementptr was sent as elementheader
    yeilded very rare crashes as only 1 bit is checked
      and it's only checked under certatin rare circumstances

ChangeSet@1.2336.1.2, 2006-12-01 12:16:25+08:00, gni@ts3-168.ts.cn.tlan +1 -0
  For merging mysql-5.1-new-ndb-bj tree into mysql-5.1-new-ndb tree

  storage/ndb/src/mgmsrv/ParamInfo.cpp@1.2, 2006-12-01 12:16:22+08:00, gni@ts3-168.ts.cn.tlan +0 -36
    delete CFG_OSE_PRIO_A_SIZE, CFG_OSE_PRIO_B_SIZE and CFG_OSE_RECEIVE_ARRAY_SIZE defination

ChangeSet@1.2337, 2006-12-01 02:06:37+01:00, pekka@orca.ndb.mysql.com +2 -0
  ndb - bug#21690: fix typo which changed blob parts distribution

  storage/ndb/src/ndbapi/NdbBlob.cpp@1.49, 2006-12-01 01:59:04+01:00, pekka@orca.ndb.mysql.com +0 -6
    fix typo which made blob PART part of distribution key

  storage/ndb/src/ndbapi/NdbDictionary.cpp@1.65, 2006-12-01 01:59:04+01:00, pekka@orca.ndb.mysql.com +1 -1
    fix typo which made blob PART part of distribution key

ChangeSet@1.2336, 2006-11-30 23:10:11+01:00, mskold@mysql.com +2 -0
  bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: only check pk if it is updated

  sql/ha_ndbcluster.cc@1.369, 2006-11-30 23:09:49+01:00, mskold@mysql.com +9 -8
    bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: only check pk if it is updated

  sql/ha_ndbcluster.h@1.159, 2006-11-30 23:09:49+01:00, mskold@mysql.com +1 -1
    bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: only check pk if it is updated

ChangeSet@1.1810.2301.6, 2006-11-30 22:52:23+01:00, mskold@mysql.com +2 -0
  bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: only check pk if it is updated

  sql/ha_ndbcluster.cc@1.175.61.4, 2006-11-30 22:51:19+01:00, mskold@mysql.com +8 -7
    bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: only check pk if it is updated

  sql/ha_ndbcluster.h@1.82.4.9, 2006-11-30 22:51:58+01:00, mskold@mysql.com +1 -1
    bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: only check pk if it is updated

ChangeSet@1.1810.2349.5, 2006-11-30 22:45:55+01:00, df@kahlann.erinye.com +1 -0
  late after-merge fix

  mysql-test/mysql-test-run.pl@1.30.55.1, 2006-11-30 22:45:53+01:00, df@kahlann.erinye.com +7 -1
    late after-merge fix: re-add MTR_BUILD_THREAD=auto

ChangeSet@1.2303.124.3, 2006-11-30 23:23:23+02:00, monty@mysql.com +6 -0
  After merge fixes
  Marked some functions as noreturn

  sql/mysql_priv.h@1.460.1.3, 2006-11-30 23:23:11+02:00, monty@mysql.com +2 -2
    Marked some functions as noreturn

  storage/federated/ha_federated.cc@1.88.1.2, 2006-11-30 23:23:11+02:00, monty@mysql.com +2 -2
    After merge fix

  storage/myisam/ft_boolean_search.c@1.104, 2006-11-30 23:23:11+02:00, monty@mysql.com +0 -1
    Removed duplicate code

  storage/myisam/myisamchk.c@1.123, 2006-11-30 23:23:11+02:00, monty@mysql.com +1 -0
    Added LINT_INIT()

  storage/myisam/myisampack.c@1.59, 2006-11-30 23:23:11+02:00, monty@mysql.com +1 -0
    After merge fix

  storage/myisam/sort.c@1.62, 2006-11-30 23:23:11+02:00, monty@mysql.com +0 -1
    Indentation fixup

ChangeSet@1.2303.124.1, 2006-11-30 22:00:05+02:00, monty@mysql.com +5 -0
  Don't abort if we call my_thread_end() multiple times
  Fixed new introduced bug in my_time.c

  BitKeeper/deleted/.del-valgrind.supp.orig@1.2, 2006-11-30 18:30:16+02:00, monty@mysql.com +0 -0
    Delete: mysql-test/valgrind.supp.orig

  mysys/my_thr_init.c@1.37, 2006-11-30 22:00:03+02:00, monty@mysql.com +48 -13
    More comments
    Don't abort if we call my_thread_end() multiple times

  sql-common/my_time.c@1.31.1.4, 2006-11-30 22:00:03+02:00, monty@mysql.com +3 -3
    Fixed wrong patch in last commit

  sql/sql_cache.cc@1.98.2.1, 2006-11-30 22:00:03+02:00, monty@mysql.com +1 -2
    Fixed old bad merge (not critical)

  sql/tztime.cc@1.44, 2006-11-30 22:00:03+02:00, monty@mysql.com +3 -3
    Portability fix

ChangeSet@1.1810.2337.12, 2006-11-30 21:56:03+02:00, monty@mysql.com +27 -0
  Fixed compiler warnings
  Don't assert if my_thread_end() is called twice (common case)

  client/mysql.cc@1.199.1.29, 2006-11-30 21:56:00+02:00, monty@mysql.com +0 -2
    Removed not used variables

  client/mysqldump.c@1.214.1.38, 2006-11-30 21:56:00+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  client/mysqltest.c@1.155.24.1, 2006-11-30 21:56:00+02:00, monty@mysql.com +9 -8
    Fixed compiler warnings

  cmd-line-utils/readline/bind.c@1.15.1.1, 2006-11-30 21:56:00+02:00, monty@mysql.com +3 -1
    Fixed compiler warnings

  cmd-line-utils/readline/histfile.c@1.9.1.1, 2006-11-30 21:56:00+02:00, monty@mysql.com +2 -1
    Fixed compiler warnings

  extra/replace.c@1.20.1.1, 2006-11-30 21:56:00+02:00, monty@mysql.com +4 -2
    Fixed compiler warning on windows

  extra/yassl/taocrypt/include/algebra.hpp@1.4.1.1, 2006-11-30 21:56:00+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  libmysql/libmysql.c@1.233.9.1, 2006-11-30 21:56:00+02:00, monty@mysql.com +7 -3
    Call my_end()/my_thread_end last.
    my_end() calls free_charsets(), which allowed me to move the call

  mysys/my_thr_init.c@1.31.1.3, 2006-11-30 21:56:01+02:00, monty@mysql.com +32 -8
    More comments
    Don't assert if my_thread_end() is called twice (common case)

  server-tools/instance-manager/guardian.cc@1.20.1.5, 2006-11-30 21:56:01+02:00, monty@mysql.com +0 -2
    Removed not used variable

  server-tools/instance-manager/portability.h@1.8.1.2, 2006-11-30 21:56:01+02:00, monty@mysql.com +0 -1
    Removed duplicated symbol

  sql/gen_lex_hash.cc@1.67.1.3, 2006-11-30 21:56:01+02:00, monty@mysql.com +3 -2
    Fixed compiler warning

  sql/ha_ndbcluster.cc@1.175.1.113, 2006-11-30 21:56:01+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  sql/mysqld.cc@1.439.1.142, 2006-11-30 21:56:01+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/sql_cache.cc@1.76.7.2, 2006-11-30 21:56:01+02:00, monty@mysql.com +19 -19
    Fixed compiler warnings
    Fixed DBUG_PRINT strings to be consistent with 5.1

  sql/tztime.cc@1.24.1.12, 2006-11-30 21:56:01+02:00, monty@mysql.com +5 -5
    Fixed compiler warnings

  sql/uniques.cc@1.27, 2006-11-30 21:56:01+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  sql/ha_archive.cc@1.60.10.2, 2006-11-30 21:56:01+02:00, monty@mysql.com +7 -6
    Fixed compiler warnings

  heap/hp_write.c@1.22.3.1, 2006-11-30 21:56:00+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  innobase/os/os0file.c@1.103.14.1, 2006-11-30 21:56:00+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  myisam/myisampack.c@1.39.15.2, 2006-11-30 21:56:00+02:00, monty@mysql.com +7 -7
    Fixed compiler warnings

  myisammrg/myrg_rkey.c@1.16.2.1, 2006-11-30 21:56:01+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  ndb/src/mgmapi/mgmapi.cpp@1.44.31.1, 2006-11-30 21:56:01+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  ndb/src/ndbapi/Ndb.cpp@1.49.14.1, 2006-11-30 21:56:01+02:00, monty@mysql.com +12 -11
    Fixed compiler warnings

  ndb/src/ndbapi/NdbScanOperation.cpp@1.66.18.1, 2006-11-30 21:56:01+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  ndb/src/ndbapi/NdbTransaction.cpp@1.43.18.1, 2006-11-30 21:56:01+02:00, monty@mysql.com +2 -1
    Fixed compiler warnings

  ndb/src/ndbapi/Ndblist.cpp@1.13.4.1, 2006-11-30 21:56:01+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

ChangeSet@1.2303.123.1, 2006-11-30 19:56:34+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +1 -0
  Bug #24487 Valgrind: uninited byte in table->record[1] in binlog code for rbr + inno db
  
  The reason of this valgrind's compaint is not a bug but rather a feature of bitwise ops:
  for any value of the byte x
  x | 1 -> 1,  and x & 0 -> 0.
  x, being a null_byte part of record[1] can be left unassigned even after
  ha_innobase::index_read_idx because the above and still be correct.
  Addding a check memory upon the invocation of the function can detect this fact
  long before record[1], old record, is eventually passed to my_write.
  
  Fixed with initialization of record[1]'s null_bytes part in open_table_from_share.

  sql/table.cc@1.257.2.1, 2006-11-30 19:56:30+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +1 -0
    initialization of null-bytes for valgrind.

ChangeSet@1.1810.2321.23, 2006-11-30 18:47:59+02:00, gkodinov@macbook.gmz +4 -0
  func_group.test, func_group.result, func_gconcat.result, func_gconcat.test:
    merge fix : removed undeterministic warnings

  mysql-test/r/func_gconcat.result@1.52.1.14, 2006-11-30 18:46:50+02:00, gkodinov@macbook.gmz +0 -19
    merge fix : removed undeterministic warnings

  mysql-test/r/func_group.result@1.49.1.7, 2006-11-30 18:47:22+02:00, gkodinov@macbook.gmz +0 -7
    merge fix : removed undeterministic warnings

  mysql-test/t/func_gconcat.test@1.44.1.9, 2006-11-30 18:47:30+02:00, gkodinov@macbook.gmz +1 -1
    merge fix : removed undeterministic warnings

  mysql-test/t/func_group.test@1.48.1.3, 2006-11-30 18:47:33+02:00, gkodinov@macbook.gmz +2 -0
    merge fix : removed undeterministic warnings

ChangeSet@1.1810.2337.11, 2006-11-30 18:25:05+02:00, monty@mysql.com +45 -0
  Fixed portability issue in my_thr_init.c (was added in my last push)
  
  Fixed compiler warnings (detected by VC++):
  - Removed not used variables
  - Added casts
  - Fixed wrong assignments to bool
  - Fixed wrong calls with bool arguments
  - Added missing argument to store(longlong), which caused wrong store method to be called.
  

  client/mysqldump.c@1.214.1.37, 2006-11-30 18:24:52+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  include/my_global.h@1.96.1.33, 2006-11-30 18:24:52+02:00, monty@mysql.com +2 -2
    Removed compiler warning

  include/my_tree.h@1.18.1.1, 2006-11-30 18:24:52+02:00, monty@mysql.com +3 -2
    Changed memory limits from int to ulong
    (Allowed me to get rid of some compiler warnings)

  mysys/base64.c@1.5.1.8, 2006-11-30 18:24:52+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  mysys/my_thr_init.c@1.31.1.2, 2006-11-30 18:24:52+02:00, monty@mysql.com +20 -9
    Fixed portability issue (detected on windows)
    Added DBUG_ASSERT to detect if we call my_thread_end() too many times
    Don't wait if THR_thread_count == -1 (error condition)

  mysys/tree.c@1.31, 2006-11-30 18:24:52+02:00, monty@mysql.com +2 -2
    Removed compiler warning

  sql-common/client.c@1.83.1.23, 2006-11-30 18:25:02+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql-common/my_time.c@1.19.1.9, 2006-11-30 18:25:02+02:00, monty@mysql.com +9 -9
    Fixed wrong argument to check_date()
    Added casts to get rid of compiler warnings

  sql/field.cc@1.256.36.1, 2006-11-30 18:24:53+02:00, monty@mysql.com +13 -13
    Removed compiler warning
    Fixed wrong parameter to check_date()
    Added missing argument to store(longlong)

  sql/handler.cc@1.167.1.57, 2006-11-30 18:24:53+02:00, monty@mysql.com +3 -4
    Removed not used variable
    Fixed wrong if (we didn't detect if rollback or commit failed). Not critical as value is not yet used
    

  sql/item.cc@1.113.59.1, 2006-11-30 18:24:53+02:00, monty@mysql.com +1 -3
    Removed compiler warning

  sql/item_func.cc@1.270.30.2, 2006-11-30 18:24:54+02:00, monty@mysql.com +4 -3
    Removed compiler warning

  sql/item_strfunc.cc@1.261.16.1, 2006-11-30 18:24:54+02:00, monty@mysql.com +20 -20
    Removed compiler warning

  sql/item_timefunc.cc@1.100.1.35, 2006-11-30 18:24:54+02:00, monty@mysql.com +1 -2
    Removed compiler warning

  sql/log.cc@1.158.1.40, 2006-11-30 18:24:55+02:00, monty@mysql.com +4 -4
    Removed compiler warning

  sql/mysql_priv.h@1.290.1.134, 2006-11-30 18:24:55+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/opt_range.cc@1.159.31.1, 2006-11-30 18:24:55+02:00, monty@mysql.com +2 -2
    Removed compiler warning

  sql/password.c@1.39.1.1, 2006-11-30 18:24:56+02:00, monty@mysql.com +2 -2
    Removed compiler warning

  sql/set_var.cc@1.125.18.2, 2006-11-30 18:24:56+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/slave.cc@1.241.1.45, 2006-11-30 18:24:56+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/sp.cc@1.82.1.41, 2006-11-30 18:24:56+02:00, monty@mysql.com +7 -8
    Removed compiler warning

  sql/sp_cache.cc@1.15.1.1, 2006-11-30 18:24:57+02:00, monty@mysql.com +0 -1
    Removed compiler warning

  sql/sp_head.cc@1.200.1.26, 2006-11-30 18:24:57+02:00, monty@mysql.com +6 -3
    Removed compiler warning
    Adjusted argument to reserve() to not use up too much memory that we are probably not going to need

  sql/sql_acl.cc@1.128.1.86, 2006-11-30 18:24:57+02:00, monty@mysql.com +1 -1
    Added missing argument to store(longlong)

  sql/sql_base.cc@1.235.76.1, 2006-11-30 18:24:58+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/sql_db.cc@1.120.1.13, 2006-11-30 18:24:58+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/sql_delete.cc@1.144.1.43, 2006-11-30 18:24:58+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/sql_handler.cc@1.72.1.12, 2006-11-30 18:24:58+02:00, monty@mysql.com +0 -1
    Removed not used variable

  sql/sql_lex.h@1.175.1.58, 2006-11-30 18:24:58+02:00, monty@mysql.com +1 -1
    Removed not used variable

  sql/sql_prepare.cc@1.142.1.45, 2006-11-30 18:24:59+02:00, monty@mysql.com +0 -1
    Removed not used variable

  sql/sql_rename.cc@1.31.1.4, 2006-11-30 18:25:00+02:00, monty@mysql.com +1 -1
    Removed not used variable

  sql/sql_select.cc@1.312.1.166, 2006-11-30 18:25:00+02:00, monty@mysql.com +13 -15
    Fixed that select_options are not 'cut'
    Removed some not used variables
    Removed compiler warnings by adding cast

  sql/sql_show.cc@1.253.1.80, 2006-11-30 18:25:01+02:00, monty@mysql.com +2 -4
    Removed not used variables
    Added missing argument to store(longlong)
    Removed compiler warnings

  sql/sql_trigger.cc@1.35.14.1, 2006-11-30 18:25:01+02:00, monty@mysql.com +4 -5
    Removed not used variables
    Added cast to remove compiler warnings

  sql/sql_update.cc@1.154.2.51, 2006-11-30 18:25:01+02:00, monty@mysql.com +1 -1
    Fixed wrong set of bool variable

  sql/sql_view.cc@1.78.1.22, 2006-11-30 18:25:01+02:00, monty@mysql.com +1 -2
    Removed not used variables
    Added cast to get rid of compiler warnings

  sql/sql_yacc.yy@1.371.87.2, 2006-11-30 18:25:02+02:00, monty@mysql.com +0 -1
    Removed not used variable

  sql/uniques.cc@1.26, 2006-11-30 18:25:02+02:00, monty@mysql.com +22 -16
    Changes memory size from uint to ulong
    Added casts to get rid of compiler warnings

  sql/ha_archive.cc@1.60.10.1, 2006-11-30 18:24:53+02:00, monty@mysql.com +3 -3
    Removed compiler warning

  sql/ha_federated.cc@1.24.14.1, 2006-11-30 18:24:53+02:00, monty@mysql.com +2 -4
    Removed compiler warning

  heap/hp_clear.c@1.8.1.1, 2006-11-30 18:24:52+02:00, monty@mysql.com +2 -1
    Removed compiler warning

  sql/ha_innodb.cc@1.202.31.1, 2006-11-30 18:24:53+02:00, monty@mysql.com +0 -1
    Removed not used variable

  myisam/mi_create.c@1.45.14.1, 2006-11-30 18:24:52+02:00, monty@mysql.com +2 -2
    Removed compiler warning

  myisam/myisampack.c@1.39.15.1, 2006-11-30 18:24:52+02:00, monty@mysql.com +3 -3
    Removed compiler warning

  strings/ctype-simple.c@1.75.1.4, 2006-11-30 18:25:02+02:00, monty@mysql.com +2 -2
    Fixed cast to get rid of compiler warnings

ChangeSet@1.1810.2301.5, 2006-11-30 17:22:04+01:00, mskold@mysql.com +1 -0
  bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: handle INSERT ... ON DUPLICATE KEY UPDATE

  sql/ha_ndbcluster.cc@1.175.61.3, 2006-11-30 17:21:47+01:00, mskold@mysql.com +3 -2
    bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: handle INSERT ... ON DUPLICATE KEY UPDATE

ChangeSet@1.2333, 2006-11-30 16:19:55+01:00, mskold@mysql.com +1 -0
  bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: updated test result

  mysql-test/r/ndb_update.result@1.18, 2006-11-30 16:19:43+01:00, mskold@mysql.com +1 -0
    bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: updated test result

ChangeSet@1.2331, 2006-11-30 15:44:30+01:00, mskold@mysql.com +1 -0
  bug#24303  Wrong result for UPDATE IGNORE for NDB table: bug fix reverted, fix for bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key, solves it a better way

  sql/ha_ndbcluster.cc@1.366, 2006-11-30 15:44:16+01:00, mskold@mysql.com +0 -12
    bug#24303  Wrong result for UPDATE IGNORE for NDB table: bug fix reverted, fix for bug#18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key, solves it a better way

ChangeSet@1.1810.2301.4, 2006-11-30 15:02:33+01:00, mskold@mysql.com +3 -0
  #18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: call peek_index_rows

  mysql-test/r/ndb_update.result@1.5.2.2, 2006-11-30 15:02:07+01:00, mskold@mysql.com +1 -0
    #18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: call peek_index_rows

  mysql-test/t/ndb_update.test@1.9, 2006-11-30 15:02:06+01:00, mskold@mysql.com +1 -0
    #18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: call peek_index_rows

  sql/ha_ndbcluster.cc@1.175.61.2, 2006-11-30 15:02:06+01:00, mskold@mysql.com +15 -0
    #18487  UPDATE IGNORE not supported for unique constraint violation of non-primary key: call peek_index_rows

ChangeSet@1.2329, 2006-11-30 13:30:59+01:00, mskold@mysql.com +3 -0
  Removed return of illegal pointer, changed signatures to ndb_mgm_get_clusterlog_severity_filter and ndb_mgm_get_clusterlog_loglevel

  storage/ndb/include/mgmapi/mgmapi.h@1.57.1.2, 2006-11-30 13:30:26+01:00, mskold@mysql.com +65 -7
    Removed return of illegal pointer, changed signatures to ndb_mgm_get_clusterlog_severity_filter and ndb_mgm_get_clusterlog_loglevel

  storage/ndb/src/mgmapi/mgmapi.cpp@1.76.1.1, 2006-11-30 13:30:26+01:00, mskold@mysql.com +72 -4
    Removed return of illegal pointer, changed signatures to ndb_mgm_get_clusterlog_severity_filter and ndb_mgm_get_clusterlog_loglevel

  storage/ndb/src/mgmclient/CommandInterpreter.cpp@1.75.2.1, 2006-11-30 13:30:26+01:00, mskold@mysql.com +14 -6
    Removed return of illegal pointer, changed signatures to ndb_mgm_get_clusterlog_severity_filter and ndb_mgm_get_clusterlog_loglevel

ChangeSet@1.1616.2862.2, 2006-11-30 13:16:12+01:00, df@kahlann.erinye.com +1 -0
  minor fix to mtr_process.pl

  mysql-test/lib/mtr_process.pl@1.15.3.7, 2006-11-30 13:16:11+01:00, df@kahlann.erinye.com +1 -1
    print extra message _once_ every 60 seconds

ChangeSet@1.1810.2321.22, 2006-11-30 12:58:05+02:00, gkodinov@macbook.gmz +2 -0
  func_gconcat.result, func_gconcat.test:
    disabled warnings because their order is undeterministic

  mysql-test/r/func_gconcat.result@1.52.1.13, 2006-11-30 12:57:39+02:00, gkodinov@macbook.gmz +0 -19
    disabled warnings because their order is undeterministic

  mysql-test/t/func_gconcat.test@1.44.1.8, 2006-11-30 12:57:12+02:00, gkodinov@macbook.gmz +2 -0
    disabled warnings because their order is undeterministic

ChangeSet@1.2303.118.7, 2006-11-30 11:03:49+01:00, joerg@trift2. +1 -0
  support-files/mysql.spec.sh  :  Call "make install" using "benchdir_root=%{_datadir}"  (bug#24182).

  support-files/mysql.spec.sh@1.173, 2006-11-30 11:03:46+01:00, joerg@trift2. +6 -1
    Call "make install" using "benchdir_root=%{_datadir}", because that is affecting 
    the regression test suite as well.    Fixes bug#24182.

ChangeSet@1.2303.121.3, 2006-11-30 03:40:42+02:00, monty@mysql.com +63 -0
  Fixed compiler warnings (Mostly VC++):
  - Removed not used variables
  - Changed some ulong parameters/variables to ulonglong (possible serious bug)
  - Added casts to get rid of safe assignment from longlong to long (and similar)
  - Added casts to function parameters
  - Fixed signed/unsigned compares
  - Added some constructores to structures
  - Removed some not portable constructs
  
  Better fix for bug Bug #21428 "skipped 9 bytes from file: socket (3)" on "mysqladmin shutdown"
  (Added new parameter to net_clear() to define when we want the communication buffer to be emptied)

  client/mysql.cc@1.245, 2006-11-30 03:40:26+02:00, monty@mysql.com +0 -1
    Removed not used variable

  client/mysqldump.c@1.252.1.12, 2006-11-30 03:40:26+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  client/mysqlslap.c@1.39, 2006-11-30 03:40:27+02:00, monty@mysql.com +2 -0
    Fixed compiler warning

  client/mysqltest.c@1.250.1.1, 2006-11-30 03:40:27+02:00, monty@mysql.com +4 -4
    Fixed compiler warning

  extra/replace.c@1.21, 2006-11-30 03:40:27+02:00, monty@mysql.com +4 -2
    Fixed compiler warning

  include/my_global.h@1.151, 2006-11-30 03:40:27+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  include/mysql_com.h@1.118, 2006-11-30 03:40:27+02:00, monty@mysql.com +1 -1
    Changed prototype for net_clear()

  libmysql/libmysql.c@1.263.1.1, 2006-11-30 03:40:27+02:00, monty@mysql.com +1 -1
    Changed prototype for net_clear()

  mysys/base64.c@1.15, 2006-11-30 03:40:27+02:00, monty@mysql.com +1 -1
    Fixed compiler warning (function definition and prototype didn't match)

  mysys/my_thr_init.c@1.36, 2006-11-30 03:40:27+02:00, monty@mysql.com +3 -1
    AFter merge fixes

  mysys/my_vle.c@1.2, 2006-11-30 03:40:27+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql-common/client.c@1.119, 2006-11-30 03:40:33+02:00, monty@mysql.com +3 -4
    Better fix for bug Bug #21428 "skipped 9 bytes from file: socket (3)" on "mysqladmin shutdown"

  sql-common/my_time.c@1.31.1.3, 2006-11-30 03:40:33+02:00, monty@mysql.com +9 -9
    Fixed compiler warning

  sql/event_data_objects.cc@1.81, 2006-11-30 03:40:27+02:00, monty@mysql.com +8 -8
    Fixed compiler warning

  sql/event_scheduler.cc@1.30, 2006-11-30 03:40:27+02:00, monty@mysql.com +0 -1
    Removed not used variable

  sql/field.cc@1.355.2.1, 2006-11-30 03:40:28+02:00, monty@mysql.com +3 -7
    Removed not used variables
    Fixed compiler warning

  sql/gen_lex_hash.cc@1.71, 2006-11-30 03:40:28+02:00, monty@mysql.com +3 -2
    Fixed compiler warning

  sql/ha_partition.h@1.31, 2006-11-30 03:40:28+02:00, monty@mysql.com +3 -3
    Fixed compiler warning

  sql/handler.cc@1.284, 2006-11-30 03:40:28+02:00, monty@mysql.com +3 -3
    Fixed compiler warning

  sql/item.cc@1.220.1.1, 2006-11-30 03:40:28+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  sql/item_create.cc@1.67.1.1, 2006-11-30 03:40:29+02:00, monty@mysql.com +3 -2
    Fixed compiler warning

  sql/item_func.cc@1.329.1.4, 2006-11-30 03:40:29+02:00, monty@mysql.com +5 -5
    Fixed compiler warning

  sql/item_strfunc.cc@1.296.1.2, 2006-11-30 03:40:29+02:00, monty@mysql.com +16 -15
    Fixed compiler warning

  sql/item_timefunc.cc@1.143, 2006-11-30 03:40:29+02:00, monty@mysql.com +0 -1
    Fixed compiler warning

  sql/item_xmlfunc.cc@1.22, 2006-11-30 03:40:29+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/log.cc@1.245, 2006-11-30 03:40:29+02:00, monty@mysql.com +0 -1
    Fixed compiler warning

  sql/log_event.cc@1.259, 2006-11-30 03:40:29+02:00, monty@mysql.com +5 -5
    Fixed compiler warning

  sql/log_event.h@1.139, 2006-11-30 03:40:30+02:00, monty@mysql.com +2 -0
    Fixed compiler warning

  sql/mysql_priv.h@1.460.1.1, 2006-11-30 03:40:30+02:00, monty@mysql.com +2 -2
    Fixed too short 'select_type'

  sql/net_serv.cc@1.99, 2006-11-30 03:40:30+02:00, monty@mysql.com +34 -30
    Added argument to net_clear() if we should empty the communication buffer.

  sql/opt_range.cc@1.248.1.1, 2006-11-30 03:40:30+02:00, monty@mysql.com +8 -8
    Fixed compiler warning

  sql/partition_info.cc@1.32, 2006-11-30 03:40:30+02:00, monty@mysql.com +2 -4
    Fixed compiler warning

  sql/rpl_injector.h@1.6, 2006-11-30 03:40:30+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/set_var.cc@1.200.2.3, 2006-11-30 03:40:30+02:00, monty@mysql.com +9 -7
    Fixed compiler warning

  sql/slave.cc@1.299, 2006-11-30 03:40:30+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sp_head.cc@1.244, 2006-11-30 03:40:30+02:00, monty@mysql.com +7 -3
    Fixed compiler warning

  sql/sql_base.cc@1.363.1.1, 2006-11-30 03:40:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_db.cc@1.145, 2006-11-30 03:40:31+02:00, monty@mysql.com +0 -1
    Fixed compiler warning

  sql/sql_delete.cc@1.203, 2006-11-30 03:40:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_insert.cc@1.235, 2006-11-30 03:40:31+02:00, monty@mysql.com +5 -3
    Fixed compiler warning

  sql/sql_lex.h@1.248.1.1, 2006-11-30 03:40:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_parse.cc@1.602, 2006-11-30 03:40:31+02:00, monty@mysql.com +0 -1
    Fixed compiler warning

  sql/sql_partition.cc@1.96, 2006-11-30 03:40:31+02:00, monty@mysql.com +8 -13
    Fixed compiler warning

  sql/sql_plugin.cc@1.37.1.1, 2006-11-30 03:40:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_prepare.cc@1.185, 2006-11-30 03:40:32+02:00, monty@mysql.com +0 -1
    Fixed compiler warning

  sql/sql_rename.cc@1.40, 2006-11-30 03:40:32+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  sql/sql_select.cc@1.472, 2006-11-30 03:40:32+02:00, monty@mysql.com +2 -5
    Fixed compiler warning

  sql/sql_show.cc@1.377, 2006-11-30 03:40:32+02:00, monty@mysql.com +2 -9
    Fixed compiler warning

  sql/sql_table.cc@1.372.1.4, 2006-11-30 03:40:32+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_trigger.cc@1.77.1.1, 2006-11-30 03:40:32+02:00, monty@mysql.com +4 -5
    Fixed compiler warning

  sql/sql_union.cc@1.140, 2006-11-30 03:40:33+02:00, monty@mysql.com +2 -0
    Fixed compiler warning

  sql/sql_update.cc@1.214, 2006-11-30 03:40:33+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_view.cc@1.115, 2006-11-30 03:40:33+02:00, monty@mysql.com +2 -4
    Fixed compiler warning

  sql/sql_yacc.yy@1.514.1.3, 2006-11-30 03:40:33+02:00, monty@mysql.com +4 -7
    Fixed compiler warning

  sql/table.cc@1.257.1.2, 2006-11-30 03:40:33+02:00, monty@mysql.com +1 -2
    Fixed compiler warning

  storage/archive/azio.c@1.10, 2006-11-30 03:40:33+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  storage/csv/ha_tina.cc@1.69.1.1, 2006-11-30 03:40:33+02:00, monty@mysql.com +0 -3
    Removed not used code

  storage/myisam/mi_unique.c@1.29, 2006-11-30 03:40:33+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  storage/ndb/include/util/OutputStream.hpp@1.5.1.2, 2006-11-30 03:40:33+02:00, monty@mysql.com +2 -0
    Fixed compiler warning

  storage/ndb/include/util/SocketAuthenticator.hpp@1.4, 2006-11-30 03:40:34+02:00, monty@mysql.com +1 -0
    Fixed compiler warning

  storage/ndb/src/kernel/vm/Pool.hpp@1.10, 2006-11-30 03:40:34+02:00, monty@mysql.com +1 -0
    Fixed compiler warning

  strings/ctype-simple.c@1.82, 2006-11-30 03:40:34+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  strings/my_strchr.c@1.2, 2006-11-30 03:40:34+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

ChangeSet@1.2303.85.35, 2006-11-30 03:34:10+03:00, kostja@bodhi.local +1 -0
  A post-merge fix: fix the failing trigger-grant.test.

  sql/sql_trigger.cc@1.79, 2006-11-30 03:34:04+03:00, kostja@bodhi.local +16 -16
    Another post-merge fix: make TRIGGER privilege work again, after
    IF EXISTS refactoring.

ChangeSet@1.2303.85.34, 2006-11-30 02:51:41+03:00, kostja@bodhi.local +1 -0
  A post-merge fix.

  mysql-test/r/func_str.result@1.133, 2006-11-30 02:51:36+03:00, kostja@bodhi.local +768 -0
    Update results (a post-merge fix).

ChangeSet@1.2303.85.33, 2006-11-30 02:42:01+03:00, kostja@bodhi.local +1 -0
  A post-merge fix.

  mysql-test/lib/mtr_process.pl@1.62, 2006-11-30 02:41:57+03:00, kostja@bodhi.local +6 -0
    A post-merge fix.

ChangeSet@1.2303.120.1, 2006-11-29 22:51:09+02:00, monty@mysql.com +110 -0
  Added back sql-bench directory, so that one can more easily run benchmarks on a server and add new benchmarks for new optimizations
  Fixed memory leak in _db_set() (Bug#24497 Valgrind warning: get_one_option)
  Don't call net_clear() on COM_QUIT. This avoids a warning from net_clear() after shutdown: "skipped ## bytes from file"
  BUG#21428: skipped 9 bytes from file: socket (3)" on "mysqladmin shutdown"

  BitKeeper/deleted/.del-create-pg_fast-Linux_2.2.14_my_SMP_i686-crashed@1.5, 2006-11-28 18:19:13+02:00, monty@mysql.com +0 -0
    Delete: sql-bench/Results/create-pg_fast-Linux_2.2.14_my_SMP_i686-crashed

  sql-bench/Results/create-pg_fast-Linux_2.2.14_my_SMP_i686-crashed@1.4, 2006-11-28 18:10:50+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-create-pg_fast-Linux_2.2.14_my_SMP_i686-crashed~84bcc3931507a54b -> sql-bench/Results/create-pg_fast-Linux_2.2.14_my_SMP_i686-crashed

  Makefile.am@1.101.1.1, 2006-11-29 22:50:55+02:00, monty@mysql.com +1 -1
    Added back sql-bench

  configure.in@1.396.2.1, 2006-11-29 22:50:56+02:00, monty@mysql.com +1 -1
    Added back sql-bench

  dbug/dbug.c@1.33, 2006-11-29 22:50:56+02:00, monty@mysql.com +122 -102
    Fixed memory leak in _db_set()
    This is not a complete fix as we can still get memory leaks if we do any of the following:
    mysqld --debug --debug
    CAll DBUG_SET or DBUG_SET_INITIAL more than once in a program
    Use SET @@global.debug=xxxx
    
    At some point we should fix the above, but this is not critical for normal operation (only for debugging)
    
    Bug #24497 Valgrind warning: get_one_option
    
    Note that all changes to _db_set_ is only a variable access change, and can be ignored while reviewing the bug fix.

  mysql-test/t/flush_read_lock_kill-master.opt@1.4, 2006-11-29 22:50:56+02:00, monty@mysql.com +1 -1
    Added '+' to option, to be able to use this together with --debug

  mysql-test/valgrind.supp@1.16, 2006-11-29 22:50:56+02:00, monty@mysql.com +0 -9
    Removed warning that is now fixed

  mysys/ptr_cmp.c@1.7, 2006-11-29 22:50:57+02:00, monty@mysql.com +1 -1
    Fixed wrong pointer read (probably never used)

  scripts/make_binary_distribution.sh@1.135, 2006-11-29 22:50:57+02:00, monty@mysql.com +4 -2
    Added back sql_bench

  sql-bench/Comments/Access.crash-me@1.5, 2006-11-28 18:10:56+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-Access.crash-me~bb457ec282d939b6 -> sql-bench/Comments/Access.crash-me

  sql-bench/Comments/Adabas.crash-me@1.5, 2006-11-28 18:10:53+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-Adabas.crash-me~ce88ba1a540971ac -> sql-bench/Comments/Adabas.crash-me

  sql-bench/Comments/Empress.crash-me@1.5, 2006-11-28 18:10:52+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-Empress.crash-me~bdaff0c68ce10f02 -> sql-bench/Comments/Empress.crash-me

  sql-bench/Comments/FrontBase.benchmark@1.3, 2006-11-28 18:11:50+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-FrontBase.benchmark~217041ef18274c2e -> sql-bench/Comments/FrontBase.benchmark

  sql-bench/Comments/Informix.crash-me@1.5, 2006-11-28 18:10:51+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-Informix.crash-me~51ab5b717cefe74 -> sql-bench/Comments/Informix.crash-me

  sql-bench/Comments/interbase@1.3, 2006-11-28 18:12:21+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-interbase~cdad59622b4d6f3 -> sql-bench/Comments/interbase

  sql-bench/Comments/mysql.benchmark@1.3, 2006-11-28 18:11:49+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-mysql.benchmark~4d8729c0937456fc -> sql-bench/Comments/mysql.benchmark

  sql-bench/Comments/postgres.benchmark@1.12, 2006-11-28 18:11:48+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-postgres.benchmark~4d30890732b784a -> sql-bench/Comments/postgres.benchmark

  sql-bench/Comments/postgres.crash-me@1.5, 2006-11-28 18:10:51+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-postgres.crash-me~eacac145c3e30f17 -> sql-bench/Comments/postgres.crash-me

  sql-bench/Data/ATIS/aircraft.txt@1.4, 2006-11-28 18:13:50+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-aircraft.txt~15e4de7ab37c92d3 -> sql-bench/Data/ATIS/aircraft.txt

  sql-bench/Data/ATIS/airline.txt@1.4, 2006-11-28 18:13:49+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-airline.txt~a79f8eadf853f2c8 -> sql-bench/Data/ATIS/airline.txt

  sql-bench/Data/ATIS/airport.txt@1.4, 2006-11-28 18:13:49+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-airport.txt~59c78514130e1f45 -> sql-bench/Data/ATIS/airport.txt

  sql-bench/Data/ATIS/airport_service.txt@1.4, 2006-11-28 18:13:48+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-airport_service.txt~6ee6d5b852b3e38 -> sql-bench/Data/ATIS/airport_service.txt

  sql-bench/Data/ATIS/city.txt@1.4, 2006-11-28 18:13:47+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-city.txt~d96dd6d073344d2e -> sql-bench/Data/ATIS/city.txt

  sql-bench/Data/ATIS/class_of_service.txt@1.4, 2006-11-28 18:13:47+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-class_of_service.txt~21f6b9848b8c76d -> sql-bench/Data/ATIS/class_of_service.txt

  sql-bench/Data/ATIS/code_description.txt@1.4, 2006-11-28 18:13:46+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-code_description.txt~f9117373e438b0e2 -> sql-bench/Data/ATIS/code_description.txt

  sql-bench/Data/ATIS/compound_class.txt@1.4, 2006-11-28 18:13:45+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-compound_class.txt~d4a2f1b7f96340b9 -> sql-bench/Data/ATIS/compound_class.txt

  sql-bench/Data/ATIS/connect_leg.txt@1.4, 2006-11-28 18:13:45+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-connect_leg.txt~f97b6e94e108bb36 -> sql-bench/Data/ATIS/connect_leg.txt

  sql-bench/Data/ATIS/date_day.txt@1.4, 2006-11-28 18:13:44+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-date_day.txt~4e9a282fcf54cfd8 -> sql-bench/Data/ATIS/date_day.txt

  sql-bench/Data/ATIS/day_name.txt@1.4, 2006-11-28 18:13:43+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-day_name.txt~f813b215955d894c -> sql-bench/Data/ATIS/day_name.txt

  sql-bench/Data/ATIS/dual_carrier.txt@1.4, 2006-11-28 18:13:43+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-dual_carrier.txt~a7dd776224fbd92b -> sql-bench/Data/ATIS/dual_carrier.txt

  sql-bench/Data/ATIS/fare.txt@1.4, 2006-11-28 18:13:42+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-fare.txt~ea0652f490bc24a6 -> sql-bench/Data/ATIS/fare.txt

  sql-bench/Data/ATIS/fconnection.txt@1.5, 2006-11-28 18:13:41+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-fconnection.txt~e0ef6a8b5560a713 -> sql-bench/Data/ATIS/fconnection.txt

  sql-bench/Data/ATIS/flight.txt@1.4, 2006-11-28 18:13:41+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-flight.txt~e5065423760e99eb -> sql-bench/Data/ATIS/flight.txt

  sql-bench/Data/ATIS/flight_class.txt@1.4, 2006-11-28 18:13:40+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-flight_class.txt~1801101474c29098 -> sql-bench/Data/ATIS/flight_class.txt

  sql-bench/Data/ATIS/flight_day.txt@1.4, 2006-11-28 18:13:39+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-flight_day.txt~76868d6d265d441e -> sql-bench/Data/ATIS/flight_day.txt

  sql-bench/Data/ATIS/flight_fare.txt@1.4, 2006-11-28 18:13:39+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-flight_fare.txt~d7322593c8530487 -> sql-bench/Data/ATIS/flight_fare.txt

  sql-bench/Data/ATIS/food_service.txt@1.4, 2006-11-28 18:13:38+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-food_service.txt~66d95a150c28458 -> sql-bench/Data/ATIS/food_service.txt

  sql-bench/Data/ATIS/ground_service.txt@1.4, 2006-11-28 18:13:37+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-ground_service.txt~1087e477e86e84c -> sql-bench/Data/ATIS/ground_service.txt

  sql-bench/Data/ATIS/month_name.txt@1.4, 2006-11-28 18:13:36+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-month_name.txt~4c44f7a323d57d92 -> sql-bench/Data/ATIS/month_name.txt

  sql-bench/Data/ATIS/restrict_carrier.txt@1.4, 2006-11-28 18:13:36+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-restrict_carrier.txt~925b5492f3f9cba3 -> sql-bench/Data/ATIS/restrict_carrier.txt

  sql-bench/Data/ATIS/restrict_class.txt@1.4, 2006-11-28 18:13:35+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-restrict_class.txt~2f741bf0ea498f84 -> sql-bench/Data/ATIS/restrict_class.txt

  sql-bench/Data/ATIS/restriction.txt@1.4, 2006-11-28 18:13:34+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-restriction.txt~6ae208924617784a -> sql-bench/Data/ATIS/restriction.txt

  sql-bench/Data/ATIS/state.txt@1.4, 2006-11-28 18:13:34+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-state.txt~9dd470ce14075b90 -> sql-bench/Data/ATIS/state.txt

  sql-bench/Data/ATIS/stop.txt@1.4, 2006-11-28 18:13:33+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-stop.txt~31fb564e1f415e34 -> sql-bench/Data/ATIS/stop.txt

  sql-bench/Data/ATIS/stop1.txt@1.4, 2006-11-28 18:13:32+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-stop1.txt~f09ba164ad44a288 -> sql-bench/Data/ATIS/stop1.txt

  sql-bench/Data/ATIS/time_interval.txt@1.4, 2006-11-28 18:13:32+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-time_interval.txt~a1def62e267a59b2 -> sql-bench/Data/ATIS/time_interval.txt

  sql-bench/Data/ATIS/time_zone.txt@1.4, 2006-11-28 18:13:29+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-time_zone.txt~4171f9ca732f65c0 -> sql-bench/Data/ATIS/time_zone.txt

  sql-bench/Data/ATIS/transport.txt@1.4, 2006-11-28 18:13:28+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-transport.txt~fa4ca40735f8354c -> sql-bench/Data/ATIS/transport.txt

  sql-bench/Data/Wisconsin/onek.data@1.4, 2006-11-28 18:13:31+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-onek.data~6cd1edaf596a7f7 -> sql-bench/Data/Wisconsin/onek.data

  sql-bench/Data/Wisconsin/tenk.data@1.4, 2006-11-28 18:13:30+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-tenk.data~6aeaebdd534e458e -> sql-bench/Data/Wisconsin/tenk.data

  sql-bench/Makefile.am@1.22, 2006-11-28 18:13:12+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-Makefile.am~7b07da85b2e9375 -> sql-bench/Makefile.am

  sql-bench/README@1.10, 2006-11-28 18:16:33+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-README~b1aa0c1bf9f5eb5e -> sql-bench/README

  sql-bench/TODO@1.3, 2006-11-28 18:15:11+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-TODO~cac6d7a63c426ae5 -> sql-bench/TODO

  sql-bench/as3ap.sh@1.4, 2006-11-28 18:10:50+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-as3ap.sh~f54eebbd8d34c9b6 -> sql-bench/as3ap.sh

  sql-bench/bench-count-distinct.sh@1.4, 2006-11-28 18:10:49+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-bench-count-distinct.sh~a92f174271a831d7 -> sql-bench/bench-count-distinct.sh

  sql-bench/bench-init.pl.sh@1.32, 2006-11-29 22:50:59+02:00, monty@mysql.com +2 -2
    Cleaned up help text

  sql-bench/bench-init.pl.sh@1.31, 2006-11-28 18:10:48+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-bench-init.pl.sh~db41ef36a289736c -> sql-bench/bench-init.pl.sh

  sql-bench/compare-results.sh@1.12, 2006-11-28 18:10:48+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-compare-results.sh~a9e26e2644c694b3 -> sql-bench/compare-results.sh

  sql-bench/copy-db.sh@1.8, 2006-11-28 18:10:47+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-copy-db.sh~e8116afb93144ccd -> sql-bench/copy-db.sh

  sql-bench/crash-me.sh@1.50, 2006-11-28 18:10:46+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-crash-me.sh~2fa881d0b40339c8 -> sql-bench/crash-me.sh

  sql-bench/example.bat@1.4, 2006-11-28 18:13:05+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-example.bat~22d0170bccf0f030 -> sql-bench/example.bat

  sql-bench/graph-compare-results.sh@1.4, 2006-11-28 18:10:46+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-graph-compare-results.sh~7e4e28b3591b4542 -> sql-bench/graph-compare-results.sh

  sql-bench/innotest1.sh@1.4, 2006-11-28 18:10:45+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-innotest1.sh~aa36bce09ca783c7 -> sql-bench/innotest1.sh

  sql-bench/innotest1a.sh@1.4, 2006-11-28 18:10:44+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-innotest1a.sh~c64f4610ae1e26fe -> sql-bench/innotest1a.sh

  sql-bench/innotest1b.sh@1.4, 2006-11-28 18:10:44+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-innotest1b.sh~aafd0819ae84da7b -> sql-bench/innotest1b.sh

  sql-bench/innotest2.sh@1.4, 2006-11-28 18:10:43+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-innotest2.sh~9c14df528285603 -> sql-bench/innotest2.sh

  sql-bench/innotest2a.sh@1.4, 2006-11-28 18:10:43+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-innotest2a.sh~e01d016a7cafdc0b -> sql-bench/innotest2a.sh

  sql-bench/innotest2b.sh@1.4, 2006-11-28 18:10:42+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-innotest2b.sh~7b99ece835e8dff3 -> sql-bench/innotest2b.sh

  sql-bench/limits/Adabas.cfg@1.5, 2006-11-28 18:15:42+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-Adabas.cfg~343ed4e7f8b02111 -> sql-bench/limits/Adabas.cfg

  sql-bench/limits/Informix.cfg@1.4, 2006-11-28 18:15:41+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-Informix.cfg~b94188e1ececb51b -> sql-bench/limits/Informix.cfg

  sql-bench/limits/access.cfg@1.8, 2006-11-28 18:15:40+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-access.cfg~5239ea3655b7bba0 -> sql-bench/limits/access.cfg

  sql-bench/limits/access_odbc.cfg@1.5, 2006-11-28 18:15:40+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-access_odbc.cfg~34b4cf0eda56c4b1 -> sql-bench/limits/access_odbc.cfg

  sql-bench/limits/db2.cfg@1.5, 2006-11-28 18:15:39+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-db2.cfg~711099b4d7906959 -> sql-bench/limits/db2.cfg

  sql-bench/limits/empress.cfg@1.4, 2006-11-28 18:15:38+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-empress.cfg~1f97f34d6560a499 -> sql-bench/limits/empress.cfg

  sql-bench/limits/frontbase.cfg@1.4, 2006-11-28 18:15:38+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-frontbase.cfg~71369e9c002696e -> sql-bench/limits/frontbase.cfg

  sql-bench/limits/interbase-dialect1.cfg@1.3, 2006-11-28 18:15:37+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-interbase-dialect1.cfg~659206b5b9a11036 -> sql-bench/limits/interbase-dialect1.cfg

  sql-bench/limits/interbase-dialect3.cfg@1.3, 2006-11-28 18:15:36+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-interbase-dialect3.cfg~46277bdfc74c667a -> sql-bench/limits/interbase-dialect3.cfg

  sql-bench/limits/interbase-superserver.cfg@1.3, 2006-11-28 18:15:36+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-interbase-superserver.cfg~22501198689243b0 -> sql-bench/limits/interbase-superserver.cfg

  sql-bench/limits/interbase.cfg@1.5, 2006-11-28 18:15:35+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-interbase.cfg~c6951a0376cc6ff3 -> sql-bench/limits/interbase.cfg

  sql-bench/limits/mimer.cfg@1.6, 2006-11-28 18:15:34+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-mimer.cfg~234e6c1c3c47b612 -> sql-bench/limits/mimer.cfg

  sql-bench/limits/ms-sql.cfg@1.9, 2006-11-28 18:15:34+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-ms-sql.cfg~1907964264d2786a -> sql-bench/limits/ms-sql.cfg

  sql-bench/limits/ms-sql65.cfg@1.4, 2006-11-28 18:15:33+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-ms-sql65.cfg~6b9bc3c460dbee05 -> sql-bench/limits/ms-sql65.cfg

  sql-bench/limits/msql.cfg@1.5, 2006-11-28 18:15:32+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-msql.cfg~52710b12932cceb9 -> sql-bench/limits/msql.cfg

  sql-bench/limits/mysql-3.22.cfg@1.5, 2006-11-28 18:15:31+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-mysql-3.22.cfg~e706f26a161175cd -> sql-bench/limits/mysql-3.22.cfg

  sql-bench/limits/mysql-3.23.cfg@1.13, 2006-11-28 18:15:30+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-mysql-3.23.cfg~3cf9d6be54b77a3c -> sql-bench/limits/mysql-3.23.cfg

  sql-bench/limits/mysql-4.0.cfg@1.26, 2006-11-28 18:15:30+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-mysql-4.0.cfg~6c9d63c85b5ef574 -> sql-bench/limits/mysql-4.0.cfg

  sql-bench/limits/mysql-4.1.cfg@1.4, 2006-11-28 18:15:29+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-mysql-4.1.cfg~b6c5e74aefc99e3c -> sql-bench/limits/mysql-4.1.cfg

  sql-bench/limits/mysql.cfg@1.3, 2006-11-28 18:15:28+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-mysql.cfg~9cab20a8771b93cf -> sql-bench/limits/mysql.cfg

  sql-bench/limits/oracle.cfg@1.7, 2006-11-28 18:15:28+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-oracle.cfg~affab21af8f438fd -> sql-bench/limits/oracle.cfg

  sql-bench/limits/pg.cfg@1.10, 2006-11-28 18:15:27+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-pg.cfg~db59cf39a5d417be -> sql-bench/limits/pg.cfg

  sql-bench/limits/solid-nt4.cfg@1.4, 2006-11-28 18:15:26+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-solid-nt4.cfg~cca779f0c9e29d31 -> sql-bench/limits/solid-nt4.cfg

  sql-bench/limits/solid.cfg@1.4, 2006-11-28 18:15:26+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-solid.cfg~5ae0e4342eadb0fb -> sql-bench/limits/solid.cfg

  sql-bench/limits/sybase.cfg@1.4, 2006-11-28 18:15:25+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-sybase.cfg~c4636b12767b3f14 -> sql-bench/limits/sybase.cfg

  sql-bench/pwd.bat@1.4, 2006-11-28 18:13:00+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-pwd.bat~9b64050849abf51 -> sql-bench/pwd.bat

  sql-bench/run-all-tests.sh@1.14, 2006-11-28 18:10:42+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-run-all-tests.sh~41d6da1cf211ee95 -> sql-bench/run-all-tests.sh

  sql-bench/server-cfg.sh@1.54, 2006-11-29 22:50:59+02:00, monty@mysql.com +1 -1
    Don't write '/' after server name of no ssl version

  sql-bench/server-cfg.sh@1.53, 2006-11-28 18:10:41+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-server-cfg.sh~556b3a2b6a11dcce -> sql-bench/server-cfg.sh

  sql-bench/test-ATIS.sh@1.14, 2006-11-28 18:10:40+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-ATIS.sh~e8ebff7086c95773 -> sql-bench/test-ATIS.sh

  sql-bench/test-alter-table.sh@1.13, 2006-11-28 18:10:40+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-alter-table.sh~eba6cfa9972fcced -> sql-bench/test-alter-table.sh

  sql-bench/test-big-tables.sh@1.10, 2006-11-28 18:10:39+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-big-tables.sh~5b1b0c5fb623565a -> sql-bench/test-big-tables.sh

  sql-bench/test-connect.sh@1.15, 2006-11-28 18:10:39+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-connect.sh~382a728c949ee075 -> sql-bench/test-connect.sh

  sql-bench/test-create.sh@1.13, 2006-11-28 18:10:38+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-create.sh~f9a1ea38c191b17a -> sql-bench/test-create.sh

  sql-bench/test-insert.sh@1.43, 2006-11-28 18:10:37+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-insert.sh~893bfac9dedb79a7 -> sql-bench/test-insert.sh

  sql-bench/test-select.sh@1.25, 2006-11-28 18:10:37+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-select.sh~6d5cc770acf11be6 -> sql-bench/test-select.sh

  sql-bench/test-transactions.sh@1.8, 2006-11-28 18:10:36+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-transactions.sh~c1c892f10c40caf -> sql-bench/test-transactions.sh

  sql-bench/test-wisconsin.sh@1.14, 2006-11-28 18:10:33+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-test-wisconsin.sh~c0b86821b5f95f26 -> sql-bench/test-wisconsin.sh

  sql-bench/uname.bat@1.4, 2006-11-28 18:12:57+02:00, monty@mysql.com +0 -0
    Rename: BitKeeper/deleted/.del-uname.bat~a6d933d2ee9314c -> sql-bench/uname.bat

  sql-common/client.c@1.113.1.3, 2006-11-29 22:50:59+02:00, monty@mysql.com +7 -1
    Don't call net_clear() on COM_QUIT. This avoids a warning from net_clear() after shutdown: "skipped ## bytes from file"
    BUG#21428: skipped 9 bytes from file: socket (3)" on "mysqladmin shutdown"
    

  sql/field.h@1.190.5.1, 2006-11-29 22:50:58+02:00, monty@mysql.com +0 -1
    Removed class function that was identical in parent class

  sql/mysqld.cc@1.589.4.1, 2006-11-29 22:50:58+02:00, monty@mysql.com +8 -9
    Removed some calls to my_thread_init() / my_thread_end() that was not needed.
    Only call DBUG_SET_INITAL, not DBUG_SET
    (Fixes memory leak in dbug)
    Mark some code as deadcode

  sql/net_serv.cc@1.98, 2006-11-29 22:50:58+02:00, monty@mysql.com +1 -1
    Add information about from where error comes

  sql/sql_parse.cc@1.597.2.1, 2006-11-29 22:50:59+02:00, monty@mysql.com +6 -1
    Added comment

  sql/table.h@1.153.1.1, 2006-11-29 22:50:59+02:00, monty@mysql.com +1 -0
    Removed compiler warning

ChangeSet@1.1810.2337.10, 2006-11-29 22:14:08+02:00, monty@mysql.com +3 -0
  Ignore some generated files
  Don't return from my_thread_global_end() until all threads have called my_thread_end()
  Bug#24387: Valgrind: my_thread_init (handle_sl sql, handle_one_conn, handle_slave_io)

  BitKeeper/etc/ignore@1.210.1.29, 2006-11-29 17:34:38+02:00, monty@mysql.com +2 -0
    added *.gcda *.gcno

  BitKeeper/etc/ignore@1.210.1.28, 2006-11-29 17:33:43+02:00, monty@mysql.com +5 -0
    added bdb/dist/db.h bdb/dist/db_config.h bdb/dist/db_cxx.h bdb/dist/db_int.h bdb/dist/include.tcl

  include/my_pthread.h@1.90.1.2, 2006-11-29 22:14:06+02:00, monty@mysql.com +1 -2
    Added my_thread_end_wait_time
    Removed not used thread variables

  mysys/my_thr_init.c@1.31.1.1, 2006-11-29 22:14:06+02:00, monty@mysql.com +40 -10
    Add thread counters.
    Don't return from my_thread_global_end() until all threads have called my_thread_end()
    (Or a timeout (5 seconds) has elapsed)
    This fixed some valgrind warnings
    Bug#24387: Valgrind: my_thread_init (handle_sl sql, handle_one_conn, handle_slave_io)

ChangeSet@1.1616.2862.1, 2006-11-29 20:22:58+01:00, kent@mysql.com +1 -0
  Makefile.am:
    Remove soft links before creating source TAR, to avoid file copies (bug#11865)

  Makefile.am@1.60.1.18, 2006-11-29 20:22:47+01:00, kent@mysql.com +1 -0
    Remove soft links before creating source TAR, to avoid file copies (bug#11865)

ChangeSet@1.1810.2349.2, 2006-11-29 19:41:48+01:00, kent@mysql.com +1 -0
  Makefile.am:
    Corrected change to create "win" directory

  Makefile.am@1.68.1.22, 2006-11-29 19:41:10+01:00, kent@mysql.com +2 -1
    Corrected change to create "win" directory

ChangeSet@1.1810.2349.1, 2006-11-29 19:35:40+01:00, kent@mysql.com +1 -0
  Makefile.am:
    "make distcheck" fix, "win" directory

  Makefile.am@1.68.1.21, 2006-11-29 19:35:31+01:00, kent@mysql.com +1 -0
    "make distcheck" fix, "win" directory

ChangeSet@1.2303.118.3, 2006-11-29 18:36:51+01:00, kent@mysql.com +7 -0
  Many files:
    Changed paths to ndb include directory to include "storage"
  Makefile.am:
    Adjusted path to yaSSL libtool libraries
  ssl.m4:
    Use libtool way of specifying yaSSL libraries

  config/ac-macros/ssl.m4@1.4, 2006-11-29 18:30:30+01:00, kent@mysql.com +2 -3
    Use libtool way of specifying yaSSL libraries

  libmysqld/Makefile.am@1.103, 2006-11-29 18:30:56+01:00, kent@mysql.com +2 -2
    Adjusted path to yaSSL libtool libraries

  storage/ndb/config/type_kernel.mk.am@1.6, 2006-11-29 18:34:26+01:00, kent@mysql.com +1 -1
    Changed paths to ndb include directory to include "storage"

  storage/ndb/config/type_ndbapi.mk.am@1.9, 2006-11-29 18:34:26+01:00, kent@mysql.com +1 -1
    Changed paths to ndb include directory to include "storage"

  storage/ndb/config/type_ndbapitest.mk.am@1.14, 2006-11-29 18:34:26+01:00, kent@mysql.com +1 -1
    Changed paths to ndb include directory to include "storage"

  storage/ndb/config/type_ndbapitools.mk.am@1.14, 2006-11-29 18:34:26+01:00, kent@mysql.com +1 -1
    Changed paths to ndb include directory to include "storage"

  storage/ndb/config/type_util.mk.am@1.8, 2006-11-29 18:34:26+01:00, kent@mysql.com +1 -1
    Changed paths to ndb include directory to include "storage"

ChangeSet@1.1810.2348.1, 2006-11-29 18:12:08+03:00, evgen@moonbone.local +1 -0
  view_grant.result:
    Small fix for a test case

  mysql-test/r/view_grant.result@1.8.1.13, 2006-11-29 18:11:52+03:00, evgen@moonbone.local +1 -2
    Small fix for a test case

ChangeSet@1.2328, 2006-11-29 15:33:11+01:00, mskold@mysql.com +1 -0
  bug#24303  Wrong result for UPDATE IGNORE for NDB table: Refinement, only read all fields for UPDATE IGNORE with pk (check if UPDATE command and pk in write_set)

  sql/ha_ndbcluster.cc@1.364, 2006-11-29 15:32:46+01:00, mskold@mysql.com +5 -2
    bug#24303  Wrong result for UPDATE IGNORE for NDB table: Refinement, only read all fields for UPDATE IGNORE with pk (check if UPDATE command and pk in write_set)

ChangeSet@1.2303.87.20, 2006-11-29 14:51:22+01:00, gkodinov@dl145s.mysql.com +2 -0
  func_in.result, group_min_max.result:
    merged 5.0 testcases

  mysql-test/r/func_in.result@1.30.1.1, 2006-11-29 14:50:51+01:00, gkodinov@dl145s.mysql.com +9 -0
    merged 5.0 testcases

  mysql-test/r/group_min_max.result@1.30, 2006-11-29 14:50:59+01:00, gkodinov@dl145s.mysql.com +2 -2
    merged 5.0 testcases

ChangeSet@1.1810.2347.1, 2006-11-29 15:51:53+03:00, kroki@moonlight.intranet +1 -0
  BUG#20637: "load data concurrent infile" locks the table
  
  Note that we ignore CONCURRENT if LOAD DATA CONCURRENT is used from
  inside a stored routine and MySQL is compiled with Query Cache support
  (this is not in the manual).
  
  The problem was that the condition test of "we are inside stored routine"
  was reversed, thus CONCURRENT _worked only_ from stored routine.  The
  solution is to use proper condition test.
  
  No test case is provided because the test case would require a large
  amount of input, and it's hard to tell is SELECT is really blocked or
  just slow (subject to race).

  sql/sql_yacc.yy@1.371.88.1, 2006-11-29 15:51:51+03:00, kroki@moonlight.intranet +2 -0
    Fix the condition of TL_WRITE_CONCURRENT_INSERT on LOAD DATA CONCURRENT,
    which was reversed, and return valid value if we are in SP.

ChangeSet@1.2327, 2006-11-29 13:23:19+01:00, mskold@mysql.com +2 -0
  bug#24303  Wrong result for UPDATE IGNORE for NDB table: Read all fields for UPDATE IGNORE with pk

  mysql-test/r/ndb_update.result@1.16, 2006-11-29 13:22:52+01:00, mskold@mysql.com +1 -1
    bug#24303  Wrong result for UPDATE IGNORE for NDB table: Read all fields for UPDATE IGNORE with pk

  sql/ha_ndbcluster.cc@1.363, 2006-11-29 13:22:52+01:00, mskold@mysql.com +9 -0
    bug#24303  Wrong result for UPDATE IGNORE for NDB table: Read all fields for UPDATE IGNORE with pk

ChangeSet@1.2303.71.9, 2006-11-29 13:10:14+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#24105
    Handle not started nodes correctly (for X restart)
    i.e dont wait for NF_COMPLETEREP
        but settle with NODEFAIL_REP

  storage/ndb/src/mgmsrv/MgmtSrvr.cpp@1.109.1.2, 2006-11-29 13:10:12+01:00, jonas@perch.ndb.mysql.com +17 -0
    Handle not started nodes correctly
    i.e dont wait for NF_COMPLETEREP
        but settle with NODEFAIL_REP

ChangeSet@1.1810.2346.1, 2006-11-29 14:52:11+03:00, evgen@moonbone.local +3 -0
  Bug#20327: Marking of a wrong field leads to a wrong result on select with view,
  prepared statement and subquery.
  
  When a field of a view from an outer select is resolved the find_field_in_view
  function creates an Item_direct_view_ref object that references the 
  corresponding view underlying field. After that the view_ref is marked
  as a dependent one. While resolving view underlying field it also get
  marked as a dependent one due to current_select still points to the subselect.
  Marking the view underlying field is wrong and lead to attaching conditions
  to a wrong table and thus to the wrong result of the whole statement.
  
  Now mark_select_range_as_dependent() function isn't called for fields from a 
  view underlying table.

  mysql-test/r/ps.result@1.56.9.1, 2006-11-29 14:50:37+03:00, evgen@moonbone.local +18 -0
    Added a test case for bug#20327: Marking of a wrong field leads to a wrong result on select with view, prepared statement and subquery.

  mysql-test/t/ps.test@1.56.9.1, 2006-11-29 14:51:00+03:00, evgen@moonbone.local +22 -0
    Added a test case for bug#20327: Marking of a wrong field leads to a wrong result on select with view,prepared statement and subquery.
    

  sql/sql_base.cc@1.235.73.6, 2006-11-29 14:50:04+03:00, evgen@moonbone.local +6 -0
    Bug#20327: Marking of a wrong field leads to a wrong result on select with view, prepared statement and subquery.
    
    Now mark_select_range_as_dependent() function isn't called for fields from a
    view underlying table.

ChangeSet@1.1810.2301.3, 2006-11-29 11:53:43+01:00, mskold@mysql.com +2 -0
  bug#24303  Wrong result for UPDATE IGNORE for NDB table: Added test case

  mysql-test/r/ndb_update.result@1.5.2.1, 2006-11-29 11:53:13+01:00, mskold@mysql.com +8 -0
    bug#24303  Wrong result for UPDATE IGNORE for NDB table: Added test case

  mysql-test/t/ndb_update.test@1.8, 2006-11-29 11:52:45+01:00, mskold@mysql.com +4 -0

ChangeSet@1.1616.2855.6, 2006-11-29 10:21:59+01:00, df@kahlann.erinye.com +1 -0
  minor fix

  mysql-test/mysql-test-run.pl@1.8.14.5, 2006-11-29 10:21:58+01:00, df@kahlann.erinye.com +0 -1
    remove dependency on Data::Dumper, it's not used anywhere

ChangeSet@1.1616.2859.1, 2006-11-29 09:23:54+04:00, holyfoot@mysql.com +1 -0
  fixed compilation failure on hpux
  the problem is that client tools are compiled with UNDEF_THREADS_HACK
  flag, and my thread-related additions to the mysqltest.c can't be compiled.
  Easy solution is to disable these in not-embedded case completely.

  client/mysqltest.c@1.92.23.3, 2006-11-29 09:23:52+04:00, holyfoot@mysql.com +2 -0
    it's used in embedded server only

ChangeSet@1.2303.47.32, 2006-11-28 18:30:41-08:00, brian@zim.(none) +1 -0
  Varchar hack to clean strings removed.

  storage/archive/ha_archive.cc@1.113, 2006-11-28 18:30:35-08:00, brian@zim.(none) +0 -21
    Removed Varchar cleanup hack. I'm going to commit new pack code. 

ChangeSet@1.2303.115.1, 2006-11-28 22:31:05+01:00, knielsen@production.mysql.com +1 -0
  More fully disable ccache when not compatible with gcov.
  This helps on systems where `which gcc` really points to ccache.

  BUILD/compile-pentium-gcov@1.18, 2006-11-28 22:29:47+01:00, pushbuild@production.mysql.com +3 -0
    More fully disable ccache when not compatible with gcov.

ChangeSet@1.2303.111.4, 2006-11-28 21:35:20+03:00, kostja@bodhi.local +1 -0
  A fix for Bug#24486 "Valgrind warnings: sp_head(), 
  deadlock_innodb:events_grant". This was a memory leak introduced by 
  the patch for Bug 22830.
  Post-review fixes.

  sql/sql_parse.cc@1.595.3.1, 2006-11-28 21:35:15+03:00, kostja@bodhi.local +9 -9
    A fix for Bug#24486 "Valgrind warnings: sp_head(),
     deadlock_innodb:events_grant": delete the sphead object before
    returning with an error.

ChangeSet@1.1810.2342.1, 2006-11-28 18:36:53+01:00, joerg@trift2. +1 -0
  netware/BUILD/nwbootstrap  :  Editing "mwenv" is now obsolete and even plain wrong - drop it.

  netware/BUILD/nwbootstrap@1.10.2.1, 2006-11-28 18:36:50+01:00, joerg@trift2. +9 -9
    Editing "mwenv" is now obsolete,
    as this file gets its variable settings from the environment already;
    and it is even plain wrong,
    because the assignments to those variables are written in such a way that
    replacing the variables by values (as tried here) yields invalid shell lines.

ChangeSet@1.1810.2341.2, 2006-11-28 18:08:30+01:00, kent@mysql.com +1 -0
  Makefile.am:
    Handle the case "sql_yacc.cc" is pregenerated or not, and that the
    case where the source and build tree is the same or not.

  sql/Makefile.am@1.103.1.25, 2006-11-28 18:06:27+01:00, kent@mysql.com +5 -2
    Handle the case "sql_yacc.cc" is pregenerated or not, and that the
    case where the source and build tree is the same or not.

ChangeSet@1.1616.2847.15, 2006-11-28 18:04:10+01:00, kent@mysql.com +1 -0
  Makefile.am:
    If using \$(srcdir)/mysql.info in action, use same in rule.

  Docs/Makefile.am@1.55.1.2, 2006-11-28 18:00:50+01:00, kent@mysql.com +6 -6
    If using \$(srcdir)/mysql.info in action, use same in rule.

ChangeSet@1.1810.2340.1, 2006-11-28 18:06:47+02:00, gkodinov@macbook.gmz +3 -0
  Bug#24156: Loose index scan not used with CREATE TABLE ...SELECT and similar
             statements
  Currently the optimizer evaluates loose index scan only for top-level SELECT
  statements
  Extend loose index scan applicability by :
   - Test the applicability of loose scan for each sub-select, instead of the
     whole query. This change enables loose index scan for sub-queries.
   - allow non-select statements with SELECT parts (like, e.g. 
     CREATE TABLE .. SELECT ...) to use loose index scan.

  mysql-test/r/group_min_max.result@1.23.1.5, 2006-11-28 18:06:40+02:00, gkodinov@macbook.gmz +124 -0
    Bug#24156: Loose index scan not used with CREATE TABLE ...SELECT and similar
               statements
     - test case

  mysql-test/t/group_min_max.test@1.21.3.1, 2006-11-28 18:06:41+02:00, gkodinov@macbook.gmz +60 -0
    Bug#24156: Loose index scan not used with CREATE TABLE ...SELECT and similar
               statements
     - test case

  sql/opt_range.cc@1.159.30.1, 2006-11-28 18:06:42+02:00, gkodinov@macbook.gmz +3 -3
    Bug#24156: Loose index scan not used with CREATE TABLE ...SELECT and similar
               statements
     - loose index scan will be tried over the current subselect 
       (lex->current_select) instead of the whole query (lex->select_lex).
     - allow non-select statements with SELECT parts (like, e.g. 
       CREATE TABLE .. SELECT ...) to use loose index scan.

ChangeSet@1.2303.71.8, 2006-11-28 15:11:13+01:00, jonas@perch.ndb.mysql.com +4 -0
  ndb - bug#24544
    fix so backup message is printed even in case of "ndb_mgm -e"

  storage/ndb/src/common/debugger/signaldata/BackupSignalData.cpp@1.3.1.1, 2006-11-28 15:11:11+01:00, jonas@perch.ndb.mysql.com +3 -2
    fix backup printer

  storage/ndb/src/mgmclient/CommandInterpreter.cpp@1.75.1.1, 2006-11-28 15:11:11+01:00, jonas@perch.ndb.mysql.com +57 -50
    Fix so that backup message is printed even if "ndb_mgm -e"

  storage/ndb/src/ndbapi/SignalSender.cpp@1.8, 2006-11-28 15:11:11+01:00, jonas@perch.ndb.mysql.com +0 -9
    move method into TransporterFacade to enable API_TRACE

  storage/ndb/src/ndbapi/TransporterFacade.cpp@1.52.1.1, 2006-11-28 15:11:11+01:00, jonas@perch.ndb.mysql.com +25 -0
    move method into TransporterFacade to enable API_TRACE

ChangeSet@1.1810.2221.28, 2006-11-28 15:44:11+02:00, gkodinov@macbook.gmz +13 -0
  BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
   When implicitly converting string fields to numbers the 
   string-to-number conversion error was not sent to the client.
   Added code to send the conversion error as warning.
   
   We also need to prevent generation of warnings from the places
   where val_xxx() methods are called for the sole purpose of updating
   the Item::null_value flag.
   To achieve that a special function is added (and called) : 
   update_null_value(). This function will set the no_errors flag and
   will call val_xxx(). The warning generation in Field_string::val_xxx()
   will use the flag when generating the conversion warnings. 

  mysql-test/r/compare.result@1.12, 2006-11-28 15:43:57+02:00, gkodinov@macbook.gmz +4 -0
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - non-convertible strings in arithmetic operations

  mysql-test/r/func_gconcat.result@1.52.2.1, 2006-11-28 15:43:57+02:00, gkodinov@macbook.gmz +38 -0
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - non-convertible strings in arithmetic operations

  mysql-test/r/func_group.result@1.49.1.6, 2006-11-28 15:43:58+02:00, gkodinov@macbook.gmz +7 -0
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - non-convertible strings in arithmetic operations

  mysql-test/r/type_varchar.result@1.8.1.2, 2006-11-28 15:43:59+02:00, gkodinov@macbook.gmz +35 -0
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - test case

  mysql-test/t/type_varchar.test@1.8.1.2, 2006-11-28 15:43:59+02:00, gkodinov@macbook.gmz +9 -0
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - test case

  sql/field.cc@1.256.35.4, 2006-11-28 15:44:00+02:00, gkodinov@macbook.gmz +52 -8
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - send conversion warning to the client 

  sql/item.cc@1.113.58.1, 2006-11-28 15:44:01+02:00, gkodinov@macbook.gmz +17 -7
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - send conversion warning to the client 

  sql/item.h@1.183.14.1, 2006-11-28 15:44:02+02:00, gkodinov@macbook.gmz +6 -0
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - added a special function to explicitly update the null_value

  sql/item_func.h@1.136.20.2, 2006-11-28 15:44:02+02:00, gkodinov@macbook.gmz +2 -2
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - added a special function to explicitly update the null_value

  sql/item_subselect.h@1.77.4.1, 2006-11-28 15:44:03+02:00, gkodinov@macbook.gmz +1 -1
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - added a special function to explicitly update the null_value

  sql/item_sum.cc@1.170.8.2, 2006-11-28 15:44:04+02:00, gkodinov@macbook.gmz +4 -4
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - added a special function to explicitly update the null_value

  sql/item_sum.h@1.102.2.2, 2006-11-28 15:44:04+02:00, gkodinov@macbook.gmz +2 -2
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - added a special function to explicitly update the null_value

  sql/sql_string.h@1.60.2.1, 2006-11-28 15:44:05+02:00, gkodinov@macbook.gmz +6 -0
    BUG#11927: Warnings shown for CAST( chr as signed) but not (chr + 0)
     - send conversion warning to the client 

ChangeSet@1.2303.99.13, 2006-11-28 13:10:23+01:00, gkodinov@dl145s.mysql.com +1 -0
  opt_range.cc:
    dummy commit to trigger pushbuild

  sql/opt_range.cc@1.245.1.1, 2006-11-28 13:09:53+01:00, gkodinov@dl145s.mysql.com +1 -1
    dummy commit to trigger pushbuild

ChangeSet@1.2303.87.16, 2006-11-28 05:43:30+02:00, monty@mysql.com +10 -0
  Fixed portablity problem
  Removed warnings from mysqltest scripts

  cmd-line-utils/readline/undo.c@1.11, 2006-11-28 05:43:27+02:00, monty@mysql.com +1 -1
    Fixed portability problem

  mysql-test/include/mix2.inc@1.4, 2006-11-28 05:43:27+02:00, monty@mysql.com +1 -1
    Removed mysqltest warnings

  mysql-test/include/query_cache.inc@1.16, 2006-11-28 05:43:27+02:00, monty@mysql.com +1 -1
    Removed mysqltest warnings

  mysql-test/r/ndb_binlog_ddl_multi.result@1.15, 2006-11-28 05:43:27+02:00, monty@mysql.com +1 -1
    Update tests after fixing wrong connection command in test

  mysql-test/t/greedy_optimizer.test@1.8, 2006-11-28 05:43:28+02:00, monty@mysql.com +2 -2
    Removed mysqltest warnings

  mysql-test/t/join.test@1.37, 2006-11-28 05:43:28+02:00, monty@mysql.com +2 -2
    Removed mysqltest warnings

  mysql-test/t/ndb_binlog_ddl_multi.test@1.14, 2006-11-28 05:43:28+02:00, monty@mysql.com +1 -1
    Removed mysqltest warnings

  mysql-test/t/ndb_blob_partition.test@1.3, 2006-11-28 05:43:28+02:00, monty@mysql.com +9 -9
    Removed mysqltest warnings

  mysql-test/t/ndb_index_ordered.test@1.26.1.1, 2006-11-28 05:43:28+02:00, monty@mysql.com +1 -1
    Removed mysqltest warnings

  storage/ndb/src/kernel/vm/Rope.cpp@1.3, 2006-11-28 05:43:28+02:00, monty@mysql.com +1 -1
    Removed compiler warning

ChangeSet@1.2303.1.20, 2006-11-28 11:14:36+08:00, dli@dev3-76.dev.cn.tlan +1 -0
  ndb - fiexed for bug#15021, binlog_index table become inconsistent if errors during purge of binlogs.
  
  improved the original patch, changed if/else to switch/case.

  sql/table.cc@1.243.1.2, 2006-11-28 11:14:33+08:00, dli@dev3-76.dev.cn.tlan +25 -25
    changed if/else to switch/case.

ChangeSet@1.1810.2333.4, 2006-11-28 00:47:21+02:00, monty@mysql.com +12 -0
  Increased heap max length to > 4G for 64 bit machines 
  Initialize key_part->type on open. This caused key_copy() to fail for bit_fields. (key_copy is used in HANDLER and opt_range)

  include/heap.h@1.24.1.2, 2006-11-28 00:47:19+02:00, monty@mysql.com +4 -4
    Increased heap max length to > 4G for 64 bit machines 

  mysql-test/r/show_check.result@1.75.1.8, 2006-11-28 00:47:19+02:00, monty@mysql.com +1 -1
    Updated results after heap size change

  mysql-test/r/type_bit.result@1.14.1.5, 2006-11-28 00:47:19+02:00, monty@mysql.com +8 -0
    Added test for bug in bit field handling (in handler and opt_range.cc)

  mysql-test/t/type_bit.test@1.18, 2006-11-28 00:47:19+02:00, monty@mysql.com +11 -0
    Added test for bug in bit field handling (in handler and opt_range.cc)

  sql/item_sum.cc@1.170.10.1, 2006-11-28 00:47:19+02:00, monty@mysql.com +2 -2
    Increased heap max length to > 4G for 64 bit machines 

  sql/mysqld.cc@1.439.1.141, 2006-11-28 00:47:19+02:00, monty@mysql.com +11 -4
    Increased heap max length to > 4G for 64 bit machines 

  sql/set_var.cc@1.125.18.1, 2006-11-28 00:47:19+02:00, monty@mysql.com +2 -2
    Increased heap max length to > 4G for 64 bit machines 

  sql/sql_class.h@1.230.42.2, 2006-11-28 00:47:19+02:00, monty@mysql.com +9 -8
    Increased heap max length to > 4G for 64 bit machines 

  sql/sql_select.cc@1.312.116.2, 2006-11-28 00:47:19+02:00, monty@mysql.com +1 -1
    Increased heap max length to > 4G for 64 bit machines 

  sql/table.cc@1.160.39.2, 2006-11-28 00:47:19+02:00, monty@mysql.com +1 -0
    Initialize key_part->type ; This was used for bit fields but only set in temporary tables

  sql/uniques.cc@1.25, 2006-11-28 00:47:19+02:00, monty@mysql.com +2 -2
    Increased heap max length to > 4G for 64 bit machines 

  sql/ha_heap.cc@1.71.4.1, 2006-11-28 00:47:19+02:00, monty@mysql.com +1 -1
    Increased heap max length to > 4G for 64 bit machines 

ChangeSet@1.2303.87.15, 2006-11-27 23:19:53+02:00, monty@mysql.com +6 -0
  Disabled syncronization test at it fails on multiple platforms. (Bug #24529)
  Fixed that test_thr_alarm works

  mysql-test/mysql-test-run.pl@1.232.1.5, 2006-11-27 23:19:51+02:00, monty@mysql.com +1 -1
    Fixed typo

  mysql-test/r/synchronization.result@1.6, 2006-11-27 23:19:51+02:00, monty@mysql.com +1 -1
    Updated results

  mysql-test/t/disabled.def@1.212.1.3, 2006-11-27 23:19:51+02:00, monty@mysql.com +1 -0
    Disabled syncronization test at it fails on multiple platforms. (Bug #24529)

  mysql-test/t/synchronization.test@1.7, 2006-11-27 23:19:51+02:00, monty@mysql.com +1 -1
    Drop used tables

  mysys/Makefile.am@1.85, 2006-11-27 23:19:51+02:00, monty@mysql.com +1 -1
    Added 'debug' to be able to build test cases

  mysys/thr_alarm.c@1.52, 2006-11-27 23:19:51+02:00, monty@mysql.com +4 -3
    Fixed test case

ChangeSet@1.1810.2329.6, 2006-11-27 21:15:25+01:00, kent@mysql.com +10 -0
  ha_innodb.m4, Makefile.am, ha_ndbcluster.m4, Makefile.shared, ha_berkeley.m4:
    Reenabled build outside source tree

  config/ac-macros/ha_berkeley.m4@1.2.1.1, 2006-11-27 21:12:36+01:00, kent@mysql.com +6 -6
    Reenabled build outside source tree

  config/ac-macros/ha_innodb.m4@1.2.1.1, 2006-11-27 21:12:36+01:00, kent@mysql.com +1 -1
    Reenabled build outside source tree

  config/ac-macros/ha_ndbcluster.m4@1.5.1.3, 2006-11-27 21:12:36+01:00, kent@mysql.com +1 -1
    Reenabled build outside source tree

  extra/yassl/src/Makefile.am@1.10.1.3, 2006-11-27 21:12:36+01:00, kent@mysql.com +1 -1
    Reenabled build outside source tree

  extra/yassl/taocrypt/benchmark/Makefile.am@1.2.1.2, 2006-11-27 21:12:36+01:00, kent@mysql.com +1 -1
    Reenabled build outside source tree

  extra/yassl/taocrypt/src/Makefile.am@1.14.1.2, 2006-11-27 21:12:36+01:00, kent@mysql.com +1 -1
    Reenabled build outside source tree

  extra/yassl/taocrypt/test/Makefile.am@1.2.1.2, 2006-11-27 21:12:37+01:00, kent@mysql.com +1 -1
    Reenabled build outside source tree

  extra/yassl/testsuite/Makefile.am@1.3.1.4, 2006-11-27 21:12:37+01:00, kent@mysql.com +1 -1
    Reenabled build outside source tree

  libmysql/Makefile.shared@1.68.1.1, 2006-11-27 21:12:37+01:00, kent@mysql.com +2 -2
    Reenabled build outside source tree

  ndb/src/mgmsrv/Makefile.am@1.22.1.1, 2006-11-27 21:12:37+01:00, kent@mysql.com +1 -1
    Reenabled build outside source tree

ChangeSet@1.1616.2855.5, 2006-11-27 19:04:57+01:00, kent@mysql.com +1 -0
  Makefile.am:
    BSD compatibility

  Docs/Makefile.am@1.55.1.1, 2006-11-27 19:04:26+01:00, kent@kent-amd64.(none) +5 -5
    BSD compatibility

ChangeSet@1.1616.2855.4, 2006-11-27 18:29:50+01:00, kent@mysql.com +12 -0
  gen_rec.awk:
    Fix undefined behaviour.
  Many files:
    Reenabled build outside ource tree

  acinclude.m4@1.123.22.1, 2006-11-27 18:29:37+01:00, kent@mysql.com +8 -8
    Reenabled build outside ource tree

  bdb/dist/gen_rec.awk@1.3.2.1, 2006-11-27 17:20:13+01:00, kent@kent-amd64.(none) +1 -1
    Fix undefined behaviour.

  configure.in@1.201.64.16, 2006-11-27 18:29:37+01:00, kent@mysql.com +4 -2
    Reenabled build outside ource tree

  libmysql_r/Makefile.am@1.14.1.4, 2006-11-27 18:29:37+01:00, kent@mysql.com +5 -5
    Reenabled build outside ource tree

  libmysqld/Makefile.am@1.29.1.34, 2006-11-27 18:29:37+01:00, kent@mysql.com +19 -5
    Reenabled build outside ource tree

  ndb/config/common.mk.am@1.6.2.2, 2006-11-27 18:29:37+01:00, kent@mysql.com +1 -1
    Reenabled build outside ource tree

  ndb/config/type_kernel.mk.am@1.2.1.1, 2006-11-27 18:29:37+01:00, kent@mysql.com +4 -1
    Reenabled build outside ource tree

  ndb/config/type_ndbapi.mk.am@1.4.2.1, 2006-11-27 18:29:37+01:00, kent@mysql.com +5 -1
    Reenabled build outside ource tree

  ndb/config/type_ndbapitest.mk.am@1.10.1.1, 2006-11-27 18:29:37+01:00, kent@mysql.com +4 -1
    Reenabled build outside ource tree

  ndb/config/type_ndbapitools.mk.am@1.8.2.1, 2006-11-27 18:29:37+01:00, kent@mysql.com +4 -1
    Reenabled build outside ource tree

  ndb/config/type_util.mk.am@1.3.2.1, 2006-11-27 18:29:37+01:00, kent@mysql.com +4 -1
    Reenabled build outside ource tree

  ndb/src/kernel/Makefile.am@1.10.3.2, 2006-11-27 18:29:37+01:00, kent@mysql.com +15 -15
    Reenabled build outside ource tree

ChangeSet@1.2303.87.14, 2006-11-27 18:16:08+02:00, monty@mysql.com +35 -0
  Removed compiler warnings
  Ensure that my_size_t is always unsigned (to get predictiable results from system to system)
  Removed some %lld, as these are not portable

  BUILD/FINISH.sh@1.35, 2006-11-27 18:16:02+02:00, monty@mysql.com +1 -1
    Remove configure files from storage engines (as some of them may be old versions and may cause conflicts)

  client/mysqldump.c@1.252.1.11, 2006-11-27 18:16:02+02:00, monty@mysql.com +2 -2
    Removed compiler warning

  client/mysqlslap.c@1.38, 2006-11-27 18:16:03+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  client/mysqltest.c@1.246.1.3, 2006-11-27 18:16:03+02:00, monty@mysql.com +5 -5
    Removed compiler warning

  cmd-line-utils/readline/bind.c@1.16, 2006-11-27 18:16:03+02:00, monty@mysql.com +2 -1
    Removed compiler warning

  cmd-line-utils/readline/histfile.c@1.10, 2006-11-27 18:16:03+02:00, monty@mysql.com +4 -2
    Removed compiler warning

  include/my_global.h@1.150, 2006-11-27 18:16:03+02:00, monty@mysql.com +18 -3
    Ensure that my_size_t is always unsigned (to get predictiable results from system to system)
    Moved my_offset_t here from parse_file.h

  sql/event_data_objects.cc@1.80, 2006-11-27 18:16:03+02:00, monty@mysql.com +10 -6
    Removed compiler warning

  sql/event_scheduler.cc@1.29, 2006-11-27 18:16:03+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/field.h@1.190.1.3, 2006-11-27 18:16:03+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/ha_ndbcluster_binlog.cc@1.88, 2006-11-27 18:16:03+02:00, monty@mysql.com +14 -10
    Removed compiler warning

  sql/ha_partition.cc@1.80, 2006-11-27 18:16:03+02:00, monty@mysql.com +2 -2
    Removed compiler warning

  sql/item_strfunc.cc@1.296.1.1, 2006-11-27 18:16:03+02:00, monty@mysql.com +3 -3
    Removed compiler warning

  sql/log_event.cc@1.258, 2006-11-27 18:16:03+02:00, monty@mysql.com +8 -7
    Removed compiler warning

  sql/mysqld.cc@1.589.1.4, 2006-11-27 18:16:03+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  sql/parse_file.h@1.14, 2006-11-27 18:16:05+02:00, monty@mysql.com +0 -17
    Moved my_offset_t to my_global.h

  sql/rpl_utility.cc@1.4, 2006-11-27 18:16:05+02:00, monty@mysql.com +6 -5
    Removed compiler warning

  sql/sql_binlog.cc@1.6, 2006-11-27 18:16:05+02:00, monty@mysql.com +3 -3
    Removed compiler warning

  sql/sql_cache.cc@1.98.1.3, 2006-11-27 18:16:05+02:00, monty@mysql.com +10 -10
    Removed compiler warning

  sql/tztime.cc@1.43, 2006-11-27 18:16:05+02:00, monty@mysql.com +4 -4
    Removed compiler warning

  storage/archive/ha_archive.cc@1.109.1.3, 2006-11-27 18:16:05+02:00, monty@mysql.com +14 -12
    Removed compiler warning
    Removed %lld as it's not portable

  storage/heap/hp_write.c@1.26, 2006-11-27 18:16:05+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  storage/innobase/os/os0file.c@1.124, 2006-11-27 18:16:05+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  storage/myisam/myisampack.c@1.57, 2006-11-27 18:16:05+02:00, monty@mysql.com +8 -8
    Removed compiler warning

  storage/myisammrg/myrg_rkey.c@1.19, 2006-11-27 18:16:05+02:00, monty@mysql.com +2 -2
    Removed compiler warning

  storage/ndb/include/kernel/signaldata/DictTabInfo.hpp@1.33, 2006-11-27 18:16:05+02:00, monty@mysql.com +10 -10
    Use my_offsetof instead of offsetof to get rid of compiler warnings

  storage/ndb/src/kernel/blocks/dbdict/printSchemaFile.cpp@1.13, 2006-11-27 18:16:05+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  storage/ndb/src/kernel/blocks/dbtup/DbtupRoutines.cpp@1.29, 2006-11-27 18:16:05+02:00, monty@mysql.com +2 -0
    Removed compiler warning
    Note: Someone from NDB team should check this fix!

  storage/ndb/src/kernel/vm/Rope.cpp@1.2, 2006-11-27 18:16:05+02:00, monty@mysql.com +7 -7
    Removed compiler warning

  storage/ndb/src/mgmapi/mgmapi.cpp@1.78, 2006-11-27 18:16:05+02:00, monty@mysql.com +3 -3
    Removed compiler warning

  storage/ndb/src/ndbapi/Ndb.cpp@1.81, 2006-11-27 18:16:06+02:00, monty@mysql.com +15 -14
    Removed compiler warning

  storage/ndb/src/ndbapi/NdbEventOperationImpl.cpp@1.72, 2006-11-27 18:16:06+02:00, monty@mysql.com +3 -3
    Removed compiler warning

  storage/ndb/src/ndbapi/NdbScanOperation.cpp@1.102, 2006-11-27 18:16:06+02:00, monty@mysql.com +3 -3
    Removed compiler warning

  storage/ndb/src/ndbapi/NdbTransaction.cpp@1.65.1.2, 2006-11-27 18:16:06+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  storage/ndb/src/ndbapi/Ndblist.cpp@1.18, 2006-11-27 18:16:06+02:00, monty@mysql.com +1 -1
    Removed compiler warning

ChangeSet@1.1810.2321.16, 2006-11-27 16:15:32+03:00, evgen@moonbone.local +3 -0
  Bug#17254: Error for DEFINER security on VIEW provides too much info
  
  If a view was created with the DEFINER security and later the definer user
  was dropped then a SELECT from the view throws the error message saying that
  there is no definer user is registered. This is ok for a root but too much
  for a mere user.
  
  Now the st_table_list::prepare_view_securety_context() function reveals
  the absence of the definer only to a superuser and throws the 'access denied'
  error to others.

  mysql-test/r/view_grant.result@1.8.1.12, 2006-11-27 16:14:29+03:00, evgen@moonbone.local +20 -0
    Added a test case for bug#17254: Error for DEFINER security on VIEW provides too much info

  mysql-test/t/view_grant.test@1.8.5.1, 2006-11-27 16:14:14+03:00, evgen@moonbone.local +37 -0
    Added a test case for bug#17254: Error for DEFINER security on VIEW provides too much info

  sql/table.cc@1.160.1.78, 2006-11-27 16:14:41+03:00, evgen@moonbone.local +12 -1
    Bug#17254: Error for DEFINER security on VIEW provides too much info
    Now the st_table_list::prepare_view_securety_context() function reveals
    the absence of the definer only to a superuser and throws the 'access denied'
    error to others.

ChangeSet@1.2325, 2006-11-27 11:49:43+01:00, mskold@mysql.com +1 -0
  bug#24470  MySQL Servers crashes during creating new tables with blob column: fix of error handling at resource shortage

  storage/ndb/src/ndbapi/NdbDictionaryImpl.cpp@1.152.1.1, 2006-11-27 11:49:20+01:00, mskold@mysql.com +1 -1
    bug#24470  MySQL Servers crashes during creating new tables with blob column: fix of error handling at resource shortage

ChangeSet@1.2303.101.7, 2006-11-27 01:47:38+02:00, monty@mysql.com +97 -0
  Fixed a LOT of compiler warnings
  Added missing DBUG_RETURN statements (in mysqldump.c)
  Added missing enums
  Fixed a lot of wrong DBUG_PRINT() statements, some of which could cause crashes
  Removed usage of %lld and %p in printf strings as these are not portable or produces different results on different systems.

  client/mysqldump.c@1.252.1.9, 2006-11-27 01:47:21+02:00, monty@mysql.com +16 -16
    Fixed some compiler warnings
    Added some missing DBUG_RETURN
    Remove copying of 'cluster' database

  client/mysqlslap.c@1.37, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  client/mysqltest.c@1.246.1.2, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -1
    After merge fix

  extra/yassl/taocrypt/include/algebra.hpp@1.5, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -1
    Removed compiler warning

  mysql-test/include/im_check_env.inc@1.3, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -0
    Fixed race condition (mysqld1 could report 'starting' or 'online'

  mysql-test/mysql-test-run.pl@1.232.1.3, 2006-11-27 01:47:21+02:00, monty@mysql.com +5 -7
    After merge fixes
    Added missing directory to LD_LIBRARY_PATH

  mysql-test/r/ctype_cp1250_ch.result@1.9, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -0
    After merge fix

  mysql-test/r/im_cmd_line.result@1.3, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -1
    Fixed race condition

  mysql-test/r/im_daemon_life_cycle.result@1.13, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -1
    Fixed race condition

  mysql-test/r/im_instance_conf.result@1.6, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -1
    Fixed race condition

  mysql-test/r/im_life_cycle.result@1.17, 2006-11-27 01:47:21+02:00, monty@mysql.com +1 -1
    Fixed race condition

  mysql-test/r/im_utils.result@1.13, 2006-11-27 01:47:22+02:00, monty@mysql.com +1 -1
    Fixed race condition

  mysql-test/r/log_tables.result@1.14, 2006-11-27 01:47:22+02:00, monty@mysql.com +1 -0
    Fixed wrong result

  mysql-test/t/disabled.def@1.212.1.2, 2006-11-27 01:47:22+02:00, monty@mysql.com +3 -0
    Disabled ndb_restore_partion, as ndb_restore_compate caused it to fail, becasue of table 'cluster/def/schema' which is stored in ndb_backup50

  mysys/my_compress.c@1.14, 2006-11-27 01:47:22+02:00, monty@mysql.com +7 -6
    Removed compiler warnings

  mysys/my_getopt.c@1.57, 2006-11-27 01:47:22+02:00, monty@mysql.com +2 -2
    Ensure we always have at least one space between option name and value

  plugin/fulltext/plugin_example.c@1.14.1.1, 2006-11-27 01:47:23+02:00, monty@mysql.com +2 -2
    Removed compiler warnings

  server-tools/instance-manager/mysql_connection.cc@1.18.1.2, 2006-11-27 01:47:24+02:00, monty@mysql.com +0 -1
    After merge fix

  sql/event_data_objects.cc@1.79, 2006-11-27 01:47:24+02:00, monty@mysql.com +35 -32
    Fixed compiler warnings
    Fixed platform compatibility issues (%lld is not portable)
    

  sql/event_data_objects.h@1.14, 2006-11-27 01:47:24+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  sql/event_db_repository.cc@1.19, 2006-11-27 01:47:24+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/event_queue.cc@1.19, 2006-11-27 01:47:24+02:00, monty@mysql.com +25 -21
    Fixed compiler warnings

  sql/event_scheduler.cc@1.28, 2006-11-27 01:47:24+02:00, monty@mysql.com +11 -10
    Fixed compiler warnings

  sql/events.cc@1.66, 2006-11-27 01:47:25+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/field.cc@1.352.1.2, 2006-11-27 01:47:25+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  sql/ha_ndbcluster.cc@1.357.8.2, 2006-11-27 01:47:25+02:00, monty@mysql.com +54 -54
    Fixed compiler warnings

  sql/ha_ndbcluster_binlog.cc@1.87, 2006-11-27 01:47:25+02:00, monty@mysql.com +53 -45
    Fixed compiler warnings

  sql/ha_partition.cc@1.79, 2006-11-27 01:47:26+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  sql/handler.cc@1.279.1.2, 2006-11-27 01:47:26+02:00, monty@mysql.com +8 -6
    Fixed compiler warnings

  sql/item_cmpfunc.cc@1.226.2.2, 2006-11-27 01:47:26+02:00, monty@mysql.com +1 -1
    Fixed DBUG_PRINT style

  sql/item_func.cc@1.329.2.1, 2006-11-27 01:47:26+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/log.cc@1.244, 2006-11-27 01:47:27+02:00, monty@mysql.com +22 -19
    Fixed compiler warnings

  sql/log_event.cc@1.256, 2006-11-27 01:47:27+02:00, monty@mysql.com +17 -15
    Fixed compiler warnings

  sql/mysqld.cc@1.589.3.3, 2006-11-27 01:47:27+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/opt_range.cc@1.247, 2006-11-27 01:47:27+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/repl_failsafe.cc@1.68, 2006-11-27 01:47:27+02:00, monty@mysql.com +2 -2
    Indentation fixes

  sql/rpl_rli.cc@1.3, 2006-11-27 01:47:27+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  sql/rpl_tblmap.cc@1.2, 2006-11-27 01:47:27+02:00, monty@mysql.com +8 -8
    Fixed compiler warnings

  sql/set_var.cc@1.200.2.1, 2006-11-27 01:47:27+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/slave.cc@1.298, 2006-11-27 01:47:28+02:00, monty@mysql.com +7 -7
    Fixed compiler warnings

  sql/sp_head.cc@1.243, 2006-11-27 01:47:28+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/sql_base.cc@1.360.1.1, 2006-11-27 01:47:28+02:00, monty@mysql.com +15 -10
    Fixed compiler warnings
    Fixed indentation

  sql/sql_binlog.cc@1.3.1.1, 2006-11-27 01:47:28+02:00, monty@mysql.com +9 -7
    Fixed compiler warnings

  sql/sql_cache.cc@1.98.1.2, 2006-11-27 01:47:28+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  sql/sql_class.cc@1.301, 2006-11-27 01:47:28+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  sql/sql_handler.cc@1.87, 2006-11-27 01:47:28+02:00, monty@mysql.com +4 -3
    Fixed compiler warnings

  sql/sql_lex.cc@1.207.3.1, 2006-11-27 01:47:28+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/sql_parse.cc@1.595.2.2, 2006-11-27 01:47:28+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  sql/sql_partition.cc@1.95, 2006-11-27 01:47:29+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/sql_prepare.cc@1.184, 2006-11-27 01:47:29+02:00, monty@mysql.com +8 -7
    Fixed compiler warnings

  sql/sql_table.cc@1.372.3.1, 2006-11-27 01:47:29+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  sql/sql_test.cc@1.48, 2006-11-27 01:47:29+02:00, monty@mysql.com +5 -4
    Fixed DBUG_PRINT style

  sql/sql_trigger.cc@1.77, 2006-11-27 01:47:29+02:00, monty@mysql.com +2 -2
    Fixed DBUG_PRINT style

  sql/table.cc@1.252.2.5, 2006-11-27 01:47:29+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  storage/federated/ha_federated.cc@1.88, 2006-11-27 01:47:29+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/myisam/mi_rsamepos.c@1.8, 2006-11-27 01:47:29+02:00, monty@mysql.com +2 -1
    Fixed compiler warnings

  storage/ndb/include/ndb_global.h.in@1.15, 2006-11-27 01:47:29+02:00, monty@mysql.com +1 -0
    After merge fix

  storage/ndb/include/util/NdbOut.hpp@1.3, 2006-11-27 01:47:29+02:00, monty@mysql.com +1 -1
    Inform gcc that ndbout_c takes a printf() string as argument 

  storage/ndb/include/util/SimpleProperties.hpp@1.11, 2006-11-27 01:47:29+02:00, monty@mysql.com +0 -5
    After merge fixes

  storage/ndb/src/kernel/blocks/backup/Backup.cpp@1.59, 2006-11-27 01:47:30+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.32.2.2, 2006-11-27 01:47:30+02:00, monty@mysql.com +4 -4
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/dbacc/DbaccMain.cpp@1.76.1.1, 2006-11-27 01:47:30+02:00, monty@mysql.com +10 -8
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/dbdict/Dbdict.cpp@1.104.1.2, 2006-11-27 01:47:30+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/dbdih/DbdihMain.cpp@1.91, 2006-11-27 01:47:30+02:00, monty@mysql.com +12 -2
    Fixed compiler warnings
    Fixed usage of uninitialized value (Got help from Jonas with patch)

  storage/ndb/src/kernel/blocks/dblqh/DblqhMain.cpp@1.126, 2006-11-27 01:47:30+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/dbtc/DbtcMain.cpp@1.124.1.1, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/dbtup/DbtupCommit.cpp@1.17, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/dbtup/DbtupDiskAlloc.cpp@1.18, 2006-11-27 01:47:31+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/dbtup/DbtupExecQuery.cpp@1.47, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/dbtup/DbtupFixAlloc.cpp@1.6, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -0
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/lgman.cpp@1.20, 2006-11-27 01:47:30+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/ndbfs/Ndbfs.cpp@1.29.1.1, 2006-11-27 01:47:31+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/pgman.cpp@1.18, 2006-11-27 01:47:30+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/restore.cpp@1.11, 2006-11-27 01:47:30+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/ndb/src/kernel/blocks/suma/Suma.cpp@1.49, 2006-11-27 01:47:31+02:00, monty@mysql.com +4 -1
    Fixed compiler warnings
    Added missing enum's to switch

  storage/ndb/src/kernel/vm/Configuration.cpp@1.53, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/ndb/src/kernel/vm/DLHashTable.hpp@1.8, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -0
    Fixed compiler warnings

  storage/ndb/src/kernel/vm/RWPool.hpp@1.3, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -0
    Fixed compiler warnings

  storage/ndb/src/kernel/vm/SimulatedBlock.cpp@1.32.1.1, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -0
    Fixed compiler warnings

  storage/ndb/src/kernel/vm/WOPool.hpp@1.4, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -0
    Fixed compiler warnings

  storage/ndb/src/kernel/vm/ndbd_malloc_impl.cpp@1.10, 2006-11-27 01:47:31+02:00, monty@mysql.com +4 -0
    Fixed compiler warnings

  storage/ndb/src/mgmclient/CommandInterpreter.cpp@1.77, 2006-11-27 01:47:31+02:00, monty@mysql.com +2 -0
    Fixed compiler warnings

  storage/ndb/src/mgmsrv/MgmtSrvr.cpp@1.111, 2006-11-27 01:47:31+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  storage/ndb/src/ndbapi/DictCache.cpp@1.31, 2006-11-27 01:47:31+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  storage/ndb/src/ndbapi/NdbDictionaryImpl.cpp@1.153, 2006-11-27 01:47:32+02:00, monty@mysql.com +5 -5
    Fixed compiler warnings

  storage/ndb/src/ndbapi/NdbEventOperationImpl.cpp@1.71, 2006-11-27 01:47:32+02:00, monty@mysql.com +17 -16
    Fixed compiler warnings

  storage/ndb/src/ndbapi/NdbIndexOperation.cpp@1.28, 2006-11-27 01:47:32+02:00, monty@mysql.com +3 -0
    Fixed compiler warnings

  storage/ndb/src/ndbapi/NdbIndexStat.cpp@1.5, 2006-11-27 01:47:32+02:00, monty@mysql.com +1 -1
    Initialize possible uninitialized variable

  storage/ndb/src/ndbapi/NdbOperationInt.cpp@1.19, 2006-11-27 01:47:32+02:00, monty@mysql.com +16 -8
    Fixed compiler warnings

  storage/ndb/src/ndbapi/NdbRecAttr.cpp@1.30, 2006-11-27 01:47:32+02:00, monty@mysql.com +6 -1
    Added missing enum's (To avoid compiler warnings)
    

  storage/ndb/src/ndbapi/NdbScanOperation.cpp@1.101, 2006-11-27 01:47:32+02:00, monty@mysql.com +3 -2
    Fixed compiler warnings

  storage/ndb/src/ndbapi/ObjectMap.hpp@1.11, 2006-11-27 01:47:32+02:00, monty@mysql.com +6 -4
    Fixed compiler warnings

  storage/ndb/tools/desc.cpp@1.27, 2006-11-27 01:47:33+02:00, monty@mysql.com +6 -6
    Fixed compiler warnings

  storage/ndb/tools/restore/Restore.cpp@1.42, 2006-11-27 01:47:33+02:00, monty@mysql.com +6 -0
    Fixed compiler warnings

  storage/ndb/tools/restore/consumer_restore.cpp@1.36.1.1, 2006-11-27 01:47:33+02:00, monty@mysql.com +3 -3
    Fixed compiler warnings

  unittest/mytap/t/basic-t.c@1.6, 2006-11-27 01:47:33+02:00, monty@mysql.com +1 -1
    Fixed compiler warnings

  unittest/mytap/tap.c@1.9, 2006-11-27 01:47:33+02:00, monty@mysql.com +1 -0
    Fixed compiler warnings

ChangeSet@1.1810.2329.3, 2006-11-24 18:26:53+01:00, kent@mysql.com +2 -0
  mysql-test-run.pl:
    Removed "use diagnostics", reduces Perl speed significantly. Can be
    enabled with "perl -Mdiagnostics mysql-test-run.pl".
  mtr_report.pl:
    Don't try output "skipped" comment if there is none (bug#24471)

  mysql-test/lib/mtr_report.pl@1.21.1.9, 2006-11-24 18:25:47+01:00, kent@mysql.com +5 -1
    Don't try output "skipped" comment if there is none (bug#24471)

  mysql-test/mysql-test-run.pl@1.30.49.10, 2006-11-24 18:23:15+01:00, kent@mysql.com +0 -1
    Removed "use diagnostics", reduces Perl speed significantly. Can be
    enabled with "perl -Mdiagnostics mysql-test-run.pl".

ChangeSet@1.1616.2855.3, 2006-11-24 15:36:04+01:00, df@kahlann.erinye.com +1 -0
  fixes for mtr_unique.pl

  mysql-test/lib/mtr_unique.pl@1.2, 2006-11-24 15:36:03+01:00, df@kahlann.erinye.com +40 -3
    - add info message to mtr_require_unique_id_and_wait as suggested
    - fix for security issue
    - locks for pids of processes that don't exist anymore are reused, if ps is present and working as expected

ChangeSet@1.1810.1698.187, 2006-11-23 22:55:36+03:00, anozdrin@booka. +13 -0
  Fix for BUG##24415: Instance manager test im_daemon_life_cycle
  fails randomly.
  
  The problem was that the test case used command line tool (mysql)
  without specifying connect_timeout argument. In some cases,
  this lead to hanging of the test case.
  
  The fix is to specify --connect_timeout=1 when starting mysql.
  
  Also, the patch contains polishing and various cleanups to simplify
  analyzing of the problems further.
  
  The patch affects only test suite, no server codebase has been
  touched.

  mysql-test/lib/mtr_im.pl@1.2, 2006-11-23 22:55:33+03:00, anozdrin@booka. +2 -2
    Remember PID of the IM-spawner -- a process, that is
    used to fork IM-angel.

  mysql-test/lib/mtr_io.pl@1.3.1.5, 2006-11-23 22:55:33+03:00, anozdrin@booka. +1 -0
    Trim \n from the PID.

  mysql-test/lib/mtr_process.pl@1.25.2.17, 2006-11-23 22:55:33+03:00, anozdrin@booka. +6 -0
    Don't complain if it was IM-spawner, who died.

  mysql-test/r/im_daemon_life_cycle.result@1.2.1.7, 2006-11-23 22:55:33+03:00, anozdrin@booka. +2 -2
    Update the result file.

  mysql-test/r/im_life_cycle.result@1.3.1.7, 2006-11-23 22:55:33+03:00, anozdrin@booka. +2 -2
    Update the result file.

  mysql-test/t/im_daemon_life_cycle.imtest@1.1.1.10, 2006-11-23 22:55:33+03:00, anozdrin@booka. +46 -25
    Polishing: add more comments, be more verbose.

  mysql-test/t/im_life_cycle.imtest@1.3.1.6, 2006-11-23 22:55:33+03:00, anozdrin@booka. +5 -5
    Polishing: be more verbose.

  mysql-test/t/im_utils.imtest@1.1.1.4, 2006-11-23 22:55:33+03:00, anozdrin@booka. +2 -2
    Polishing: be more verbose.

  mysql-test/t/kill_n_check.sh@1.5, 2006-11-23 22:55:33+03:00, anozdrin@booka. +57 -25
    Log messages to the extrenal file so that they can be analyzed
    if test case failed.

  mysql-test/t/log.sh@1.1, 2006-11-23 22:55:33+03:00, anozdrin@booka. +24 -0
    Dummy script to facilitate logging from test-scripts.

  mysql-test/t/log.sh@1.0, 2006-11-23 22:55:33+03:00, anozdrin@booka. +0 -0

  mysql-test/t/utils.sh@1.1, 2006-11-23 22:55:33+03:00, anozdrin@booka. +55 -0
    A bunch of auxilary functions to facilitate logging.

  mysql-test/t/utils.sh@1.0, 2006-11-23 22:55:33+03:00, anozdrin@booka. +0 -0

  mysql-test/t/wait_for_process.sh@1.2, 2006-11-23 22:55:33+03:00, anozdrin@booka. +70 -22
    Log messages to the extrenal file so that they can be analyzed
    if test case failed.

  mysql-test/t/wait_for_socket.sh@1.1.1.1, 2006-11-23 22:55:33+03:00, anozdrin@booka. +46 -14
    Log messages to the extrenal file so that they can be analyzed
    if test case failed.

ChangeSet@1.1810.2336.1, 2006-11-23 20:04:18+01:00, kent@mysql.com +7 -0
  Many files:
    Adjuster project files to reflect move of "mySTL" directory

  extra/yassl/taocrypt/benchmark/benchmark.dsp@1.1.1.1, 2006-11-23 20:03:03+01:00, kent@mysql.com +2 -2
    Adjuster project files to reflect move of "mySTL" directory

  extra/yassl/taocrypt/taocrypt.dsp@1.4.1.1, 2006-11-23 20:03:20+01:00, kent@mysql.com +2 -2
    Adjuster project files to reflect move of "mySTL" directory

  extra/yassl/taocrypt/taocrypt.vcproj@1.2.1.1, 2006-11-23 20:03:32+01:00, kent@mysql.com +2 -2
    Adjuster project files to reflect move of "mySTL" directory

  extra/yassl/taocrypt/test.dsp@1.1.1.1, 2006-11-23 20:03:34+01:00, kent@mysql.com +2 -2
    Adjuster project files to reflect move of "mySTL" directory

  extra/yassl/testsuite/testsuite.dsp@1.2.1.1, 2006-11-23 20:03:38+01:00, kent@mysql.com +2 -2
    Adjuster project files to reflect move of "mySTL" directory

  extra/yassl/yassl.dsp@1.3.1.1, 2006-11-23 20:03:42+01:00, kent@mysql.com +2 -2
    Adjuster project files to reflect move of "mySTL" directory

  extra/yassl/yassl.vcproj@1.2.2.1, 2006-11-23 20:03:46+01:00, kent@mysql.com +2 -2
    Adjuster project files to reflect move of "mySTL" directory

ChangeSet@1.1810.2333.3, 2006-11-23 18:39:10+02:00, monty@mysql.com +2 -0
  Added option --mtr-build-thread to mysql-test-run.pl
  Load shared libraries from zlib (fixed that mysql-test-run.pl didn't work on some Solaris boxes)
  Added connect timeout to test to make im_daemon_life_cycle more predictable

  mysql-test/mysql-test-run.pl@1.30.52.3, 2006-11-23 18:39:07+02:00, monty@mysql.com +66 -37
    Added option --mtr-build-thread
    Load shared libraries from zlib (fixed that mysql-test-run.pl didn't work on some Solaris boxes)
    

  mysql-test/t/wait_for_socket.sh@1.2, 2006-11-23 18:39:08+02:00, monty@mysql.com +1 -1
    Added connect timeout (to make test predictable)

ChangeSet@1.2303.111.3, 2006-11-23 16:21:53+01:00, mats@romeo.(none) +1 -0
  BUG#24488 (Valgrind warnings on invalid read in mysql_client_binlog_statement):
  Disabling debug printouts for valgrind builds that print unallocated memory.

  sql/sql_binlog.cc@1.4, 2006-11-23 16:21:48+01:00, mats@romeo.(none) +12 -0
    Disabling debug printouts for valgrind builds that print unallocated memory 

ChangeSet@1.1810.2333.2, 2006-11-23 16:41:21+02:00, monty@mysql.com +6 -0
  Added some missing DBUG_RETURN
  Fixed that --valgrind works again with mysql-test-run.sh
  Extended error messages when loosing connection during mysql_real_connect()

  client/mysqldump.c@1.214.1.36, 2006-11-23 16:41:15+02:00, monty@mysql.com +3 -3
    Added some missing DBUG_RETURN

  include/errmsg.h@1.27.1.1, 2006-11-23 16:41:15+02:00, monty@mysql.com +2 -1
    Extended error messages when loosing connection during mysql_real_connect()

  libmysql/errmsg.c@1.37, 2006-11-23 16:41:16+02:00, monty@mysql.com +3 -0
    Extended error messages when loosing connection during mysql_real_connect()

  mysql-test/mysql-test-run.sh@1.262.17.1, 2006-11-23 16:41:16+02:00, monty@mysql.com +2 -2
    Fixed that --valgrind works again
    Don't give warnings for directores in var/tmp

  mysql-test/mysql-test-run.pl@1.30.52.2, 2006-11-23 16:41:16+02:00, monty@mysql.com +3 -3
    Don't remove .reject files at startup

  sql-common/client.c@1.83.12.2, 2006-11-23 16:41:16+02:00, monty@mysql.com +70 -6
    Extended error messages when loosing connection during mysql_real_connect()

ChangeSet@1.2303.71.7, 2006-11-23 14:34:24+01:00, jonas@perch.ndb.mysql.com +5 -0
  ndb - bug#24543
    Resend if master dies during alloc node id

  storage/ndb/src/kernel/blocks/ERROR_codes.txt@1.30, 2006-11-23 14:34:22+01:00, jonas@perch.ndb.mysql.com +3 -0
    Add new error code

  storage/ndb/src/kernel/blocks/qmgr/QmgrMain.cpp@1.40.1.1, 2006-11-23 14:34:22+01:00, jonas@perch.ndb.mysql.com +5 -0
    Add new error code

  storage/ndb/src/mgmsrv/MgmtSrvr.cpp@1.109.1.1, 2006-11-23 14:34:22+01:00, jonas@perch.ndb.mysql.com +3 -0
    Make sure to resend if master died

  storage/ndb/test/ndbapi/testNodeRestart.cpp@1.33, 2006-11-23 14:34:22+01:00, jonas@perch.ndb.mysql.com +35 -0
    add testcase

  storage/ndb/test/run-test/daily-basic-tests.txt@1.54.1.2, 2006-11-23 14:34:22+01:00, jonas@perch.ndb.mysql.com +4 -0
    add testcase

ChangeSet@1.1810.2331.4, 2006-11-23 12:06:04+01:00, msvensson@neptunus.(none) +1 -0
  Add define for my_getpagesize to 8192(reworked in 5.0)

  include/my_sys.h@1.178.2.11, 2006-11-23 12:06:02+01:00, msvensson@neptunus.(none) +5 -0
    Add define for my_getpagesize to 8192(reworked in 5.0)

ChangeSet@1.1810.2331.3, 2006-11-23 11:38:44+01:00, msvensson@neptunus.(none) +1 -0
  Build fixes for NetWare

  client/mysql_upgrade.c@1.6.1.5, 2006-11-23 11:38:42+01:00, msvensson@neptunus.(none) +8 -6
    Build fixes for NetWare

ChangeSet@1.2303.111.2, 2006-11-23 10:43:43+01:00, mats@romeo.(none) +1 -0
  BUG#24533 (uninitialized null bits in m_after_image):
  Removing valgrind memory checks from code.

  sql/log_event.cc@1.254.1.2, 2006-11-23 10:43:38+01:00, mats@romeo.(none) +0 -3
    Removing valgrind memory checks from code.

ChangeSet@1.2303.111.1, 2006-11-23 10:15:02+01:00, mats@romeo.(none) +1 -0
  BUG#24533 (uninitialized null but of m_after_image):
  Patch to fix valgrind warning that uninitialized bytes were written. 
  The warning was caused by set_default(), which assumes that the field pointer is pointing
  into record[0], while all other functions honors the move_field_offset().

  sql/log_event.cc@1.254.1.1, 2006-11-23 10:14:59+01:00, mats@romeo.(none) +36 -29
    Changing unpack_row() to always unpack into table->record[0] since the Field class hierarchy
    contain too many dependencies on the record to operate on being in table->record[0].
    Changing code to use the new unpack_row(), which requires some juggling of records in
    one case.

ChangeSet@1.1810.2331.2, 2006-11-23 09:56:50+01:00, msvensson@neptunus.(none) +1 -0
  Fix my_system_gmt_sec function declaration to be same as definition

  sql-common/my_time.c@1.19.7.1, 2006-11-23 09:56:48+01:00, msvensson@neptunus.(none) +1 -1
    Function declaration must be same as definition

ChangeSet@1.2303.110.1, 2006-11-22 19:07:05+03:00, petr@outpost.site +1 -0
  Fix Bug #22242 Instance Manager: option-parsing errors
  
  There was a memory overrun, which resulted in safemalloc
  errors. Recommit with post-review fixes.

  server-tools/instance-manager/instance_options.cc@1.38.1.1, 2006-11-22 19:07:02+03:00, petr@outpost.site +55 -6
    Memory was overrun here: convert_dirname() adds a slash to the
    end of the string. Then it was removed (with end[-1]=0), but
    the overrun still happened, which caused sefemalloc to complain.
    
    The problem stemed from the fact that we converted the path to the
    binary, not to the directory. Now we first truncate the path and
    then convert the name of the directory, where the binary resides.
    
    E.g. Suppose that IM got an option --mysqld-path='/usr/local/bin/mysqld'.
    Then convert dirname was called. This routine takes a path to the
    dir (not binary!) and converts it for usage under particular OS.
    And at least for *nixes it *always* adds slash. E.g. for the path above
    convert_dirname() will result in path: '/usr/local/bin/mysqld/'
    Note the last slash. 
    
    The fix is to convert the path to the dir where the binary resides:
    /usr/local/bin/. Then we put back the binary name.

ChangeSet@1.1810.2124.28, 2006-11-22 15:45:57+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#24503
    remove debug printouts

  ndb/src/common/util/NdbSqlUtil.cpp@1.29.4.2, 2006-11-22 15:45:56+01:00, jonas@perch.ndb.mysql.com +0 -9
    remove debug printouts

ChangeSet@1.1810.2124.27, 2006-11-22 15:42:03+01:00, jonas@perch.ndb.mysql.com +5 -0
  ndb - bug#24503
    Fix scan filter on bit types
    (note should probably be enabled in condition pushdown aswell)

  ndb/src/common/util/NdbSqlUtil.cpp@1.29.4.1, 2006-11-22 15:42:02+01:00, jonas@perch.ndb.mysql.com +21 -7
    Add support for comparing bit types

  ndb/src/kernel/blocks/dbtup/Dbtup.hpp@1.22.5.1, 2006-11-22 15:42:02+01:00, jonas@perch.ndb.mysql.com +1 -0
    Add new error code

  ndb/src/kernel/blocks/dbtup/DbtupAbort.cpp@1.2.1.1, 2006-11-22 15:42:02+01:00, jonas@perch.ndb.mysql.com +5 -0
    Add new error code

  ndb/src/kernel/blocks/dbtup/DbtupExecQuery.cpp@1.19.4.1, 2006-11-22 15:42:02+01:00, jonas@perch.ndb.mysql.com +10 -0
    Add correct handling of unsupported type

  ndb/src/ndbapi/ndberror.c@1.30.33.1, 2006-11-22 15:42:02+01:00, jonas@perch.ndb.mysql.com +1 -0
    Add new error code

ChangeSet@1.2303.109.1, 2006-11-22 17:14:43+03:00, anozdrin@booka. +1 -0
  Make IM compiled on Win32: add pthread_join() impl.

  include/my_pthread.h@1.97, 2006-11-22 17:14:40+03:00, anozdrin@booka. +3 -0
    Add pthread_join() for Windows.

ChangeSet@1.2303.85.26, 2006-11-22 16:51:20+03:00, kroki@moonlight.intranet +1 -0
  After merge fixes: remove const and add query buffer.

  tests/mysql_client_test.c@1.217.1.13, 2006-11-22 16:51:17+03:00, kroki@moonlight.intranet +2 -1
    After merge fixes: remove const and add query buffer.

ChangeSet@1.1810.1698.186, 2006-11-22 16:49:32+03:00, kroki@moonlight.intranet +1 -0
  After merge fixes: remove const and add query buffer.

  tests/mysql_client_test.c@1.167.1.48, 2006-11-22 16:49:29+03:00, kroki@moonlight.intranet +2 -1
    After merge fixes: remove const and add query buffer.

ChangeSet@1.1616.2854.5, 2006-11-22 16:47:12+03:00, kroki@moonlight.intranet +1 -0
  Cleanup: remove const.

  tests/mysql_client_test.c@1.51.1.124, 2006-11-22 16:47:10+03:00, kroki@moonlight.intranet +1 -1
    Cleanup: remove const.

ChangeSet@1.1616.2769.16, 2006-11-22 14:13:32+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#24461
  m  ove mlock to much earlier in startphases
    not to affect heartbeats

  ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.15.1.8, 2006-11-22 14:13:31+01:00, jonas@perch.ndb.mysql.com +10 -8
    move mlock to much earlier in startphases
      not to affect heartbeats

ChangeSet@1.1616.2769.15, 2006-11-22 14:05:40+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#24461 - LockPagesInMemory ignored
    actually do run mlockall

  ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.15.1.7, 2006-11-22 14:05:39+01:00, jonas@perch.ndb.mysql.com +0 -4
    actually do run mlockall

ChangeSet@1.1616.2858.1, 2006-11-22 13:58:00+03:00, kroki@moonlight.intranet +2 -0
  BUG#21635: MYSQL_FIELD struct's member strings seem to misbehave for
  expression cols.
  
  The problem was that MYSQL_FIELD::org_name was set for MIN() and MAX()
  functions (COUNT() is also mentioned in the bug report but was already
  fixed).
  
  After this patch for expressions MYSQL_FIELD::name is set to either
  expression itself or its alias, and other data origin fields of
  MYSQL_FILED (db, org_table, table, org_name) are empty strings.

  sql/item_sum.cc@1.89.14.1, 2006-11-22 13:57:57+03:00, kroki@moonlight.intranet +7 -3
    For expressions only col_name should be non-empty string.

  tests/mysql_client_test.c@1.51.34.1, 2006-11-22 13:57:58+03:00, kroki@moonlight.intranet +68 -0
    Add test case for bug#21635: MYSQL_FIELD struct's member strings seem
    to misbehave for expression cols.

ChangeSet@1.2303.107.1, 2006-11-21 22:32:58+02:00, monty@mysql.com +81 -0
  Added --debug-info to most clients to detect memory leaks in mysql-test-run
  Moved .progress files into the log directory
  Moved 'cluster' database tables into the MySQL database, to not have 'cluster' beeing a reserved database name
  Fixed bug where mysqld got a core dump when trying to use a table created by MySQL 3.23
  Fixed some compiler warnings
  Fixed small memory leak in libmysql
  Note that this doesn't changeset doesn't include the new mysqldump.c code required to run some tests. This will be added when I merge 5.0 to 5.1

  client/client_priv.h@1.59, 2006-11-21 22:32:47+02:00, monty@mysql.com +2 -1
    Added OPT_DEBUG_INFO and OPT_COLUMN_TYPES

  client/mysql.cc@1.234.2.2, 2006-11-21 22:32:47+02:00, monty@mysql.com +14 -9
    Split --debug-info into --debug-info and --column-type-info

  client/mysql_upgrade.c@1.8.1.1, 2006-11-21 22:32:47+02:00, monty@mysql.com +1 -1
    Give only error info at end if using --debug-info

  client/mysqladmin.cc@1.116, 2006-11-21 22:32:47+02:00, monty@mysql.com +5 -3
    Added --debug-info to detect memory leaks in mysqltest

  client/mysqlbinlog.cc@1.134.1.1, 2006-11-21 22:32:47+02:00, monty@mysql.com +6 -4
    Added --debug-info to detect memory leaks in mysqltest

  client/mysqlcheck.c@1.60, 2006-11-21 22:32:47+02:00, monty@mysql.com +6 -4
    Added --debug-info to detect memory leaks in mysqltest

  client/mysqlimport.c@1.77, 2006-11-21 22:32:48+02:00, monty@mysql.com +5 -3
    Added --debug-info to detect memory leaks in mysqltest

  client/mysqlshow.c@1.50, 2006-11-21 22:32:48+02:00, monty@mysql.com +7 -6
    Added --debug-info to detect memory leaks in mysqltest

  client/mysqltest.c@1.228.2.1, 2006-11-21 22:32:48+02:00, monty@mysql.com +15 -8
    Added --debug-info to detect memory leaks in mysqltest
    Added option --logdir to force .progress files in a specific directory

  libmysql/libmysql.c@1.258.3.1, 2006-11-21 22:32:48+02:00, monty@mysql.com +2 -3
    Fixed memory leak

  mysql-test/include/ndb_setup_slave.inc@1.2, 2006-11-21 22:32:48+02:00, monty@mysql.com +2 -2
    Moved cluster tables under 'mysql'

  mysql-test/include/query_cache.inc@1.15, 2006-11-21 22:32:48+02:00, monty@mysql.com +79 -1
    Added more tests for query cache

  mysql-test/lib/init_db.sql@1.28, 2006-11-21 22:32:48+02:00, monty@mysql.com +1 -2
    Move cluster.binlog_index -> mysql.binlog_index

  mysql-test/lib/mtr_report.pl@1.33.1.1, 2006-11-21 22:32:48+02:00, monty@mysql.com +2 -1
    Find memory leaks

  mysql-test/mysql-test-run-shell.sh@1.331.1.1, 2006-11-21 22:32:48+02:00, monty@mysql.com +8 -8
    Added --debug-info to programs to detect memory leaks

  mysql-test/mysql-test-run.pl@1.183.5.2, 2006-11-21 22:32:48+02:00, monty@mysql.com +18 -17
    Added --debug-info to programs to detect memory leaks
    Force log files to var/log
    cluster tables moved under 'mysql'

  mysql-test/r/1st.result@1.1, 2006-11-21 22:32:54+02:00, monty@mysql.com +29 -0
    New BitKeeper file ``mysql-test/r/1st.result''

  mysql-test/r/1st.result@1.0, 2006-11-21 22:32:54+02:00, monty@mysql.com +0 -0

  mysql-test/r/cache_innodb.result@1.16, 2006-11-21 22:32:49+02:00, monty@mysql.com +91 -0
    New query cache test with innodb

  mysql-test/r/connect.result@1.23.1.1, 2006-11-21 22:32:49+02:00, monty@mysql.com +3 -0
    binlog_index is now in mysql

  mysql-test/r/drop.result@1.31.1.1, 2006-11-21 22:32:49+02:00, monty@mysql.com +0 -2
    Removed 'cluster' database

  mysql-test/r/information_schema.result@1.135.1.1, 2006-11-21 22:32:49+02:00, monty@mysql.com +2 -5
    Removed 'cluster' database

  mysql-test/r/mysqlcheck.result@1.11, 2006-11-21 22:32:49+02:00, monty@mysql.com +2 -1
    cluster.binlog_index -> mysql.binlog_index

  mysql-test/r/ndb_binlog_basic.result@1.4, 2006-11-21 22:32:49+02:00, monty@mysql.com +7 -7
    cluster.binlog_index -> mysql.binlog_index

  mysql-test/r/ndb_binlog_ddl_multi.result@1.14, 2006-11-21 22:32:49+02:00, monty@mysql.com +3 -3
    cluster -> mysql

  mysql-test/r/ndb_binlog_discover.result@1.3, 2006-11-21 22:32:49+02:00, monty@mysql.com +1 -1
    cluster -> mysql

  mysql-test/r/ndb_binlog_multi.result@1.6, 2006-11-21 22:32:49+02:00, monty@mysql.com +9 -9
    cluster -> mysql

  mysql-test/r/ndb_restore_compat.result@1.2, 2006-11-21 22:32:49+02:00, monty@mysql.com +2 -2
    cluster -> mysql

  mysql-test/r/ps_1general.result@1.63, 2006-11-21 22:32:49+02:00, monty@mysql.com +0 -1
    Removed cluster database

  mysql-test/r/rpl_create_database.result@1.11, 2006-11-21 22:32:49+02:00, monty@mysql.com +0 -4
    Removed cluster database

  mysql-test/r/rpl_load_from_master.result@1.29, 2006-11-21 22:32:49+02:00, monty@mysql.com +0 -3
    Removed cluster database

  mysql-test/r/rpl_loaddata_m.result@1.23, 2006-11-21 22:32:49+02:00, monty@mysql.com +0 -1
    Removed cluster database

  mysql-test/r/rpl_ndb_bank.result@1.4, 2006-11-21 22:32:49+02:00, monty@mysql.com +6 -6
    cluster -> mysql

  mysql-test/r/rpl_ndb_dd_advance.result@1.7.1.1, 2006-11-21 22:32:50+02:00, monty@mysql.com +5 -5
    cluster -> mysql

  mysql-test/r/rpl_ndb_dd_basic.result@1.8, 2006-11-21 22:32:50+02:00, monty@mysql.com +1 -1
    cluster -> mysql

  mysql-test/r/rpl_ndb_idempotent.result@1.4, 2006-11-21 22:32:50+02:00, monty@mysql.com +2 -2
    cluster -> mysql

  mysql-test/r/rpl_ndb_log.result@1.15, 2006-11-21 22:32:50+02:00, monty@mysql.com +12 -12
    cluster -> mysql

  mysql-test/r/rpl_ndb_multi.result@1.3, 2006-11-21 22:32:50+02:00, monty@mysql.com +2 -2
    cluster -> mysql

  mysql-test/r/rpl_ndb_sync.result@1.8, 2006-11-21 22:32:50+02:00, monty@mysql.com +4 -4
    cluster -> mysql

  mysql-test/r/rpl_row_basic_11bugs.result@1.12, 2006-11-21 22:32:50+02:00, monty@mysql.com +0 -2
    Removed cluster database

  mysql-test/r/rpl_truncate_7ndb.result@1.4, 2006-11-21 22:32:50+02:00, monty@mysql.com +26 -26
    Position have changed

  mysql-test/r/rpl_truncate_7ndb_2.result@1.2, 2006-11-21 22:32:50+02:00, monty@mysql.com +4 -4
    cluster -> mysql

  mysql-test/r/schema.result@1.6, 2006-11-21 22:32:50+02:00, monty@mysql.com +0 -1
    Removed cluster database

  mysql-test/r/show_check.result@1.103.1.1, 2006-11-21 22:32:51+02:00, monty@mysql.com +0 -1
    Removed cluster database

  mysql-test/r/system_mysql_db.result@1.43, 2006-11-21 22:32:51+02:00, monty@mysql.com +1 -0
    binlog_index moved under mysql

  mysql-test/r/upgrade.result@1.5, 2006-11-21 22:32:51+02:00, monty@mysql.com +2 -0
    More tests

  mysql-test/std_data/old_table-323.frm@1.1, 2006-11-21 22:32:54+02:00, monty@mysql.com +193 -0
    New BitKeeper file ``mysql-test/std_data/old_table-323.frm''

  mysql-test/std_data/old_table-323.frm@1.0, 2006-11-21 22:32:54+02:00, monty@mysql.com +0 -0

  mysql-test/t/1st.test@1.1, 2006-11-21 22:32:54+02:00, monty@mysql.com +5 -0
    New BitKeeper file ``mysql-test/t/1st.test''

  mysql-test/t/1st.test@1.0, 2006-11-21 22:32:54+02:00, monty@mysql.com +0 -0

  mysql-test/t/information_schema.test@1.86.1.1, 2006-11-21 22:32:51+02:00, monty@mysql.com +2 -2
    cluster -> mysql

  mysql-test/t/mysqldump.test@1.122.2.1, 2006-11-21 22:32:51+02:00, monty@mysql.com +3 -0
    More test to detect memory leaks

  mysql-test/t/ndb_binlog_basic.test@1.4, 2006-11-21 22:32:51+02:00, monty@mysql.com +7 -7
    cluster -> mysql

  mysql-test/t/ndb_binlog_multi.test@1.6, 2006-11-21 22:32:51+02:00, monty@mysql.com +5 -5
    cluster -> mysql

  mysql-test/t/ndb_restore_compat.test@1.2, 2006-11-21 22:32:51+02:00, monty@mysql.com +2 -2
    cluster -> mysql

  mysql-test/t/rpl_ndb_bank.test@1.8, 2006-11-21 22:32:51+02:00, monty@mysql.com +4 -4
    cluster -> mysql

  mysql-test/t/rpl_ndb_dd_advance.test@1.7.1.1, 2006-11-21 22:32:51+02:00, monty@mysql.com +5 -5
    cluster -> mysql

  mysql-test/t/rpl_ndb_idempotent.test@1.5, 2006-11-21 22:32:51+02:00, monty@mysql.com +3 -3
    cluster -> mysql

  mysql-test/t/rpl_ndb_multi.test@1.3, 2006-11-21 22:32:51+02:00, monty@mysql.com +3 -3
    cluster -> mysql

  mysql-test/t/rpl_ndb_sync.test@1.10, 2006-11-21 22:32:52+02:00, monty@mysql.com +3 -3
    cluster -> mysql

  mysql-test/t/system_mysql_db_fix.test@1.25.1.1, 2006-11-21 22:32:52+02:00, monty@mysql.com +1 -1
    Drop also binlog_index

  mysql-test/t/upgrade.test@1.5, 2006-11-21 22:32:52+02:00, monty@mysql.com +9 -0
    Check that tables created with 3.23 works

  mysys/my_error.c@1.23, 2006-11-21 22:32:52+02:00, monty@mysql.com +12 -0
    Remove all registered errors (to avoid memory leaks)

  mysys/my_init.c@1.53, 2006-11-21 22:32:52+02:00, monty@mysql.com +3 -1
    call my_error_unregister_all() to avoid some possible memory leaks

  mysys/mysys_priv.h@1.13, 2006-11-21 22:32:52+02:00, monty@mysql.com +2 -0
    Added prototype

  scripts/mysql_create_system_tables.sh@1.41, 2006-11-21 22:32:52+02:00, monty@mysql.com +1 -2
    cluster -> mysql

  scripts/mysql_fix_privilege_tables.sql@1.46, 2006-11-21 22:32:52+02:00, monty@mysql.com +45 -43
    Changed -- to #
    Create binlog_index table if it dosesn't exist

  sql/field.cc@1.345.3.1, 2006-11-21 22:32:52+02:00, monty@mysql.com +0 -6
    Made offset() inline

  sql/field.h@1.190.3.1, 2006-11-21 22:32:52+02:00, monty@mysql.com +4 -1
    Changed prototype of offset() to not make it depending on TABLE structure

  sql/field_conv.cc@1.62, 2006-11-21 22:32:52+02:00, monty@mysql.com +6 -6
    Removed some usage of current_thd

  sql/ha_ndbcluster_tables.h@1.3, 2006-11-21 22:32:52+02:00, monty@mysql.com +1 -1
    cluster -> mysql

  sql/item_sum.cc@1.192.1.2, 2006-11-21 22:32:52+02:00, monty@mysql.com +7 -4
    Usage of new 'offset' parameters

  sql/key.cc@1.46, 2006-11-21 22:32:52+02:00, monty@mysql.com +33 -16
    Changed 'find_ref_key' to not be dependent on field->table
    (This fixed a crash when using a table created in MySQL 3.23)

  sql/mysql_priv.h@1.448.2.7, 2006-11-21 22:32:53+02:00, monty@mysql.com +2 -1
    Changed find_ref_key() to not use field->table

  sql/mysqld.cc@1.583.9.1, 2006-11-21 22:32:53+02:00, monty@mysql.com +1 -1
    Fix that plugin_init() works properly on bootstrap
    (Previously we got warnings from plugin_init)

  sql/sql_class.cc@1.294.1.1, 2006-11-21 22:32:53+02:00, monty@mysql.com +3 -1
    new 'field->offset()'

  sql/sql_select.cc@1.452.6.3, 2006-11-21 22:32:54+02:00, monty@mysql.com +5 -4
    New field->offset()

  sql/table.cc@1.246.2.3, 2006-11-21 22:32:54+02:00, monty@mysql.com +8 -12
    We don't need field->table to be set in find_ref_key() or find_field() anymore.

  storage/archive/ha_archive.cc@1.109.1.1, 2006-11-21 22:32:54+02:00, monty@mysql.com +11 -7
    New field->offset()

  storage/federated/ha_federated.cc@1.84.2.1, 2006-11-21 22:32:54+02:00, monty@mysql.com +2 -1
    New field->offset()

  storage/innobase/handler/ha_innodb.cc@1.307.1.1, 2006-11-21 22:32:54+02:00, monty@mysql.com +2 -2
    Fixed compiler warnings

  storage/myisam/ha_myisam.cc@1.199.1.1, 2006-11-21 22:32:54+02:00, monty@mysql.com +8 -6
    Fixed compiler warnings (Wrong paramter to sprintf())
    New field->offset()

  storage/myisam/ha_myisam.h@1.79, 2006-11-21 22:32:54+02:00, monty@mysql.com +1 -1
    Fixed wrong type of table_flags

  storage/ndb/tools/restore/Restore.cpp@1.41, 2006-11-21 22:32:54+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

ChangeSet@1.1810.2321.15, 2006-11-21 21:52:39+03:00, sergefp@mysql.com +1 -0
  Fix typo in comment

  sql/filesort.cc@1.105.1.4, 2006-11-21 21:52:37+03:00, sergefp@mysql.com +1 -1
    Fix typo in comment

ChangeSet@1.2303.85.24, 2006-11-21 21:43:24+03:00, anozdrin@booka. +1 -0
  Short fix for Windows.

  server-tools/instance-manager/manager.cc@1.44, 2006-11-21 21:43:21+03:00, anozdrin@booka. +2 -0
    Make it compilable on Windows.

ChangeSet@1.2303.85.22, 2006-11-21 17:47:14+03:00, anozdrin@booka. +17 -0
  Polishing:
    - change some return types from int to bool;
    - add [ERROR] tag to log_error() output;
    - add [INFO] tag to log_info() output;
    - change log messages to be more consistent.

  server-tools/instance-manager/IMService.cpp@1.11, 2006-11-21 17:47:11+03:00, anozdrin@booka. +7 -7
    Log polishing.

  server-tools/instance-manager/commands.cc@1.42, 2006-11-21 17:47:11+03:00, anozdrin@booka. +1 -1
    Log polishing.

  server-tools/instance-manager/commands.h@1.16, 2006-11-21 17:47:11+03:00, anozdrin@booka. +20 -0
    Eliminate warnings.

  server-tools/instance-manager/instance.cc@1.47, 2006-11-21 17:47:11+03:00, anozdrin@booka. +4 -5
    Log polishing.

  server-tools/instance-manager/instance_map.cc@1.34, 2006-11-21 17:47:11+03:00, anozdrin@booka. +12 -12
    Log polishing.

  server-tools/instance-manager/instance_options.cc@1.40, 2006-11-21 17:47:11+03:00, anozdrin@booka. +48 -37
    1) Log polishing.
    2) Change int-return type to bool.

  server-tools/instance-manager/instance_options.h@1.22, 2006-11-21 17:47:11+03:00, anozdrin@booka. +3 -3
    Change int-return type to bool.

  server-tools/instance-manager/listener.cc@1.37, 2006-11-21 17:47:11+03:00, anozdrin@booka. +20 -19
    Log polishing.

  server-tools/instance-manager/log.cc@1.13, 2006-11-21 17:47:11+03:00, anozdrin@booka. +57 -39
    Log polishing.

  server-tools/instance-manager/log.h@1.5, 2006-11-21 17:47:11+03:00, anozdrin@booka. +8 -30
    Log polishing.

  server-tools/instance-manager/manager.cc@1.43, 2006-11-21 17:47:11+03:00, anozdrin@booka. +10 -10
    Log polishing.

  server-tools/instance-manager/mysql_connection.cc@1.22, 2006-11-21 17:47:11+03:00, anozdrin@booka. +56 -24
    Log polishing.

  server-tools/instance-manager/mysql_connection.h@1.8, 2006-11-21 17:47:11+03:00, anozdrin@booka. +1 -1
    Change int-return type to bool.

  server-tools/instance-manager/mysqlmanager.cc@1.23, 2006-11-21 17:47:11+03:00, anozdrin@booka. +2 -1
    Log polishing.

  server-tools/instance-manager/priv.cc@1.17, 2006-11-21 17:47:11+03:00, anozdrin@booka. +2 -2
    Log polishing.

  server-tools/instance-manager/thread_registry.cc@1.16, 2006-11-21 17:47:12+03:00, anozdrin@booka. +5 -5
    1. Print pthread_t as (unsigned long), not as (signed long)
    to avoid negative identifiers in output.
    2. Print thread id after it will be initialized, not before.

  server-tools/instance-manager/user_map.cc@1.22, 2006-11-21 17:47:12+03:00, anozdrin@booka. +7 -7
    Log polishing.

ChangeSet@1.2303.85.21, 2006-11-21 17:31:03+03:00, anozdrin@booka. +9 -0
  Polishing:
  1) add support for joinable threads to Thread class;
  2) move checking of thread model to Manager from mysqlmanager.cc,
  because it is needed only for IM-main process.

  server-tools/instance-manager/instance.cc@1.46, 2006-11-21 17:31:00+03:00, anozdrin@booka. +2 -2
    Use Manager::is_linux_threads() instead of global variable.

  server-tools/instance-manager/listener.cc@1.36, 2006-11-21 17:31:00+03:00, anozdrin@booka. +1 -1
    Use Thread::start(DETACHED) instead of Thread::start_detached().

  server-tools/instance-manager/manager.cc@1.42, 2006-11-21 17:31:00+03:00, anozdrin@booka. +70 -10
    1. Use Thread::start(DETACHED) instead of Thread::start_detached();
    2. Move checking of thread model to Manager from mysqlmanager.cc,
    because it is needed only for IM-main process.

  server-tools/instance-manager/manager.h@1.10, 2006-11-21 17:31:00+03:00, anozdrin@booka. +12 -0
    Move checking of thread model to Manager from mysqlmanager.cc,
    because it is needed only for IM-main process.

  server-tools/instance-manager/mysqlmanager.cc@1.22, 2006-11-21 17:31:00+03:00, anozdrin@booka. +0 -28
    Move checking of thread model to Manager from mysqlmanager.cc,
    because it is needed only for IM-main process.

  server-tools/instance-manager/priv.cc@1.16, 2006-11-21 17:31:00+03:00, anozdrin@booka. +0 -8
    Move checking of thread model to Manager from mysqlmanager.cc,
    because it is needed only for IM-main process.

  server-tools/instance-manager/priv.h@1.15, 2006-11-21 17:31:00+03:00, anozdrin@booka. +0 -8
    Move checking of thread model to Manager from mysqlmanager.cc,
    because it is needed only for IM-main process.

  server-tools/instance-manager/thread_registry.cc@1.15, 2006-11-21 17:31:00+03:00, anozdrin@booka. +34 -18
    Add support of joinable threads to Thread class.

  server-tools/instance-manager/thread_registry.h@1.10, 2006-11-21 17:31:00+03:00, anozdrin@booka. +27 -2
    Add support of joinable threads to Thread class.

ChangeSet@1.2303.102.3, 2006-11-21 17:23:54+03:00, kroki@moonlight.intranet +3 -0
  Update after merge.
  
  Use mutex when reading prepared_stmt_count global status variable.
  
  Update test case for bug 16365 and bug 23159: add test for
  prepared_stmt_count being decreased when some connection that had
  prepared statements is closed.

  mysql-test/r/ps.result@1.90, 2006-11-21 17:23:50+03:00, kroki@moonlight.intranet +6 -0
    Update result for bug#16365 and bug#23159.

  mysql-test/t/ps.test@1.89, 2006-11-21 17:23:50+03:00, kroki@moonlight.intranet +11 -0
    Update test case for bug#16365 and bug#23159: add test for
    prepared_stmt_count being decreased when some connection that had
    prepared statements is closed.

  sql/mysqld.cc@1.589.2.2, 2006-11-21 17:23:50+03:00, kroki@moonlight.intranet +11 -1
    Use mutex when reading prepared_stmt_count global status variable.

ChangeSet@1.2303.85.20, 2006-11-21 17:01:11+03:00, anozdrin@booka. +3 -0
  Polishing: use the same coding style everywhere.

  server-tools/instance-manager/IMService.h@1.5, 2006-11-21 17:01:09+03:00, anozdrin@booka. +1 -1
    Polishing: use the same coding style everywhere.

  server-tools/instance-manager/commands.h@1.15, 2006-11-21 17:01:09+03:00, anozdrin@booka. +13 -13
    Polishing: use the same coding style everywhere.

  server-tools/instance-manager/user_management_commands.h@1.4, 2006-11-21 17:01:09+03:00, anozdrin@booka. +7 -7
    Polishing: use the same coding style everywhere.

ChangeSet@1.1810.2334.2, 2006-11-21 16:57:23+03:00, kroki@moonlight.intranet +2 -0
  Fix after manual merge.

  mysql-test/r/ps.result@1.56.1.26, 2006-11-21 16:57:20+03:00, kroki@moonlight.intranet +6 -6
    Fix after manual merge: update for different error message.

  mysql-test/t/ps.test@1.56.1.23, 2006-11-21 16:57:20+03:00, kroki@moonlight.intranet +10 -10
    Fix after manual merge: use right error codes.

ChangeSet@1.1616.2857.1, 2006-11-21 16:49:18+03:00, kroki@moonlight.intranet +4 -0
  BUG#23159: prepared_stmt_count should be status variable
  
  Make Prepared_stmt_count a global status variable, accessible via
  SHOW STATUS LIKE 'Prepared_stmt_count';.  Documentation should be
  updated.

  mysql-test/r/ps.result@1.31.1.22, 2006-11-21 16:49:16+03:00, kroki@moonlight.intranet +52 -49
    Update result for bug#16365: Prepared Statements: DoS with too many
    open statements, according to bug#23159: prepared_stmt_count should be
    status variable.

  mysql-test/t/ps.test@1.27.1.28, 2006-11-21 16:49:16+03:00, kroki@moonlight.intranet +25 -32
    Update test case for bug#16365: Prepared Statements: DoS with too many
    open statements, according to bug#23159: prepared_stmt_count should be
    status variable.

  sql/mysqld.cc@1.356.98.32, 2006-11-21 16:49:16+03:00, kroki@moonlight.intranet +2 -0
    Add Prepared_stmt_count as global status variable.

  sql/set_var.cc@1.34.52.44, 2006-11-21 16:49:16+03:00, kroki@moonlight.intranet +0 -14
    Remove prepared_stmt_count as system variable.

ChangeSet@1.2303.71.6, 2006-11-21 14:23:42+01:00, jonas@perch.ndb.mysql.com +2 -0
  ndb - no bugs number
    1) Make sure not to read uninitialized data in unique index code
        harmless (atleast before dynattr)
    2) Dont update p_latest_trans_gci
        for dirty unique index lookup
    

  storage/ndb/src/kernel/blocks/dbtup/DbtupTrigger.cpp@1.26, 2006-11-21 14:23:41+01:00, jonas@perch.ndb.mysql.com +12 -0
    Make sure not to read uninitialized data in unique index code
      harmless (atleast before dynattr)
    

  storage/ndb/src/ndbapi/NdbTransaction.cpp@1.62.2.2, 2006-11-21 14:23:41+01:00, jonas@perch.ndb.mysql.com +4 -2
    Dont update p_latest_trans_gci
      for dirty unique index lookup 

ChangeSet@1.2303.71.5, 2006-11-21 14:21:11+01:00, jonas@perch.ndb.mysql.com +2 -0
  ndb - bug#24331
    Make sure LCP scan record is correct initialized

  storage/ndb/src/kernel/blocks/dbtup/DbtupGen.cpp@1.32, 2006-11-21 14:21:10+01:00, jonas@perch.ndb.mysql.com +1 -0
    Init ScanOp

  storage/ndb/src/kernel/blocks/dbtup/DbtupScan.cpp@1.16, 2006-11-21 14:21:10+01:00, jonas@perch.ndb.mysql.com +5 -2
    And set correct pointers...

ChangeSet@1.1616.2769.14, 2006-11-21 14:06:20+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb -
    update error code list
    (for bug#24447)

  ndb/src/kernel/blocks/ERROR_codes.txt@1.8.2.4, 2006-11-21 14:06:19+01:00, jonas@perch.ndb.mysql.com +6 -1
    ndb -
      update error code list

ChangeSet@1.1616.2769.13, 2006-11-21 14:04:20+01:00, jonas@perch.ndb.mysql.com +3 -0
  ndb - bug#24447
    api disconnect just after SCAN_TABREQ

  ndb/src/kernel/blocks/dbtc/DbtcMain.cpp@1.42.6.4, 2006-11-21 14:04:19+01:00, jonas@perch.ndb.mysql.com +36 -2
    1) add error insert for faking DISCONNECT of API just after SCAN_TABREQ
    2) handle error :-)

  ndb/test/ndbapi/testScan.cpp@1.12.1.2, 2006-11-21 14:04:19+01:00, jonas@perch.ndb.mysql.com +40 -1
    Add etstcase for bug 24447

  ndb/test/run-test/daily-basic-tests.txt@1.13.3.3, 2006-11-21 14:04:19+01:00, jonas@perch.ndb.mysql.com +4 -0
    Add etstcase for bug 24447

ChangeSet@1.2303.105.2, 2006-11-21 13:57:52+01:00, mats@romeo.(none) +3 -0
  BUG#24403 (valgrind complaint on uninited st_table for innodb + rbr):
  Removing DBUG_DUMP printouts for valgrind builds since they trigger warnings.
  Removing valgrind memory checks completely.
  Removing bzero() of record when opening table that was added earlier.

  sql/log_event.cc@1.254, 2006-11-21 13:57:46+01:00, mats@romeo.(none) +53 -20
    Removing DBUG_DUMP of records for valgrind builds since they trigger false valgrind
    warnings.
    Removing valgrind checks completely, since they can trigger false valgrind warnings.

  sql/sql_class.cc@1.298, 2006-11-21 13:57:46+01:00, mats@romeo.(none) +7 -1
    Removing DBUG_DUMP of records for valgrind builds since they trigger false valgrind
    warnings.

  sql/table.cc@1.252.2.2, 2006-11-21 13:57:46+01:00, mats@romeo.(none) +1 -3
    Removing extreneous bzero() that were added previously.

ChangeSet@1.2303.99.9, 2006-11-21 16:45:05+04:00, gluh@mysql.com +1 -0
  after merge fix

  mysql-test/r/information_schema.result@1.139, 2006-11-21 16:44:59+04:00, gluh@mysql.com +1 -1
    after merge fix

ChangeSet@1.1810.2124.23, 2006-11-21 11:57:41+01:00, jonas@perch.ndb.mysql.com +2 -0
  ndb -
    Fix bug wrt to '\r' handling in latest commit to bug#24011

  ndb/src/common/util/InputStream.cpp@1.3.3.1, 2006-11-21 11:57:39+01:00, jonas@perch.ndb.mysql.com +2 -8
    Fix bug wrt to '\r' handling in latest commit to bug#24011

  ndb/src/common/util/socket_io.cpp@1.7.6.1, 2006-11-21 11:57:39+01:00, jonas@perch.ndb.mysql.com +5 -0
    Fix bug wrt to '\r' handling in latest commit to bug#24011

ChangeSet@1.1810.2321.14, 2006-11-21 13:45:01+04:00, gluh@mysql.com +3 -0
  Bug#22413 EXPLAIN SELECT FROM view with ORDER BY yield server crash
  disable filling of I_S tables for EXPLAIN

  mysql-test/r/information_schema.result@1.87.1.29, 2006-11-21 13:44:56+04:00, gluh@mysql.com +15 -0
    Bug#22413 EXPLAIN SELECT FROM view with ORDER BY yield server crash
    test case

  mysql-test/t/information_schema.test@1.65.1.22, 2006-11-21 13:44:56+04:00, gluh@mysql.com +14 -0
    Bug#22413 EXPLAIN SELECT FROM view with ORDER BY yield server crash
    test case

  sql/sql_select.cc@1.312.1.163, 2006-11-21 13:44:56+04:00, gluh@mysql.com +2 -0
    Bug#22413 EXPLAIN SELECT FROM view with ORDER BY yield server crash
    disable filling of I_S tables for EXPLAIN

ChangeSet@1.2303.47.28, 2006-11-20 14:04:07-08:00, brian@zim.(none) +8 -0
  This straightens up usage of have_ variables, and removes dead -skip-isam option. 

  mysql-test/r/warnings.result@1.54, 2006-11-20 14:04:04-08:00, brian@zim.(none) +2 -2
    Modified skip to use NDB.

  mysql-test/t/warnings-master.opt@1.5, 2006-11-20 14:04:04-08:00, brian@zim.(none) +0 -1
    Removed dead options

  mysql-test/t/warnings.test@1.29, 2006-11-20 14:04:04-08:00, brian@zim.(none) +2 -5
    Updated test to use NDB

  sql/mysql_priv.h@1.455.1.1, 2006-11-20 14:04:04-08:00, brian@zim.(none) +0 -5
    Removed dead have_ variables

  sql/mysqld.cc@1.591, 2006-11-20 14:04:04-08:00, brian@zim.(none) +1 -44
    Removed dead options (one which was never documenteD).

  sql/set_var.cc@1.202, 2006-11-20 14:04:04-08:00, brian@zim.(none) +0 -10
    Removed have_ variables for prefered usage of show engines

  storage/federated/ha_federated.cc@1.84.1.2, 2006-11-20 14:04:04-08:00, brian@zim.(none) +0 -1
    Removed head variable

  storage/myisammrg/ha_myisammrg.cc@1.108, 2006-11-20 14:04:05-08:00, brian@zim.(none) +1 -1
    Updated to use correct state

ChangeSet@1.1810.2332.1, 2006-11-20 22:42:06+02:00, monty@mysql.com +179 -0
  Remove compiler warnings
  (Mostly in DBUG_PRINT() and unused arguments)
  Fixed bug in query cache when used with traceing (--with-debug)
  Fixed memory leak in mysqldump
  Removed warnings from mysqltest scripts (replaced -- with #)

  BUILD/SETUP.sh@1.44.1.17, 2006-11-20 22:41:35+02:00, monty@mysql.com +3 -3
    Don't build with BDB as default

  mysys/my_lread.c@1.6.1.1, 2006-11-20 22:41:44+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  mysys/my_lwrite.c@1.7.1.1, 2006-11-20 22:41:45+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  BitKeeper/etc/ignore@1.210.1.27, 2006-11-20 18:12:45+02:00, monty@mysql.com +1 -0
    added mysql-test/r/*.warnings

  client/client_priv.h@1.43.2.2, 2006-11-20 22:41:36+02:00, monty@mysql.com +2 -1
    Added OPT_DEBUG_INFO

  client/mysqlbinlog.cc@1.123.1.7, 2006-11-20 22:41:36+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  client/mysqldump.c@1.214.1.35, 2006-11-20 22:41:36+02:00, monty@mysql.com +82 -59
    Removed compiler warnings
    Added option --debug-info to detect memory leaks
    Fixed memory leak
    Don't backup cluster replication tables (if used with 5.1)

  cmd-line-utils/readline/bind.c@1.15, 2006-11-20 22:41:36+02:00, monty@mysql.com +18 -22
    Fixed compiler warning

  cmd-line-utils/readline/chardefs.h@1.6, 2006-11-20 22:41:36+02:00, monty@mysql.com +4 -0
    Fixed compiler warning

  cmd-line-utils/readline/complete.c@1.16.1.1, 2006-11-20 22:41:36+02:00, monty@mysql.com +9 -13
    Fixed compiler warning

  cmd-line-utils/readline/display.c@1.15, 2006-11-20 22:41:36+02:00, monty@mysql.com +9 -8
    Fixed compiler warning

  cmd-line-utils/readline/histexpand.c@1.12, 2006-11-20 22:41:36+02:00, monty@mysql.com +3 -3
    Fixed compiler warning

  cmd-line-utils/readline/input.c@1.13, 2006-11-20 22:41:36+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  cmd-line-utils/readline/isearch.c@1.11, 2006-11-20 22:41:36+02:00, monty@mysql.com +4 -6
    Fixed compiler warning

  cmd-line-utils/readline/kill.c@1.10, 2006-11-20 22:41:36+02:00, monty@mysql.com +13 -18
    Fixed compiler warning

  cmd-line-utils/readline/macro.c@1.9, 2006-11-20 22:41:36+02:00, monty@mysql.com +4 -6
    Fixed compiler warning

  cmd-line-utils/readline/misc.c@1.6, 2006-11-20 22:41:36+02:00, monty@mysql.com +12 -19
    Fixed compiler warning

  cmd-line-utils/readline/nls.c@1.8, 2006-11-20 22:41:36+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  cmd-line-utils/readline/readline.c@1.11, 2006-11-20 22:41:37+02:00, monty@mysql.com +4 -0
    Fixed compiler warning

  cmd-line-utils/readline/rltty.c@1.11, 2006-11-20 22:41:37+02:00, monty@mysql.com +2 -5
    Fixed compiler warning

  cmd-line-utils/readline/search.c@1.10, 2006-11-20 22:41:37+02:00, monty@mysql.com +6 -8
    Fixed compiler warning

  cmd-line-utils/readline/terminal.c@1.16, 2006-11-20 22:41:37+02:00, monty@mysql.com +5 -5
    Fixed compiler warning

  cmd-line-utils/readline/text.c@1.7, 2006-11-20 22:41:37+02:00, monty@mysql.com +23 -38
    Fixed compiler warning

  cmd-line-utils/readline/tilde.c@1.11, 2006-11-20 22:41:37+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  cmd-line-utils/readline/undo.c@1.10, 2006-11-20 22:41:37+02:00, monty@mysql.com +3 -5
    Fixed compiler warning

  cmd-line-utils/readline/util.c@1.9, 2006-11-20 22:41:37+02:00, monty@mysql.com +3 -6
    Fixed compiler warning

  cmd-line-utils/readline/vi_mode.c@1.13, 2006-11-20 22:41:38+02:00, monty@mysql.com +28 -55
    Fixed compiler warning

  dbug/dbug_analyze.c@1.6, 2006-11-20 22:41:38+02:00, monty@mysql.com +7 -7
    Fixed compiler warning

  extra/yassl/src/ssl.cpp@1.16.1.4, 2006-11-20 22:41:38+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  extra/yassl/testsuite/testsuite.cpp@1.4, 2006-11-20 22:41:38+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  libmysql/libmysql.c@1.233.8.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +7 -7
    Fixed compiler warning

  libmysqld/libmysqld.c@1.66.1.6, 2006-11-20 22:41:39+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  mysql-test/include/federated.inc@1.2, 2006-11-20 22:41:40+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysql-test/include/sp-vars.inc@1.3, 2006-11-20 22:41:40+02:00, monty@mysql.com +8 -8
    Remove mysqltest warnings

  mysql-test/mysql-test-run.sh@1.262.16.1, 2006-11-20 22:41:40+02:00, monty@mysql.com +9 -11
    Fix so that 'make test' works again
    Remove .reject, .progress .log and .warnings files at startup

  mysql-test/mysql-test-run.pl@1.30.52.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +10 -4
    Remove .reject, .progress, .log and .warnings flag at start
    cluster -> mysql database (for 5.1)

  mysql-test/r/ctype_cp1250_ch.result@1.5.2.1, 2006-11-20 22:41:40+02:00, monty@mysql.com +1 -0
    Drop used tables at startup

  mysql-test/t/create.test@1.71.1.12, 2006-11-20 22:41:40+02:00, monty@mysql.com +10 -10
    Remove mysqltest warnings

  mysql-test/t/csv.test@1.5.1.4, 2006-11-20 22:41:40+02:00, monty@mysql.com +6 -6
    Remove mysqltest warnings

  mysql-test/t/ctype_collate.test@1.20, 2006-11-20 22:41:40+02:00, monty@mysql.com +18 -19
    Remove mysqltest warnings

  mysql-test/t/ctype_cp1250_ch.test@1.5.2.1, 2006-11-20 22:41:40+02:00, monty@mysql.com +4 -0
    Drop used tables at startup

  mysql-test/t/ctype_ucs.test@1.36.2.1, 2006-11-20 22:41:40+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysql-test/t/func_sapdb.test@1.13.1.1, 2006-11-20 22:41:40+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysql-test/t/func_str.test@1.92.3.1, 2006-11-20 22:41:40+02:00, monty@mysql.com +14 -6
    Remove mysqltest warnings

  mysql-test/t/grant.test@1.41.1.9, 2006-11-20 22:41:40+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysql-test/t/greedy_optimizer.test@1.7, 2006-11-20 22:41:41+02:00, monty@mysql.com +31 -31
    Remove mysqltest warnings

  mysql-test/t/group_min_max.test@1.21.1.5, 2006-11-20 22:41:41+02:00, monty@mysql.com +78 -78
    Remove mysqltest warnings

  mysql-test/t/innodb.test@1.118.2.8, 2006-11-20 22:41:41+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysql-test/t/join.test@1.32.1.1, 2006-11-20 22:41:41+02:00, monty@mysql.com +29 -29
    Remove mysqltest warnings

  mysql-test/t/limit.test@1.12, 2006-11-20 22:41:41+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysql-test/t/null.test@1.21, 2006-11-20 22:41:41+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysql-test/t/select.test@1.102.1.15, 2006-11-20 22:41:41+02:00, monty@mysql.com +2 -2
    Remove mysqltest warnings

  mysql-test/t/sp-prelocking.test@1.2.1.4, 2006-11-20 22:41:41+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysql-test/t/strict.test@1.19.1.5, 2006-11-20 22:41:41+02:00, monty@mysql.com +10 -10
    Remove mysqltest warnings

  mysql-test/t/subselect.test@1.129.4.1, 2006-11-20 22:41:43+02:00, monty@mysql.com +3 -3
    Remove mysqltest warnings

  mysql-test/t/type_newdecimal.test@1.33.4.1, 2006-11-20 22:41:43+02:00, monty@mysql.com +2 -2
    Remove mysqltest warnings

  mysql-test/t/view_grant.test@1.8.1.10, 2006-11-20 22:41:43+02:00, monty@mysql.com +1 -1
    Remove mysqltest warnings

  mysys/default.c@1.72.1.11, 2006-11-20 22:41:43+02:00, monty@mysql.com +3 -3
    Fixed compiler warning

  mysys/hash.c@1.46.1.2, 2006-11-20 22:41:43+02:00, monty@mysql.com +7 -6
    Fixed compiler warning

  mysys/list.c@1.11, 2006-11-20 22:41:43+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  mysys/mf_iocache.c@1.56.1.4, 2006-11-20 22:41:43+02:00, monty@mysql.com +5 -4
    Fixed compiler warning

  mysys/mf_keycache.c@1.55.1.2, 2006-11-20 22:41:43+02:00, monty@mysql.com +16 -16
    Fixed compiler warning

  mysys/mf_keycaches.c@1.7, 2006-11-20 22:41:44+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  mysys/my_alloc.c@1.32.1.1, 2006-11-20 22:41:44+02:00, monty@mysql.com +7 -6
    Fixed compiler warning

  mysys/my_dup.c@1.4.2.1, 2006-11-20 22:41:44+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  mysys/my_fopen.c@1.16, 2006-11-20 22:41:44+02:00, monty@mysql.com +3 -3
    Fixed compiler warning

  mysys/my_fstream.c@1.9, 2006-11-20 22:41:44+02:00, monty@mysql.com +4 -4
    Fixed compiler warning

  mysys/my_getwd.c@1.17.1.1, 2006-11-20 22:41:44+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  mysys/my_handler.c@1.24.1.2, 2006-11-20 22:41:44+02:00, monty@mysql.com +7 -0
    Fixed compiler warning
    Added missing enums in switch

  mysys/my_lib.c@1.23.3.2, 2006-11-20 22:41:44+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  mysys/my_malloc.c@1.9.1.2, 2006-11-20 22:41:45+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  mysys/my_pread.c@1.10.1.2, 2006-11-20 22:41:45+02:00, monty@mysql.com +4 -4
    Fixed compiler warning

  mysys/my_read.c@1.11, 2006-11-20 22:41:45+02:00, monty@mysql.com +3 -3
    Fixed compiler warning

  mysys/my_realloc.c@1.9, 2006-11-20 22:41:45+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  mysys/my_seek.c@1.11.1.4, 2006-11-20 22:41:45+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  mysys/my_write.c@1.13, 2006-11-20 22:41:45+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  mysys/safemalloc.c@1.24.1.2, 2006-11-20 22:41:45+02:00, monty@mysql.com +5 -5
    Fixed compiler warning

  mysys/thr_lock.c@1.49.1.2, 2006-11-20 22:41:45+02:00, monty@mysql.com +8 -7
    Fixed compiler warning

  mysys/tree.c@1.30, 2006-11-20 22:41:45+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  mysys/typelib.c@1.14, 2006-11-20 22:41:46+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  regex/regexec.c@1.9, 2006-11-20 22:41:50+02:00, monty@mysql.com +2 -1
    Fixed compiler warning

  server-tools/instance-manager/mysql_connection.cc@1.14.1.1, 2006-11-20 22:41:50+02:00, monty@mysql.com +10 -10
    Fixed compiler warning

  sql-common/client.c@1.83.12.1, 2006-11-20 22:41:56+02:00, monty@mysql.com +5 -5
    Fixed compiler warning

  sql-common/my_time.c@1.19.6.1, 2006-11-20 22:41:56+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/Makefile.am@1.103.1.24, 2006-11-20 22:41:50+02:00, monty@mysql.com +2 -0
    Fix for bison 1.875, which adds an attribute statement that gcc 4.1.0 can't parse

  sql/filesort.cc@1.105.3.1, 2006-11-20 22:41:50+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/ha_ndbcluster.cc@1.175.1.112, 2006-11-20 22:41:52+02:00, monty@mysql.com +21 -20
    Fixed compiler warning

  sql/handler.cc@1.167.23.5, 2006-11-20 22:41:52+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/item_cmpfunc.cc@1.187.13.1, 2006-11-20 22:41:52+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  sql/item_subselect.cc@1.113.10.1, 2006-11-20 22:41:52+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/item_timefunc.cc@1.100.16.1, 2006-11-20 22:41:52+02:00, monty@mysql.com +2 -1
    Fixed compiler warning

  sql/log_event.cc@1.174.12.1, 2006-11-20 22:41:53+02:00, monty@mysql.com +8 -7
    Fixed compiler warning

  sql/mysqld.cc@1.439.1.140, 2006-11-20 22:41:53+02:00, monty@mysql.com +5 -5
    Fixed compiler warning

  sql/net_serv.cc@1.88.1.5, 2006-11-20 22:41:53+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/opt_range.cc@1.159.1.73, 2006-11-20 22:41:53+02:00, monty@mysql.com +10 -10
    Fixed compiler warning
    Formated DBUG statements to be as rest of code

  sql/slave.cc@1.241.11.2, 2006-11-20 22:41:53+02:00, monty@mysql.com +9 -8
    Fixed compiler warning

  sql/sql_acl.cc@1.128.1.85, 2006-11-20 22:41:53+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_cache.cc@1.76.7.1, 2006-11-20 22:41:53+02:00, monty@mysql.com +30 -37
    Fixed compiler warning
    Fixed bug in query cache when used with DBUG traceing

  sql/sql_class.cc@1.223.1.31, 2006-11-20 22:41:54+02:00, monty@mysql.com +3 -3
    Fixed compiler warning

  sql/sql_class.h@1.230.42.1, 2006-11-20 22:41:54+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_delete.cc@1.144.1.42, 2006-11-20 22:41:54+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_parse.cc@1.426.118.1, 2006-11-20 22:41:54+02:00, monty@mysql.com +7 -5
    Fixed compiler warning
    Hack to fix my_sprintf() strings with %b

  sql/sql_prepare.cc@1.142.1.44, 2006-11-20 22:41:54+02:00, monty@mysql.com +9 -3
    Fixed compiler warning
    Hack to fix my_sprintf() strings with %b

  sql/sql_repl.cc@1.133.5.1, 2006-11-20 22:41:54+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  sql/sql_select.cc@1.312.115.1, 2006-11-20 22:41:55+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/sql_update.cc@1.154.2.50, 2006-11-20 22:41:55+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  sql/sql_view.cc@1.78.1.21, 2006-11-20 22:41:55+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/strfunc.cc@1.9.1.1, 2006-11-20 22:41:55+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/table.cc@1.160.39.1, 2006-11-20 22:41:56+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  sql/tztime.cc@1.24.1.11, 2006-11-20 22:41:56+02:00, monty@mysql.com +3 -4
    Fixed compiler warning

  sql/unireg.cc@1.53.1.25, 2006-11-20 22:41:56+02:00, monty@mysql.com +4 -4
    Fixed compiler warning

  sql/ha_archive.cc@1.60.9.1, 2006-11-20 22:41:51+02:00, monty@mysql.com +4 -2
    Fixed compiler warning

  sql/ha_federated.cc@1.24.13.1, 2006-11-20 22:41:51+02:00, monty@mysql.com +6 -6
    Fixed compiler warning

  sql/ha_federated.h@1.18.2.1, 2006-11-20 22:41:51+02:00, monty@mysql.com +1 -2
    Fixed compiler warning

  heap/_check.c@1.17.2.1, 2006-11-20 22:41:38+02:00, monty@mysql.com +15 -12
    Fixed compiler warning

  heap/hp_delete.c@1.14.4.1, 2006-11-20 22:41:38+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  heap/hp_hash.c@1.38.6.1, 2006-11-20 22:41:38+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  heap/hp_open.c@1.21.1.1, 2006-11-20 22:41:38+02:00, monty@mysql.com +3 -2
    Fixed compiler warning

  heap/hp_rkey.c@1.15.1.1, 2006-11-20 22:41:38+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  heap/hp_rrnd.c@1.8.1.1, 2006-11-20 22:41:38+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  heap/hp_write.c@1.22.2.1, 2006-11-20 22:41:38+02:00, monty@mysql.com +4 -4
    Fixed compiler warning

  sql/ha_innodb.cc@1.202.30.1, 2006-11-20 22:41:51+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  sql/ha_myisam.cc@1.147.7.1, 2006-11-20 22:41:51+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  myisam/mi_close.c@1.18.1.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +3 -2
    Fixed compiler warning

  myisam/mi_delete.c@1.33.9.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +5 -4
    Fixed compiler warning

  myisam/mi_dynrec.c@1.37.9.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  myisam/mi_keycache.c@1.9.1.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  myisam/mi_page.c@1.22.1.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  myisam/mi_statrec.c@1.10.2.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  myisam/mi_test2.c@1.27.2.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  myisam/mi_write.c@1.50.8.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +10 -8
    Fixed compiler warning

  myisam/myisampack.c@1.39.14.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +8 -7
    Fixed compiler warning

  sql/ha_myisammrg.cc@1.59.9.1, 2006-11-20 22:41:51+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  myisammrg/myrg_extra.c@1.12.1.1, 2006-11-20 22:41:39+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  ndb/include/logger/LogHandler.hpp@1.6.2.1, 2006-11-20 22:41:46+02:00, monty@mysql.com +1 -1
    Changed SetErrorStr() to take const char* to remove compiler warnings (as many arguments to this are const strings)

  ndb/include/ndb_global.h.in@1.9.2.1, 2006-11-20 22:41:46+02:00, monty@mysql.com +6 -0
    Added LINT_SET_PTR macro to be able to remove some compiler warnings

  ndb/include/util/InputStream.hpp@1.3.3.1, 2006-11-20 22:41:46+02:00, monty@mysql.com +1 -0
    Fixed compiler warning

  ndb/include/util/OutputStream.hpp@1.3.1.1, 2006-11-20 22:41:46+02:00, monty@mysql.com +1 -0
    Fixed compiler warning

  ndb/include/util/SimpleProperties.hpp@1.4.3.1, 2006-11-20 22:41:46+02:00, monty@mysql.com +7 -0
    Fixed compiler warning

  ndb/src/common/debugger/EventLogger.cpp@1.21.6.1, 2006-11-20 22:41:46+02:00, monty@mysql.com +1 -2
    remove if on 'signal' as this is a function pointer and is always true

  ndb/src/common/debugger/signaldata/BackupSignalData.cpp@1.1.2.1, 2006-11-20 22:41:46+02:00, monty@mysql.com +3 -0
    Add missing enums

  ndb/src/common/logger/LogHandler.cpp@1.8.5.1, 2006-11-20 22:41:46+02:00, monty@mysql.com +2 -2
    Changed SetErrorStr() to take const char* to remove compiler warnings (as many arguments to this are const strings)

  ndb/src/common/portlib/NdbMutex.c@1.5.6.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/common/portlib/NdbThread.c@1.20.8.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/common/transporter/Transporter.cpp@1.18.5.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +2 -2
    Swapped arguments to remove compiler warnings

  ndb/src/cw/cpcd/CPCD.hpp@1.2.2.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +1 -0
    Fixed compiler warning

  ndb/src/kernel/blocks/backup/Backup.cpp@1.15.26.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +67 -61
    Fixed compiler warning

  ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.18.8.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +4 -4
    Fixed compiler warning

  ndb/src/kernel/blocks/dbdict/Dbdict.cpp@1.40.35.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +3 -3
    Fixed compiler warning

  ndb/src/kernel/blocks/dbtux/DbtuxSearch.cpp@1.9.2.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  ndb/src/kernel/blocks/ndbcntr/NdbcntrMain.cpp@1.14.16.1, 2006-11-20 22:41:47+02:00, monty@mysql.com +6 -1
    Added missing enums

  ndb/src/kernel/blocks/qmgr/QmgrMain.cpp@1.13.22.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +4 -3
    Fixed compiler warning

  ndb/src/kernel/error/ErrorReporter.cpp@1.8.9.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +1 -0
    Fixed compiler warning

  ndb/src/kernel/error/ErrorReporter.hpp@1.6.3.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  ndb/src/kernel/error/ndbd_exit_codes.c@1.1.7.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +1 -0
    Fixed compiler warning

  ndb/src/kernel/vm/TransporterCallback.cpp@1.7.5.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  ndb/src/mgmapi/mgmapi.cpp@1.44.30.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/mgmclient/CommandInterpreter.cpp@1.49.26.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/mgmsrv/MgmtSrvr.cpp@1.73.39.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +4 -4
    Fixed compiler warning

  ndb/src/mgmsrv/Services.cpp@1.45.33.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  ndb/src/ndbapi/ClusterMgr.cpp@1.17.8.1, 2006-11-20 22:41:48+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  ndb/src/ndbapi/DictCache.cpp@1.12.9.1, 2006-11-20 22:41:49+02:00, monty@mysql.com +2 -1
    Fixed compiler warning

  ndb/src/ndbapi/Ndb.cpp@1.49.13.1, 2006-11-20 22:41:49+02:00, monty@mysql.com +10 -7
    Fixed compiler warning

  ndb/src/ndbapi/NdbOperationDefine.cpp@1.19.1.1, 2006-11-20 22:41:49+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/ndbapi/NdbOperationExec.cpp@1.18.2.1, 2006-11-20 22:41:49+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  ndb/src/ndbapi/NdbOperationInt.cpp@1.15.1.1, 2006-11-20 22:41:49+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/ndbapi/NdbOperationSearch.cpp@1.24.2.1, 2006-11-20 22:41:49+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/ndbapi/NdbTransaction.cpp@1.43.17.1, 2006-11-20 22:41:49+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/ndbapi/Ndbif.cpp@1.27.7.1, 2006-11-20 22:41:50+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/ndbapi/Ndbinit.cpp@1.29.6.1, 2006-11-20 22:41:50+02:00, monty@mysql.com +2 -2
    Fixed compiler warning

  ndb/src/ndbapi/ndb_cluster_connection.cpp@1.29.9.1, 2006-11-20 22:41:50+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  ndb/tools/drop_index.cpp@1.13.4.1, 2006-11-20 22:41:50+02:00, monty@mysql.com +0 -3
    Fixed compiler warning

  ndb/tools/drop_tab.cpp@1.14.2.1, 2006-11-20 22:41:50+02:00, monty@mysql.com +0 -3
    Fixed compiler warning

  ndb/tools/ndb_config.cpp@1.4.11.1, 2006-11-20 22:41:50+02:00, monty@mysql.com +2 -0
    Fixed compiler warning

  strings/decimal.c@1.65.2.1, 2006-11-20 22:41:56+02:00, monty@mysql.com +1 -1
    Fixed compiler warning

  tests/mysql_client_test.c@1.167.24.1, 2006-11-20 22:41:56+02:00, monty@mysql.com +6 -1
    Fixed compiler warning

  vio/viosocket.c@1.37.1.6, 2006-11-20 22:41:56+02:00, monty@mysql.com +8 -8
    Fixed compiler warning

  vio/viossl.c@1.34.2.4, 2006-11-20 22:41:56+02:00, monty@mysql.com +10 -10
    Fixed compiler warning

  vio/viosslfactories.c@1.26.2.3, 2006-11-20 22:41:56+02:00, monty@mysql.com +4 -4
    Fixed compiler warning

ChangeSet@1.2303.104.1, 2006-11-20 21:27:39+01:00, mats@romeo.(none) +1 -0
  BUG#24403 (valgrind complained on uninited st_table for InnoDB and RBR):
  Fix to correct behaviour of find_and_fetch_row() for tables that have primary keys stored
  in storage engines that support the fast method to fetch rows given a primary key. The
  method uses position() to retrieve the key for a given record and rnd_pos() to position
  the internal "cursor" at the row. Rnd_pos() returns the found record in table->record[0],
  so the record has to be moved to table->record[1] for further processing after calling
  find_and_fetch_row().

  sql/log_event.cc@1.253, 2006-11-20 21:27:36+01:00, mats@romeo.(none) +69 -19
    Adding code to one exit branch of find_and_fetch_row() to move output record from
    table->record[0] to table->record[1].
    Adding function to do valgrind memory check.
    Adding valgrind memory checks to check that records are defined when they should be.
    Adding Doxygen comment to find_and_fetch_row() with pre- and post-conditions.

ChangeSet@1.2303.103.1, 2006-11-20 15:18:57-05:00, iggy@amd64. +6 -0
  Bug#23983 ps.test fails to open shared library
  - When a shared library argument is supplied, it's checked for an OS
  specific directory separator. The expected error is different
  depending on the separator used. Create OS specific versions of these
  tests.

  mysql-test/r/ps.result@1.87.1.1, 2006-11-20 15:14:58-05:00, iggy@amd64. +0 -14
    Bug#23983 ps.test fails to open shared library
    - Moving to OS specific results.

  mysql-test/r/ps_not_windows.result@1.1, 2006-11-20 15:18:13-05:00, iggy@amd64. +14 -0
    Bug#23983 ps.test fails to open shared library
    - OS Specific result for shared library argument with path

  mysql-test/r/ps_not_windows.result@1.0, 2006-11-20 15:18:13-05:00, iggy@amd64. +0 -0

  mysql-test/r/windows.result@1.5, 2006-11-20 15:14:59-05:00, iggy@amd64. +14 -0
    Bug#23983 ps.test fails to open shared library
    - OS Specific result for shared library argument with path

  mysql-test/t/ps.test@1.86.1.1, 2006-11-20 15:14:59-05:00, iggy@amd64. +0 -14
    Bug#23983 ps.test fails to open shared library
    - Moving to OS specific tests.

  mysql-test/t/ps_not_windows.test@1.1, 2006-11-20 15:18:13-05:00, iggy@amd64. +23 -0
    Bug#23983 ps.test fails to open shared library
    - OS Specific test for shared library argument with path

  mysql-test/t/ps_not_windows.test@1.0, 2006-11-20 15:18:13-05:00, iggy@amd64. +0 -0

  mysql-test/t/windows.test@1.5, 2006-11-20 15:18:12-05:00, iggy@amd64. +22 -0
    Bug#23983 ps.test fails to open shared library
    - OS Specific test for shared library argument with path

ChangeSet@1.2303.101.2, 2006-11-20 21:11:45+01:00, msvensson@shellback.(none) +1 -0
  Bug#24361 valgrind error when shutting down mysqld connected to cluster
    - Disconnect from transporter before starting to delete objects

  storage/ndb/src/ndbapi/Ndbinit.cpp@1.40.1.1, 2006-11-20 21:11:42+01:00, msvensson@shellback.(none) +4 -3
    Make sure to disconnect from transporter to stop signals from coming in
    before starting to delete the objects that would recieve the signals

ChangeSet@1.2303.85.19, 2006-11-20 15:37:12+03:00, anozdrin@booka.site +5 -0
  Polishing + make the code compiled on Windows.

  server-tools/instance-manager/listener.cc@1.35, 2006-11-20 15:37:04+03:00, anozdrin@booka.site +2 -2
    Polishing: declare variable prior to the first statement in block.

  server-tools/instance-manager/listener.h@1.9, 2006-11-20 15:37:04+03:00, anozdrin@booka.site +13 -6
    Polishing.

  server-tools/instance-manager/manager.cc@1.41, 2006-11-20 15:37:04+03:00, anozdrin@booka.site +1 -2
    Make Manager::manager_pid local variable.

  server-tools/instance-manager/manager.h@1.9, 2006-11-20 15:37:04+03:00, anozdrin@booka.site +1 -2
    Make Manager::manager_pid local variable.

  server-tools/instance-manager/thread_registry.cc@1.14, 2006-11-20 15:37:04+03:00, anozdrin@booka.site +1 -1
    Polsihing.

ChangeSet@1.1810.2331.1, 2006-11-20 13:02:49+01:00, msvensson@neptunus.(none) +1 -0
  mysql_client_test not found when running from binary dist
  Look in bin for myql_client_test executable

  mysql-test/mysql-test-run.pl@1.30.51.1, 2006-11-20 13:02:42+01:00, msvensson@neptunus.(none) +1 -1
    mysql_client_test not found when running from binary dist
    Look in bin for myql_client_test executable

ChangeSet@1.2303.99.7, 2006-11-20 13:42:22+02:00, gkodinov@macbook.gmz +1 -0
  fix for the merge of --mem support in autopush.pl in 5.1-opt

  Makefile.am@1.105, 2006-11-20 13:42:16+02:00, gkodinov@macbook.gmz +1 -0
    fix for the merge of --mem support in autopush.pl in 5.1-opt

ChangeSet@1.2303.99.6, 2006-11-20 12:46:47+02:00, gkodinov@macbook.gmz +2 -0
  5.0-opt -> 5.1-opt merge fixed.

  mysql-test/t/disabled.def@1.216, 2006-11-20 12:46:40+02:00, gkodinov@macbook.gmz +0 -1
    5.0-opt -> 5.1-opt merge fixed.

  sql/sql_yacc.yy@1.514.2.4, 2006-11-20 12:46:40+02:00, gkodinov@macbook.gmz +3 -4
    5.0-opt -> 5.1-opt merge fixed.

ChangeSet@1.2303.102.1, 2006-11-20 10:05:24+03:00, anozdrin@booka.site +2 -0
  Polishing: eliminate warnings.

  server-tools/instance-manager/Makefile.am@1.43, 2006-11-20 10:05:19+03:00, anozdrin@booka.site +1 -1
    - replace -Wextra by -W for old compilers;
    - remove -Werror

  server-tools/instance-manager/listener.cc@1.32.1.1, 2006-11-20 10:05:19+03:00, anozdrin@booka.site +1 -1
    Use explicit cast to eliminate warning on Solaris.

ChangeSet@1.2303.47.27, 2006-11-19 18:01:54-08:00, brian@zim.(none) +8 -0
  Refactored a number of engines to have correct init/deinit. Added pass support for "data" from plugin to plugin generic init to use memory location. 

  plugin/daemon_example/plug.in@1.2, 2006-11-19 18:01:50-08:00, brian@zim.(none) +2 -2
    Switched the plug.in type (corrected)

  sql/handler.h@1.248, 2006-11-19 18:01:50-08:00, brian@zim.(none) +1 -0
    Added data pointer to use for engines.

  sql/sql_plugin.cc@1.39, 2006-11-19 18:01:50-08:00, brian@zim.(none) +2 -2
    Passing plugin to generic handlers to allow them to add data to "data"

  storage/archive/ha_archive.cc@1.111, 2006-11-19 18:01:50-08:00, brian@zim.(none) +4 -18
    Refactored. Now uses less logic for startup/shutdown. 

  storage/csv/ha_tina.cc@1.70, 2006-11-19 18:01:50-08:00, brian@zim.(none) +12 -34
    Refactored init/deinit to use less code. 

  storage/example/ha_example.cc@1.48, 2006-11-19 18:01:50-08:00, brian@zim.(none) +16 -50
    Refactored example to show correct behavior for init/deinit.

  storage/example/ha_example.h@1.17, 2006-11-19 18:01:50-08:00, brian@zim.(none) +0 -3
    Removed unneeded references to methods that do not need to be implemened. 

  storage/federated/ha_federated.cc@1.84.1.1, 2006-11-19 18:01:50-08:00, brian@zim.(none) +5 -12
    Refactored to use less code and startup/shutdown correctly. 

ChangeSet@1.2303.99.3, 2006-11-18 21:49:59+04:00, holyfoot@mysql.com +3 -0
  merging

  mysql-test/t/disabled.def@1.215, 2006-11-18 21:49:54+04:00, holyfoot@mysql.com +1 -0
    meging bug

  sql/item_subselect.cc@1.134, 2006-11-18 21:49:54+04:00, holyfoot@mysql.com +1 -1
    merging

  sql/sql_yacc.yy@1.514.2.2, 2006-11-18 21:49:54+04:00, holyfoot@mysql.com +1 -2
    merging

ChangeSet@1.2303.85.17, 2006-11-18 01:34:44+03:00, kostja@bodhi.local +22 -0
  Port cleanups, trivial refactoring and code rearrangements from
  Alik's patch for BUG#22306: STOP INSTANCE can not be applied for 
  instances in Crashed, Failed and Abandoned" to ease review process.
  Evaluate global variable linuxthreads before starting threads to avoid
  a race.

  server-tools/instance-manager/buffer.cc@1.12, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +2 -2
    Fix spelling.

  server-tools/instance-manager/command.h@1.8, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +1 -1
    Fix spelling.

  server-tools/instance-manager/commands.cc@1.41, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +6 -6
    Fix spelling.

  server-tools/instance-manager/commands.h@1.14, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +3 -23
    Fix spelling, tidy up.

  server-tools/instance-manager/guardian.cc@1.33, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +16 -25
    Cleanup logging, options.get_shutdown_delay() is a method, tidy up.

  server-tools/instance-manager/instance.cc@1.45, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +299 -241
    Rearrange methods to be the same as in Alik's patch, fix spelling errors,
    clean up logging texts, port comments from Alik's patch, 
    implement some basic renames from his patch.
    No real changes.

  server-tools/instance-manager/instance.h@1.18, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +5 -9
    Tidy up, renames.

  server-tools/instance-manager/instance_map.cc@1.33, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +12 -15
    Fix spellings, port some refactoring from Alik's patch.

  server-tools/instance-manager/instance_map.h@1.23, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +2 -5
    Cleanup.

  server-tools/instance-manager/instance_options.cc@1.39, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +64 -32
    Cleanup. Implement Instance_options::get_shutdown_delay() and
    Instance_options::get_mysqld_port().

  server-tools/instance-manager/instance_options.h@1.21, 2006-11-18 01:34:39+03:00, kostja@bodhi.local +12 -7
    Cleanup.

  server-tools/instance-manager/listener.cc@1.33, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +9 -14
    Cleanup.

  server-tools/instance-manager/log.cc@1.12, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +1 -1
    Fix spelling.

  server-tools/instance-manager/manager.cc@1.40, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +31 -28
    Cleanup.

  server-tools/instance-manager/manager.h@1.8, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +10 -1
    Add getters for Manager members.

  server-tools/instance-manager/mysqlmanager.cc@1.21, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +28 -1
    Evaluate linuxthreads before starting threads to avoid a race.

  server-tools/instance-manager/parse_output.cc@1.21, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +1 -1
    Fix spelling.

  server-tools/instance-manager/priv.cc@1.15, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +2 -3
    Cleanup.

  server-tools/instance-manager/priv.h@1.14, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +0 -3
    Cleanup.

  server-tools/instance-manager/user_management_commands.cc@1.4, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +5 -5
    Fix spelling.

  server-tools/instance-manager/user_management_commands.h@1.3, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +1 -1
    Fix spelling.

  server-tools/instance-manager/user_map.cc@1.21, 2006-11-18 01:34:40+03:00, kostja@bodhi.local +1 -1
    Fix spelling.

ChangeSet@1.2303.101.1, 2006-11-17 23:44:14+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +1 -0
  Bug #24403 valgrind complained on uninited st_table, rbr + innodb
    
    open_table_from_share did not initialize table->record members. that was
    interpreted as the error by valgrind.
    
    Fixed with bzero-ing the members if compilation with -DHAVE_purify.

  sql/table.cc@1.252.2.1, 2006-11-17 23:44:06+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +3 -1
    zeroing memory allocated for table->record[]

ChangeSet@1.2303.85.16, 2006-11-17 20:07:52+03:00, kostja@bodhi.local +2 -0
  A post-merge fix.

  server-tools/instance-manager/guardian.cc@1.32, 2006-11-17 20:07:48+03:00, kostja@bodhi.local +4 -4
    A post-merge fix.

  server-tools/instance-manager/mysql_connection.h@1.7, 2006-11-17 20:07:48+03:00, kostja@bodhi.local +1 -2
    A post-merge fix.

ChangeSet@1.1616.2855.2, 2006-11-17 16:52:21+01:00, dfischer@kahlann.erinye.com +2 -0
  MTR_BUILD_THREAD=auto selects a value for MTR_BUILD_THREAD from a pool (WL#2690)

  mysql-test/lib/mtr_unique.pl@1.1, 2006-11-17 16:52:19+01:00, dfischer@kahlann.erinye.com +119 -0
    Library file used by mysql-test-run.pl to determine unique test run identifiers.

  mysql-test/lib/mtr_unique.pl@1.0, 2006-11-17 16:52:19+01:00, dfischer@kahlann.erinye.com +0 -0

  mysql-test/mysql-test-run.pl@1.8.14.4, 2006-11-17 16:52:19+01:00, dfischer@kahlann.erinye.com +10 -0
    MTR_BUILD_THREAD=auto selects a value for MTR_BUILD_THREAD from a pool (WL#2690)

ChangeSet@1.1810.2324.4, 2006-11-17 16:09:37+01:00, joerg@trift2. +7 -0
  Maintain the (old) VC project files, ehere yaSSL is concerned:
  "mySTL" has become a subdirectory of "taocrypt", was a sibling previously.

  extra/yassl/taocrypt/benchmark/benchmark.dsp@1.2, 2006-11-17 16:09:34+01:00, joerg@trift2. +2 -2
    "mySTL" has become a subdirectory of "taocrypt", was a sibling previously - adapt.

  extra/yassl/taocrypt/taocrypt.dsp@1.5, 2006-11-17 16:09:34+01:00, joerg@trift2. +2 -2
    "mySTL" has become a subdirectory of "taocrypt", was a sibling previously - adapt.

  extra/yassl/taocrypt/taocrypt.vcproj@1.3, 2006-11-17 16:09:34+01:00, joerg@trift2. +2 -2
    "mySTL" has become a subdirectory of "taocrypt", was a sibling previously - adapt.

  extra/yassl/taocrypt/test.dsp@1.2, 2006-11-17 16:09:34+01:00, joerg@trift2. +2 -2
    "mySTL" has become a subdirectory of "taocrypt", was a sibling previously - adapt.

  extra/yassl/testsuite/testsuite.dsp@1.3, 2006-11-17 16:09:34+01:00, joerg@trift2. +2 -2
    "mySTL" has become a subdirectory of "taocrypt", was a sibling previously - adapt.

  extra/yassl/yassl.dsp@1.4, 2006-11-17 16:09:34+01:00, joerg@trift2. +2 -2
    "mySTL" has become a subdirectory of "taocrypt", was a sibling previously - adapt.

  extra/yassl/yassl.vcproj@1.2.1.1, 2006-11-17 16:09:34+01:00, joerg@trift2. +2 -2
    "mySTL" has become a subdirectory of "taocrypt", was a sibling previously - adapt.

ChangeSet@1.2303.85.14, 2006-11-17 16:45:29+03:00, anozdrin@alik. +8 -0
  Polishing: generate more warnings and make code warnings-free.

  server-tools/instance-manager/Makefile.am@1.42, 2006-11-17 16:45:27+03:00, anozdrin@alik. +1 -1
    Generate more warnings.

  server-tools/instance-manager/commands.cc@1.38.1.1, 2006-11-17 16:45:27+03:00, anozdrin@alik. +13 -9
    Eliminate warnings.

  server-tools/instance-manager/commands.h@1.13, 2006-11-17 16:45:27+03:00, anozdrin@alik. +20 -0
    Eliminate warnings.

  server-tools/instance-manager/instance.cc@1.42.1.1, 2006-11-17 16:45:27+03:00, anozdrin@alik. +1 -1
    Eliminate warnings.

  server-tools/instance-manager/mysql_connection.cc@1.19.1.1, 2006-11-17 16:45:27+03:00, anozdrin@alik. +3 -3
    Eliminate warnings.

  server-tools/instance-manager/parse.cc@1.18, 2006-11-17 16:45:27+03:00, anozdrin@alik. +0 -1
    Eliminate warnings.

  server-tools/instance-manager/user_map.cc@1.20, 2006-11-17 16:45:27+03:00, anozdrin@alik. +0 -1
    Eliminate warnings.

  server-tools/instance-manager/user_map.h@1.7, 2006-11-17 16:45:27+03:00, anozdrin@alik. +1 -1
    Eliminate warnings.

ChangeSet@1.2303.98.1, 2006-11-17 16:11:04+03:00, kostja@bodhi.local +13 -0
  Replace the approach using Foo_thread_args + Foo_thread and manually
  spawned threads with a reusable class Thread.
  
  This is the second idea implemented in the Alik's patch for
  BUG#22306: STOP INSTANCE can not be applied for instances in Crashed,
  Failed and Abandoned.
  Commiting separately to ease review process. 

  server-tools/instance-manager/commands.cc@1.39, 2006-11-17 16:10:59+03:00, kostja@bodhi.local +0 -1
    Remove an unused header.

  server-tools/instance-manager/guardian.cc@1.31, 2006-11-17 16:10:59+03:00, kostja@bodhi.local +27 -36
    Use Thread framework instead of manually spawning the Guardian thread.
    Tidy up.

  server-tools/instance-manager/guardian.h@1.16, 2006-11-17 16:10:59+03:00, kostja@bodhi.local +14 -29
    Use Thread framework instead of manually spawning the Guardian thread.

  server-tools/instance-manager/instance.cc@1.43, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +32 -30
    Use Thread framework instead of manually spawning the instance
    monitoring thread.

  server-tools/instance-manager/listener.cc@1.32, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +32 -96
    Use Thread framework instead of manually spawning the 
    mysql connection thread.

  server-tools/instance-manager/listener.h@1.8, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +24 -18
    Use Thread framework instead of manually spawning the 
    mysql connection thread.
    Rename Listener_thread to Listener for brevity.

  server-tools/instance-manager/manager.cc@1.39, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +26 -48
    Change references to pointers, as per the coding style.
    Use Thread framework instead of manually spawning threads.

  server-tools/instance-manager/mysql_connection.cc@1.20, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +28 -89
    Get rid of Mysql_connection_thread_args. Use class Thread framework
    instead. Rename Mysql_connection_thread to Mysql_connection for brevity.

  server-tools/instance-manager/mysql_connection.h@1.6, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +43 -16
    Get rid of Mysql_connection_thread_args. Use class Thread framework
    instead. Rename Mysql_connection_thread to Mysql_connection for brevity.

  server-tools/instance-manager/priv.cc@1.14, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +0 -38
    Move set_stacksize_and_create_thread to thread_registry.cc and make it
    static: it is not used anywhere else now.

  server-tools/instance-manager/priv.h@1.13, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +0 -4
    No public set_stacksize_n_create_thread

  server-tools/instance-manager/thread_registry.cc@1.13, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +87 -9
    Implement a base Thread class to be used for all Instance Manager
    threads.

  server-tools/instance-manager/thread_registry.h@1.9, 2006-11-17 16:11:00+03:00, kostja@bodhi.local +24 -7
    Implement a base Thread class to be used for all Instance Manager
    threads.

ChangeSet@1.2321.1.2, 2006-11-17 13:18:09+01:00, msvensson@neptunus.(none) +1 -0
  Bug#24361 valgrind error when shutting down mysqld connected to cluster
   - Disconnect from transporter before starting to delete objects

  storage/ndb/src/ndbapi/Ndbinit.cpp@1.42, 2006-11-17 13:18:05+01:00, msvensson@neptunus.(none) +4 -3
    Make sure to diconnect from transporter to stop signals from coming in before
    starting to delete the objects that would recieve the signals 

ChangeSet@1.1810.2328.2, 2006-11-17 13:56:11+03:00, kroki@moonlight.intranet +1 -0
  Fix after manual merge: remove dead declaration.

  libmysqld/lib_sql.cc@1.107.4.2, 2006-11-17 13:56:07+03:00, kroki@moonlight.intranet +0 -1
    Fix after manual merge: remove dead declaration.

ChangeSet@1.1616.2847.13, 2006-11-17 14:30:08+04:00, holyfoot@mysql.com +1 -0
  ABI fix

  include/mysql_h.ic@1.1.1.3, 2006-11-17 14:30:06+04:00, holyfoot@mysql.com +0 -1
    this one should actually be removed from the ABI

ChangeSet@1.1616.2856.1, 2006-11-17 12:21:32+03:00, kroki@moonlight.intranet +3 -0
  BUG#23383: mysql_affected_rows() returns different values than
  mysql_stmt_affected_rows()
  
  The problem was that affected_rows for prepared statement wasn't updated
  in the client library on the error.  The solution is to always update
  affected_rows, which will be equal to -1 on the error.

  libmysql/libmysql.c@1.156.26.1, 2006-11-17 12:21:30+03:00, kroki@moonlight.intranet +9 -5
    Update status variables even in the case of an error.  Some variables
    have a defined value on the error (like affected_rows is -1), others are
    undefined, so updating them won't harm.

  libmysqld/lib_sql.cc@1.75.10.1, 2006-11-17 12:21:30+03:00, kroki@moonlight.intranet +9 -5
    Update status variables even in the case of an error.  Some variables
    have a defined value on the error (like affected_rows is -1), others are
    undefined, so updating them won't harm.

  tests/mysql_client_test.c@1.51.1.122, 2006-11-17 12:21:30+03:00, kroki@moonlight.intranet +78 -0
    Add test for bug#23383: mysql_affected_rows() returns different values
    than mysql_stmt_affected_rows().

ChangeSet@1.1810.2321.12, 2006-11-17 12:02:36+04:00, holyfoot@mysql.com +1 -0
  merging

  mysql-test/r/order_by.result@1.55.1.3, 2006-11-17 12:02:34+04:00, holyfoot@mysql.com +7 -7
    merging

ChangeSet@1.1810.2321.11, 2006-11-17 11:15:40+04:00, holyfoot@mysql.com +1 -0
  merging

  sql/item_subselect.cc@1.113.1.29, 2006-11-17 11:15:37+04:00, holyfoot@mysql.com +1 -1
    merging

ChangeSet@1.1810.1698.182, 2006-11-17 08:18:10+02:00, bell@desktop.sanja.is.com.ua +1 -0
  Fix of debbuging mode of query cache (proposed by Monty reviewed by me).

  sql/sql_cache.cc@1.76.1.18, 2006-11-17 08:18:07+02:00, bell@desktop.sanja.is.com.ua +24 -18
    Call of BLOCK_UNLOCK_WR() moved before query_cache.check_integrity() call which privent lock of query cache during debugging.
    Comments added.

ChangeSet@1.2303.85.12, 2006-11-16 23:36:20+03:00, kostja@bodhi.local +21 -0
  Cleanup: manually port the polishing parts from Alik's changeset for
  BUG#22306: STOP INSTANCE can not be applied for instances in Crashed,
  Failed and Abandoned

  mysql-test/t/im_options.imtest@1.5, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +1 -27
    Update test for new framework.

  server-tools/instance-manager/IMService.cpp@1.10, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +5 -5
    Use Manager class instead of manager().
    Reformat comments.

  server-tools/instance-manager/Makefile.am@1.41, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +2 -0
    Treat warnings as errors.

  server-tools/instance-manager/command.cc@1.7, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +4 -2
    Store references to Guardian_thread and Instance_map in Command attributes.

  server-tools/instance-manager/command.h@1.7, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +3 -1
    Store references to Guardian_thread and Instance_map in Command 
    attributes.

  server-tools/instance-manager/commands.cc@1.38, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +20 -43
    Remove Instance_map argument from command constructors.

  server-tools/instance-manager/commands.h@1.12, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +10 -36
    Remove Instance_map argument from command constructors.

  server-tools/instance-manager/guardian.cc@1.30, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +21 -21
    Rename: Guardian_thread -> Guardian

  server-tools/instance-manager/guardian.h@1.15, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +8 -8
    Rename: Guardian_thread -> Guardian

  server-tools/instance-manager/instance_map.cc@1.32, 2006-11-16 23:36:15+03:00, kostja@bodhi.local +2 -2
    Rename: Guardian_thread -> Guardian.

  server-tools/instance-manager/instance_map.h@1.22, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +3 -3
    Rename: Guardian_thread -> Guardian.

  server-tools/instance-manager/manager.cc@1.38, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +31 -47
    Use Manager class instead of manager() function.

  server-tools/instance-manager/manager.h@1.7, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +23 -2
    Transfer manager() function into Manager class (singleton).

  server-tools/instance-manager/mysql_connection.cc@1.19, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +3 -3
    Polishing.

  server-tools/instance-manager/mysqlmanager.cc@1.20, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +5 -4
    Use Manager class instead of manager() function.

  server-tools/instance-manager/parse.cc@1.17, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +16 -13
    Rename: Guardian_thread -> Guardian

  server-tools/instance-manager/parse.h@1.10, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +1 -2
    Rename: Guardian_thread -> Guardian

  server-tools/instance-manager/priv.cc@1.13, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +32 -0
    Move create_pid_file() out of manager.cc.

  server-tools/instance-manager/priv.h@1.12, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +2 -0
    Move create_pid_file() out of manager.cc.

  server-tools/instance-manager/thread_registry.h@1.8, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +5 -0
    Prevent copying.

  server-tools/instance-manager/user_map.cc@1.19, 2006-11-16 23:36:16+03:00, kostja@bodhi.local +8 -7
    Fix alignment.

ChangeSet@1.1616.2847.12, 2006-11-16 23:00:48+04:00, holyfoot@mysql.com +1 -0
  merging

  Makefile.am@1.60.1.17, 2006-11-16 23:00:43+04:00, holyfoot@mysql.com +1 -1
    merging

ChangeSet@1.1616.2847.11, 2006-11-16 21:23:34+04:00, holyfoot@mysql.com +1 -0
  merging

  client/mysqltest.c@1.92.23.2, 2006-11-16 21:23:32+04:00, holyfoot@mysql.com +14 -19
    merging

ChangeSet@1.2303.75.3, 2006-11-16 09:03:47-07:00, malff@weblab.(none) +11 -0
  Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)
  
  Before this change, the functions BENCHMARK, ENCODE, DECODE and FORMAT could
  only accept a constant for some parameters.
  
  After this change, this restriction has been removed. An implication is that
  these functions can also be used in prepared statements.
  
  The change consist of changing the following classes:
  - Item_func_benchmark
  - Item_func_encode
  - Item_func_decode
  - Item_func_format
  to:
  - only accept Item* in the constructor,
  - and evaluate arguments during calls to val_xxx()
  which fits the general design of all the other functions.
  
  The 'TODO' items identified in item_create.cc during the work done for
  Bug 21114 are addressed by this fix, as a natural consequence of aligning
  the design.
  
  In the 'func_str' test, a single very long test line involving an explain
  extended select with many functions has been rewritten into multiple
  separate tests, to improve maintainability.
  The result of explain extended select decode(encode(...)) has changed,
  since the encode and decode functions now print all their parameters.

  mysql-test/r/func_str.result@1.127.1.1, 2006-11-16 09:03:45-07:00, malff@weblab.(none) +335 -2
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  mysql-test/r/parser.result@1.2, 2006-11-16 09:03:45-07:00, malff@weblab.(none) +0 -13
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  mysql-test/r/ps.result@1.88, 2006-11-16 09:03:45-07:00, malff@weblab.(none) +46 -0
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  mysql-test/t/func_str.test@1.94.1.1, 2006-11-16 09:03:46-07:00, malff@weblab.(none) +108 -1
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  mysql-test/t/parser.test@1.2, 2006-11-16 09:03:46-07:00, malff@weblab.(none) +0 -15
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  mysql-test/t/ps.test@1.87, 2006-11-16 09:03:46-07:00, malff@weblab.(none) +35 -0
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  sql/item_create.cc@1.68, 2006-11-16 09:03:46-07:00, malff@weblab.(none) +4 -38
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  sql/item_func.cc@1.327.1.1, 2006-11-16 09:03:46-07:00, malff@weblab.(none) +16 -10
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  sql/item_func.h@1.151.1.1, 2006-11-16 09:03:46-07:00, malff@weblab.(none) +2 -3
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  sql/item_strfunc.cc@1.295.1.1, 2006-11-16 09:03:46-07:00, malff@weblab.(none) +64 -19
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

  sql/item_strfunc.h@1.120.1.1, 2006-11-16 09:03:46-07:00, malff@weblab.(none) +5 -13
    Bug#22684 (BENCHMARK, ENCODE, DECODE and FORMAT are not real functions)

ChangeSet@1.1616.2849.11, 2006-11-16 14:01:31+01:00, joerg@trift2. +1 -0
  support-files/mysql.spec.sh  :   Add an "Obsoletes" note relative to SuSE RPMs (bug#22081).

  support-files/mysql.spec.sh@1.83.1.43, 2006-11-16 14:01:29+01:00, joerg@trift2. +8 -0
    Explicitly note that the "MySQL-shared" RPMs (as built by MySQL AB) replace 
    "mysql-shared" (as distributed by SuSE) to allow easy upgrading (bug#22081).

ChangeSet@1.2303.85.10, 2006-11-16 14:49:41+03:00, kroki@moonlight.intranet +2 -0
  Fix after manual merge.

  mysql-test/r/func_str.result@1.130, 2006-11-16 14:49:35+03:00, kroki@moonlight.intranet +14 -15
    Fix after manual merge.

  mysql-test/t/func_str.test@1.97, 2006-11-16 14:49:36+03:00, kroki@moonlight.intranet +14 -17
    Fix after manual merge.

ChangeSet@1.1810.2325.2, 2006-11-16 14:06:51+03:00, kroki@moonlight.intranet +4 -0
  Add 5.0 part of fix for bug 17047.

  mysql-test/r/func_str.result@1.110.4.1, 2006-11-16 14:06:48+03:00, kroki@moonlight.intranet +13 -0
    Add result for bug#17047: CHAR() and IN() can return NULL without
    signaling NULL result.

  mysql-test/t/func_str.test@1.92.2.1, 2006-11-16 14:06:48+03:00, kroki@moonlight.intranet +14 -0
    Add test case for bug#17047: CHAR() and IN() can return NULL without
    signaling NULL result.

  sql/item_strfunc.cc@1.261.15.1, 2006-11-16 14:06:48+03:00, kroki@moonlight.intranet +14 -0
    Add Item_str_func::fix_fields() implementation, and set maybe_null to
    TRUE if we are in the SQL mode that requires some functions to return
    null even if they normally do not.

  sql/item_strfunc.h@1.101.1.17, 2006-11-16 14:06:48+03:00, kroki@moonlight.intranet +3 -3
    Add declaration of Item_str_func::fix_fields().
    Do not reset maybe_null in Item_func_char::fix_length_and_dec().

ChangeSet@1.1616.2853.1, 2006-11-16 13:21:38+03:00, kroki@moonlight.intranet +3 -0
  BUG#17047: CHAR() and IN() can return NULL without signaling NULL result
  
  The problem was that some functions (namely IN() starting with 4.1, and
  CHAR() starting with 5.0) were returning NULL in certain conditions,
  while they didn't set their maybe_null flag.  Because of that there could
  be some problems with 'IS NULL' check, and statements that depend on the
  function value domain, like CREATE TABLE t1 SELECT 1 IN (2, NULL);.
  
  The fix is to set maybe_null correctly.

  mysql-test/r/func_in.result@1.12.1.7, 2006-11-16 13:21:36+03:00, kroki@moonlight.intranet +8 -0
    Add result for bug#17047: CHAR() and IN() can return NULL without
    signaling NULL result.

  mysql-test/t/func_in.test@1.14.1.5, 2006-11-16 13:21:36+03:00, kroki@moonlight.intranet +21 -1
    Add test case for bug#17047: CHAR() and IN() can return NULL without
    signaling NULL result.

  sql/item_cmpfunc.cc@1.111.23.14, 2006-11-16 13:21:36+03:00, kroki@moonlight.intranet +0 -1
    Remove assignment to maybe_null, as it was already set in fix_fields()
    based on all arguments, not only on the first.

ChangeSet@1.2303.84.2, 2006-11-15 17:55:17-08:00, brian@zim.(none) +5 -0
  This finished the bzero() on varchar patch I wrote a few months ago. It also completes the data_length() method I added to Fields to determine the length of data for a particular data type. I have many uses for this :)

  mysql-test/r/archive.result@1.24, 2006-11-15 17:55:13-08:00, brian@zim.(none) +27 -0
    Added test case results. 

  mysql-test/t/archive.test@1.25, 2006-11-15 17:55:13-08:00, brian@zim.(none) +21 -0
    Added varchar specifc test case. 

  sql/field.cc@1.349.1.1, 2006-11-15 17:55:13-08:00, brian@zim.(none) +2 -2
    Just corrected interface. 

  sql/field.h@1.190.2.1, 2006-11-15 17:55:13-08:00, brian@zim.(none) +3 -3
    Completed data_length() call.

  storage/archive/ha_archive.cc@1.110, 2006-11-15 17:55:13-08:00, brian@zim.(none) +40 -24
    Corrected warnings, and finished bzero() patch

ChangeSet@1.2303.85.8, 2006-11-15 15:51:22-07:00, malff@weblab.(none) +4 -0
  Made the test deterministic, so they don't depend on the SF cache.

  mysql-test/r/sp.result@1.234, 2006-11-15 15:51:20-07:00, malff@weblab.(none) +0 -8
    Made the test deterministic, so they don't depend on the SF cache.

  mysql-test/r/sp_gis.result@1.2, 2006-11-15 15:51:20-07:00, malff@weblab.(none) +0 -3
    Made the test deterministic, so they don't depend on the SF cache.

  mysql-test/t/sp.test@1.206, 2006-11-15 15:51:20-07:00, malff@weblab.(none) +14 -0
    Made the test deterministic, so they don't depend on the SF cache.

  mysql-test/t/sp_gis.test@1.2, 2006-11-15 15:51:20-07:00, malff@weblab.(none) +4 -0
    Made the test deterministic, so they don't depend on the SF cache.

ChangeSet@1.1616.2849.10, 2006-11-15 20:27:02+01:00, joerg@trift2. +1 -0
  support-files/mysql.spec.sh  :  Use "report features" in the first test run.

  support-files/mysql.spec.sh@1.83.1.42, 2006-11-15 20:27:00+01:00, joerg@trift2. +13 -2
    Switch from "make test*" to explicit calls of the test suite, so that "report features" can be used.

ChangeSet@1.1810.2321.8, 2006-11-15 19:17:52+01:00, lars@mysql.com +1 -0
  Dummy push to force pushbuild retest

  mysql-test/t/disabled.def@1.2.4.15, 2006-11-15 19:17:48+01:00, lars@mysql.com +0 -1
    Dummy push

ChangeSet@1.2303.90.2, 2006-11-15 16:49:03+01:00, mats@romeo.(none) +1 -0
  Changeset to fix a valgrind error in the main tree.
  Adding class to handle temporary allocate of memory during write of rows.
  Eliminating cut'n-paste error between THD::binlog_{write,update,delete}_row().

  sql/sql_class.cc@1.295.1.1, 2006-11-15 16:48:56+01:00, mats@romeo.(none) +159 -67
    Adding class to handle temporary allocate of memory during write of rows.
    Eliminating cut'n-paste error between THD::binlog_{write,update,delete}_row().

ChangeSet@1.2303.87.8, 2006-11-15 13:05:13+01:00, lars@mysql.com +1 -0
  disabled test case that is still disabled in main

  mysql-test/t/disabled.def@1.212, 2006-11-15 13:05:11+01:00, lars@mysql.com +1 -1
    disabled test case that is still disabled in main

ChangeSet@1.2324, 2006-11-15 12:05:05+01:00, mskold@mysql.com +3 -0
  bug #24301  Next command hangs in mysql after creating new NDB table via LIKE operation.: Locked mutex LOCK_open during operation

  mysql-test/r/ndb_basic.result@1.47, 2006-11-15 12:04:54+01:00, mskold@mysql.com +15 -0
    bug #24301  Next command hangs in mysql after creating new NDB table via LIKE operation.: Locked mutex LOCK_open during operation

  mysql-test/t/ndb_basic.test@1.46, 2006-11-15 12:04:54+01:00, mskold@mysql.com +9 -0
    bug #24301  Next command hangs in mysql after creating new NDB table via LIKE operation.: Locked mutex LOCK_open during operation

  sql/sql_table.cc@1.373, 2006-11-15 12:04:53+01:00, mskold@mysql.com +2 -1
    bug #24301  Next command hangs in mysql after creating new NDB table via LIKE operation.: Locked mutex LOCK_open during operation

ChangeSet@1.1616.2847.8, 2006-11-15 12:53:07+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +2 -0
  bug#19402 SQL close to the size of the max_allowed_packet fails on the slave
  
  mending windows test.

  mysql-test/r/rpl_packet.result@1.3, 2006-11-15 12:53:03+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +0 -2
    results changed

  mysql-test/t/rpl_packet.test@1.3, 2006-11-15 12:53:03+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +0 -4
    removing because of the connection with windows client can be lost instead of
    the error code back (source: manual).

ChangeSet@1.2323, 2006-11-15 11:38:22+01:00, mskold@mysql.com +1 -0
  bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:added error printout to log

  sql/ha_ndbcluster_binlog.cc@1.85.1.2, 2006-11-15 11:38:12+01:00, mskold@mysql.com +5 -3
    bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:added error printout to log

ChangeSet@1.2322, 2006-11-15 11:13:49+01:00, mskold@mysql.com +6 -0
  bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:disable distributed drop database if a database contains local tables

  mysql-test/r/ndb_multi.result@1.15, 2006-11-15 11:12:07+01:00, mskold@mysql.com +24 -0
    bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:disable distributed drop database if a database contains local tables

  mysql-test/t/ndb_multi.test@1.17, 2006-11-15 11:12:42+01:00, mskold@mysql.com +37 -0
    bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:disable distributed drop database if a database contains local tables

  sql/ha_ndbcluster_binlog.cc@1.85.1.1, 2006-11-15 11:12:07+01:00, mskold@mysql.com +46 -8
    bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:disable distributed drop database if a database contains local tables

  sql/ha_ndbcluster_binlog.h@1.19, 2006-11-15 11:12:07+01:00, mskold@mysql.com +1 -0
    bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:disable distributed drop database if a database contains local tables

  sql/sql_show.cc@1.373.1.2, 2006-11-15 11:12:07+01:00, mskold@mysql.com +0 -6
    bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:disable distributed drop database if a database contains local tables

  sql/sql_show.h@1.3, 2006-11-15 11:12:07+01:00, mskold@mysql.com +9 -0
    bug #21495  Alter table from x engine to ndb and back can cause issue with drop DB:disable distributed drop database if a database contains local tables

ChangeSet@1.2303.93.1, 2006-11-15 13:43:02+08:00, Justin.He@dev3-47.dev.cn.tlan +1 -0
  BUG#23576, Table is created although tablespace does not exist

  sql/ha_ndbcluster.cc@1.357.6.2, 2006-11-15 13:42:57+08:00, Justin.He@dev3-47.dev.cn.tlan +8 -0
    if use tablespace, that also means store on disk, so pass tablespace's name to ndb,
    then will get a error from ndb and its cause;

ChangeSet@1.2303.92.1, 2006-11-14 19:34:16-07:00, malff@weblab.(none) +10 -0
  Bug#18239 (Possible to overload internal functions with stored functions)
  Bug#21025 (misleading error message when creating functions named 'x', or 'y')
  Bug#22619 (Spaces considered harmful)
  
  This change contains a fix to report warnings or errors, and multiple tests
  cases.
  
  Before this fix, name collisions between:
  - Native functions
  - User Defined Functions
  - Stored Functions
  were not systematically reported, leading to confusing behavior.
  
  I) Native / User Defined Function
  
  Before this fix, is was possible to create a UDF named "foo", with the same
  name as a native function "foo", but it was impossible to invoke the UDF,
  since the syntax "foo()" always refer to the native function.
  After this fix, creating a UDF fails with an error if there is a name
  collision with a native function.
  
  II) Native / Stored Function
  
  Before this fix, is was possible to create a SF named "db.foo", with the same
  name as a native function "foo", but this was confusing since the syntax
  "foo()" would refer to the native function. To refer to the Stored Function,
  the user had to use the "db.foo()" syntax.
  After this fix, creating a Stored Function reports a warning if there is a
  name collision with a native function.
  
  III) User Defined Function / Stored Function
  
  Before this fix, creating a User Defined Function "foo" and a Stored Function
  "db.foo" are mutually exclusive operations. Whenever the second function is
  created, an error is reported. However, the test suite did not cover this
  behavior.
  After this fix, the  behavior is unchanged, and is now covered by test cases.
  
  Note that the code change in this patch depends on the fix for Bug 21114.

  mysql-test/r/sp.result@1.233, 2006-11-14 19:34:12-07:00, malff@weblab.(none) +116 -0
    New test cases.

  mysql-test/r/sp_gis.result@1.1, 2006-11-14 19:34:13-07:00, malff@weblab.(none) +33 -0
    New test cases.

  mysql-test/r/sp_gis.result@1.0, 2006-11-14 19:34:13-07:00, malff@weblab.(none) +0 -0

  mysql-test/r/udf.result@1.8.1.1, 2006-11-14 19:34:12-07:00, malff@weblab.(none) +16 -0
    New test cases.

  mysql-test/t/sp.test@1.195.1.16, 2006-11-14 19:34:12-07:00, malff@weblab.(none) +106 -0
    New test cases.

  mysql-test/t/sp_gis.test@1.1, 2006-11-14 19:34:13-07:00, malff@weblab.(none) +35 -0
    New test cases.

  mysql-test/t/sp_gis.test@1.0, 2006-11-14 19:34:13-07:00, malff@weblab.(none) +0 -0

  mysql-test/t/udf.test@1.9.1.1, 2006-11-14 19:34:12-07:00, malff@weblab.(none) +36 -0
    New test cases.

  sql/share/errmsg.txt@1.134, 2006-11-14 19:34:13-07:00, malff@weblab.(none) +2 -0
    Name collisions with native functions.

  sql/sql_lex.cc@1.206.1.1, 2006-11-14 19:34:12-07:00, malff@weblab.(none) +6 -0
    Name collisions with native functions.

  sql/sql_lex.h@1.245.2.6, 2006-11-14 19:34:12-07:00, malff@weblab.(none) +2 -0
    Name collisions with native functions.

  sql/sql_yacc.yy@1.513.1.1, 2006-11-14 19:34:12-07:00, malff@weblab.(none) +57 -3
    Name collisions with native functions.

ChangeSet@1.1810.2221.27, 2006-11-14 19:50:44+03:00, evgen@moonbone.local +3 -0
  Bug#20045: Server crash on INSERT ... SELECT ... FROM non-mergeable view 
  
  The regression is caused by the fix for bug 14767. When INSERT ... SELECT
  used a view in the SELECT list that was not inlined, and there was an 
  active transaction, the server could crash in Query_cache::invalidate.
  
  On INSERT ... SELECT only the table being inserted into is invalidated.
  Thus views that can't be inlined are skipped from invalidation.
  
  The bug manifests itself in two ways so there is 2 test cases.
  One checks that the only the table being inserted into is invalidated.
  And the second one checks that there is no crash on INSERT ... SELECT.

  mysql-test/r/query_cache.result@1.65.6.1, 2006-11-14 19:46:59+03:00, evgen@moonbone.local +48 -0
    Added a test case for bug#20045: Server crash on INSERT ... SELECT ... FROM non-mergeable view

  mysql-test/t/query_cache.test@1.49.4.1, 2006-11-14 19:46:21+03:00, evgen@moonbone.local +29 -0
    Added a test case for bug#20045: Server crash on INSERT ... SELECT ... FROM non-mergeable view

  sql/sql_parse.cc@1.426.117.1, 2006-11-14 19:47:14+03:00, evgen@moonbone.local +4 -0
    Bug#20045: Server crash on INSERT ... SELECT ... FROM non-mergeable view 
    On INSERT ... SELECT only the table being inserted into is invalidated.

ChangeSet@1.1616.2849.9, 2006-11-14 14:44:20+01:00, df@kahlann.erinye.com +1 -0
  make_binary_distribution should of course also copy .test files from mysql-test/include

  scripts/make_binary_distribution.sh@1.55.8.7, 2006-11-14 14:44:19+01:00, df@kahlann.erinye.com +1 -0
    make_binary_distribution should of course also copy .test files from mysql-test/include

ChangeSet@1.1616.2849.8, 2006-11-14 14:29:05+01:00, df@kahlann.erinye.com +1 -0
  make dist now copies .test files in mysql-test/include

  mysql-test/Makefile.am@1.39.1.17, 2006-11-14 14:29:03+01:00, df@kahlann.erinye.com +2 -0
    add include/*.test to dist-hook and install-data-local targets to include the three .test files in mysql-test/include with make dist

ChangeSet@1.1810.2322.2, 2006-11-14 13:37:10+01:00, joerg@mysql.com +1 -0
  Raise version number after cloning 5.0.30

  configure.in@1.245.1.166, 2006-11-14 13:36:49+01:00, joerg@mysql.com +2 -2
    Raise version number after cloning 5.0.30

ChangeSet@1.1810.2321.3, 2006-11-14 12:48:17+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +2 -0
  bug#19402 SQL close to the size of the max_allowed_packet fails on the slave
  
  ver 5.0 and 5.1 refinement.
  adding to the MAX_SIZE_LOG_EVENT_STATUS estimation status vars and 
  EXECUTE_LOAD_QUERY_EXTRA_HEADER_LEN

  sql/log_event.cc@1.174.1.41, 2006-11-14 12:48:12+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +1 -0
    assertion on size of status vars

  sql/log_event.h@1.122.1.4, 2006-11-14 12:48:12+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +14 -4
    MAX_SIZE_LOG_EVENT_STATUS as the max bytes of contribution of status vars into repl
    message; MAX_SIZE_LOG_EVENT_STATUS is getting more wrt to 4.1 version.

ChangeSet@1.2303.91.1, 2006-11-14 09:33:43+08:00, Justin.He@dev3-47.dev.cn.tlan +1 -0
  BUG#19808, Online config. Wrong error message if DataMemory less than a data on cluster

  storage/ndb/src/kernel/blocks/dbdict/Dbdict.cpp@1.103.1.1, 2006-11-14 09:33:40+08:00, Justin.He@dev3-47.dev.cn.tlan +14 -2
    add err message when error occur

ChangeSet@1.1810.1698.180, 2006-11-13 15:40:22-07:00, malff@weblab.(none) +6 -0
  Bug#23703 (DROP TRIGGER needs an IF EXISTS)
  
  This change set implements the DROP TRIGGER IF EXISTS functionality.
  
  This fix is considered a bug and not a feature, because without it,
  there is no known method to write a database creation script that can create
  a trigger without failing, when executed on a database that may or may not
  contain already a trigger of the same name.
  
  Implementing this functionality closes an orthogonality gap between triggers
  and stored procedures / stored functions (which do support the DROP IF
  EXISTS syntax).
  
  In sql_trigger.cc, in mysql_create_or_drop_trigger,
  the code has been reordered to:
  - perform the tests that do not depend on the file system (access()),
  - get the locks (wait_if_global_read_lock, LOCK_open)
  - call access()
  - perform the operation
  - write to the binlog
  - unlock (LOCK_open, start_waiting_global_read_lock)
  
  This is to ensure that all the code that depends on the presence of the
  trigger file is executed in the same critical section,
  and prevents race conditions similar to the case fixed by Bug 14262 :
  
  - thread 1 executes DROP TRIGGER IF EXISTS, access() returns a failure
  - thread 2 executes CREATE TRIGGER
  - thread 2 logs CREATE TRIGGER
  - thread 1 logs DROP TRIGGER IF EXISTS
  
  The patch itself is based on code contributed by the MySQL community,
  under the terms of the Contributor License Agreement (See Bug 18161).

  mysql-test/r/rpl_trigger.result@1.4.1.7, 2006-11-13 15:38:34-07:00, malff@weblab.(none) +27 -0
    DROP TRIGGER IF EXISTS

  mysql-test/r/trigger.result@1.29.1.21, 2006-11-13 15:38:34-07:00, malff@weblab.(none) +22 -0
    DROP TRIGGER IF EXISTS

  mysql-test/t/rpl_trigger.test@1.4.1.6, 2006-11-13 15:38:34-07:00, malff@weblab.(none) +37 -0
    DROP TRIGGER IF EXISTS

  mysql-test/t/trigger.test@1.34.1.22, 2006-11-13 15:38:34-07:00, malff@weblab.(none) +28 -0
    DROP TRIGGER IF EXISTS

  sql/sql_trigger.cc@1.35.1.24, 2006-11-13 15:38:34-07:00, malff@weblab.(none) +77 -27
    DROP TRIGGER IF EXISTS

  sql/sql_yacc.yy@1.371.1.124, 2006-11-13 15:38:34-07:00, malff@weblab.(none) +3 -2
    DROP TRIGGER IF EXISTS

ChangeSet@1.2303.90.1, 2006-11-13 20:44:22+01:00, msvensson@neptunus.(none) +1 -0
  Modify search path for mysql_client_test to look in "bin" not to look for "bin",
  this caused mysql_client_test to fail when running from binary dist 
  TAG: mysql-5.1.13

  mysql-test/mysql-test-run.pl@1.232, 2006-11-13 20:44:16+01:00, msvensson@neptunus.(none) +1 -1
    Modify search path for mysql_client_test to look in "bin" not to look for "bin"

ChangeSet@1.2303.89.1, 2006-11-13 15:42:01+01:00, mats@romeo.(none) +2 -0
  Fixing problem in injector code making NDB tests fire an assertion.

  sql/ha_ndbcluster_binlog.cc@1.84.1.1, 2006-11-13 15:41:56+01:00, mats@romeo.(none) +0 -1
    Removing extreneous setting of current_stmt_binlog_row_based.

  sql/rpl_injector.cc@1.6, 2006-11-13 15:41:56+01:00, mats@romeo.(none) +2 -0
    Since current_stmt_binlog_row_based is reset as the end of a transaction
    it needs to be set at the beginning of a transaction.

ChangeSet@1.2303.85.6, 2006-11-13 15:28:23+01:00, andrey@example.com +1 -0
  give a bit more time for the execution of the events

  mysql-test/t/events_bugs.test@1.20, 2006-11-13 15:28:16+01:00, andrey@example.com +1 -1
    give a bit more time for execution

ChangeSet@1.2303.87.3, 2006-11-13 14:50:38+01:00, bteam@mysql.com +1 -0
  configure.in:
    Raise version number after cloning 5.1.13

  configure.in@1.396.1.2, 2006-11-13 14:49:55+01:00, bteam@mysql.com +1 -1
    Raise version number after cloning 5.1.13

ChangeSet@1.1810.2221.26, 2006-11-13 15:37:04+02:00, gkodinov@macbook.gmz +1 -0
  merge 4.1->5.0 of the test suite for bug 19216 

  mysql-test/t/mysql.test@1.4.6.1, 2006-11-13 15:36:57+02:00, gkodinov@macbook.gmz +18 -0
    merge 4.1->5.0 of the test suite for bug 19216 

ChangeSet@1.2320, 2006-11-13 12:56:45+01:00, mskold@mysql.com +3 -0
  bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values. 5.1 re-implementation

  mysql-test/r/ndb_index_unique.result@1.31, 2006-11-13 12:56:16+01:00, mskold@mysql.com +34 -1
    bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values. 5.1 re-implementation

  sql/ha_ndbcluster.cc@1.362, 2006-11-13 12:56:16+01:00, mskold@mysql.com +213 -35
    bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values. 5.1 re-implementation

  sql/ha_ndbcluster.h@1.157, 2006-11-13 12:56:15+01:00, mskold@mysql.com +19 -3
    bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values. 5.1 re-implementation

ChangeSet@1.2303.85.5, 2006-11-13 14:30:12+03:00, dlenev@mockturtle.local +1 -0
  Small adjustment after merging fix for bug#23651 "Server crashes when
  trigger which uses stored function invoked from different connections"
  into 5.1.

  sql/item_func.cc@1.331, 2006-11-13 14:30:10+03:00, dlenev@mockturtle.local +1 -1
    After merge fix. Starting from 5.1 TABLE_SHARE for dummy TABLE object
    is also allocated in Item_func_sp constructor, so we use TABLE::alias
    instead of TABLE::s to check that dummy TABLE was not initialized yet
    or requires re-initialization.

ChangeSet@1.2303.76.7, 2006-11-13 13:20:35+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +1 -0
  WL#3368 mixed binlog_format default
    
    An amendment for parsing argument in case NDB is compiled and active.
    NDB switches from mixed to row-based and back per each query. The previous patch
    was not aware of such behaviour and made exceptional assingment to row-based when
    no command line arg --binlog-format provided.
    
    Removing #if HAVE_NDB_BINLOG block alltogether: ndb supports mixed and if server 
    was build without NDB using binlog nothing to care.
    Test for this piece of code is rather specific. While there is active bug23110
    ndb_alter_table and some other should fail if no explict --binlog-format is given:
    mysql-test-run ndb_alter_table

  sql/mysqld.cc@1.583.8.3, 2006-11-13 13:20:31+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +0 -5
    ndb accepts mixed binlog_format switching to row internally via calling
    thd->set_binlog_format_row_if_mixed at the beginning and careful
    the->reset_current_stmt_binlog_row_based(). There is 
    bug#23110 to implement it all carefully for DDL.

ChangeSet@1.2303.87.2, 2006-11-13 12:10:12+01:00, joerg@trift2. +1 -0
  support-files/mysql.spec.sh  :  Make the server report its features in the first test run.
  TAG: clone-5.1.13-build

  support-files/mysql.spec.sh@1.170, 2006-11-13 12:10:08+01:00, joerg@trift2. +8 -2
    1) Ensure that the features of each server built are reported in the first test run it takes.
    2) Add "--with-partition" to the change log (missing on previous push).

ChangeSet@1.1616.2852.1, 2006-11-13 12:28:55+02:00, gkodinov@macbook.gmz +4 -0
  Bug #19216: Client crashes on long SELECT
   The server sends a number of columns to the client.
   It uses a limited "fast" function for that instead of the
   general one. This fast function cannot send numbers larger 
   than 2 bytes. 
   This causes the client to expect smaller number of columns. 
   The client writes outside of the allocated memory buffer 
   as a result.
   Fixed the server to use the general function to send column
   count.
   Fixed the client to check the column count before writing
   column data. 

  mysql-test/t/mysql_client.test@1.2.3.1, 2006-11-13 12:28:49+02:00, gkodinov@macbook.gmz +18 -0
    Bug #19216: Client crashes on long SELECT
     - test case

  sql-common/client.c@1.46.8.1, 2006-11-13 12:28:51+02:00, gkodinov@macbook.gmz +2 -0
    Bug #19216: Client crashes on long SELECT
     - fixed the client to check for older servers (without the fix).

  sql/protocol.cc@1.56.1.50, 2006-11-13 12:28:50+02:00, gkodinov@macbook.gmz +9 -9
    Bug #19216: Client crashes on long SELECT
     - renamed the function for bether comprehention
       and made it local
     - used the right (non-local) function to transfer 
       the column count in Protocol::send_fields

  sql/protocol.h@1.15.1.8, 2006-11-13 12:28:50+02:00, gkodinov@macbook.gmz +0 -1
    Bug #19216: Client crashes on long SELECT
     - made optimized net_store_length local

ChangeSet@1.2303.87.1, 2006-11-13 11:10:27+01:00, joerg@trift2. +1 -0
  Build the generic RPMs including the "partition" feature. bug#23949

  support-files/mysql.spec.sh@1.169, 2006-11-13 11:10:23+01:00, joerg@trift2. +2 -0
    Add the "partition" feature to the server configuration, whether debugging or not.
    (bug#23949)

ChangeSet@1.1810.2320.1, 2006-11-13 11:10:49+03:00, dlenev@mockturtle.local +3 -0
  Fix for bug bug#23651 "Server crashes when trigger which uses
  stored function invoked from different connections".
  
  Invocation of trigger which was using stored function from different
  connections caused server crashes (for non-debug server this happened
  in highly concurrent environment, but debug server failed on assertion
  in relatively simple scenario).
  
  Item_func_sp was not safe to use in triggers (in other words for
  re-execution from different threads) as artificial TABLE object
  pointed by Item_func_sp::dummy_table referenced incorrect THD
  object. To fix the problem we force re-initialization of this
  object for each re-execution of statement.

  mysql-test/r/trigger.result@1.29.1.20, 2006-11-13 11:10:48+03:00, dlenev@mockturtle.local +15 -0
    Added test for bug#23651 "Server crashes when trigger which uses
    stored function invoked from different connections".

  mysql-test/t/trigger.test@1.34.1.21, 2006-11-13 11:10:48+03:00, dlenev@mockturtle.local +20 -0
    Added test for bug#23651 "Server crashes when trigger which uses
    stored function invoked from different connections".

  sql/item_func.cc@1.270.24.4, 2006-11-13 11:10:48+03:00, dlenev@mockturtle.local +1 -0
    To make Item_func_sp safe for usage in triggers (in other words safe
    for re-execution in different threads) we need to ensure that artificial
    TABLE object pointed by Item_func_sp::dummy_table references correct
    THD object. To achieve this we simply force its re-initialization for
    each re-execution of statement.

ChangeSet@1.2303.1.17, 2006-11-13 15:31:59+08:00, Justin.He@dev3-47.dev.cn.tlan +5 -0
  Bug#19203, Different error reports for similar cases - unable allocate memory

  storage/ndb/src/kernel/blocks/dbacc/DbaccInit.cpp@1.21.1.1, 2006-11-13 15:29:41+08:00, Justin.He@dev3-47.dev.cn.tlan +2 -1
    if malloc failed, it will show the parameter's name 

  storage/ndb/src/kernel/blocks/dbtup/DbtupGen.cpp@1.29.1.2, 2006-11-13 15:29:41+08:00, Justin.He@dev3-47.dev.cn.tlan +5 -2
    if malloc failed, it will show the parameter's name

  storage/ndb/src/kernel/vm/ArrayPool.hpp@1.14, 2006-11-13 15:29:41+08:00, Justin.He@dev3-47.dev.cn.tlan +1 -1
    reduce err message, or else some of it will be cut

  storage/ndb/src/kernel/vm/SimulatedBlock.cpp@1.34, 2006-11-13 15:29:42+08:00, Justin.He@dev3-47.dev.cn.tlan +11 -3
    add the feature which it can display the parameter's name if malloc failed

  storage/ndb/src/kernel/vm/SimulatedBlock.hpp@1.26, 2006-11-13 15:29:42+08:00, Justin.He@dev3-47.dev.cn.tlan +1 -1
    add an input argument which is the ID of a parameter

ChangeSet@1.1616.2847.6, 2006-11-12 20:01:58+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +3 -0
  bug#19402 SQL close to the size of the max_allowed_packet fails on the slave
  comments are fixed as was suggested in reviews.

  sql/log_event.h@1.90.1.11, 2006-11-12 20:01:55+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +4 -2
    fixing comments

  sql/slave.cc@1.188.1.96, 2006-11-12 20:01:56+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +11 -2
    fixing comments

  sql/sql_repl.cc@1.102.1.38, 2006-11-12 20:01:56+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +5 -1
    fixing comments

ChangeSet@1.1616.2847.5, 2006-11-12 13:38:13+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +1 -0
  Correcting BUG/WL identifier extraction to allow multiple references to auxilary
  bugs/wls in cset's comments. The targetted BUG's or WL's identifier must be specified
  the first in the comments. The referred bugs wls can be typed in same as the targeted
  clickable format.
  If the the target of the fix is a WL and there are some references to bugs
  then the first found reference is regarded as "co-target" so that the bug's identifier
  comes up on the subject line along with the WL's and commit mail will update
  the bug page. The latter feature can be disarmed (if there is no need to update
  the referred bug's page) with typing the first a pseudo-bug pattern (bug#0).
  
  This paticular cset will generate subject line containing bug#0 (as it was the first
  referred) whereas the old version would put in the subject line the last referred
  pattern (e.g bug#2147483648).

  BitKeeper/triggers/post-commit@1.22.1.13, 2006-11-12 13:38:11+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +11 -3
    fixing greedyness of old extraction

ChangeSet@1.1616.2849.7, 2006-11-11 14:12:30+01:00, kent@mysql.com +1 -0
  mysql-test-run.pl:
    Test for base directory when a RPM install corrected

  mysql-test/mysql-test-run.pl@1.8.14.3, 2006-11-11 14:04:39+01:00, kent@mysql.com +14 -6
    Test for base directory when a RPM install corrected

ChangeSet@1.2303.57.3, 2006-11-10 17:21:59-08:00, brian@zim.(none) +17 -0
  This patch fixes the example engine, the example parser, and the example daemon to compile. AKA You can now test that the interface is actually working :)

  configure.in@1.385.6.1, 2006-11-10 17:21:53-08:00, brian@zim.(none) +0 -4
    Removed unneeded call to old plugin syntax.

  include/mysql/plugin.h@1.21.1.1, 2006-11-10 17:21:53-08:00, brian@zim.(none) +20 -2
    Updates for daemon type (and fixed warning on declare end).

  plugin/daemon_example/AUTHORS@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +1 -0
    New BitKeeper file ``plugin/daemon_example/AUTHORS''

  plugin/daemon_example/AUTHORS@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/daemon_example/ChangeLog@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +2 -0
    New BitKeeper file ``plugin/daemon_example/ChangeLog''

  plugin/daemon_example/ChangeLog@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/daemon_example/Makefile.am@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +21 -0
    New BitKeeper file ``plugin/daemon_example/Makefile.am''

  plugin/daemon_example/Makefile.am@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/daemon_example/NEWS@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +2 -0
    New BitKeeper file ``plugin/daemon_example/NEWS''

  plugin/daemon_example/NEWS@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/daemon_example/README@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +8 -0
    New BitKeeper file ``plugin/daemon_example/README''

  plugin/daemon_example/README@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/daemon_example/configure.in@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +9 -0
    New BitKeeper file ``plugin/daemon_example/configure.in''

  plugin/daemon_example/configure.in@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/daemon_example/daemon_example.c@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +89 -0
    New BitKeeper file ``plugin/daemon_example/daemon_example.c''

  plugin/daemon_example/daemon_example.c@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/daemon_example/plug.in@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +3 -0
    New BitKeeper file ``plugin/daemon_example/plug.in''

  plugin/daemon_example/plug.in@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/fulltext/Makefile.am@1.8, 2006-11-10 17:21:53-08:00, brian@zim.(none) +2 -2
    Updated names so that we can install and test it.

  plugin/fulltext/plug.in@1.1, 2006-11-10 17:21:54-08:00, brian@zim.(none) +3 -0
    Added plug.in file so that we compile fulltext example!

  plugin/fulltext/plug.in@1.0, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -0

  plugin/fulltext/plugin_example.c@1.15, 2006-11-10 17:21:53-08:00, brian@zim.(none) +2 -2
    Fixed wrong call.

  sql/mysqld.cc@1.587.1.1, 2006-11-10 17:21:53-08:00, brian@zim.(none) +0 -7
    Removed old have_example (we don't need it any longer).

  sql/set_var.cc@1.192.4.2, 2006-11-10 17:21:53-08:00, brian@zim.(none) +0 -3
    Removed old have_example

  sql/sql_plugin.cc@1.36.1.1, 2006-11-10 17:21:53-08:00, brian@zim.(none) +12 -5
    Added support for DAEMON type (just an internal raw plugin)

  storage/example/plug.in@1.4, 2006-11-10 17:21:54-08:00, brian@zim.(none) +0 -1
    Removed example static build so that we can test dynamic engines

ChangeSet@1.2303.83.1, 2006-11-10 17:22:43+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +2 -0
  Bug #24190  many exportable definitions of field_in_record_is_null
  
  mysql had several(2) exportable definitions of field_in_record_is_null function.
  
  Fixed with adding static.

  storage/federated/ha_federated.cc@1.83.1.1, 2006-11-10 17:22:36+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +1 -1
    made static

  storage/innobase/handler/ha_innodb.cc@1.306.2.1, 2006-11-10 17:22:36+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +1 -1
    made static

ChangeSet@1.1616.2851.1, 2006-11-10 13:12:08+01:00, df@kahlann.erinye.com +2 -0
  add --report-features to mysql-test-run.pl

  mysql-test/include/report-features.test@1.1, 2006-11-10 13:12:07+01:00, df@kahlann.erinye.com +11 -0
    test file showing server features for mysql-test-run.pl --report-features

  mysql-test/include/report-features.test@1.0, 2006-11-10 13:12:07+01:00, df@kahlann.erinye.com +0 -0

  mysql-test/mysql-test-run.pl@1.8.14.1, 2006-11-10 13:12:07+01:00, df@kahlann.erinye.com +49 -3
    add --report-features

ChangeSet@1.2303.36.7, 2006-11-10 12:43:44+02:00, gkodinov@macbook.gmz +2 -0
  fixed bad 5.0->5.1 merge 

  mysql-test/t/disabled.def@1.206.4.2, 2006-11-10 12:43:35+02:00, gkodinov@macbook.gmz +0 -1
    fixed bad 5.0->5.1 merge 

  sql/item.cc@1.214.1.3, 2006-11-10 12:43:36+02:00, gkodinov@macbook.gmz +1 -2
    fixed bad 5.0->5.1 merge 

ChangeSet@1.1810.2317.1, 2006-11-10 07:21:10+03:00, ted@ted.mysql.internal +1 -0
  Memory allocation bug fixed

  client/mysql_upgrade.c@1.6.1.4, 2006-11-10 07:21:07+03:00, ted@ted.mysql.internal +16 -21
    Memory allocation bug fixed

ChangeSet@1.1616.2849.2, 2006-11-10 02:22:33+01:00, kent@mysql.com +1 -0
  mysql-test-run.sh:
    Added --force-restart pseudo server argument to shell version as well

  mysql-test/mysql-test-run.sh@1.208.1.62, 2006-11-10 02:20:47+01:00, kent@mysql.com +5 -2
    Added --force-restart pseudo server argument to shell version as well

ChangeSet@1.1616.2809.3, 2006-11-09 17:43:31+01:00, joerg@trift2. +1 -0
  mysql-test/install_test_db.sh
      Adapt to the different path of the server program, if installation was by RPM.
      Missing in the first changeset for bug#17194.

  mysql-test/install_test_db.sh@1.24.1.10, 2006-11-09 17:43:29+01:00, joerg@trift2. +12 -5
    Adapt to the different path of the server program, if installation was by RPM.
    Missing in the first changeset for bug#17194.

ChangeSet@1.1810.2315.1, 2006-11-09 16:55:42+02:00, gkodinov@macbook.gmz +4 -0
  Bug #20191: getTableName gives wrong or inconsistent result when using VIEWs
  
  When compiling GROUP BY Item_ref instances are dereferenced in 
  setup_copy_fields(), i.e. replaced with the corresponding Item_field 
  (if they point to one) or Item_copy_string for the other cases.
  Since the Item_ref (in the Item_field case) is no longer used the information
  about the aliases stored in it is lost.   
  Fixed by preserving the column, table and DB alias on dereferencing Item_ref

  mysql-test/r/metadata.result@1.15, 2006-11-09 16:55:34+02:00, gkodinov@macbook.gmz +34 -0
    Bug #20191: getTableName gives wrong or inconsistent result when using VIEWs
     - test case

  mysql-test/t/metadata.test@1.6, 2006-11-09 16:55:35+02:00, gkodinov@macbook.gmz +19 -0
    Bug #20191: getTableName gives wrong or inconsistent result when using VIEWs
     - test case

  sql/item.cc@1.113.1.128, 2006-11-09 16:55:36+02:00, gkodinov@macbook.gmz +4 -0
    Bug #20191: getTableName gives wrong or inconsistent result when using VIEWs
     - use the table and db name to fill up the metadata for columns

  sql/sql_select.cc@1.312.114.1, 2006-11-09 16:55:37+02:00, gkodinov@macbook.gmz +9 -2
    Bug #20191: getTableName gives wrong or inconsistent result when using VIEWs
     - preserve the field, table and DB name on dereferencing an Item_ref

ChangeSet@1.2316.1.1, 2006-11-10 01:08:35+11:00, stewart@willster.(none) +2 -0
  BUG#24143 Heavy file fragmentation with multiple ndbd on single fs
  
  If we have the XFS headers (at build time) we can use XFS specific ioctls
  (once testing the file is on XFS) to better allocate space.
  
  This dramatically improves performance of mysql-test-run cases as well:
  
  e.g.
  number of extents for ndb_dd_basic tablespaces and log files
  BEFORE this patch: 57, 13, 212, 95, 17, 113 
  WITH this patch  :  ALL 1 or 2 extents
  
  (results are consistent over multiple runs. BEFORE always has several files
  with lots of extents).
  
  As for timing of test run:
  BEFORE
  ndb_dd_basic                   [ pass ]         107727
  real    3m2.683s
  user    0m1.360s
  sys     0m1.192s
  
  AFTER
  ndb_dd_basic                   [ pass ]          70060
  real    2m30.822s
  user    0m1.220s
  sys     0m1.404s
  
  (results are again consistent over various runs)
  
  similar for other tests (BEFORE and AFTER):
  ndb_dd_alter                   [ pass ]         245360
  ndb_dd_alter                   [ pass ]         211632

  configure.in@1.385.5.1, 2006-11-10 01:08:33+11:00, stewart@willster.(none) +2 -0
    Check for XFS headers

  storage/ndb/src/kernel/blocks/ndbfs/AsyncFile.cpp@1.37, 2006-11-10 01:08:33+11:00, stewart@willster.(none) +16 -0
    If the XFS headers are installed, use the xfsctl(XFS_IOC_RESVSP64) call (a
    wrapper around ioctl) to tell the xfs file system how much space to reserve
    for this file.

ChangeSet@1.1810.2305.4, 2006-11-09 14:41:34+04:00, bar@mysql.com +8 -0
   Bug#21505 Create view - illegal mix of collation for operation 'UNION'
    
    The problem was that any VIEW columns had always implicit derivation.
    Fix: derivation is now copied from the original expression
    given in VIEW definition.
    For example:
    - a VIEW column which comes from a string constant
      in CREATE VIEW definition have now coercible derivation.
    - a VIEW column having COLLATE clause
      in CREATE VIEW definition have now explicit derivation.

  mysql-test/r/ctype_utf8.result@1.85.1.16, 2006-11-09 14:41:21+04:00, bar@mysql.com +26 -0
    Adding test case

  mysql-test/t/ctype_utf8.test@1.84.1.9, 2006-11-09 14:41:21+04:00, bar@mysql.com +24 -0
    Adding test case

  sql/field.cc@1.256.1.74, 2006-11-09 14:41:21+04:00, bar@mysql.com +1 -0
    Copying derivation from item to field.

  sql/field.h@1.153.14.1, 2006-11-09 14:41:22+04:00, bar@mysql.com +7 -0
    Adding derivation and methods to get/set it into Field.
    

  sql/item.cc@1.113.57.1, 2006-11-09 14:41:22+04:00, bar@mysql.com +1 -1
    Copying derivation from field to item.

  sql/item.h@1.183.13.1, 2006-11-09 14:41:22+04:00, bar@mysql.com +0 -12
    Moving "enum Derivation" declaration from item.h to mysql_priv.h
    

  sql/mysql_priv.h@1.290.74.1, 2006-11-09 14:41:22+04:00, bar@mysql.com +11 -0
    Moving "enum Derivation" declaration from item.h to mysql_priv.h

  sql/sql_select.cc@1.312.1.161, 2006-11-09 14:41:22+04:00, bar@mysql.com +4 -1
    Copying derivation from item to field in
    create_tmp_field_from_item() and create_tmp_field().
    

ChangeSet@1.2303.78.5, 2006-11-09 12:49:39+04:00, holyfoot@mysql.com +2 -0
  merging

  mysql-test/r/subselect3.result@1.2, 2006-11-09 12:49:36+04:00, holyfoot@mysql.com +16 -16
    'filtered' column added

  mysql-test/r/udf.result@1.10, 2006-11-09 12:49:36+04:00, holyfoot@mysql.com +12 -12
    'filtered' column added

ChangeSet@1.2303.78.4, 2006-11-09 12:41:15+04:00, holyfoot@mysql.com +1 -0
  merging

  mysql-test/r/subselect.result@1.148.1.9, 2006-11-09 12:41:11+04:00, holyfoot@mysql.com +2 -2
    result fixed

ChangeSet@1.2303.78.3, 2006-11-09 11:33:43+04:00, holyfoot@mysql.com +1 -0
  merging

  mysql-test/t/disabled.def@1.206.4.1, 2006-11-09 11:33:39+04:00, holyfoot@mysql.com +1 -0
    #22457 isn't fixed in 5.1 after merging from 5.0

ChangeSet@1.1616.2144.202, 2006-11-09 05:03:35+01:00, tsmith@quadxeon.mysql.com +1 -0
  This ChangeSet must be null-merged to 5.0.  Applied innodb-4.1-ss33
  
  Fixes:
  - Bug #24089: Race condition in fil_flush_file_spaces()

  innobase/fil/fil0fil.c@1.41.1.14, 2006-11-09 04:57:46+01:00, tsmith@quadxeon.mysql.com +31 -13
    Applied innodb-4.1-ss33
    
    Revision r33:
    innodb-4.1: Merge r1002 from innodb/trunk:
    
    fil_flush_file_spaces(): Copy the system->unflushed_spaces list to an
    array while holding the mutex.  This removes the crash-triggering
    race condition that was introduced when fixing Bug 15653.  (Bug #24089)

ChangeSet@1.1810.1698.170, 2006-11-09 05:02:37+01:00, tsmith@quadxeon.mysql.com +19 -0
  This ChangeSet must be null-merged to 5.1.  Applied innodb-5.0-ss982, -ss998, -ss1003
  
  Fixes:
  - Bug #15815: Very poor performance with multiple queries running concurrently
  - Bug #22868: 'Thread thrashing' with > 50 concurrent conns under an upd-intensive workloadw
  - Bug #23769: Debug assertion failure with innodb_locks_unsafe_for_binlog
  - Bug #24089: Race condition in fil_flush_file_spaces()

  innobase/buf/buf0buf.c@1.45.10.1, 2006-11-09 04:59:30+01:00, tsmith@quadxeon.mysql.com +125 -56
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1000:
    branches/5.0: Merge r999 from trunk:
    
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  innobase/buf/buf0flu.c@1.28.3.1, 2006-11-09 04:59:30+01:00, tsmith@quadxeon.mysql.com +67 -29
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1000:
    branches/5.0: Merge r999 from trunk:
    
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  innobase/buf/buf0lru.c@1.24.3.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +24 -1
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1000:
    branches/5.0: Merge r999 from trunk:
    
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  innobase/dict/dict0crea.c@1.32.2.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +9 -4
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r974:
    branches/5.0: Port r973 from trunk.
    
    Do not break the latching order in TRUNCATE TABLE.
    
    dict_truncate_index_tree(): Replace parameter rec_t* rec with
    btr_pcur_t* pcur.  Reposition pcur before calling btr_create().
    
    sync_thread_add_level(): Remove the relaxation of the assertion added in r968.

  innobase/fil/fil0fil.c@1.54.15.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +31 -13
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1003:
    branches/5.0: Merge r1002 from trunk:
    
    fil_flush_file_spaces(): Copy the system->unflushed_spaces list to an
    array while holding the mutex.  This removes the crash-triggering
    race condition that was introduced when fixing Bug 15653.  (Bug #24089)

  innobase/include/buf0buf.h@1.28.4.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +28 -12
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1000:
    branches/5.0: Merge r999 from trunk:
    
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  innobase/include/buf0buf.ic@1.17.6.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +12 -7
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1000:
    branches/5.0: Merge r999 from trunk:
    
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  innobase/include/dict0crea.h@1.7.1.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +4 -2
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r974:
    branches/5.0: Port r973 from trunk.
    
    Do not break the latching order in TRUNCATE TABLE.
    
    dict_truncate_index_tree(): Replace parameter rec_t* rec with
    btr_pcur_t* pcur.  Reposition pcur before calling btr_create().
    
    sync_thread_add_level(): Remove the relaxation of the assertion added in r968.

  innobase/include/sync0arr.h@1.7.1.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +4 -9
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1001:
    branches/5.0: Reduce locking contention:
    
    Bug #15815: 'Thread thrashing' with > 50 concurrent connections under
    an update-intensive workload.
    Fix: Introduce one event per InnoDB semaphore.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    This patch will not be merged to trunk (MySQL/InnoDB 5.1) yet,
    because it tries to address the problem in a different way.

  innobase/include/sync0rw.h@1.11.1.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +1 -0
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1001:
    branches/5.0: Reduce locking contention:
    
    Bug #15815: 'Thread thrashing' with > 50 concurrent connections under
    an update-intensive workload.
    Fix: Introduce one event per InnoDB semaphore.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    This patch will not be merged to trunk (MySQL/InnoDB 5.1) yet,
    because it tries to address the problem in a different way.

  innobase/include/sync0rw.ic@1.9.3.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +4 -2
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1001:
    branches/5.0: Reduce locking contention:
    
    Bug #15815: 'Thread thrashing' with > 50 concurrent connections under
    an update-intensive workload.
    Fix: Introduce one event per InnoDB semaphore.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    This patch will not be merged to trunk (MySQL/InnoDB 5.1) yet,
    because it tries to address the problem in a different way.

  innobase/include/sync0sync.h@1.22.2.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +1 -0
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1001:
    branches/5.0: Reduce locking contention:
    
    Bug #15815: 'Thread thrashing' with > 50 concurrent connections under
    an update-intensive workload.
    Fix: Introduce one event per InnoDB semaphore.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    This patch will not be merged to trunk (MySQL/InnoDB 5.1) yet,
    because it tries to address the problem in a different way.

  innobase/os/os0sync.c@1.24.5.1, 2006-11-09 04:59:31+01:00, tsmith@quadxeon.mysql.com +52 -3
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1001:
    branches/5.0: Reduce locking contention:
    
    Bug #15815: 'Thread thrashing' with > 50 concurrent connections under
    an update-intensive workload.
    Fix: Introduce one event per InnoDB semaphore.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    This patch will not be merged to trunk (MySQL/InnoDB 5.1) yet,
    because it tries to address the problem in a different way.

  innobase/row/row0mysql.c@1.103.19.1, 2006-11-09 04:59:32+01:00, tsmith@quadxeon.mysql.com +3 -5
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r974:
    branches/5.0: Port r973 from trunk.
    
    Do not break the latching order in TRUNCATE TABLE.
    
    dict_truncate_index_tree(): Replace parameter rec_t* rec with
    btr_pcur_t* pcur.  Reposition pcur before calling btr_create().
    
    sync_thread_add_level(): Remove the relaxation of the assertion added in r968.

  innobase/row/row0sel.c@1.92.12.1, 2006-11-09 04:59:32+01:00, tsmith@quadxeon.mysql.com +6 -0
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r982:
    branches/5.0: row_sel(): Do not try to acquire a LOCK_REC_NOT_GAP lock
    on the supremum record.  Instead, skip to the next record.  (Bug #23769)
    This fix was backported from r623 in the 5.1 tree.

  innobase/srv/srv0start.c@1.80.15.1, 2006-11-09 04:59:32+01:00, tsmith@quadxeon.mysql.com +1 -4
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r926:
    Refer to bug: 22268. Since no one tries to run 5.0 on Windows 95/ME it was
    decided to raise the limit of srv_max_n_threads to 10000 on Windows.

  innobase/sync/sync0arr.c@1.20.1.1, 2006-11-09 04:59:32+01:00, tsmith@quadxeon.mysql.com +41 -78
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1001:
    branches/5.0: Reduce locking contention:
    
    Bug #15815: 'Thread thrashing' with > 50 concurrent connections under
    an update-intensive workload.
    Fix: Introduce one event per InnoDB semaphore.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    This patch will not be merged to trunk (MySQL/InnoDB 5.1) yet,
    because it tries to address the problem in a different way.

  innobase/sync/sync0rw.c@1.19.1.1, 2006-11-09 04:59:32+01:00, tsmith@quadxeon.mysql.com +2 -0
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r1001:
    branches/5.0: Reduce locking contention:
    
    Bug #15815: 'Thread thrashing' with > 50 concurrent connections under
    an update-intensive workload.
    Fix: Introduce one event per InnoDB semaphore.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    This patch will not be merged to trunk (MySQL/InnoDB 5.1) yet,
    because it tries to address the problem in a different way.

  innobase/sync/sync0sync.c@1.34.3.1, 2006-11-09 04:59:32+01:00, tsmith@quadxeon.mysql.com +6 -2
    Applied innodb-5.0-ss982, -ss998, -ss1003
    
    Revision r969:
    branches/5.0: Port r968 from trunk:
    
    sync_thread_add_level(): When level == SYNC_TREE_NODE, allow the latching
    order to be violated if the thread holds dict_operation_lock, whose level is
    SYNC_DICT_OPERATION.  This removes the assertion failure of TRUNCATE TABLE
    #ifdef UNIV_SYNC_DEBUG.
    
    
    Revision r974:
    branches/5.0: Port r973 from trunk.
    
    Do not break the latching order in TRUNCATE TABLE.
    
    dict_truncate_index_tree(): Replace parameter rec_t* rec with
    btr_pcur_t* pcur.  Reposition pcur before calling btr_create().
    
    sync_thread_add_level(): Remove the relaxation of the assertion added in r968.
    
    
    Revision r1001:
    branches/5.0: Reduce locking contention:
    
    Bug #15815: 'Thread thrashing' with > 50 concurrent connections under
    an update-intensive workload.
    Fix: Introduce one event per InnoDB semaphore.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    This patch will not be merged to trunk (MySQL/InnoDB 5.1) yet,
    because it tries to address the problem in a different way.

ChangeSet@1.2303.47.17, 2006-11-09 05:01:19+01:00, tsmith@quadxeon.mysql.com +12 -0
  Applied innodb-5.1-ss1004
  
  Fixes:
  - Bug #15815: Very poor performance with multiple queries running concurrently
  - Bug #22868: 'Thread thrashing' with > 50 concurrent conns under an upd-intensive workloadw
  - Bug #24089: Race condition in fil_flush_file_spaces()

  storage/innobase/btr/btr0btr.c@1.53, 2006-11-09 05:00:52+01:00, tsmith@quadxeon.mysql.com +38 -1
    Applied innodb-5.1-ss1004
    
    Revision r934:
    btr_lift_page_up(): Set new page levels in all ancestor pages, not just
    in the father page.
    
    btr0btr.h: Add a BTR_MAX_LEVELS define.

  storage/innobase/buf/buf0buf.c@1.61, 2006-11-09 05:00:52+01:00, tsmith@quadxeon.mysql.com +116 -50
    Applied innodb-5.1-ss1004
    
    Revision r999:
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  storage/innobase/buf/buf0flu.c@1.36, 2006-11-09 05:00:52+01:00, tsmith@quadxeon.mysql.com +65 -27
    Applied innodb-5.1-ss1004
    
    Revision r999:
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  storage/innobase/buf/buf0lru.c@1.32, 2006-11-09 05:00:52+01:00, tsmith@quadxeon.mysql.com +27 -2
    Applied innodb-5.1-ss1004
    
    Revision r999:
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.
    
    
    Revision r1004:
    UT_LIST_REMOVE(): Invalidate the node pointers #ifdef UNIV_DEBUG.
    
    buf_LRU_invalidate_tablespace(): Invoke UT_LIST_GET_PREV(LRU, block)
    before UT_LIST_REMOVE(LRU, buf_pool->LRU, block).

  storage/innobase/dict/dict0crea.c@1.41, 2006-11-09 05:00:52+01:00, tsmith@quadxeon.mysql.com +9 -4
    Applied innodb-5.1-ss1004
    
    Revision r973:
    Do not break the latching order in TRUNCATE TABLE.
    
    dict_truncate_index_tree(): Replace parameter rec_t* rec with
    btr_pcur_t* pcur.  Reposition pcur before calling btr_create().
    
    sync_thread_add_level(): Remove the relaxation of the assertion added in r968.

  storage/innobase/fil/fil0fil.c@1.73, 2006-11-09 05:00:53+01:00, tsmith@quadxeon.mysql.com +30 -12
    Applied innodb-5.1-ss1004
    
    Revision r1002:
    fil_flush_file_spaces(): Copy the system->unflushed_spaces list to an
    array while holding the mutex.  This removes the crash-triggering
    race condition that was introduced when fixing Bug 15653.  (Bug #24089)

  storage/innobase/include/btr0btr.h@1.19, 2006-11-09 05:00:53+01:00, tsmith@quadxeon.mysql.com +11 -1
    Applied innodb-5.1-ss1004
    
    Revision r934:
    btr_lift_page_up(): Set new page levels in all ancestor pages, not just
    in the father page.
    
    btr0btr.h: Add a BTR_MAX_LEVELS define.

  storage/innobase/include/buf0buf.h@1.37, 2006-11-09 05:00:53+01:00, tsmith@quadxeon.mysql.com +28 -12
    Applied innodb-5.1-ss1004
    
    Revision r999:
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  storage/innobase/include/buf0buf.ic@1.27, 2006-11-09 05:00:53+01:00, tsmith@quadxeon.mysql.com +12 -7
    Applied innodb-5.1-ss1004
    
    Revision r999:
    Reduce buffer pool mutex contention under >= 4 big concurrent
    CPU-bound SELECT queries.  (Bug #22868)
    
    Fix: replace the mutex by one mutex protecting the 'flush list'
    (and the free list) and several mutexes protecting portions of the
    buffer pool, where we keep several indivudual LRU lists of pages.
    
    This patch is from Sunny Bains and Heikki Tuuri.

  storage/innobase/include/dict0crea.h@1.10, 2006-11-09 05:00:53+01:00, tsmith@quadxeon.mysql.com +4 -2
    Applied innodb-5.1-ss1004
    
    Revision r973:
    Do not break the latching order in TRUNCATE TABLE.
    
    dict_truncate_index_tree(): Replace parameter rec_t* rec with
    btr_pcur_t* pcur.  Reposition pcur before calling btr_create().
    
    sync_thread_add_level(): Remove the relaxation of the assertion added in r968.

  storage/innobase/include/ut0lst.h@1.4, 2006-11-09 05:00:53+01:00, tsmith@quadxeon.mysql.com +25 -16
    Applied innodb-5.1-ss1004
    
    Revision r1004:
    UT_LIST_REMOVE(): Invalidate the node pointers #ifdef UNIV_DEBUG.
    
    buf_LRU_invalidate_tablespace(): Invoke UT_LIST_GET_PREV(LRU, block)
    before UT_LIST_REMOVE(LRU, buf_pool->LRU, block).

  storage/innobase/row/row0mysql.c@1.136, 2006-11-09 05:00:53+01:00, tsmith@quadxeon.mysql.com +3 -5
    Applied innodb-5.1-ss1004
    
    Revision r973:
    Do not break the latching order in TRUNCATE TABLE.
    
    dict_truncate_index_tree(): Replace parameter rec_t* rec with
    btr_pcur_t* pcur.  Reposition pcur before calling btr_create().
    
    sync_thread_add_level(): Remove the relaxation of the assertion added in r968.

ChangeSet@1.1810.2312.4, 2006-11-09 00:17:22+01:00, msvensson@neptunus.(none) +1 -0
  Fix warnings and NetWare compile failure 

  client/mysql_upgrade.c@1.6.1.3, 2006-11-09 00:17:20+01:00, msvensson@neptunus.(none) +1 -2
    Fix NetWare problem - illegal cast of "const char*" to "char*"
    Fix warning, init "mystat" in  FILEINFO to NULL
    Fix warning, remove unused variable "i"

ChangeSet@1.1616.2144.200, 2006-11-08 23:16:44+01:00, msvensson@neptunus.(none) +1 -0
  Update of --mem flag after comments

  mysql-test/mysql-test-run.pl@1.8.9.85, 2006-11-08 23:16:43+01:00, msvensson@neptunus.(none) +13 -9
    Allow --mem to be specified as a flag or --mem=<dir>
    Add /tmp to locations to search
    Update comments and usage description

ChangeSet@1.1616.2144.199, 2006-11-08 22:56:06+01:00, msvensson@neptunus.(none) +1 -0
  No need to pass an additional arg to to mtr_add_arg when there is no % sign

  mysql-test/mysql-test-run.pl@1.8.9.84, 2006-11-08 22:56:05+01:00, msvensson@neptunus.(none) +2 -4
    No need to pass an additional arg to to mtr_add_arg when there is no % sign

ChangeSet@1.1616.2144.198, 2006-11-08 22:53:40+01:00, msvensson@neptunus.(none) +2 -0
  Pass location of charsets dir to mysqltest to avoid using the charsetdir locally installed on machine. 

  client/mysqltest.c@1.92.21.27, 2006-11-08 22:53:39+01:00, msvensson@neptunus.(none) +15 -5
    Add new option --character-sets-dir to mysqltest
    Set MYSQL_SET_CHRSET_DIR before connecting to mysqld if the above variable is set

  mysql-test/mysql-test-run.pl@1.8.9.83, 2006-11-08 22:53:39+01:00, msvensson@neptunus.(none) +3 -0
    Pass $path_charsetsdir to mysqltest

ChangeSet@1.1616.2144.197, 2006-11-08 22:45:52+01:00, msvensson@neptunus.(none) +1 -0
  Don't run mysqltest with both --silent and --verbose 

  mysql-test/mysql-test-run.pl@1.8.9.82, 2006-11-08 22:45:51+01:00, msvensson@neptunus.(none) +0 -3
    Don't run mysqltest with both --silent and --verbose 

ChangeSet@1.1810.2305.3, 2006-11-08 22:08:50+04:00, bar@mysql.com +1 -0
  after merge fix for bug 23451.

  sql/item_sum.cc@1.170.1.17, 2006-11-08 22:08:45+04:00, bar@mysql.com +6 -5
    after merge fix.

ChangeSet@1.2303.78.2, 2006-11-08 20:41:47+04:00, holyfoot@mysql.com +1 -0
  merging

  sql/field.cc@1.345.2.2, 2006-11-08 20:41:44+04:00, holyfoot@mysql.com +1 -1
    here we can get negative values

ChangeSet@1.1616.2847.3, 2006-11-08 17:17:28+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +2 -0
  bug#19402 SQL close to the size of the max_allowed_packet fails on slave
  fixing a flow of the test

  mysql-test/r/rpl_packet.result@1.2, 2006-11-08 17:17:27+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +3 -5
    results changed

  mysql-test/t/rpl_packet.test@1.2, 2006-11-08 17:17:27+02:00, aelkin@dsl-hkibras-fe30f900-107.dhcp.inet.fi +10 -7
    fixing a flaw in the test to create a table in MAX_NAME-sized db indeed.
    Upon that the `select to return 1' invariant holds. 

ChangeSet@1.1810.2313.1, 2006-11-08 10:11:02-05:00, cmiller@zippy.cornsilk.net +4 -0
  Bug#10963: LEFT/RIGHT/SUBSTR/.. string functions returns wrong result \
    on large length
    
  Problem:  Most (all) of the numeric inputs were being coerced into
  int (32 bit) sized variables.  Works OK for sane inputs; any input
  larger than 2^32 (or 2^31 for signed vars) exihibited predictable
  wrapping behavior (up to about 10^18) and then started having really
  strange behaviour past that point (since the conversion to 64 bit int
  from the DECIMAL type can do weird things on out of range numbers).
  
  Solution: 1)  Add many tests.  2)  Convert input from (u)long type to
  (u)longlong.  3)  Do (sometimes multiple) sanity checks on input,
  keeping in mind that sometimes a negative longlong is not a negative
  longlong (if the unsigned_flag is set).  4) Emulate existing behavior
  w/rt negative and "small" out-of-bounds values.

  mysql-test/r/func_str.result@1.110.1.12, 2006-11-08 10:10:59-05:00, cmiller@zippy.cornsilk.net +755 -0
    Additional test results for #10963

  mysql-test/t/func_str.test@1.92.1.3, 2006-11-08 10:11:00-05:00, cmiller@zippy.cornsilk.net +189 -0
    Additional test results for #10963

  sql/item_func.cc@1.270.1.42, 2006-11-08 10:11:00-05:00, cmiller@zippy.cornsilk.net +13 -7
    Used larger type for counting, to avoid truncation.

  sql/item_strfunc.cc@1.261.1.27, 2006-11-08 10:11:00-05:00, cmiller@zippy.cornsilk.net +139 -48
    Fix for #10963, including comments and cleaned up logic

ChangeSet@1.2318, 2006-11-08 15:09:35+01:00, mskold@mysql.com +1 -0
  bug#23542  crash on DELETE from ndb dd table: uses_blob_value always reads write_set, should check read_set if read operation

  sql/ha_ndbcluster.cc@1.360, 2006-11-08 15:09:12+01:00, mskold@mysql.com +1 -2
    bug#23542  crash on DELETE from ndb dd table: uses_blob_value always reads write_set, should check read_set if read operation

ChangeSet@1.1616.2850.1, 2006-11-08 15:15:56+02:00, gkodinov@macbook.gmz +1 -0
  Make a new test target for autopush.pl to run memory based tests

  Makefile.am@1.60.4.1, 2006-11-08 15:15:48+02:00, gkodinov@macbook.gmz +7 -0
    Make a new test target for autopush.pl to run memory based tests

ChangeSet@1.2303.42.16, 2006-11-08 13:55:33+01:00, mats@romeo.(none) +2 -0
  Fixes to make rpl_ndb_dd_advance pass.

  mysql-test/r/rpl_ndb_dd_advance.result@1.8, 2006-11-08 13:55:29+01:00, mats@romeo.(none) +8 -8
    Result change.

  mysql-test/t/rpl_ndb_dd_advance.test@1.8, 2006-11-08 13:55:30+01:00, mats@romeo.(none) +8 -8
    Dropping procedure on slave and then dropping the procedure on master and
    replicating the drop causes failure since the procedure does not exist.

ChangeSet@1.2316, 2006-11-08 17:09:16+11:00, stewart@willster.(none) +1 -0
  fix runtime warning of freeing null ptr

  sql/sql_show.cc@1.366.1.4, 2006-11-08 17:09:12+11:00, stewart@willster.(none) +3 -1
    fix warning during mysql-test-run of freeing null pointer

ChangeSet@1.1810.2296.15, 2006-11-08 05:45:50+03:00, ted@ted.mysql.internal +1 -0
  BUG#20100 fix: mysql_upgrade modified to also accept all 
  the communication parameters from the command line
  and pass 'em correctly to both mysqlcheck and mysql

  client/mysql_upgrade.c@1.6.1.2, 2006-11-08 05:45:48+03:00, ted@ted.mysql.internal +465 -247
    Now mysql_upgrade passes all the parameters specified on 
    the command line to both mysqlcheck and mysql through 
    the upgrade_defaults file 

ChangeSet@1.1810.2311.1, 2006-11-08 02:26:50+03:00, sergefp@mysql.com +1 -0
  BUG#24056: Crash in subquery:
  Don't assume that condition that was pushed down into subquery has 
  produced exactly one KEY_FIELD element - it could produce several or
  none at all, handle all of those cases.

  sql/sql_select.cc@1.312.112.3, 2006-11-08 02:26:47+03:00, sergefp@mysql.com +3 -1
    BUG#24056: Crash in subquery:
    Don't assume that condition that was pushed down into subquery has 
    produced exactly one KEY_FIELD element - it could produce several or
    none at all, handle all of those cases.

ChangeSet@1.1346.1.851, 2006-11-07 22:26:37+01:00, kent@mysql.com +3 -0
  make_binary_distribution.sh:
    Added LICENSE.mysql, removed LICENSE.doc README.NW.
    Removed obselete section about MySQLEULA.txt and README.NW.
  README:
    Added reference to the EXCEPTIONS-CLIENT file.
    Changed reference to the commercial license file.
    Corrected references into chapters in the manual.
  .del-MySQLEULA.txt~4a1afd9284f9be5a:
    Delete: Docs/MySQLEULA.txt

  BitKeeper/deleted/.del-MySQLEULA.txt~4a1afd9284f9be5a@1.4, 2006-11-07 22:12:17+01:00, kent@mysql.com +0 -0
    Delete: Docs/MySQLEULA.txt

  README@1.4.1.5, 2006-11-07 22:11:03+01:00, kent@mysql.com +7 -7
    Added reference to the EXCEPTIONS-CLIENT file.
    Changed reference to the commercial license file.
    Corrected references into chapters in the manual.

  scripts/make_binary_distribution.sh@1.49.1.16, 2006-11-07 22:18:13+01:00, kent@mysql.com +1 -10
    Added LICENSE.mysql, removed LICENSE.doc README.NW.
    Removed obselete section about MySQLEULA.txt and README.NW.

ChangeSet@1.1810.2306.6, 2006-11-07 18:21:52+01:00, msvensson@neptunus.(none) +1 -0
  Bump version to 5.0.30

  configure.in@1.245.69.1, 2006-11-07 18:21:49+01:00, msvensson@neptunus.(none) +2 -2
    Bump version to 5.0.30

ChangeSet@1.1810.2308.1, 2006-11-07 21:02:41+04:00, holyfoot@mysql.com +1 -0
  bug fixed

  sql/field.cc@1.256.35.3, 2006-11-07 21:02:38+04:00, holyfoot@mysql.com +1 -1
    datatime length is 19, not 12

ChangeSet@1.1810.2306.5, 2006-11-07 17:42:15+01:00, msvensson@neptunus.(none) +1 -0
  Update result file after having changed error message

  mysql-test/r/openssl_1.result@1.16, 2006-11-07 17:42:13+01:00, msvensson@neptunus.(none) +2 -2
    Update result file after having changed error message

ChangeSet@1.1616.2810.10, 2006-11-07 18:16:17+02:00, gkodinov@macbook.gmz +4 -0
  Bug #11032: getObject() returns a String for a sub-query of type datetime
   - When returning metadata for scalar subqueries the actual type of the
     column was calculated based on the value type, which limits the actual
     type of a scalar subselect to the set of (currently) 3 basic types : 
     integer, double precision or string. This is the reason that columns
     of types other then the basic ones (e.g. date/time) are reported as
     being of the corresponding basic type.
     Fixed by storing/returning information for the column type in addition
     to the result type.

  mysql-test/r/subselect.result@1.67.66.2, 2006-11-07 18:16:10+02:00, gkodinov@macbook.gmz +17 -0
    Bug #11032: getObject() returns a String for a sub-query of type datetime
     - test case

  mysql-test/t/subselect.test@1.58.47.2, 2006-11-07 18:16:11+02:00, gkodinov@macbook.gmz +16 -0
    Bug #11032: getObject() returns a String for a sub-query of type datetime
     - test case

  sql/item_subselect.cc@1.60.1.86, 2006-11-07 18:16:11+02:00, gkodinov@macbook.gmz +24 -10
    Bug #11032: getObject() returns a String for a sub-query of type datetime
     - store and return the field type as well in addition to result type for 
       single row subqueries 

  sql/item_subselect.h@1.52.1.12, 2006-11-07 18:16:12+02:00, gkodinov@macbook.gmz +7 -0
    Bug #11032: getObject() returns a String for a sub-query of type datetime
     - store and return the field type as well in addition to result type for 
       single row subqueries

ChangeSet@1.1810.2307.1, 2006-11-07 16:38:37+01:00, mskold@mysql.com +4 -0
  bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values

  mysql-test/r/ndb_index_unique.result@1.16.1.4, 2006-11-07 16:37:42+01:00, mskold@mysql.com +34 -1
    bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values

  mysql-test/t/ndb_index_unique.test@1.17.1.1, 2006-11-07 16:37:42+01:00, mskold@mysql.com +14 -1
    bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values

  sql/ha_ndbcluster.cc@1.175.61.1, 2006-11-07 16:37:42+01:00, mskold@mysql.com +193 -49
    bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values

  sql/ha_ndbcluster.h@1.82.4.8, 2006-11-07 16:37:42+01:00, mskold@mysql.com +18 -2
    bug#21507 I can't create a unique hash index in NDB: Added possibillity to create hash only indexes with NULL valued attributes, but any NULL valued access will become full table scan with pushed condition on index attribute values

ChangeSet@1.1616.2144.196, 2006-11-07 16:09:32+01:00, msvensson@neptunus.(none) +1 -0
  Bug#23981 memory leaks from yassl code + other
   - Readd --skip-bdb when valgrinding

  mysql-test/mysql-test-run.pl@1.8.9.81, 2006-11-07 16:09:31+01:00, msvensson@neptunus.(none) +5 -0
    Readd --skip-bdb when valgrinding

ChangeSet@1.1616.2848.1, 2006-11-07 16:01:54+01:00, joerg@trift2. +1 -0
  Fix bug#24023:  Let "ndb/src/common/portlib/gcc.cpp" export a dummy symbol.

  ndb/src/common/portlib/gcc.cpp@1.2.3.1, 2006-11-07 16:01:52+01:00, joerg@trift2. +3 -0
    Fix bug#24023:  Make sure this module always exports some symbol, whether used anywhere or not.

ChangeSet@1.1810.2306.3, 2006-11-07 15:20:24+01:00, msvensson@neptunus.(none) +1 -0
  Bug#23981 memory leaks from yassl code + other
   - Fix memory leak in vio_VioSSLFD that occurs when one of the calls to SSL_* function fails. As in the "ssl_des"
     test case where the server is currently not supposed to be able to read the specific cert/key file.
   - Change error message to be generic as it's called both from server and client code.

  vio/viosslfactories.c@1.26.2.2, 2006-11-07 15:20:22+01:00, msvensson@neptunus.(none) +5 -4
    Fix memory leak in vio_VioSSLFD that occurs when one of the calls to SSL_* function fails. 
    Change error message to be generic as it's called both from server and client code.

ChangeSet@1.1810.2302.3, 2006-11-07 14:39:20+01:00, gkodinov@dl145s.mysql.com +1 -0
  item.cc:
    merge fixes

  sql/item.cc@1.113.1.127, 2006-11-07 14:38:57+01:00, gkodinov@dl145s.mysql.com +3 -3
    merge fixes

ChangeSet@1.2303.75.2, 2006-11-07 16:25:57+03:00, anozdrin@alik. +1 -0
  Automerge fix.

  sql/sql_view.cc@1.110.1.8, 2006-11-07 16:25:55+03:00, anozdrin@alik. +1 -1
    Manually merged.

ChangeSet@1.2303.71.2, 2006-11-07 13:59:14+01:00, jonas@perch.ndb.mysql.com +3 -0
  ndb - bug#24039
    Make sure index scan does not commitDelete

  mysql-test/r/ndb_index_ordered.result@1.25, 2006-11-07 13:59:12+01:00, jonas@perch.ndb.mysql.com +39 -0
    testcase

  mysql-test/t/ndb_index_ordered.test@1.27, 2006-11-07 13:59:12+01:00, jonas@perch.ndb.mysql.com +25 -0
    testcase

  storage/ndb/src/kernel/blocks/dbacc/DbaccMain.cpp@1.77, 2006-11-07 13:59:12+01:00, jonas@perch.ndb.mysql.com +2 -1
    Make sure index scan does not commitDelete

ChangeSet@1.1616.2144.195, 2006-11-07 13:01:32+01:00, msvensson@neptunus.(none) +1 -0
  Don't allow path to be passed to --mem

  mysql-test/mysql-test-run.pl@1.8.9.80, 2006-11-07 13:01:30+01:00, msvensson@neptunus.(none) +3 -3
    Don't allow path to be passed to --mem

ChangeSet@1.1616.2144.194, 2006-11-07 12:56:55+01:00, msvensson@neptunus.(none) +1 -0
  Correct faulty commit, the opt_tastcase_timeout value is in minutes, to it need to be multiplied with 60 before ping passed to mtr_timer_start 

  mysql-test/mysql-test-run.pl@1.8.9.79, 2006-11-07 12:56:54+01:00, msvensson@neptunus.(none) +1 -1
    Correct faulty commit, the opt_tastcase_timeout value is in minutes, to it need to be multiplied with 60 before ping passed to mtr_timer_start 

ChangeSet@1.1616.2144.192, 2006-11-07 11:07:27+01:00, msvensson@neptunus.(none) +3 -0
  Make --mem settable with environment variable MTR_MEM and make it possible to pass the directory to use. I.e --mem=<directory>  

  include/abi_check.ic@1.1, 2006-11-07 11:07:21+01:00, msvensson@neptunus.(none) +914 -0
    Ignore file

  include/abi_check.ic@1.0, 2006-11-07 11:07:21+01:00, msvensson@neptunus.(none) +0 -0

  include/abi_check@1.1, 2006-11-07 11:07:21+01:00, msvensson@neptunus.(none) +0 -0
    Ignore file

  include/abi_check@1.0, 2006-11-07 11:07:21+01:00, msvensson@neptunus.(none) +0 -0

  mysql-test/mysql-test-run.pl@1.8.9.78, 2006-11-07 11:07:20+01:00, msvensson@neptunus.(none) +5 -5
    Make --mem settable with environment variable MTR_MEM and make it possible to pass the directory to use. I.e --mem=<directory>  

ChangeSet@1.1616.2830.2, 2006-11-07 12:45:48+04:00, bar@mysql.com +3 -0
  Bug#23451 GROUP_CONCAT truncates a multibyte utf8 character
    
    Problem: GROUP_CONCAT on a multi-byte column can truncate
    in the middle of a multibyte character when applying
    group_concat_max_len limit. It produces an invalid
    multi-byte character in the result string.
    
  The second, easier version - reusing old "warning_for_row" flag,
  instead of introducing of "result_is_full" - which was
  added in the previous commit.

  mysql-test/r/func_gconcat.result@1.27.1.22, 2006-11-07 12:45:45+04:00, bar@mysql.com +61 -1
    Adding test case

  mysql-test/t/func_gconcat.test@1.23.3.2, 2006-11-07 12:45:45+04:00, bar@mysql.com +24 -0
    Adding test case

  sql/item_sum.cc@1.89.13.1, 2006-11-07 12:45:45+04:00, bar@mysql.com +17 -3
    Adding well_formed_len() call not to cut
        in the middle of a multi-byte character.

ChangeSet@1.1810.2296.13, 2006-11-06 23:02:40-05:00, cmiller@zippy.cornsilk.net +1 -0
  Merge fix.

  mysql-test/r/func_test.result@1.29.1.4, 2006-11-06 23:02:38-05:00, cmiller@zippy.cornsilk.net +1 -0
    Merge fix. (Curse BitMover!)

ChangeSet@1.2303.47.11, 2006-11-07 05:21:33+03:00, petr@outpost.site +2 -0
  Fix Bug #22494 Instance Manager: Inconsistent error message wording
  Use better wording

  mysql-test/r/im_life_cycle.result@1.16, 2006-11-07 05:21:30+03:00, petr@outpost.site +2 -2
    update result file with new error message

  server-tools/instance-manager/messages.cc@1.8, 2006-11-07 05:21:30+03:00, petr@outpost.site +1 -1
    use better error message (as adviced by paul)

ChangeSet@1.1810.2296.12, 2006-11-06 20:41:18-05:00, cmiller@zippy.cornsilk.net +1 -0
  Fix after merge.

  sql/item_func.h@1.136.2.21, 2006-11-06 20:41:14-05:00, cmiller@zippy.cornsilk.net +1 -0
    Fix after merge.

ChangeSet@1.1616.2845.1, 2006-11-06 17:13:19-05:00, cmiller@zippy.cornsilk.net +4 -0
  Bug#23411: ... MOD-ing zero returns strange result
    
  The Item_func_mod objects never had maybe_null set, so users had no reason 
  to expect that they can be NULL, and may therefore deduce wrong results.
  Now, set maybe_null.

  BitKeeper/etc/collapsed@1.1.1.2, 2006-11-06 16:41:39-05:00, cmiller@zippy.cornsilk.net +1 -0

  BitKeeper/etc/collapsed@1.1.1.1, 2006-11-06 15:40:16-05:00, cmiller@zippy.cornsilk.net +1 -0

  mysql-test/r/func_test.result@1.20.2.5, 2006-11-06 17:13:17-05:00, cmiller@zippy.cornsilk.net +75 -0
    Verify that the predictions are true.

  mysql-test/t/func_test.test@1.22.1.5, 2006-11-06 17:13:17-05:00, cmiller@zippy.cornsilk.net +32 -0
    Verify that the predictions are true.

  sql/item_func.cc@1.124.42.16, 2006-11-06 17:13:17-05:00, cmiller@zippy.cornsilk.net +2 -1
    MOD functions may be NULL.

ChangeSet@1.1810.2302.1, 2006-11-06 22:33:18+04:00, holyfoot@mysql.com +4 -0
  bug #19491 (5.0-related additional fixes)

  include/my_time.h@1.11.3.1, 2006-11-06 22:33:13+04:00, holyfoot@mysql.com +2 -0
    we need to use it outside the my_time.cc

  mysql-test/r/gis-rtree.result@1.14.4.1, 2006-11-06 22:33:13+04:00, holyfoot@mysql.com +8 -7
    result fixed

  sql-common/my_time.c@1.19.4.1, 2006-11-06 22:33:13+04:00, holyfoot@mysql.com +2 -2
    'static' removed

  sql/field.cc@1.256.35.2, 2006-11-06 22:33:13+04:00, holyfoot@mysql.com +28 -0
    checks for invalid datetimes added

ChangeSet@1.1810.2221.21, 2006-11-06 19:12:19+04:00, holyfoot@mysql.com +1 -0
  merging

  mysql-test/r/gis-rtree.result@1.14.1.7, 2006-11-06 19:12:16+04:00, holyfoot@mysql.com +8 -7
    merging fix

ChangeSet@1.1810.2124.22, 2006-11-06 14:50:45+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#24011
    

  ndb/src/common/util/socket_io.cpp@1.7.4.1, 2006-11-06 14:50:44+01:00, jonas@perch.ndb.mysql.com +51 -33
    Fix problem with cut sockmessages

ChangeSet@1.2303.47.10, 2006-11-06 11:30:54+03:00, kostja@bodhi.local +1 -0
  Fix a typo in SETUP.sh

  BUILD/SETUP.sh@1.62.1.1, 2006-11-06 11:30:52+03:00, kostja@bodhi.local +1 -1
    Fix a typo.

ChangeSet@1.2303.53.3, 2006-11-06 00:14:04+03:00, petr@outpost.site +1 -0
  fix mysql-test-run.pl to support --timezone option,
  which got broken during refactoring.

  mysql-test/mysql-test-run.pl@1.183.6.1, 2006-11-06 00:14:01+03:00, petr@outpost.site +8 -1
    fix mysql-test-run.pl to support --timezone option

ChangeSet@1.1616.2838.2, 2006-11-05 23:25:34+03:00, petr@outpost.site +1 -0
  Add missing DBUG_RETURN()

  sql/tztime.cc@1.8.1.15, 2006-11-05 23:25:30+03:00, petr@outpost.site +1 -1
    Add missing DBUG_RETURN()

ChangeSet@1.2303.68.1, 2006-11-05 12:03:19-08:00, brian@zim.(none) +2 -0
  Removed Innodb variable at request of Innobase. 

  sql/mysqld.cc@1.585.1.1, 2006-11-05 12:03:12-08:00, brian@zim.(none) +0 -6
    Removing Innodb variable

  sql/set_var.cc@1.192.4.1, 2006-11-05 12:03:12-08:00, brian@zim.(none) +0 -2
    Removing Innodb variable

ChangeSet@1.2303.36.4, 2006-11-05 22:42:23+04:00, holyfoot@mysql.com +1 -0
  merging

  mysql-test/r/gis-rtree.result@1.24, 2006-11-05 22:41:58+04:00, holyfoot@mysql.com +8 -7
    test result fixed

ChangeSet@1.1810.2296.10, 2006-11-04 13:06:19+01:00, msvensson@neptunus.(none) +1 -0
  Remove old comments 

  mysql-test/mysql-test-run.pl@1.30.1.113, 2006-11-04 13:06:17+01:00, msvensson@neptunus.(none) +0 -5
    Remove old comments 

ChangeSet@1.1810.2296.9, 2006-11-04 09:24:10+01:00, msvensson@neptunus.(none) +1 -0
  Disable user_limits for bug23921

  mysql-test/t/disabled.def@1.2.4.14, 2006-11-04 09:24:08+01:00, msvensson@neptunus.(none) +2 -0
    Disable user_limits for bug23921

ChangeSet@1.1810.2296.8, 2006-11-04 09:23:19+01:00, msvensson@neptunus.(none) +1 -0
  Updates for abi_check

  include/Makefile.am@1.52.2.8, 2006-11-04 09:23:17+01:00, msvensson@neptunus.(none) +2 -2
    Remove abi_check from BUILT_SOURCES it's in the "all" rule
    Make abi_check depend on mysql_h.ic as well

ChangeSet@1.2303.42.15, 2006-11-03 21:55:51+01:00, mats@romeo.(none) +2 -0
  Post-merge fixes.

  sql/log_event.cc@1.246.2.3, 2006-11-03 21:55:48+01:00, mats@romeo.(none) +1 -2
    Fixing comment

  sql/rpl_rli.cc@1.2, 2006-11-03 21:55:48+01:00, mats@romeo.(none) +3 -78
    Removing code that was moved to other file.

ChangeSet@1.2303.47.8, 2006-11-03 09:56:44-07:00, malff@weblab.(none) +2 -0
  Bug#21114 (Foreign key creation fails to table with name format)
  
  Fixed the tests for case insensitive platforms

  mysql-test/r/parser_bug21114_innodb.result@1.2, 2006-11-03 09:56:41-07:00, malff@weblab.(none) +414 -414
    Fixed the tests for case insensitive platforms

  mysql-test/t/parser_bug21114_innodb.test@1.2, 2006-11-03 09:56:42-07:00, malff@weblab.(none) +201 -201
    Fixed the tests for case insensitive platforms

ChangeSet@1.1810.2296.6, 2006-11-03 17:53:57+01:00, msvensson@neptunus.(none) +1 -0
  Fiexes for --stress mode in mysql-test-run.pl

  mysql-test/lib/mtr_stress.pl@1.3, 2006-11-03 17:53:52+01:00, msvensson@neptunus.(none) +2 -3
    "stop_masters" function renamed to "stop_all_servers"
    "path_mysock" renamed to "path_sock"

ChangeSet@1.1616.2810.9, 2006-11-03 18:48:16+02:00, gkodinov@macbook.gmz +3 -0
  Bug #22457: Column alias in ORDER BY works, but not if in an expression
   The parser is allocating Item_field for references by name in ORDER BY
   expressions. Such expressions however may point not only to Item_field 
   in the select list (or to a table column) but also to an arbitrary Item. 
   This causes Item_field::fix_fields to throw an error about missing 
   column.
   The fix substitutes Item_field for the reference with an Item_ref when 
   not pointing to Item_field.

  mysql-test/r/order_by.result@1.40.1.8, 2006-11-03 18:48:10+02:00, gkodinov@macbook.gmz +27 -0
    Bug #22457: Column alias in ORDER BY works, but not if in an expression
     - test case

  mysql-test/t/order_by.test@1.29.1.6, 2006-11-03 18:48:10+02:00, gkodinov@macbook.gmz +16 -0
    Bug #22457: Column alias in ORDER BY works, but not if in an expression
     - test case

  sql/item.cc@1.58.1.176, 2006-11-03 18:48:11+02:00, gkodinov@macbook.gmz +30 -3
    Bug #22457: Column alias in ORDER BY works, but not if in an expression
     - transform the Item_field made by the parser into Item_ref if it 
       doesn't point to Item_field and it is in allowed context

ChangeSet@1.2303.42.12, 2006-11-03 16:31:25+01:00, jmiller@mysql.com +13 -0
  Has issues with original tree, so had to pull new tree and copy test over. Running last test now and will push after

  mysql-test/extra/rpl_tests/rpl_extraSlave_Col.test@1.1, 2006-11-03 15:03:40+01:00, jmiller@mysql.com +853 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/extra/rpl_tests/rpl_extraSlave_Col.test

  mysql-test/extra/rpl_tests/rpl_extraSlave_Col.test@1.0, 2006-11-03 15:03:40+01:00, jmiller@mysql.com +0 -0

  mysql-test/extra/rpl_tests/rpl_ndb_ddl.test@1.1, 2006-11-03 16:29:08+01:00, jmiller@mysql.com +507 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/extra/rpl_tests/rpl_ndb_ddl.test

  mysql-test/extra/rpl_tests/rpl_ndb_ddl.test@1.0, 2006-11-03 16:29:08+01:00, jmiller@mysql.com +0 -0

  mysql-test/r/rpl_extraCol_innodb.result@1.1, 2006-11-03 15:04:39+01:00, jmiller@mysql.com +741 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/r/rpl_extraCol_innodb.result

  mysql-test/r/rpl_extraCol_innodb.result@1.0, 2006-11-03 15:04:39+01:00, jmiller@mysql.com +0 -0

  mysql-test/r/rpl_extraCol_myisam.result@1.1, 2006-11-03 15:04:39+01:00, jmiller@mysql.com +741 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/r/rpl_extraCol_myisam.result

  mysql-test/r/rpl_extraCol_myisam.result@1.0, 2006-11-03 15:04:39+01:00, jmiller@mysql.com +0 -0

  mysql-test/r/rpl_ndb_ddl.result@1.2, 2006-11-03 16:29:31+01:00, jmiller@mysql.com +10 -15

  mysql-test/r/rpl_ndb_extraCol.result@1.1, 2006-11-03 15:04:49+01:00, jmiller@mysql.com +742 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/r/rpl_ndb_extraCol.result

  mysql-test/r/rpl_ndb_extraCol.result@1.0, 2006-11-03 15:04:49+01:00, jmiller@mysql.com +0 -0

  mysql-test/t/disabled.def@1.206.3.1, 2006-11-03 16:28:42+01:00, jmiller@mysql.com +1 -1

  mysql-test/t/rpl_extraCol_innodb-master.opt@1.1, 2006-11-03 15:04:24+01:00, jmiller@mysql.com +1 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/t/rpl_extraCol_innodb-master.opt

  mysql-test/t/rpl_extraCol_innodb-master.opt@1.0, 2006-11-03 15:04:24+01:00, jmiller@mysql.com +0 -0

  mysql-test/t/rpl_extraCol_innodb-slave.opt@1.1, 2006-11-03 15:04:24+01:00, jmiller@mysql.com +1 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/t/rpl_extraCol_innodb-slave.opt

  mysql-test/t/rpl_extraCol_innodb-slave.opt@1.0, 2006-11-03 15:04:24+01:00, jmiller@mysql.com +0 -0

  mysql-test/t/rpl_extraCol_innodb.test@1.1, 2006-11-03 15:04:24+01:00, jmiller@mysql.com +13 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/t/rpl_extraCol_innodb.test

  mysql-test/t/rpl_extraCol_innodb.test@1.0, 2006-11-03 15:04:24+01:00, jmiller@mysql.com +0 -0

  mysql-test/t/rpl_extraCol_myisam.test@1.1, 2006-11-03 15:04:24+01:00, jmiller@mysql.com +12 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/t/rpl_extraCol_myisam.test

  mysql-test/t/rpl_extraCol_myisam.test@1.0, 2006-11-03 15:04:24+01:00, jmiller@mysql.com +0 -0

  mysql-test/t/rpl_ndb_ddl.test@1.2, 2006-11-03 16:29:44+01:00, jmiller@mysql.com +2 -1

  mysql-test/t/rpl_ndb_extraCol.test@1.1, 2006-11-03 15:04:58+01:00, jmiller@mysql.com +13 -0
    BitKeeper file /data0/mysql-5.1-new-rpl/mysql-test/t/rpl_ndb_extraCol.test

  mysql-test/t/rpl_ndb_extraCol.test@1.0, 2006-11-03 15:04:58+01:00, jmiller@mysql.com +0 -0

ChangeSet@1.1810.2299.4, 2006-11-03 16:09:16+01:00, msvensson@neptunus.(none) +2 -0
  Fix problem with mysql.test relying on "echo" behaviour

  mysql-test/r/mysql.result@1.17.2.4, 2006-11-03 16:09:14+01:00, msvensson@neptunus.(none) +0 -1
    Update test result after commenting out the test

  mysql-test/t/mysql.test@1.4.1.17, 2006-11-03 16:09:14+01:00, msvensson@neptunus.(none) +5 -5
    Rewrite the test commands so they don't depend on "echo" behaviour
    Comment out one as it's a duplicate

ChangeSet@1.1810.2299.3, 2006-11-03 16:06:13+01:00, msvensson@neptunus.(none) +1 -0
  Fix DBUG_PRINT in mysqltest, the real value to print is in ds_cmd

  client/mysqltest.c@1.155.9.65, 2006-11-03 16:06:09+01:00, msvensson@neptunus.(none) +1 -1
    The expanded command executed by mysqltest is in ds_cmd

ChangeSet@1.1616.2144.191, 2006-11-03 15:26:42+01:00, msvensson@neptunus.(none) +1 -0
  Don't warn about "Found non pid file" for elements that are not files.  

  mysql-test/lib/mtr_process.pl@1.15.3.6, 2006-11-03 15:26:40+01:00, msvensson@neptunus.(none) +2 -2
    Don't warn about "Found non pid file" for elements that are not files.  

ChangeSet@1.1810.2279.3, 2006-11-03 23:56:25+11:00, stewart@willster.(none) +1 -0
  BUG#22299 mgmd crash due to unchecked TransporterFacade::ThreadData expand()
  
  abort if we ever fail to expand a Vector

  ndb/include/util/Vector.hpp@1.4.1.1, 2006-11-03 23:56:23+11:00, stewart@willster.(none) +2 -0
    abort on failure to allocate memory

ChangeSet@1.2303.67.1, 2006-11-03 14:26:40+02:00, aelkin@dsl-hkigw8-feaef900-46.dhcp.inet.fi +3 -0
  Bug#16228/Bug#20697 - related.
  Bug#23831  deadlock not noticed
  
  RBR bug in that when replicated msta (multi-statement-trans-action) deadlocks
  with a local at write row event or gets timed-out, the event handler did not return
  the correct error code.
  Wrong error code stops slave sql thread instead of to proceed with
  rollback and replay.
  
  The correct code is typed in error log and stored for error handling rotine
  to conduct rollback and replay of the transaction. The handling for the rbr
  remains the same as for the sbr events.
  Particularly, timed-out transaction still is rolled back - look at the related bugs.

  mysql-test/extra/rpl_tests/rpl_deadlock.test@1.16, 2006-11-03 14:26:37+02:00, aelkin@dsl-hkigw8-feaef900-46.dhcp.inet.fi +18 -11
    fixing deadlock stimulation, commented on potential race condition and left todo.

  mysql-test/r/rpl_deadlock_innodb.result@1.14, 2006-11-03 14:26:37+02:00, aelkin@dsl-hkigw8-feaef900-46.dhcp.inet.fi +13 -8
    changed

  sql/log_event.cc@1.246.4.1, 2006-11-03 14:26:37+02:00, aelkin@dsl-hkigw8-feaef900-46.dhcp.inet.fi +7 -1
    returning the correct errors for write row event type;
    storing DL, TO error codes to check at grand-caller in step with sbr.

ChangeSet@1.1810.2299.2, 2006-11-03 13:12:16+01:00, msvensson@neptunus.(none) +2 -0
  Use lowercase for "Too long dbname" test as it will be put ot lower on some platforms and we don't wan't to test that.

  mysql-test/r/mysql.result@1.17.2.3, 2006-11-03 13:12:14+01:00, msvensson@neptunus.(none) +1 -1
    Use lowercase for "Too long dbname" test as it will be put ot lower on some platforms and we don't wan't to test that.

  mysql-test/t/mysql.test@1.4.1.16, 2006-11-03 13:12:14+01:00, msvensson@neptunus.(none) +1 -1
    Use lowercase for "Too long dbname" test as it will be put ot lower on some platforms and we don't wan't to test that.

ChangeSet@1.1810.2299.1, 2006-11-03 13:02:16+01:00, msvensson@neptunus.(none) +1 -0
  Remove sql_state-h from list of include files. (Merge error from 4.1)

  include/Makefile.am@1.52.2.7, 2006-11-03 13:02:15+01:00, msvensson@neptunus.(none) +1 -1
    Remove sql_state-h from list of include files. (Merge error from 4.1)

ChangeSet@1.1810.2296.3, 2006-11-03 12:32:05+01:00, msvensson@neptunus.(none) +2 -0
  Fix mysql-test-run.pl for "bin dist" look in "bin" directory for client binaries as well.

  mysql-test/lib/mtr_misc.pl@1.12.1.6, 2006-11-03 12:32:02+01:00, msvensson@neptunus.(none) +21 -20
    Update comments

  mysql-test/mysql-test-run.pl@1.30.1.112, 2006-11-03 12:32:02+01:00, msvensson@neptunus.(none) +2 -1
    Also need to look in "$glob_basedir/bin"

ChangeSet@1.1810.2298.1, 2006-11-03 15:27:37+04:00, ramil@mysql.com +2 -0
  Fix for bug #19736 VIEW: column names not quoted properly when view is replicated
  
  When we write 'query=...' string to a frm file for views on a slave, 
  indentifiers are not properly quoted due to missing OPTION_QUOTE_SHOW_CREATE 
  flag in the thd->options.
  
  Fix: properly set thd->options for the slave thread.

  mysql-test/r/rpl_view.result@1.3.1.5, 2006-11-03 15:27:32+04:00, ramil@mysql.com +2 -2
    Fix for bug #19736 VIEW: column names not quoted properly when view is replicated
      - result adjusted.

  sql/slave.cc@1.241.11.1, 2006-11-03 15:27:33+04:00, ramil@mysql.com +15 -13
    Fix for bug #19736 VIEW: column names not quoted properly when view is replicated
      - properly set thd->options only in one place (in the set_slave_thread_options()),
        using thd_startup_options. As a side effect we have OPTION_BIG_SELECTS flag set
        after the set_slave_thread_options() call from the 
        log_enevt.cc:Rotate_log_event::exec_event().

ChangeSet@1.1616.2844.1, 2006-11-03 11:42:22+01:00, msvensson@neptunus.(none) +1 -0
  Fix typo, Add "s" to format specifier for --stress-init-file

  mysql-test/lib/mtr_stress.pl@1.2, 2006-11-03 11:42:17+01:00, msvensson@neptunus.(none) +1 -1
    Fix typo, Add "s" to format specifier for --stress-init-file

ChangeSet@1.1616.2843.1, 2006-11-03 12:16:31+03:00, kroki@moonlight.intranet +2 -0
  Cleanup: fix race in rename.test.

  mysql-test/r/rename.result@1.7.2.1, 2006-11-03 12:16:29+03:00, kroki@moonlight.intranet +1 -0
    Update result.

  mysql-test/t/rename.test@1.11.3.1, 2006-11-03 12:16:29+03:00, kroki@moonlight.intranet +8 -2
    Remove the race by replacing sleep with a reap.

ChangeSet@1.2303.42.10, 2006-11-03 13:08:53+04:00, bar@mysql.com +2 -0
  After merge fix.

  mysql-test/r/lowercase_table.result@1.19, 2006-11-03 13:08:49+04:00, bar@mysql.com +2 -2
    Adjusting to 5.1: DEFAULT is now printed in upper case.

  mysql-test/t/rpl_ignore_table.test@1.4, 2006-11-03 13:08:49+04:00, bar@mysql.com +2 -0
    After merge fix

ChangeSet@1.2303.59.4, 2006-11-03 19:05:09+11:00, stewart@willster.(none) +1 -0
  BUG#20065 Erroneous error message at Node Restart if MaxNoOfOrderedIndexes changed too low
  
  nicer error message to user, along with error code to help track down the problem.

  storage/ndb/src/kernel/blocks/dbdict/Dbdict.cpp@1.105, 2006-11-03 19:05:06+11:00, stewart@willster.(none) +9 -3
    Report error when creating table (restartCreateTab_dihComplete) 
    to user in a nicer way.

ChangeSet@1.2303.52.2, 2006-11-03 10:18:13+04:00, bar@mysql.com +2 -0
  After merge fix for BUG#18908 ERROR 1406 (22001): Data too long for column :: using utf8

  sql/log.cc@1.237.5.1, 2006-11-03 10:18:08+04:00, bar@mysql.com +12 -0
    After merge fix for BUG#18908 ERROR 1406 (22001): Data too long for column :: using utf8

  strings/ctype-utf8.c@1.106, 2006-11-03 10:18:08+04:00, bar@mysql.com +1 -0
    Fix for compilation warning -
    forgot to add a new structure member
    in one of the previous changes.

ChangeSet@1.1616.2842.2, 2006-11-02 21:03:41-05:00, iggy@rolltop.ignatz42.dyndns.org +1 -0
  Fix compile failure.
  TAG: mysql-4.1.22

  myisam/sort.c@1.35.4.2, 2006-11-02 21:03:39-05:00, iggy@rolltop.ignatz42.dyndns.org +2 -4
    Moved DBUG_PRINT statement to declaration section.

ChangeSet@1.1616.2842.1, 2006-11-03 02:35:09+01:00, kent@suse9-x86.mysql.com +1 -0
  sort.c:
    Create block around DBUG_ENTER late in function

  myisam/sort.c@1.35.4.1, 2006-11-03 02:34:47+01:00, kent@suse9-x86.mysql.com +6 -2
    Create block around DBUG_ENTER late in function

ChangeSet@1.1616.2144.190, 2006-11-02 18:27:52-05:00, cmiller@zippy.cornsilk.net +1 -0
  Fix merge collision.

  mysys/mf_iocache.c@1.47.1.4, 2006-11-02 18:27:51-05:00, cmiller@zippy.cornsilk.net +4 -4
    Fix merge collision.

ChangeSet@1.2303.56.6, 2006-11-02 14:02:07-07:00, malff@weblab.(none) +2 -0
  Post merge fix

  mysql-test/r/ps.result@1.77.1.9, 2006-11-02 14:02:05-07:00, malff@weblab.(none) +4 -2
    Post merge fix

  mysql-test/t/ps.test@1.74.2.7, 2006-11-02 14:02:05-07:00, malff@weblab.(none) +4 -2
    Post merge fix

ChangeSet@1.1616.2144.188, 2006-11-02 21:58:42+01:00, kent@mysql.com +1 -0
  configure.in:
    Raise version number to 4.1.23

  configure.in@1.201.70.1, 2006-11-02 21:58:17+01:00, kent@mysql.com +2 -2
    Raise version number to 4.1.23

ChangeSet@1.1616.2841.1, 2006-11-02 15:05:20-05:00, iggy@rolltop.ignatz42.dyndns.org +2 -0
  Bug#23865 mysql-test-run.pl on Windows only supports debug and release configurations
  
  Visual Studio builds each configuration in a different sub-directory.  Only the sub-
  directories for release and debug are currently searched.

  mysql-test/lib/mtr_misc.pl@1.5.1.5, 2006-11-02 15:05:18-05:00, iggy@rolltop.ignatz42.dyndns.org +15 -0
    Bug#23865 mysql-test-run.pl on Windows only supports debug and release configurations
    - Added usage comments.

  mysql-test/mysql-test-run.pl@1.8.13.1, 2006-11-02 15:05:18-05:00, iggy@rolltop.ignatz42.dyndns.org +114 -100
    Bug#23865 mysql-test-run.pl on Windows only supports debug and release configurations
    - Moved Initial_Setup function to the command_line_setup function.
    - Defined new argument vs-config which can be used to inidicate the VS Configuration
    used to create the test executables. Argument can also be controlled with
    MTR_VS_CONFIG environment variable.

ChangeSet@1.2303.63.1, 2006-11-02 14:26:54-05:00, cmiller@calliope.local +1 -0
  Fixed misuse of automake _DEPENDENCIES item.  It caused Make try to create
  a bogus dependency "-lz" .

  sql/Makefile.am@1.161.3.1, 2006-11-02 14:26:46-05:00, cmiller@calliope.local +4 -3
    automake "_DEPENDENCIES" names seem only to strip out compiler flags when 
    it's automatically created.  Manually written dependencies must be clean.

ChangeSet@1.1810.1698.162, 2006-11-02 21:43:52+03:00, anozdrin@booka. +1 -0
  Wait for IM to start accepting connections after restart (part 2).

  mysql-test/r/im_daemon_life_cycle.result@1.2.1.6, 2006-11-02 21:43:48+03:00, anozdrin@booka. +1 -0
    Wait for IM to start accepting connections after restart (part 2).

ChangeSet@1.2303.62.1, 2006-11-02 11:01:53-07:00, malff@weblab.(none) +19 -0
  Bug#21114 (Foreign key creation fails to table with name format)
  
  Due to the complexity of this change, everything is documented in WL#3565
  
  This patch is the third iteration, it takes into account the comments
  received to date.

  mysql-test/include/parser_bug21114.inc@1.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +59 -0
    New tests

  mysql-test/include/parser_bug21114.inc@1.0, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +0 -0

  mysql-test/r/func_math.result@1.39, 2006-11-02 11:01:48-07:00, malff@weblab.(none) +12 -0
    Improved test coverage

  mysql-test/r/parser.result@1.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +388 -0
    New tests

  mysql-test/r/parser.result@1.0, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +0 -0

  mysql-test/r/parser_bug21114_innodb.result@1.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +867 -0
    New tests

  mysql-test/r/parser_bug21114_innodb.result@1.0, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +0 -0

  mysql-test/r/view.result@1.188.1.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +4 -4
    Name collision, x() is a geometry native in function

  mysql-test/t/func_math.test@1.28, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +5 -0
    Improved test coverage

  mysql-test/t/parser.test@1.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +510 -0
    New tests

  mysql-test/t/parser.test@1.0, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +0 -0

  mysql-test/t/parser_bug21114_innodb.test@1.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +422 -0
    New tests

  mysql-test/t/parser_bug21114_innodb.test@1.0, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +0 -0

  mysql-test/t/view.test@1.170.1.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +3 -3
    Name collision, x() is a geometry native in function

  sql/item_create.cc@1.67, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +4513 -315
    Revised the create_func implementation

  sql/item_create.h@1.46, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +150 -144
    Revised the create_func implementation

  sql/item_geofunc.h@1.15, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +2 -2
    Explicit Item allocation in the thread memory pool.

  sql/lex.h@1.164.1.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +5 -211
    Removed function parsing from the lexical parser

  sql/lex_symbol.h@1.8, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +0 -1
    Removed function parsing from the lexical parser

  sql/mysql_priv.h@1.448.7.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +4 -0
    Server initialization and shutdown

  sql/mysqld.cc@1.583.7.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +3 -0
    Server initialization and shutdown

  sql/share/errmsg.txt@1.133, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +4 -0
    New error messages

  sql/sql_yacc.yy@1.510.2.1, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +674 -780
    Removed function parsing from the lexical parser

  tests/mysql_client_test.c@1.217.2.3, 2006-11-02 11:01:49-07:00, malff@weblab.(none) +1 -1
    Spaces are no longer significant for function calls

ChangeSet@1.2303.59.3, 2006-11-03 02:18:45+11:00, stewart@willster.(none) +51 -0
  remove OSE

  BitKeeper/deleted/.del-Makefile@1.3, 2006-11-03 01:34:06+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/common/transporter/priotest/prioOSE/Makefile

  BitKeeper/deleted/.del-MemoryChannelOSE.hpp@1.5, 2006-11-03 01:33:28+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/kernel/blocks/ndbfs/MemoryChannelOSE.hpp

  BitKeeper/deleted/.del-NdbErrHnd.cpp@1.7, 2006-11-03 01:24:45+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/common/util/NdbErrHnd.cpp

  BitKeeper/deleted/.del-OSE_Receiver.cpp@1.5.1.1, 2006-11-03 01:34:18+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/common/transporter/OSE_Receiver.cpp

  BitKeeper/deleted/.del-OSE_Receiver.hpp@1.3, 2006-11-03 01:34:18+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/common/transporter/OSE_Receiver.hpp

  BitKeeper/deleted/.del-OSE_Signals.hpp@1.3, 2006-11-03 01:34:18+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/common/transporter/OSE_Signals.hpp

  BitKeeper/deleted/.del-OSE_Transporter.cpp@1.7, 2006-11-03 01:34:18+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/common/transporter/OSE_Transporter.cpp

  BitKeeper/deleted/.del-OSE_Transporter.hpp@1.4, 2006-11-03 01:34:18+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/common/transporter/OSE_Transporter.hpp

  BitKeeper/deleted/.del-mmslist.cpp@1.6, 2006-11-03 01:47:53+11:00, stewart@willster.(none) +0 -0
    Delete: storage/ndb/src/common/portlib/mmslist.cpp

  storage/ndb/include/logger/Logger.hpp@1.10, 2006-11-03 02:18:39+11:00, stewart@willster.(none) +0 -2
    remove OSE

  storage/ndb/include/mgmapi/mgmapi_config_parameters.h@1.29, 2006-11-03 02:18:39+11:00, stewart@willster.(none) +4 -4
    remove OSE

  storage/ndb/include/ndbapi/Ndb.hpp@1.60, 2006-11-03 02:18:39+11:00, stewart@willster.(none) +1 -11
    remove OSE

  storage/ndb/include/portlib/NdbMain.h@1.3, 2006-11-03 02:18:39+11:00, stewart@willster.(none) +0 -40
    remove OSE

  storage/ndb/include/portlib/NdbMutex.h@1.7, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +1 -4
    remove OSE

  storage/ndb/include/portlib/NdbTCP.h@1.12, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +1 -21
    remove OSE

  storage/ndb/include/portlib/NdbTick.h@1.4, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -4
    remove OSE

  storage/ndb/include/transporter/TransporterRegistry.hpp@1.24, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +2 -26
    remove OSE

  storage/ndb/include/util/OutputStream.hpp@1.6, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -9
    remove OSE

  storage/ndb/include/util/ndb_opts.h@1.19, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +1 -1
    remove OSE

  storage/ndb/src/common/logger/Logger.cpp@1.16, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +2 -2
    remove OSE

  storage/ndb/src/common/logger/loggertest/LoggerUnitTest.cpp@1.6, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +2 -10
    remove OSE

  storage/ndb/src/common/mgmcommon/IPCConfig.cpp@1.27, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -12
    remove OSE

  storage/ndb/src/common/portlib/NdbPortLibTest.cpp@1.7, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -5
    remove OSE

  storage/ndb/src/common/transporter/TCP_Transporter.cpp@1.11.1.1, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +1 -24
    remove OSE

  storage/ndb/src/common/transporter/TCP_Transporter.hpp@1.7, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -4
    remove OSE

  storage/ndb/src/common/transporter/TransporterInternalDefinitions.hpp@1.4, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -4
    remove OSE

  storage/ndb/src/common/transporter/TransporterRegistry.cpp@1.65.1.1, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +3 -240
    remove OSE

  storage/ndb/src/common/transporter/basictest/basicTransporterTest.cpp@1.5, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -23
    remove OSE

  storage/ndb/src/common/transporter/perftest/perfTransporterTest.cpp@1.6, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -61
    remove OSE

  storage/ndb/src/common/transporter/priotest/prioTransporterTest.cpp@1.6, 2006-11-03 02:18:40+11:00, stewart@willster.(none) +0 -60
    remove OSE

  storage/ndb/src/common/transporter/priotest/prioTransporterTest.hpp@1.3, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -1
    remove OSE

  storage/ndb/src/common/util/File.cpp@1.13.1.2, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -5
    remove OSE

  storage/ndb/src/common/util/OutputStream.cpp@1.6, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -33
    remove OSE

  storage/ndb/src/common/util/SocketServer.cpp@1.23, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -20
    remove OSE

  storage/ndb/src/kernel/blocks/ndbfs/AsyncFile.cpp@1.36, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +1 -12
    remove OSE

  storage/ndb/src/kernel/blocks/ndbfs/MemoryChannel.hpp@1.9, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -6
    remove OSE

  storage/ndb/src/kernel/blocks/ndbfs/Ndbfs.cpp@1.30, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -48
    remove OSE

  storage/ndb/src/kernel/main.cpp@1.61, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +1 -1
    remove OSE

  storage/ndb/src/kernel/vm/Emulator.cpp@1.24, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +4 -4
    remove OSE

  storage/ndb/src/kernel/vm/ThreadConfig.cpp@1.5, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -21
    remove OSE

  storage/ndb/src/mgmsrv/Config.hpp@1.9, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +1 -1
    remove OSE

  storage/ndb/src/mgmsrv/ConfigInfo.cpp@1.90.1.1, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +5 -162
    remove OSE

  storage/ndb/src/mgmsrv/main.cpp@1.51, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -15
    remove OSE

  storage/ndb/src/ndbapi/ClusterMgr.cpp@1.30, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +1 -9
    remove OSE

  storage/ndb/src/ndbapi/Ndbinit.cpp@1.41, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -12
    remove OSE

  storage/ndb/src/ndbapi/TransporterFacade.cpp@1.53, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +1 -1
    remove OSE

  storage/ndb/src/ndbapi/ndb_cluster_connection.cpp@1.45, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -3
    remove OSE

  storage/ndb/test/ndbapi/acid.cpp@1.7, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +2 -28
    remove OSE

  storage/ndb/test/ndbapi/flexHammer.cpp@1.13, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +1 -17
    remove OSE

  storage/ndb/test/ndbapi/flexScan.cpp@1.13, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +1 -13
    remove OSE

  storage/ndb/test/ndbapi/initronja.cpp@1.7, 2006-11-03 02:18:41+11:00, stewart@willster.(none) +0 -26
    remove OSE

ChangeSet@1.2303.59.2, 2006-11-03 01:12:30+11:00, stewart@willster.(none) +4 -0
  BUG#22309  	FileLogHandler::createNewFile() isn't thread safe - may loose log messages
  BUG#22305  	SysLogHandler not thread safe
  BUG#22313  	can get duplicate log messages in cluster log
  
  Fix all these problems with one patch. Make Logger, hence EventLogger (with a 
  bit more) thread safe.

  storage/ndb/include/debugger/EventLogger.hpp@1.12, 2006-11-03 01:12:26+11:00, stewart@willster.(none) +0 -1
    remove m_text to make thread safe

  storage/ndb/include/logger/Logger.hpp@1.9, 2006-11-03 01:12:26+11:00, stewart@willster.(none) +4 -0
    Use mutex to protect member variables for multithreaded use.

  storage/ndb/src/common/debugger/EventLogger.cpp@1.29, 2006-11-03 01:12:26+11:00, stewart@willster.(none) +9 -12
    use a string on the stack instead of member variable to make class thread safe

  storage/ndb/src/common/logger/Logger.cpp@1.15, 2006-11-03 01:12:27+11:00, stewart@willster.(none) +21 -1
    use mutexes to Guard member variables. makes class therad safe

ChangeSet@1.1810.2295.2, 2006-11-02 14:53:28+01:00, pekka@orca.ndb.mysql.com +2 -0
  ndb - fix test case: testDict -n Restart_NR* T1 I3

  ndb/test/ndbapi/testDict.cpp@1.20.8.1, 2006-11-02 14:50:58+01:00, pekka@orca.ndb.mysql.com +1 -1
    fix testDict -n Restart_NR* T1 I3

  ndb/test/run-test/daily-basic-tests.txt@1.27.18.1, 2006-11-02 14:50:58+01:00, pekka@orca.ndb.mysql.com +1 -1
    fix testDict -n Restart_NR* T1 I3

ChangeSet@1.1810.1698.161, 2006-11-02 16:53:14+03:00, anozdrin@booka. +1 -0
  Wait for IM to start accepting connections after restart.

  mysql-test/t/im_daemon_life_cycle.imtest@1.1.1.6, 2006-11-02 16:53:12+03:00, anozdrin@booka. +4 -1
    Wait for IM to start accepting connections after restart.

ChangeSet@1.1810.2295.1, 2006-11-02 14:37:52+01:00, pekka@orca.ndb.mysql.com +1 -0
  ndb - flush signal log when it is turned off

  ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.18.7.1, 2006-11-02 14:37:02+01:00, pekka@orca.ndb.mysql.com +1 -0
    flush signal log when it is turned off or whatever

ChangeSet@1.2303.54.3, 2006-11-02 08:34:16-05:00, cbell@mysql_cab. +1 -0
  BUG#23735 Changes to comments in code for explanation of fix.

  client/mysqlbinlog.cc@1.136, 2006-11-02 08:34:13-05:00, cbell@mysql_cab. +6 -9
    BUG#23735 Corrections to comments in code for explaination of fix.

ChangeSet@1.2303.61.1, 2006-11-02 17:11:53+04:00, ramil@mysql.com +2 -0
  Fix for bug #23762: partition.test fails (partition_hash, partition_pruning as well)
  
  When partition pruning is used we have to initialize key_part->flag in the 
  create_partition_index_descr() as it's checked in the get_mm_leaf().

  sql/opt_range.cc@1.245, 2006-11-02 17:11:49+04:00, ramil@mysql.com +5 -0
    Fix for bug #23762: partition.test fails (partition_hash, partition_pruning as well)
      - set key_part->flag to 0.

  sql/opt_range.h@1.71, 2006-11-02 17:11:49+04:00, ramil@mysql.com +3 -1
    Fix for bug #23762: partition.test fails (partition_hash, partition_pruning as well)
      - comment added.
    

ChangeSet@1.2303.60.1, 2006-11-02 13:51:43+01:00, andrey@example.com +10 -0
  Better fix for bug#22830
  Events: crash with procedure which alters events with function
  
  Post-review CS
  
  This fix also changes the handling of KILL command combined with
  subquery. It changes the error message given back to "not supported",
  from parse error. The error for CREATE|ALTER EVENT has also been changed
  to generate "not supported yet" instead of parse error.
  In case of a SP call, the error is "not supported yet". This change
  cleans the parser from code which should not belong to there. Still
  LEX::expr_allows_subselect is existant because it simplifies the handling
   of SQLCOM_HA_READ which forbids subselects.

  mysql-test/r/events_bugs.result@1.23, 2006-11-02 13:51:31+01:00, andrey@example.com +46 -4
    update resut

  mysql-test/r/events_grant.result@1.3, 2006-11-02 13:51:31+01:00, andrey@example.com +11 -11
    update result

  mysql-test/r/kill.result@1.14.1.1, 2006-11-02 13:51:31+01:00, andrey@example.com +1 -1
    the error message has been changed for KILL

  mysql-test/t/events_bugs.test@1.19, 2006-11-02 13:51:31+01:00, andrey@example.com +47 -4
    Update old tests with the new emitted error
    
    Add a test case for
    BUG#22830 Events: crash with procedure which alters events with function

  mysql-test/t/events_grant.test@1.4, 2006-11-02 13:51:31+01:00, andrey@example.com +6 -6
    add ORDER BY clause to keep the result deterministic.

  mysql-test/t/kill.test@1.24, 2006-11-02 13:51:31+01:00, andrey@example.com +1 -1
    use name of the error, and change the error
    from parse error, to not supported

  sql/sql_lex.cc@1.203.1.1, 2006-11-02 13:51:31+01:00, andrey@example.com +23 -0
    Add an auxiliary function that checks whether SP and/or
    tables are used in the statement. This function is helpful for
    statements that cannot handle subqueries ans SP calls. Adding out
    of the parser cleans the latter of handling of special cases and
    letting it do its job of parsing.

  sql/sql_lex.h@1.245.4.1, 2006-11-02 13:51:32+01:00, andrey@example.com +2 -0
    helper function to check whether a table or SP was used

  sql/sql_parse.cc@1.585.4.1, 2006-11-02 13:51:32+01:00, andrey@example.com +13 -0
    Use LEX::table_or_sp_used() for SQLCOM_CREATE_EVENT, SQLCOM_ALTER_EVENT
    and SQLCOM_KILL. SQLCOM_DROP event does not use `expr` rule and thus a check is
    not needed.

  sql/sql_yacc.yy@1.510.1.1, 2006-11-02 13:51:32+01:00, andrey@example.com +3 -13
    Remove usage of LEX::expr_allows_subselect for CREATE|ALTER EVENT
    and KILL. There is only one left occurence - SQLCOM_HAREAD, but it 
    adds one table to the list of tables

ChangeSet@1.1616.2840.1, 2006-11-02 13:33:26+01:00, thek@kpdesk.mysql.com +1 -0
  Bug#22828 complementary patch:
  - 'false' not defined in C, use FALSE instead.

  mysys/my_lock.c@1.12.2.1, 2006-11-02 13:33:23+01:00, thek@kpdesk.mysql.com +1 -1
    Fixed error in windows built:
    'false' not defined in C, use FALSE instead.

ChangeSet@1.1810.2294.1, 2006-11-02 13:26:57+01:00, thek@kpdesk.mysql.com +1 -0
  Bug#22828 complementary patch:
  - 'false' not defined in C, use FALSE instead.

  mysys/my_lock.c@1.12.1.2, 2006-11-02 13:26:54+01:00, thek@kpdesk.mysql.com +1 -1
    Fixed error for windwos built:
    'false' not defined in C, use FALSE instead.

ChangeSet@1.2303.35.22, 2006-11-02 11:55:41+01:00, thek@kpdesk.mysql.com +1 -0
  Bug#22828 complementary patch:
  - 'false' not defined in C, use FALSE instead.

  mysys/my_lock.c@1.15, 2006-11-02 11:55:39+01:00, thek@kpdesk.mysql.com +1 -1
    Fixed error for windows built:
    'false' not defined in C, use FALSE instead.

ChangeSet@1.1616.2774.4, 2006-11-02 14:32:00+04:00, ramil@mysql.com +1 -0
  Fix for bug #22913: mysql --quick doesn't report some errors.
  
  We don't check for errors that may occur during data printing.

  client/mysql.cc@1.121.20.1, 2006-11-02 14:31:58+04:00, ramil@mysql.com +2 -0
    Fix for bug #22913: mysql --quick doesn't report some errors.
      - check for errors after the data output.

ChangeSet@1.2303.56.3, 2006-11-02 08:58:51+03:00, kostja@bodhi.local +1 -0
  A post-merge fix.

  mysql-test/r/ps.result@1.77.1.8, 2006-11-02 08:58:45+03:00, kostja@bodhi.local +97 -98
    A post-merge fix.

ChangeSet@1.2303.47.6, 2006-11-01 23:35:58+02:00, monty@mysql.com +1 -0
  bug#23110  Some NDB tests assert randomly on mixed mode binlog: Don't reset binlog format for NDB binlog injector thread

  sql/sql_class.h@1.320.7.2, 2006-11-01 23:35:56+02:00, monty@mysql.com +4 -1
    bug#23110  Some NDB tests assert randomly on mixed mode binlog: Don't reset binlog format for NDB binlog injector thread

ChangeSet@1.1616.2809.2, 2006-11-01 20:17:10+01:00, joerg@trift2. +2 -0
  mysql-test/mysql-test-run.pl  +  mysql-test/mysql-test-run.sh
  
  Necessary changes if one of the test scripts is to be used with a RPM installation (bug#17194).
  
  This change handles finding the server and the other programs,
  but it does not solve the problem to get a writable "var" directory.
  If we want to avoid world-writable directories below "/usr/share/mysql-test" (and we do!), 
  any automatic solution would require fixed decisions which may not match the local installation.
  
  For the Perl script, use "--vardir"; for the shell script, create "mysql-test/var" manually.

  mysql-test/mysql-test-run.sh@1.208.17.1, 2006-11-01 20:17:08+01:00, joerg@trift2. +28 -10
    Necessary changes if this script is to be used with a RPM installation (bug#17194):
    - The tests are one level further down, "/usr/share/mysqltest" (vs. "/usr/bin").
    - The server, "mysqld", is in a different location, "/usr/sbin".
    
    Note that these changes are not sufficient, as the user needs a writable "mysql-test/var" subdirectory.
    Either this is created manually, or the script can not be used.
    An alternative is the corresponding Perl script which supports a "--vardir" option.

  mysql-test/mysql-test-run.pl@1.8.12.1, 2006-11-01 20:17:08+01:00, joerg@trift2. +21 -2
    Modifications to use this script in a RPM installation (bug#17194):
    - The tests are one level further down, "/usr/share/mysqltest" (vs. "/usr/bin").
    - A "mysql-bench" might not exist.
    - "mysql-test" is owned by root and not world-writable, so "var" must be put somewhere else.
    - The server, "mysqld", is in a different location, "/usr/sbin".
    
    Note that the "--vardir" option must be used in a RPM installation,
    unless "mysql-test" is made writable for the user who runs the tests (not done automatically).

ChangeSet@1.1616.2750.5, 2006-11-01 18:23:30+00:00, lzhou@dev3-138.dev.cn.tlan +1 -0
  BUG#19352 return exact error message when parameters overflow in 32-bit platform.

  ndb/src/kernel/vm/SimulatedBlock.cpp@1.16.1.2, 2006-11-01 18:23:28+00:00, lzhou@dev3-138.dev.cn.tlan +8 -6
    Return exact error message when parameters overflow in 32-bit platform.

ChangeSet@1.2303.55.1, 2006-11-01 19:41:09+02:00, monty@mysql.com +28 -0
  Fixed a lot of compiler warnings (Mainly in mysqld and instance manager)
  Fixed some possible fatal wrong arguments to printf() style functions
  Initialized some not initialized variables
  Fixed bug in stored procedure and continue handlers
  (Fixes Bug#22150)

  include/mysql/plugin.h@1.22, 2006-11-01 19:41:04+02:00, monty@mysql.com +1 -1
    Remove compiler warning

  mysql-test/mysql-test-run.pl@1.183.5.1, 2006-11-01 19:41:04+02:00, monty@mysql.com +16 -9
    Ensure that --extern works on a clean tree (when 'var' directory doesn't exists)

  server-tools/instance-manager/commands.cc@1.37, 2006-11-01 19:41:04+02:00, monty@mysql.com +1 -1
    Fixed possible use of unitialized variable

  server-tools/instance-manager/guardian.cc@1.25.1.1, 2006-11-01 19:41:04+02:00, monty@mysql.com +5 -5
    Fixed wrong arguments to log_info() that could cause crashes

  server-tools/instance-manager/instance.cc@1.38.1.1, 2006-11-01 19:41:04+02:00, monty@mysql.com +5 -5
    Fixed wrong arguments to log_info() and log_error() that could cause crashes

  server-tools/instance-manager/instance_options.cc@1.38, 2006-11-01 19:41:04+02:00, monty@mysql.com +1 -1
    Fixed wrong arguments to log_error() that could cause crashes

  server-tools/instance-manager/mysql_connection.cc@1.16.1.1, 2006-11-01 19:41:04+02:00, monty@mysql.com +10 -10
    Fixed wrong arguments to log_info()

  server-tools/instance-manager/parse.cc@1.16, 2006-11-01 19:41:04+02:00, monty@mysql.com +1 -1
    Fixed possible use of unitialized variable

  server-tools/instance-manager/user_map.cc@1.18, 2006-11-01 19:41:04+02:00, monty@mysql.com +4 -5
    Fixed wrong arguments to log_error() that could cause crashes

  sql/Makefile.am@1.161.2.1, 2006-11-01 19:41:04+02:00, monty@mysql.com +3 -0
    Fix for bison 1.875
    (It write an __attribute__() tag that was causing compiler failures)

  sql/ha_ndbcluster.cc@1.357.2.2, 2006-11-01 19:41:04+02:00, monty@mysql.com +11 -10
    Fixed wrong snprintf() arguments
    Remoed not used variables

  sql/ha_ndbcluster_binlog.cc@1.85, 2006-11-01 19:41:05+02:00, monty@mysql.com +3 -2
    Fixed compiler warning (unsigned/signed comparision)

  sql/handler.cc@1.273.6.1, 2006-11-01 19:41:05+02:00, monty@mysql.com +4 -4
    Fixed wrong parameter to hton->binlog_func()

  sql/item_cmpfunc.cc@1.226, 2006-11-01 19:41:05+02:00, monty@mysql.com +3 -0
    Removed compiler warnings

  sql/item_timefunc.cc@1.137.3.1, 2006-11-01 19:41:05+02:00, monty@mysql.com +9 -1
    Removed compiler warnings

  sql/log.cc@1.237.4.1, 2006-11-01 19:41:05+02:00, monty@mysql.com +1 -1
    fixed wrong argument to snprintf()

  sql/mysqld.cc@1.583.5.1, 2006-11-01 19:41:05+02:00, monty@mysql.com +3 -3
    Removed compiler warnings
    Fixed wrong arguments to printf()

  sql/partition_info.cc@1.31, 2006-11-01 19:41:05+02:00, monty@mysql.com +5 -1
    Removed compiler warnings

  sql/protocol.cc@1.119, 2006-11-01 19:41:05+02:00, monty@mysql.com +3 -1
    reset is_fatal_error for stored procedures
    (Fix for Bug#22150)

  sql/sp_head.cc@1.240.1.1, 2006-11-01 19:41:05+02:00, monty@mysql.com +9 -3
    More DBUG information
    Reset is_fatal_error in case of continue handler.
    (Fix for Bug#22150)

  sql/sql_base.cc@1.356.3.1, 2006-11-01 19:41:05+02:00, monty@mysql.com +2 -0
    Removed compiler warnings

  sql/sql_class.h@1.320.7.1, 2006-11-01 19:41:05+02:00, monty@mysql.com +2 -0
    More DBUG information

  sql/sql_insert.cc@1.230.4.1, 2006-11-01 19:41:06+02:00, monty@mysql.com +9 -3
    Removed compiler warnings
    Initialize not initialized variable (fatal bug)

  sql/sql_parse.cc@1.585.3.1, 2006-11-01 19:41:06+02:00, monty@mysql.com +4 -1
    Added DBUG_ASSERT to detect if stored procedure code returns with a wrong state
    Removed compiler warning

  sql/sql_plugin.cc@1.37, 2006-11-01 19:41:06+02:00, monty@mysql.com +2 -2
    Fied wrong aruguments to printf() (Fatal bug)

  sql/sql_select.cc@1.452.7.1, 2006-11-01 19:41:06+02:00, monty@mysql.com +6 -5
    Initailize not initialized variable.
    Remove compiler warnings
    Fixed wrong argument to printf() (Possible fatal error)

  sql/sql_view.cc@1.110.4.1, 2006-11-01 19:41:06+02:00, monty@mysql.com +2 -0
    Removed compiler warnings

  sql/table.cc@1.246.3.1, 2006-11-01 19:41:06+02:00, monty@mysql.com +1 -1
    Fixed wrong argument to printf() (Possible fatal)

ChangeSet@1.2303.54.2, 2006-11-01 11:52:32-05:00, cbell@mysql_cab. +2 -0
  Changes to the code are necessary to compile on Windows. Typecasts are needed in several DBUG_DUMP statements. CAB 01 Nov 2006

  sql/log_event.cc@1.246.3.1, 2006-11-01 11:52:28-05:00, cbell@mysql_cab. +2 -2
    The changes are so that the code will compile on Windows. Typecasts are needed on the DBUG_DUMP statements to cast a byte * to a char *.

  sql/sql_class.cc@1.293.5.1, 2006-11-01 11:52:28-05:00, cbell@mysql_cab. +4 -4
    The changes are necessary to get the code to compile on Windows. The DBUG_DUMP statements need a typecast.

ChangeSet@1.2303.54.1, 2006-11-01 10:56:43-05:00, cbell@mysql_cab. +1 -0
  BUG#23735 Test rpl_row_mysqlbinlog fails on Windows. The errors report a file discrepency on reading a binlog from the command line.

  client/mysqlbinlog.cc@1.135, 2006-11-01 10:56:40-05:00, cbell@mysql_cab. +18 -0
    BUG#23735 Test rpl_row_mysqlbinlog fails on Windows. 

ChangeSet@1.1810.1698.158, 2006-11-01 16:14:49+01:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - revert bug to wait for "proper" bug fix
    bug#21052

  ndb/src/mgmsrv/Services.cpp@1.45.32.1, 2006-11-01 16:14:47+01:00, jonas@perch.ndb.mysql.com +0 -6
    revert bug to wait for "proper" bug fix

ChangeSet@1.1616.2838.1, 2006-11-01 16:47:40+03:00, petr@mysql.com +17 -0
  Fix Bug #9191 "TIMESTAMP/from_unixtime() no longer accepts 2^31-1"
  (4.1 version, with post-review fixes)
    
    The fix for another Bug (6439) limited FROM_UNIXTIME() to
    TIMESTAMP_MAX_VALUE which is 2145916799 or 2037-12-01 23:59:59 GMT,
    however unix timestamp in general is not considered to be limited 
    by this value. All dates up to power(2,31)-1 are valid.
    
    This patch extends allowed TIMESTAMP range so, that max
    TIMESTAMP value is power(2,31)-1. It also corrects
    FROM_UNIXTIME() and UNIX_TIMESTAMP() functions, so that
    max allowed UNIX_TIMESTAMP() is power(2,31)-1. FROM_UNIXTIME()
    is fixed accordingly to allow conversion of dates up to
    2038-01-19 03:14:07 UTC. The patch also fixes CONVERT_TZ()
    function to allow extended range of dates.
    
    The main problem solved in the patch is possible overflows
    of variables, used in broken-time representation to time_t
    conversion (required for UNIX_TIMESTAMP).

  acinclude.m4@1.123.21.1, 2006-11-01 16:47:32+03:00, petr@mysql.com +24 -0
    Add new macro to check time_t range

  configure.in@1.201.69.1, 2006-11-01 16:47:32+03:00, petr@mysql.com +7 -0
    Call the macro to check time_t range

  include/my_time.h@1.5.2.1, 2006-11-01 16:47:33+03:00, petr@mysql.com +32 -0
    Move time-related defines to proper place.
    Add a function to perform a rough check if
    a TIMESTAMP value fits into the boundaries.
    Note: it is defined as "static inline", as
    otherwise libmysql won't compile (due to the
    way how gcc handles "inline" directive).

  mysql-test/r/func_time.result@1.23.8.2, 2006-11-01 16:47:33+03:00, petr@mysql.com +38 -2
    Update test result

  mysql-test/r/timezone.result@1.7, 2006-11-01 16:47:33+03:00, petr@mysql.com +4 -4
    Update test result

  mysql-test/r/timezone2.result@1.2.1.6, 2006-11-01 16:47:33+03:00, petr@mysql.com +12 -12
    Update test result

  mysql-test/r/timezone4.result@1.1, 2006-11-01 16:47:34+03:00, petr@mysql.com +6 -0
    New BitKeeper file ``mysql-test/r/timezone4.result''

  mysql-test/r/timezone4.result@1.0, 2006-11-01 16:47:34+03:00, petr@mysql.com +0 -0

  mysql-test/t/func_time.test@1.21.7.2, 2006-11-01 16:47:33+03:00, petr@mysql.com +46 -6
    Add test for Bug#9191 and update test to be consistent
    with new TIMESTAMP boundaries

  mysql-test/t/timezone.test@1.10, 2006-11-01 16:47:33+03:00, petr@mysql.com +4 -3
    Update old tests to be consistent
    with new TIMESTAMP boundaries

  mysql-test/t/timezone2.test@1.4.1.4, 2006-11-01 16:47:33+03:00, petr@mysql.com +5 -5
    Update tests for convert_tz to be consistent with new
    TIMESTAMP boundaries

  mysql-test/t/timezone4-master.opt@1.1, 2006-11-01 16:47:34+03:00, petr@mysql.com +1 -0
    New BitKeeper file ``mysql-test/t/timezone4-master.opt''

  mysql-test/t/timezone4-master.opt@1.0, 2006-11-01 16:47:34+03:00, petr@mysql.com +0 -0

  mysql-test/t/timezone4.test@1.1, 2006-11-01 16:47:34+03:00, petr@mysql.com +13 -0
    New BitKeeper file ``mysql-test/t/timezone4.test''

  mysql-test/t/timezone4.test@1.0, 2006-11-01 16:47:34+03:00, petr@mysql.com +0 -0

  sql-common/my_time.c@1.6.3.1, 2006-11-01 16:47:34+03:00, petr@mysql.com +115 -9
    Because of increased TIMESTAMP_MAX_VALUE overflows in my_system_gmt_sec()
    became possible. Here we make it safe against the overflows by stepping
    back from the boundary dates which are likely to trigger them.

  sql/item_timefunc.cc@1.51.12.1, 2006-11-01 16:47:33+03:00, petr@mysql.com +4 -9
    Fix convert_tz to allow dates from the new (extended)
    TIMESTAMP range

  sql/mysql_priv.h@1.186.107.1, 2006-11-01 16:47:33+03:00, petr@mysql.com +0 -6
    Move time handling defaults to my_time.h

  sql/time.cc@1.49.2.1, 2006-11-01 16:47:34+03:00, petr@mysql.com +3 -6
    Update TIME_to_timestamp to allow conversion of
    extended date range

  sql/tztime.cc@1.8.1.14, 2006-11-01 16:47:34+03:00, petr@mysql.com +68 -8
    Fix new (4.1) implementation of broken-down time representation
    to time_t conversion routine to avoid overflows during conversion
    of boundary dates

ChangeSet@1.1810.2283.2, 2006-11-01 15:41:48+03:00, dlenev@mockturtle.local +4 -0
  Small cleanup in code handling stored routines/table prelocking.
  
  Use lazy initialization for Query_tables_list::sroutines hash.
  This step should significantly decrease amount of memory consumed
  by stored routines as we no longer will allocate chunk of memory
  required for this HASH for each statement in routine.

  include/hash.h@1.18, 2006-11-01 15:41:46+03:00, dlenev@mockturtle.local +2 -0
    Introduced auxillary hash_init_opt() macro which simplifies
    lazy initialization of HASH objects.

  sql/sp.cc@1.82.22.1, 2006-11-01 15:41:46+03:00, dlenev@mockturtle.local +4 -0
    Use lazy initialization for Query_tables_list::sroutines hash.
    This step should significantly decrease amount of memory consumed
    by stored routines as we no longer will allocate chunk of memory
    required for this HASH for each statement in routine.

  sql/sql_lex.cc@1.142.28.1, 2006-11-01 15:41:46+03:00, dlenev@mockturtle.local +10 -1
    Use lazy initialization for Query_tables_list::sroutines hash.
    This step should significantly decrease amount of memory consumed
    by stored routines as we no longer will allocate chunk of memory
    required for this HASH for each statement in routine.

  sql/sql_lex.h@1.175.27.1, 2006-11-01 15:41:46+03:00, dlenev@mockturtle.local +5 -1
    Updated comment describing Query_tables_list::sroutines to
    reflect that now we are use lazy initialization for this hash.
    Added constant for initial size of this hash.

ChangeSet@1.1810.2291.1, 2006-11-01 10:50:19+00:00, lzhou@dev3-138.dev.cn.tlan +3 -0
  BUG#21052 Modify the overflow error existed in last patch.

  ndb/include/ndbapi/ndberror.h@1.8.1.1, 2006-11-01 10:50:17+00:00, lzhou@dev3-138.dev.cn.tlan +1 -1
    Change unsigned int to int

  ndb/src/mgmsrv/Services.cpp@1.45.31.1, 2006-11-01 10:50:17+00:00, lzhou@dev3-138.dev.cn.tlan +6 -3
    Modify the overflow error existed in last patch. Change ther length of m_text to 512.

  ndb/src/ndbapi/ndberror.c@1.30.32.1, 2006-11-01 10:50:17+00:00, lzhou@dev3-138.dev.cn.tlan +5 -2
    Change the parameter of ndb_error_string from unsinged int to int.

ChangeSet@1.1810.2274.2, 2006-11-01 14:22:11+04:00, holyfoot@mysql.com +1 -0
  test result fixed

  mysql-test/r/type_newdecimal.result@1.36.2.2, 2006-11-01 14:22:08+04:00, holyfoot@mysql.com +1 -1
    test result fixed

ChangeSet@1.2303.29.2, 2006-11-01 09:49:03+01:00, mats@romeo.(none) +7 -0
  BUG#18581 (Creation of system tables recorded in binlog causing slave failure):
  Not replicating the mysql database *at all* any more. All changes to
  mysql tables are replicated by replicating the statements that do
  the changes.

  mysql-test/r/rpl_do_grant.result@1.6, 2006-11-01 09:48:57+01:00, mats@romeo.(none) +2 -0
    Result change

  mysql-test/t/rpl_do_grant.test@1.7, 2006-11-01 09:48:57+01:00, mats@romeo.(none) +5 -5
    Deleting grants on both master and server since the mysql
    database is not replicated any more.

  sql/handler.cc@1.273.4.1, 2006-11-01 09:48:57+01:00, mats@romeo.(none) +6 -29
    Removing code that selectively checks what tables in the mysql
    database to ignore. The entire mysql database is not replicated
    any more.

  sql/log_event.cc@1.246.2.1, 2006-11-01 09:48:57+01:00, mats@romeo.(none) +0 -1
    Disabling code to reload grants and access when certain tables are
    touched.

  sql/rpl_rli.h@1.4.1.1, 2006-11-01 09:48:58+01:00, mats@romeo.(none) +0 -16
    Removing unused code.

  sql/slave.cc@1.288.1.1, 2006-11-01 09:48:58+01:00, mats@romeo.(none) +3 -79
    Removing unused code.

  sql/sql_class.cc@1.293.4.1, 2006-11-01 09:48:58+01:00, mats@romeo.(none) +6 -6
    Mysql queries (i.e., queries that affects tables in the mysql database)
    are now replicated by statement instead of replicating the tables in
    the mysql database.

ChangeSet@1.1810.2225.5, 2006-11-01 12:30:01+04:00, bar@mysql.com +5 -0
  Bug#22877 replication character sets get out of
  sync using replicate-wild-ignore-table
  Problem: changes in character set variables
  before an action on an replication-ignored table
  makes slave to forget new variable values.
  Fix: initialize one_shot variables only when
  4.1 -> 5.x replication is running.

  BitKeeper/etc/collapsed@1.4.4.1, 2006-10-24 15:16:59+05:00, bar@mysql.com +1 -0

  mysql-test/r/rpl_ignore_table.result@1.2, 2006-11-01 12:29:55+04:00, bar@mysql.com +16 -0
    Adding test case

  mysql-test/t/rpl_ignore_table-slave.opt@1.2, 2006-11-01 12:29:55+04:00, bar@mysql.com +1 -1
    Don't replicate tables with names starting with "tmptbl"

  mysql-test/t/rpl_ignore_table.test@1.1.1.1, 2006-11-01 12:29:55+04:00, bar@mysql.com +23 -0
    Adding test case

  sql/sql_parse.cc@1.426.116.1, 2006-11-01 12:29:56+04:00, bar@mysql.com +17 -1
    Reset one_shot variables only if we do 4.1->5.x replication.
    In other cases we cannot do that: resetting thd->variables out of sync with
    st_relay_log_info::cached_charset, which makes
    st_relay_log_info::cached_charset_compare() not to notice
    character set related variables changes afterwards.

ChangeSet@1.2303.50.1, 2006-10-31 20:10:32-08:00, brian@zim.(none) +3 -0
  Adding in an ha_end() call. This is the first part of the patch I and Monty have agreed on. In the future engines will have the option of shutting down more quickly via the panic call, or just shutting down during the unloading of a plugin. 

  sql/handler.cc@1.275, 2006-10-31 20:10:25-08:00, brian@zim.(none) +17 -0
    Adding ha_end

  sql/handler.h@1.244.2.1, 2006-10-31 20:10:25-08:00, brian@zim.(none) +1 -0
    Function declaration for ha_end()

  sql/mysqld.cc@1.585, 2006-10-31 20:10:25-08:00, brian@zim.(none) +1 -0
    Adding ha_end call.

ChangeSet@1.2303.1.14, 2006-11-01 11:04:26+08:00, dli@dev3-76.dev.cn.tlan +1 -0
  ndb - BUG#18647, cluster.schema database needs to be hidden.
  
  Hide cluster.schema table when executing 'show tables' on mysql client.

  sql/ha_ndbcluster.cc@1.357.6.1, 2006-11-01 11:04:23+08:00, dli@dev3-76.dev.cn.tlan +17 -0
    Hide cluster.schema table to user.

ChangeSet@1.1810.2290.1, 2006-10-31 17:31:56-08:00, igor@rurik.mysql.com +12 -0
  Fixed bug #21727.
  This is a performance issue for queries with subqueries evaluation
  of which requires filesort.
  Allocation of memory for the sort buffer at each evaluation of a
  subquery may take a significant amount of time if the buffer is rather big.
  With the fix we allocate the buffer at the first evaluation of the
  subquery and reuse it at each subsequent evaluation.

  mysql-test/r/subselect.result@1.134.11.1, 2006-10-31 17:31:48-08:00, igor@rurik.mysql.com +16 -0
    Added a test case for bug #21727.

  mysql-test/t/subselect.test@1.129.3.1, 2006-10-31 17:31:48-08:00, igor@rurik.mysql.com +37 -0
    Added a test case for bug #21727.

  sql/filesort.cc@1.105.2.1, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +34 -7
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Allocation of memory for the sort buffer at each evaluation of a
    subquery may take a significant amount of time if the buffer is rather big.
    With the fix we allocate the buffer at the first evaluation of the
    subquery and reuse it at each subsequent evaluation.
      

  sql/item_subselect.h@1.77.2.1, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +7 -0
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Added an implementation for Item_subselect::is_uncacheable()
    returning TRUE if the engine if the subselect is uncacheable.

  sql/mysql_priv.h@1.290.69.3, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +1 -1
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Added a new boolean parameter to the filesort_free_buffers procedure.
    If the value of this parameter is TRUE the procedure frees the sort_keys
    buffpek buffers. 

  sql/records.cc@1.40.2.1, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +1 -1
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Added a new boolean parameter to the filesort_free_buffers procedure.
    If the value of this parameter is TRUE the procedure frees the sort_keys
    buffpek buffers.

  sql/sql_base.cc@1.235.75.1, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +2 -0
    Fixed bug #21727.
    Made sure that st_table::pos_in_table_list would be always initialized.

  sql/sql_select.cc@1.312.113.1, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +3 -3
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Added a new boolean parameter to the filesort_free_buffers procedure.
    If the value of this parameter is TRUE the procedure frees the sort_keys
    buffpek buffers. 

  sql/sql_show.cc@1.253.40.1, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +1 -1
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Added a new boolean parameter to the filesort_free_buffers procedure.
    If the value of this parameter is TRUE the procedure frees the sort_keys
    buffpek buffers. 

  sql/sql_table.cc@1.239.35.3, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +0 -3
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Cleanup.

  sql/table.cc@1.160.35.3, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +17 -0
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Added st_table_list::in_subselect() returning for a table the subselect that 
    contains the FROM list this table is taken from (if there is any).

  sql/table.h@1.102.1.33, 2006-10-31 17:31:49-08:00, igor@rurik.mysql.com +5 -0
    Fixed bug #21727.
    This is a performance issue for queries with subqueries evaluation
    of which requires filesort.
    Added fields for sort_keys and buffpek buffers to the FILESORT_INFO structure.

ChangeSet@1.1810.2288.3, 2006-11-01 00:27:51+03:00, sergefp@mysql.com +1 -0
  BUG#8804: Incorrect results for NULL IN (SELECT ...): review fixes:
  - Better comments
  - Remove redundant and dead code.

  sql/item_subselect.cc@1.113.1.26, 2006-11-01 00:27:49+03:00, sergefp@mysql.com +20 -22
    BUG#8804: Incorrect results for NULL IN (SELECT ...): review fixes:
    - Better comments
    - Remove redundant and dead code.

ChangeSet@1.1810.2288.2, 2006-10-31 21:30:40+03:00, sergefp@mysql.com +1 -0
  BUG#8804: Better comment + TODO section with suggestion how to speedup
  the fix. 

  sql/item_subselect.cc@1.113.1.25, 2006-10-31 21:30:37+03:00, sergefp@mysql.com +37 -4
    BUG#8804: Better comment + TODO section with suggestion how to speedup
    the fix. 

ChangeSet@1.1616.2835.4, 2006-10-31 19:02:33+01:00, msvensson@shellback.(none) +2 -0
  Improve the reading of .pid files from var/run
   - Only read *.pid
   - Only allow it to contain a number 

  mysql-test/lib/mtr_io.pl@1.3.2.3, 2006-10-31 19:02:31+01:00, msvensson@shellback.(none) +5 -7
    Check that the value read from pidfile is a valid number consisting only of digits

  mysql-test/lib/mtr_process.pl@1.15.3.5, 2006-10-31 19:02:31+01:00, msvensson@shellback.(none) +25 -15
    Only process .pid files in var/run dir and print a warning if other files are found there. 

ChangeSet@1.1616.2835.3, 2006-10-31 18:51:23+01:00, msvensson@shellback.(none) +1 -0
  Make variables static to please Netware compiler

  client/mysqltest.c@1.92.21.26, 2006-10-31 18:51:22+01:00, msvensson@shellback.(none) +18 -18
    Make the variables that are referenced from the "command_arg" arrays static to please the NetWare compiler.
    Apparently the arrays can't reference local stack variables.

ChangeSet@1.1810.2288.1, 2006-10-31 20:51:09+03:00, sergefp@mysql.com +13 -0
  BUG#8804: wrong results for NULL IN (SELECT ...)
  Evaluate "NULL IN (SELECT ...)" in a special way: Disable pushed-down 
  conditions and their "consequences": 
   = Do full table scans instead of unique_[index_subquery] lookups.
   = Change appropriate "ref_or_null" accesses to full table scans in
     subquery's joins.
  Also cache value of NULL IN (SELECT ...) if the SELECT is not correlated 
  wrt any upper select.

  mysql-test/r/subselect.result@1.134.9.4, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +5 -5
    BUG#8804: wrong results for NULL IN (SELECT ...): 
     - Updated test results

  mysql-test/r/subselect3.result@1.1, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +153 -0
    New BitKeeper file ``mysql-test/r/subselect3.result''

  mysql-test/r/subselect3.result@1.0, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +0 -0

  mysql-test/t/subselect3.test@1.1, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +137 -0
    New BitKeeper file ``mysql-test/t/subselect3.test''

  mysql-test/t/subselect3.test@1.0, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +0 -0

  sql/item.h@1.183.1.27, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +10 -0
    BUG#8804: wrong results for NULL IN (SELECT ...): 
     - Added comments

  sql/item_cmpfunc.cc@1.187.1.37, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +33 -1
    BUG#8804: wrong results for NULL IN (SELECT ...): 
    Made Item_in_optimizer to:
    - cache the value of "NULL IN (uncorrelated select)"
    - Turn off pushed-down predicates when evaluating "NULL IN (SELECT ...)"
    

  sql/item_cmpfunc.h@1.122.2.10, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +39 -9
    BUG#8804: wrong results for NULL IN (SELECT ...): 
    - Made Item_in_optimizer cache the value of "NULL IN (uncorrelated select)"
    - Added comments

  sql/item_subselect.cc@1.113.1.24, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +353 -53
    BUG#8804: wrong results for NULL IN (SELECT ...):
    - When needed, wrap the predicates we push into subquery into an 
      Item_func_trig_cond so we're able to turn them off when evaluating 
      NULL IN (SELECT ...).
    - Added code to evaluate NULL IN (SELECT ...) in a special way:
      = In [unique_]index_subquery, do full table scan to see if there 
        are any rows.
      = For other subqueries, change ref[_or_null] to ALL if the
        ref[_or_null] was created from pushed-down predicate.
     

  sql/item_subselect.h@1.77.1.2, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +62 -8
    BUG#8804: wrong results for NULL IN (SELECT ...):
    - Added Item_subselect::is_correlated
    - Added comments

  sql/records.cc@1.40.1.3, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +3 -2
    BUG#8804: wrong results for NULL IN (SELECT ...):
    - Make rr_sequential() non-static

  sql/sql_lex.cc@1.142.27.1, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +3 -1
    BUG#8804: wrong results for NULL IN (SELECT ...):
    - Added st_select_lex::is_correlated and Item_subselect::is_correlated.

  sql/sql_lex.h@1.175.26.1, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +3 -1
    BUG#8804: wrong results for NULL IN (SELECT ...):
    - Added st_select_lex::is_correlated

  sql/sql_select.cc@1.312.112.1, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +91 -21
    BUG#8804: wrong results for NULL IN (SELECT ...):
    - Added KEY_FIELD::outer_ref to keep track of which ref accesses are 
      created from predicates that were pushed down into the subquery.

  sql/sql_select.h@1.92.1.20, 2006-10-31 20:42:45+03:00, sergefp@mysql.com +8 -3
    BUG#8804: wrong results for NULL IN (SELECT ...):
    - Added KEYUSE::outer_ref

ChangeSet@1.1616.2835.2, 2006-10-31 17:16:07+01:00, msvensson@shellback.(none) +1 -0
  Remove warning, exe_mysql_fix_system_tables are not available on windows

  mysql-test/mysql-test-run.pl@1.8.9.77, 2006-10-31 17:16:04+01:00, msvensson@shellback.(none) +10 -8
    Remove warning, exe_mysql_fix_system_tables are not available on windows

ChangeSet@1.2303.42.6, 2006-10-31 16:51:51+01:00, lars@mysql.com +7 -0
  Refactoring: Moved master info functionality into rpl_mi.cc to 
  make code easier to maintain.

  sql/CMakeLists.txt@1.31, 2006-10-31 16:51:49+01:00, lars@mysql.com +1 -1
    New file

  sql/Makefile.am@1.161.1.2, 2006-10-31 16:51:49+01:00, lars@mysql.com +2 -2
    New file

  sql/rpl_mi.cc@1.1, 2006-10-31 16:51:49+01:00, lars@mysql.com +386 -0
    Moved master info functionality into rpl_mi.cc

  sql/rpl_mi.cc@1.0, 2006-10-31 16:51:49+01:00, lars@mysql.com +0 -0

  sql/rpl_mi.h@1.1, 2006-10-31 16:51:49+01:00, lars@mysql.com +110 -0
    Moved master info functionality into rpl_mi.cc

  sql/rpl_mi.h@1.0, 2006-10-31 16:51:49+01:00, lars@mysql.com +0 -0

  sql/rpl_rli.h@1.6, 2006-10-31 16:51:49+01:00, lars@mysql.com +2 -2
    Changed master_info into a class

  sql/slave.cc@1.291, 2006-10-31 16:51:49+01:00, lars@mysql.com +2 -329
    Moved master info functionality into rpl_mi.cc

  sql/slave.h@1.102, 2006-10-31 16:51:49+01:00, lars@mysql.com +3 -114
    Moved master info functionality into rpl_mi.cc

ChangeSet@1.1810.2287.1, 2006-10-31 16:09:31+01:00, jonas@perch.ndb.mysql.com +2 -0
  ndb - ndb_multi spurious failure
    remove timeing dependant part of test

  mysql-test/r/ndb_multi.result@1.3.1.6, 2006-10-31 16:09:29+01:00, jonas@perch.ndb.mysql.com +0 -3
    remove timeing dependant part of test

  mysql-test/t/ndb_multi.test@1.5.1.5, 2006-10-31 16:09:29+01:00, jonas@perch.ndb.mysql.com +0 -1
    remove timeing dependant part of test

ChangeSet@1.2303.42.5, 2006-10-31 14:54:37+01:00, lars@mysql.com +1 -0
  Added new file

  sql/CMakeLists.txt@1.30, 2006-10-31 14:54:36+01:00, lars@mysql.com +1 -0
    Added new file

ChangeSet@1.2303.42.4, 2006-10-31 12:23:14+01:00, lars@mysql.com +6 -0
  Refactoring: Moved rli code to new file rpl_rli.cc.  The idea being that rli 
  should be a separate module (i.e. a class) to make it easier to maintain the 
  code, e.g. by having checks within the rli checking sanity of data and making 
  member variables private.  This will also ease implementation of multi-source 
  and, at least in my fantasies :), make it possible in some future to have 
  separate replication servers.

  sql/Makefile.am@1.161.1.1, 2006-10-31 12:23:05+01:00, lars@mysql.com +1 -1
    Added file rpl_rli.cc

  sql/repl_failsafe.cc@1.67, 2006-10-31 12:23:05+01:00, lars@mysql.com +1 -1
    Move function

  sql/rpl_rli.cc@1.1, 2006-10-31 12:23:05+01:00, lars@mysql.com +1187 -0
    Code for rli

  sql/rpl_rli.cc@1.0, 2006-10-31 12:23:05+01:00, lars@mysql.com +0 -0

  sql/rpl_rli.h@1.5, 2006-10-31 12:23:05+01:00, lars@mysql.com +9 -0
    moved functions

  sql/slave.cc@1.290, 2006-10-31 12:23:05+01:00, lars@mysql.com +4 -1154
    Moved rli code into rpl_rli.cc 

  sql/sql_repl.cc@1.155.1.1, 2006-10-31 12:23:05+01:00, lars@mysql.com +5 -5
    Changed function to be member function

ChangeSet@1.1810.2285.1, 2006-10-31 11:01:27+02:00, gkodinov@macbook.gmz +4 -0
  Bug #23184: SELECT causes server crash
   Item::val_xxx() may be called by the server several times at execute time 
   for a single query. Calls to val_xxx() may be very expensive and sometimes
   (count(distinct), sum(distinct), avg(distinct)) not possible.
   To avoid that problem the results of calculation for these aggregate 
   functions are cached so that val_xxx() methods just return the calculated 
   value for the second and subsequent calls.

  mysql-test/r/func_group.result@1.49.1.5, 2006-10-31 11:01:20+02:00, gkodinov@macbook.gmz +26 -0
    Bug #23184: SELECT causes server crash
     - test case

  mysql-test/t/func_group.test@1.48.1.2, 2006-10-31 11:01:20+02:00, gkodinov@macbook.gmz +25 -0
    Bug #23184: SELECT causes server crash
     - test case

  sql/item_sum.cc@1.170.8.1, 2006-10-31 11:01:21+02:00, gkodinov@macbook.gmz +34 -13
    Bug #23184: SELECT causes server crash
     - caching of the aggregate function results so no need to recalculate at val_xxx()

  sql/item_sum.h@1.102.2.1, 2006-10-31 11:01:22+02:00, gkodinov@macbook.gmz +26 -8
    Bug #23184: SELECT causes server crash
     - caching of the aggregate function results so no need to recalculate at val_xxx()

ChangeSet@1.1616.2837.1, 2006-10-31 09:26:16+01:00, thek@kpdesk.mysql.com +4 -0
  Bug#22828 _my_b_read() ignores return values for my_seek() calls
  - Because my_seek actually is capable of returning an error code we should
    exploit that in the best possible way.
  - There might be kernel errors or other errors we can't predict and capturing
    the return value of all system calls gives us better understanding of
    possible errors.

  mysys/mf_iocache.c@1.47.2.1, 2006-10-31 09:26:15+01:00, thek@kpdesk.mysql.com +90 -12
    - Added check on return value for my_seek
    - Added comments

  mysys/my_chsize.c@1.15.2.1, 2006-10-31 09:26:15+01:00, thek@kpdesk.mysql.com +5 -1
    - Added check on return value for my_seek
    - Added comments

  mysys/my_lock.c@1.12.1.1, 2006-10-31 09:26:15+01:00, thek@kpdesk.mysql.com +34 -5
    - Added check on return value for my_seek
    - Added comments

  mysys/my_seek.c@1.11.2.1, 2006-10-31 09:26:15+01:00, thek@kpdesk.mysql.com +24 -2
    - Added comments

ChangeSet@1.2303.42.3, 2006-10-30 17:09:28+02:00, aelkin@dsl-hkigw8-feaef900-46.dhcp.inet.fi +2 -0
  BUG#20697 slave fails to rollback replicated transaction hang over innodb_lock_wait_timeou
  post-merge fixes in test/result

  mysql-test/extra/rpl_tests/rpl_deadlock.test@1.15, 2006-10-30 17:09:24+02:00, aelkin@dsl-hkigw8-feaef900-46.dhcp.inet.fi +2 -2
    recalculating BEGIN's event position.

  mysql-test/r/rpl_deadlock_innodb.result@1.13, 2006-10-30 17:09:24+02:00, aelkin@dsl-hkigw8-feaef900-46.dhcp.inet.fi +18 -9
    results changed

ChangeSet@1.1616.2836.1, 2006-10-30 17:47:02+03:00, kroki@moonlight.intranet +2 -0
  BUG#21915: Changing limits of table_cache when setting max_connections
  
  If the user has specified --max-connections=N or --table-open-cache=M
  options to the server, a warning could be given that some values were
  recalculated, and table-open-cache could be assigned greater value.
  
  Note that both warning and increase of table-open-cache were totally
  harmless.
  
  This patch fixes recalculation code to ensure that table-open-cache will
  be never increased automatically and that a warning will be given only if
  some values had to be decreased due to operating system limits.
  
  No test case is provided because we neither can't predict nor control
  operating system limits for maximal number of open files.

  sql/mysql_priv.h@1.186.106.2, 2006-10-30 17:46:59+03:00, kroki@moonlight.intranet +2 -0
    Add constants for table_cache minimum and default values.

  sql/mysqld.cc@1.356.109.1, 2006-10-30 17:46:59+03:00, kroki@moonlight.intranet +33 -9
    Fix max_connections and table_cache_size re-computation.

ChangeSet@1.1616.2834.1, 2006-10-30 14:42:28+01:00, msvensson@shellback.(none) +2 -0
  Bug#18654  Test is timing-dependent and fails from scheduling effects (?)
   - Wait in loop with small sleep until tables has been renamed

  mysql-test/include/wait_for_query_to_suceed.inc@1.1, 2006-10-30 14:42:25+01:00, msvensson@shellback.(none) +25 -0
    New BitKeeper file ``mysql-test/include/wait_for_query_to_suceed.inc''

  mysql-test/include/wait_for_query_to_suceed.inc@1.0, 2006-10-30 14:42:25+01:00, msvensson@shellback.(none) +0 -0

  mysql-test/t/rename.test@1.11.2.1, 2006-10-30 14:42:25+01:00, msvensson@shellback.(none) +8 -4
    To avoid scheduling effects wait for the tables to be renamed in a loop with small sleeps
    before continuing with tests

ChangeSet@1.1810.2078.84, 2006-10-30 13:35:57+01:00, msvensson@shellback.(none) +6 -0
  Improve comments around FLUSH STATUS
  It's not possible to flush the global status variables in 5.0
  Update test case so it works by recording the value of handle_rollback
  before and compare it to the value after

  mysql-test/t/innodb_mysql.test@1.3.14.1, 2006-10-30 13:35:55+01:00, msvensson@shellback.(none) +7 -2
    It's not possible to reset the global status variables in 5.0 so intead its value
    is recorded and compared to the after value.
    It should not have changed. 

  mysql-test/r/innodb_mysql.result@1.3.4.7, 2006-10-30 13:35:55+01:00, msvensson@shellback.(none) +2 -4
    Update result file

  sql/mysqld.cc@1.439.1.138, 2006-10-30 13:35:55+01:00, msvensson@shellback.(none) +9 -1
    Improve comments

  sql/set_var.cc@1.125.5.28, 2006-10-30 13:35:55+01:00, msvensson@shellback.(none) +1 -1
    Improve comments

  sql/sql_class.cc@1.223.1.30, 2006-10-30 13:35:55+01:00, msvensson@shellback.(none) +2 -3
    Improve comments

  sql/sql_class.h@1.230.41.1, 2006-10-30 13:35:55+01:00, msvensson@shellback.(none) +7 -2
    Improve comments

ChangeSet@1.1810.2078.83, 2006-10-30 13:08:57+01:00, msvensson@shellback.(none) +1 -0
  Add an extra block to avoid that DBUG_ENTER declare variables after code

  myisam/sort.c@1.45.11.1, 2006-10-30 13:08:55+01:00, msvensson@shellback.(none) +135 -129
    Add an extra block to avoid that DBUG_ENTER declare variables after code

ChangeSet@1.1810.2273.4, 2006-10-30 14:40:15+04:00, bar@mysql.com +9 -0
   Bug#20404: SHOW CREATE TABLE fails with Turkish I
    
    Problem: SHOW CREATE TABLE printed garbage in table
    name for tables having TURKISH I
    (i.e. LATIN CAPITABLE LETTER I WITH DOT ABOVE)
    when lower-case-table-name=1.
    
    Reason: In some cases during lower/upper conversion in utf8,
    the result string can be shorter the original string
    (including the above letter). Old implementation of caseup_str()
    and casedn_str() didn't handle the result length properly,
    assuming that length cannot change.
    
    This fix changes the result type of cs->cset->casedn_str()
    and cs->cset->caseup_str() from VOID to UINT, to return
    the result length, as well as put '\0' terminator on a 
    proper place.
    
    Also, my_caseup_str_utf8() and my_casedn_str_utf8() were 
    rewritten not to use strlen() for performance purposes.
    It was done with help of adding of new functions - my_utf8_uni_no_range()
    and my_uni_utf8_no_range() - for null terminated strings.
  

  include/m_ctype.h@1.114.1.9, 2006-10-30 14:40:09+04:00, bar@mysql.com +6 -6
    Changeing return type from void to int for caseup_str() and casedn_str()
    

  mysql-test/r/lowercase_table.result@1.18, 2006-10-30 14:40:09+04:00, bar@mysql.com +24 -0
    Adding test case
    

  mysql-test/t/lowercase_table.test@1.23, 2006-10-30 14:40:09+04:00, bar@mysql.com +20 -0
    Adding test case
    

  sql/sql_parse.cc@1.426.115.1, 2006-10-30 14:40:09+04:00, bar@mysql.com +1 -1
    Set table->table.length to result of my_casedn_str().

  strings/ctype-bin.c@1.66.1.5, 2006-10-30 14:40:09+04:00, bar@mysql.com +2 -1
    Changeing return type from void to int for caseup_str() and casedn_str()

  strings/ctype-mb.c@1.47.1.5, 2006-10-30 14:40:09+04:00, bar@mysql.com +14 -10
    Changeing return type from void to int for caseup_str() and casedn_str()

  strings/ctype-simple.c@1.75.1.3, 2006-10-30 14:40:09+04:00, bar@mysql.com +12 -6
    Changeing return type from void to int for caseup_str() and casedn_str()

  strings/ctype-ucs2.c@1.50.1.13, 2006-10-30 14:40:09+04:00, bar@mysql.com +5 -3
    Changeing return type from void to int for caseup_str() and casedn_str()

  strings/ctype-utf8.c@1.97.1.4, 2006-10-30 14:40:09+04:00, bar@mysql.com +129 -6
    Changeing return type from void to int for caseup_str() and casedn_str().
        Optimization, to get rid of strlen():
        Adding my_utf8_uni_no_range() and my_uni_utf8_no_range() - for null
        terninated strings.

ChangeSet@1.1810.2214.22, 2006-10-30 12:03:42+03:00, kostja@bodhi.local +1 -0
  A cleanup.

  sql/sql_parse.cc@1.426.112.4, 2006-10-30 12:03:39+03:00, kostja@bodhi.local +0 -6
    ALTER TABLE should not be affected by DONT_ALLOW_SHOW_COMMANDS
    (a bug that's there since version 1.1)

ChangeSet@1.1810.2214.21, 2006-10-30 11:36:30+03:00, kostja@bodhi.local +1 -0
  Cleanup.

  sql/sql_table.cc@1.239.37.2, 2006-10-30 11:36:26+03:00, kostja@bodhi.local +0 -202
    Remove unused code (it's also made obsolete by work in 5.1)

ChangeSet@1.1810.2282.1, 2006-10-30 10:14:03+04:00, bar@mysql.com +13 -0
  Bug#18908: ERROR 1406 (22001): Data too long for column :: using utf8
  Problem: Too confusing error message when cannot convert
  between string and column character sets on INSERT and UPDATE.
  Fix: producing a better error message, instead of "Data too long"
  in such cases
  Additional changes: Adding "DROP TABLE IF EXISTS" into several
  tests to be safe against failures in previous tests. 

  BitKeeper/etc/collapsed@1.4.5.1, 2006-10-30 10:06:39+04:00, bar@mysql.com +1 -0

  mysql-test/include/strict_autoinc.inc@1.2, 2006-10-30 10:13:58+04:00, bar@mysql.com +4 -0
    Adding DROP TABLE to be safe against previous tests failure.

  mysql-test/r/ctype_recoding.result@1.30.1.3, 2006-10-30 10:13:58+04:00, bar@mysql.com +2 -2
    Fixing test results

  mysql-test/r/ctype_utf8.result@1.85.9.1, 2006-10-30 10:13:58+04:00, bar@mysql.com +3 -3
    Fixing test results

  mysql-test/r/fulltext.result@1.83.1.3, 2006-10-30 10:13:58+04:00, bar@mysql.com +4 -4
    Fixing test results

  mysql-test/r/strict_autoinc_1myisam.result@1.1.1.1, 2006-10-30 10:13:58+04:00, bar@mysql.com +1 -0
    Adding DROP TABLE to be safe against previous tests failure.

  mysql-test/r/strict_autoinc_2innodb.result@1.1.1.1, 2006-10-30 10:13:58+04:00, bar@mysql.com +1 -0
    Adding DROP TABLE to be safe against previous tests failure.

  mysql-test/r/strict_autoinc_3heap.result@1.1.1.1, 2006-10-30 10:13:58+04:00, bar@mysql.com +1 -0
    Adding DROP TABLE to be safe against previous tests failure.

  mysql-test/r/strict_autoinc_4bdb.result@1.1.1.1, 2006-10-30 10:13:58+04:00, bar@mysql.com +1 -0
    Adding DROP TABLE to be safe against previous tests failure.

  mysql-test/r/strict_autoinc_5ndb.result@1.1.1.1, 2006-10-30 10:13:58+04:00, bar@mysql.com +1 -0
    Adding DROP TABLE to be safe against previous tests failure.

  sql/field.cc@1.256.33.1, 2006-10-30 10:13:58+04:00, bar@mysql.com +217 -136
    - producing better error messages than
      "DATA TRUNCATED" or "DATA TOO LONG" (in strict mode)
      in case of "not well formed source" and
      "cannot convert to field character set"
    - Performance improvements: copying directly to
      the target, instead of using an intermediate
      String.
    - Moving duplicate code into report_data_too_long() function.

  sql/sql_string.cc@1.91.2.1, 2006-10-30 10:13:58+04:00, bar@mysql.com +156 -0
    Adding a new function to convert strings between character sets,
    but not more than "nchar" characters - a helper function for
    Field_string::store(), Field_varstring::store() and Field_blob::store().

  sql/sql_string.h@1.60.1.2, 2006-10-30 10:13:58+04:00, bar@mysql.com +8 -0
    Adding new function prototype.

ChangeSet@1.1810.2281.1, 2006-10-30 09:52:50+04:00, holyfoot@mysql.com +4 -0
  Bug #8663 (cant use bigint as input to CAST)
  
  decimal->ulong conversion fixed to assign max possible ULONG if decimal
  is bigger
  Item_func_unsigned now handles DECIMAL parameter separately as we can't
  rely on decimal::val_int result here.

  mysql-test/r/type_newdecimal.result@1.36.3.1, 2006-10-30 09:52:47+04:00, holyfoot@mysql.com +5 -0
    result fixed

  mysql-test/t/type_newdecimal.test@1.33.3.1, 2006-10-30 09:52:47+04:00, holyfoot@mysql.com +6 -0
    testcase

  sql/item_func.cc@1.270.28.1, 2006-10-30 09:52:47+04:00, holyfoot@mysql.com +8 -1
    DECIMAL_RESULT should be handled separately here as it's
    always signed.

  strings/decimal.c@1.65.1.6, 2006-10-30 09:52:47+04:00, holyfoot@mysql.com +1 -1
    here we assign max possible ULONG if the decimal value is bigger

ChangeSet@1.2303.35.17, 2006-10-27 16:36:08+02:00, msvensson@shellback.(none) +1 -0
  Disable abi_check in 5.1 for the moment

  include/Makefile.am@1.70, 2006-10-27 16:36:06+02:00, msvensson@shellback.(none) +1 -1
    Disable abi_check in 5.1 for the moment

ChangeSet@1.1616.2769.12, 2006-10-27 16:32:59+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - valgrind 
    Still leakage, make sure all unlinked operations are put back so they will be release
    (on failing blob operations, when AO_IgnoreError)

  ndb/src/ndbapi/NdbConnection.cpp@1.30.8.1, 2006-10-27 16:32:58+02:00, jonas@perch.ndb.mysql.com +22 -0
    Still leakage, make sure all unlinked operations are put back so they will be release

ChangeSet@1.1616.2832.1, 2006-10-27 15:57:00+02:00, msvensson@neptunus.(none) +2 -0
  Update the rules for abi_check

  include/Makefile.am@1.48.1.3, 2006-10-27 15:56:58+02:00, msvensson@neptunus.(none) +12 -16
    Move m_ctype.h from BUILT_SOURCES, it's in vcs
    Update the rule for abi_check

  include/mysql_h.ic@1.1.1.2, 2006-10-27 15:56:58+02:00, msvensson@neptunus.(none) +158 -488
    Update the refernce and rename it to mysql_h.ic

  include/mysql_h.ic@1.1.1.1, 2006-10-27 15:41:30+02:00, msvensson@neptunus.(none) +0 -0
    Rename: include/mysql_h_abi.ic -> include/mysql_h.ic

ChangeSet@1.1616.2725.78, 2006-10-27 18:08:50+05:00, ramil@mysql.com +3 -0
  Fix for bug #23412: delete rows with null date field
  
  Backport of the fix for bug #8143: A date with value 0 is treated as a NULL value

  mysql-test/r/delete.result@1.21.1.2, 2006-10-27 18:08:47+05:00, ramil@mysql.com +11 -0
    Fix for bug #23412: delete rows with null date field
      - test result

  mysql-test/t/delete.test@1.19.1.3, 2006-10-27 18:08:47+05:00, ramil@mysql.com +12 -1
    Fix for bug #23412: delete rows with null date field
      - test case

  sql/sql_delete.cc@1.99.12.1, 2006-10-27 18:08:47+05:00, ramil@mysql.com +8 -0
    Fix for bug #23412: delete rows with null date field
      - during SELECT queries processing we convert 'date[time]_field is null'                   
        conditions into 'date[time]_field = 0000-00-00[ 00:00:00]' for not null                  
        DATE and DATETIME fields. To be consistent, we have to do the same for DELETE            
        queries. So we should call remove_eq_conds() in the mysql_delete() as well.              
        Also it may simplify and speed up DELETE queries execution.                              

ChangeSet@1.2303.10.23, 2006-10-27 12:44:03+02:00, mskold@mysql.com +1 -0
  bug#23110  Some NDB tests assert randomly on mixed mode binlog: don't reset binlog format for NDB binlog injector thread

  sql/sql_class.h@1.320.6.1, 2006-10-27 12:43:07+02:00, mskold@mysql.com +3 -1
    bug#23110  Some NDB tests assert randomly on mixed mode binlog: don't reset binlog format for NDB binlog injector thread

ChangeSet@1.1810.2280.1, 2006-10-27 13:32:41+04:00, kroki@moonlight.intranet +3 -0
  BUG#22584: last_insert_id not updated after inserting a record through
  a updatable view.
  
  When there's a VIEW on a base table that have AUTO_INCREMENT column, and
  this VIEW doesn't provide an access such column, after INSERT to such
  VIEW LAST_INSERT_ID() did not return the value just generated.
  
  This behaviour is intended and correct, because if the VIEW doesn't list
  some columns then these columns are effectively hidden from the user,
  and so any side effects of inserting default values to them.
  
  However, there was a bug that such statement inserting into a view would
  reset LAST_INSERT_ID() instead of leaving it unchanged.
  
  This patch restores the original value of LAST_INSERT_ID() instead of
  resetting it to zero.

  mysql-test/r/view.result@1.138.23.5, 2006-10-27 13:32:33+04:00, kroki@moonlight.intranet +34 -0
    Add result for bug#22584: last_insert_id not updated after inserting
    a record through a updatable view.

  mysql-test/t/view.test@1.126.22.3, 2006-10-27 13:32:34+04:00, kroki@moonlight.intranet +38 -0
    Add test case for bug#22584: last_insert_id not updated after inserting
    a record through a updatable view.

  sql/sql_parse.cc@1.426.112.3, 2006-10-27 13:32:34+04:00, kroki@moonlight.intranet +17 -2
    When we have inserted into a view, and AUTO_INCREMENT column is not
    accessed from this view, instead of setting LAST_INSERT_ID to zero set
    it to the value it had before this statement was executed.

ChangeSet@1.1810.2279.2, 2006-10-27 18:59:20+10:00, stewart@willster.(none) +3 -0
  BUG#22301 ndb: File_class::size() is not thread safe

  ndb/include/logger/FileLogHandler.hpp@1.4.1.1, 2006-10-27 18:59:17+10:00, stewart@willster.(none) +1 -1
    use off_t for file offset

  ndb/include/util/File.hpp@1.4.6.1, 2006-10-27 18:59:17+10:00, stewart@willster.(none) +2 -2
    use off_t for returning file offset (size)

  ndb/src/common/util/File.cpp@1.8.7.2, 2006-10-27 18:59:17+10:00, stewart@willster.(none) +9 -10
    make File_class::size(FILE*) safe when having multiple threads writing to
    the file

ChangeSet@1.1810.2279.1, 2006-10-27 18:08:08+10:00, stewart@willster.(none) +2 -0
  BUG#22310 dead/deceptive code in FileLogHandler::writeFooter() and File_class::flush
  
  make the File_class::flush() method actually flush the stdio buffers.

  ndb/src/common/logger/FileLogHandler.cpp@1.9.5.1, 2006-10-27 18:08:03+10:00, stewart@willster.(none) +0 -2
    remove misleading comment

  ndb/src/common/util/File.cpp@1.8.7.1, 2006-10-27 18:08:04+10:00, stewart@willster.(none) +1 -5
    actually flush the stdio buffers.
    
    remove unneeded // private comment

ChangeSet@1.2311, 2006-10-27 16:15:17+10:00, stewart@willster.(none) +3 -0
  update result for having tablespace in I_S.PARTITIONS

  mysql-test/r/information_schema_part.result@1.6, 2006-10-27 16:15:12+10:00, stewart@willster.(none) +10 -10
    update result for having tablespace in I_S.PARTITIONS

  mysql-test/r/ndb_dd_backuprestore.result@1.11, 2006-10-27 16:15:12+10:00, stewart@willster.(none) +30 -30
    update result for having tablespace in I_S.PARTITIONS

  mysql-test/r/ndb_partition_range.result@1.4, 2006-10-27 16:15:12+10:00, stewart@willster.(none) +3 -3
    update result for having tablespace in I_S.PARTITIONS

ChangeSet@1.2303.35.14, 2006-10-26 23:59:00+02:00, msvensson@neptunus.(none) +1 -0
  Update for 5.1

  include/mysql_h_abi.ic@1.4, 2006-10-26 23:58:56+02:00, msvensson@neptunus.(none) +46 -51
    Update for 5.1, don't include the info_buffer it should be an error

ChangeSet@1.1810.2269.18, 2006-10-26 22:20:43+02:00, msvensson@neptunus.(none) +2 -0
  Bug#23427  	incompatible ABI change in 5.0.26?
   - Improve icheck rules in Makefile.am

  include/Makefile.am@1.52.2.5, 2006-10-26 22:20:41+02:00, msvensson@neptunus.(none) +10 -7
    Remove m_ctype from BUILT_SOURCES, it has been in bk for a looong time.
    Improve the icheck rules
     - Abort make if icheck fails to compare, very important.
     - Don't include include files from /usr into the icheck file. Avoids problem when running
       icheck on different machines.
     - If no icheck is availabel, touch the mysql_h.ic file so it exists for "make dist" 

  include/mysql_h_abi.ic@1.3, 2006-10-26 22:20:41+02:00, msvensson@neptunus.(none) +0 -330
    Remove all include files from /usr, no need to check that!

ChangeSet@1.2303.43.3, 2006-10-26 15:41:47-04:00, iggy@amd64. +1 -0
  Post Merge Cleanup

  storage/innobase/include/univ.i@1.59, 2006-10-26 15:38:50-04:00, iggy@amd64. +9 -0
    Post Merge Cleanup

ChangeSet@1.1810.2269.17, 2006-10-26 19:51:29+02:00, msvensson@neptunus.(none) +3 -0
  Bug#20894 Reproducible MySQL client segmentation fault
   - Add two null bytes in  "buff" variable allowing us to call
     get_arg two times also for strings longer than sizeof(buff) 

  client/mysql.cc@1.199.1.25, 2006-10-26 19:51:27+02:00, msvensson@neptunus.(none) +5 -1
    Make sure there are _two_ zero bytes at the end of buff, to allow 'get_arg' to be
    called twice on long strings. The first time it will mark end of string with a
    zero and the second time it will "skip ahead" to the first zero, and the find the
    second one indicating end of buff.

  mysql-test/r/mysql.result@1.17.2.2, 2006-10-26 19:51:27+02:00, msvensson@neptunus.(none) +17 -0
    Update test results

  mysql-test/t/mysql.test@1.4.1.15, 2006-10-26 19:51:27+02:00, msvensson@neptunus.(none) +53 -0
    Add tests for "com_connect" function in mysql
    Add test reported in bug
    

ChangeSet@1.2303.44.1, 2006-10-26 19:11:09+02:00, msvensson@shellback.(none) +7 -0
  Bug#18888 Trying to overwrite sql/lex_hash.h during build
   - As a sideeffect of the patch to generate lex_hash.h only once
  on the machine where the source dist was produced, a problem
  was found when compiling a mysqld without partition support - it 
  would crash when looking up the lex symbols due to mismatch between
  lex.h and the generated lex_hash.h
  
   - Remove the ifdef for partition in lex.h 
   - Fix minor problem with"EXPLAIN PARTITION" when not compiled with
     partition(existed also without the above patch)
   - Add test case that will be run when we don't have partition
     support compiled into mysqld
   - Return error ER_FEATURE_DISABLED if user tries to use PARTITION
     when there is no support for it.

  mysql-test/r/not_partition.require@1.1, 2006-10-26 19:11:05+02:00, msvensson@shellback.(none) +2 -0
    New BitKeeper file ``mysql-test/r/not_partition.require''

  mysql-test/r/not_partition.require@1.0, 2006-10-26 19:11:05+02:00, msvensson@shellback.(none) +0 -0

  mysql-test/r/not_partition.result@1.1, 2006-10-26 19:11:06+02:00, msvensson@shellback.(none) +48 -0
    New BitKeeper file ``mysql-test/r/not_partition.result''

  mysql-test/r/not_partition.result@1.0, 2006-10-26 19:11:06+02:00, msvensson@shellback.(none) +0 -0

  mysql-test/t/not_partition.test@1.1, 2006-10-26 19:11:06+02:00, msvensson@shellback.(none) +62 -0
    New BitKeeper file ``mysql-test/t/not_partition.test''

  mysql-test/t/not_partition.test@1.0, 2006-10-26 19:11:06+02:00, msvensson@shellback.(none) +0 -0

  sql/lex.h@1.165, 2006-10-26 19:11:04+02:00, msvensson@shellback.(none) +4 -2
    There should be no ifdefs of features in lex.h

  sql/sql_class.cc@1.293.1.5, 2006-10-26 19:11:05+02:00, msvensson@shellback.(none) +0 -2
    In line with the comment in sql_yacc.yy that we want the same output
    from "EXPLAIN PARTITIONS.." regardless of wheter we have compiled in
    support for partition  or not, remove the ifdef so the extra field
    is added to output if the DESCRIBE_PARTITIONS bit it set. Without
    this patch we get a crash as the code in select_describe believes the
    field is there.

  sql/sql_select.cc@1.458.1.1, 2006-10-26 19:11:05+02:00, msvensson@shellback.(none) +1 -1
    Use "const" for the variable as it's a ssigned once and never changes

  sql/sql_yacc.yy@1.507.1.3, 2006-10-26 19:11:05+02:00, msvensson@shellback.(none) +7 -0
    Don't allow PARTITION syntax oif there is no suport for partitioning

ChangeSet@1.2303.35.10, 2006-10-26 18:34:24+02:00, msvensson@neptunus.(none) +1 -0
  Bug #14262  	SP: DROP PROCEDURE|VIEW (maybe more) write to binlog too late (race cond)
  - Rmove duplicate code to log a "DROP VIEW..", must be a merge miss 

  sql/sql_view.cc@1.110.1.4, 2006-10-26 18:34:22+02:00, msvensson@neptunus.(none) +0 -7
    The query should only be logged to binlog once and that is if the drop didn't produce any errors
    Removing the duplicate as that must have been a merge error

ChangeSet@1.2310, 2006-10-26 21:37:23+10:00, stewart@willster.(none) +1 -0
  BUG#23655 deadlock in query cache ndb_cache tests with --debug
  
  Deadlock when running ndb_cache tests with --debug. Query cache locks on trying
  to acquire lock.

  sql/sql_cache.cc@1.99, 2006-10-26 21:37:20+10:00, stewart@willster.(none) +2 -3
    in query_cache_end_of_result, unlock in reverse order of locking.
    
    also make it possible to run with --debug without hanging.

ChangeSet@1.1810.2278.1, 2006-10-26 14:51:34+05:00, ramil@mysql.com +1 -0
  Fix for bug #22158: Errors in init_connect terminate connections silently
  
  When executing the init_connect statement, thd->net.vio is set to 0, to         
  forbid sending any results to the client. As a side effect we don't log         
  possible errors, either.                                                        
                                                                                  
  Now we write warnings to the error log if an init_connect query                
  fails.                                                                          

  sql/sql_parse.cc@1.426.1.161, 2006-10-26 14:51:30+05:00, ramil@mysql.com +7 -0
    Fix for bug #22158: Errors in init_connect terminate connections silently
    - raise warnings if the init_connect execution fails.

ChangeSet@1.2303.43.2, 2006-10-25 18:51:50-06:00, tsmith@siva.hindu.god +2 -0
  BitKeeper/triggers/*crash-protect.pl:  Don't print messages if nothing is wrong.

  BitKeeper/triggers/pre-outgoing.crash-protect.pl@1.3, 2006-10-25 18:51:47-06:00, tsmith@siva.hindu.god +0 -4
    Don't print message if nothing is wrong.

  BitKeeper/triggers/pre-resolve.crash-protect.pl@1.3, 2006-10-25 18:51:47-06:00, tsmith@siva.hindu.god +0 -4
    Don't print message if nothing is wrong.

ChangeSet@1.2273.162.2, 2006-10-25 20:12:23+04:00, kroki@moonlight.intranet +1 -0
  After merge fix.

  mysql-test/r/innodb_mysql.result@1.12.2.2, 2006-10-25 20:12:20+04:00, kroki@moonlight.intranet +1 -1
    After merge fix.

ChangeSet@1.1810.2276.2, 2006-10-25 20:09:31+04:00, kroki@moonlight.intranet +1 -0
  Fix after manual merge.

  mysql-test/r/innodb_mysql.result@1.3.10.2, 2006-10-25 20:09:29+04:00, kroki@moonlight.intranet +1 -2
    Fix after manual merge.

ChangeSet@1.1616.2831.1, 2006-10-25 19:53:26+04:00, kroki@moonlight.intranet +3 -0
  BUG#18819: DELETE IGNORE hangs on foreign key parent delete
  
  If the error happens during DELETE IGNORE, nothing could be send to the
  client, thus leaving it frozen expecting the reply.
  
  The problem was that if some error occurred, it wouldn't be reported to
  the client because of IGNORE, but neither success would be reported.
  
  MySQL 4.1 would not freeze the client, but will report
  
    ERROR 1105 (HY000): Unknown error
  
  instead, which is also a bug.
  
  The solution is to report success if we are in DELETE IGNORE and some
  non-fatal error has happened.

  mysql-test/t/innodb_mysql.test@1.3.11.1, 2006-10-25 19:53:24+04:00, kroki@moonlight.intranet +29 -0
    Add test case for bug#18819: DELETE IGNORE hangs on foreign key parent
    delete.

  mysql-test/r/innodb_mysql.result@1.3.9.1, 2006-10-25 19:53:24+04:00, kroki@moonlight.intranet +16 -0
    Add result for bug#18819: DELETE IGNORE hangs on foreign key parent
    delete.

  sql/sql_delete.cc@1.99.11.1, 2006-10-25 19:53:24+04:00, kroki@moonlight.intranet +2 -1
    Report success if we have got an error, but we are in DELETE IGNORE, and
    the error is not fatal (if it is, it would be reported to the client).

ChangeSet@1.1810.2275.1, 2006-10-25 17:30:30+02:00, pekka@orca.ndb.mysql.com +1 -0
  ndb - dbtux: remove redundant code line (no functional change)

  ndb/src/kernel/blocks/dbtux/DbtuxScan.cpp@1.27.3.1, 2006-10-25 17:29:28+02:00, pekka@orca.ndb.mysql.com +0 -1
    remove redundant unpackBound call, missed in previous patch

ChangeSet@1.1810.2274.1, 2006-10-25 20:14:39+05:00, holyfoot@mysql.com +12 -0
  bug #19491 (CAST do DATETIME wrong result)

  mysql-test/r/type_datetime.result@1.30.1.3, 2006-10-25 20:14:32+05:00, holyfoot@mysql.com +12 -0
    result fixed

  mysql-test/r/type_newdecimal.result@1.36.2.1, 2006-10-25 20:14:33+05:00, holyfoot@mysql.com +8 -0
    result fixed

  mysql-test/t/type_datetime.test@1.18.1.2, 2006-10-25 20:14:33+05:00, holyfoot@mysql.com +10 -0
    testcase

  mysql-test/t/type_newdecimal.test@1.33.2.1, 2006-10-25 20:14:33+05:00, holyfoot@mysql.com +8 -0
    testcase

  sql/field.cc@1.256.32.1, 2006-10-25 20:14:33+05:00, holyfoot@mysql.com +7 -0
    Field_new_decimal::store_time implemented

  sql/field.h@1.153.13.1, 2006-10-25 20:14:33+05:00, holyfoot@mysql.com +1 -0
    Field_new_decimal::store_time added

  sql/item.cc@1.113.55.1, 2006-10-25 20:14:34+05:00, holyfoot@mysql.com +47 -0
    auxiliary methods implemented to operate with datatimes

  sql/item.h@1.183.11.1, 2006-10-25 20:14:34+05:00, holyfoot@mysql.com +5 -0
    auxiliary methods declared in Item to operate with datatimes

  sql/item_timefunc.cc@1.100.12.1, 2006-10-25 20:14:34+05:00, holyfoot@mysql.com +0 -11
    Item_date::save_in_field old implementation removed

  sql/item_timefunc.h@1.63.3.1, 2006-10-25 20:14:34+05:00, holyfoot@mysql.com +113 -38
    my_decimal and save_in_field methods implemented for datetime items

  sql/my_decimal.cc@1.11.1.1, 2006-10-25 20:14:35+05:00, holyfoot@mysql.com +19 -0
    date2my_decimal implemented

  sql/my_decimal.h@1.10.1.1, 2006-10-25 20:14:35+05:00, holyfoot@mysql.com +6 -1
    date2my_decimal declared

ChangeSet@1.1616.2725.77, 2006-10-25 16:50:06+02:00, msvensson@neptunus.(none) +1 -0
  Skip innodb test if mysqld doesn't have innodb support

  mysql-test/lib/mtr_cases.pl@1.6.2.14, 2006-10-25 16:50:04+02:00, msvensson@neptunus.(none) +12 -0
    Skip innodb test if mysqld doesn't have innodb support

ChangeSet@1.1810.2269.15, 2006-10-25 16:26:57+02:00, msvensson@neptunus.(none) +1 -0
  Fix memory leaks found when valgrinding mysql_client_test
  Remove one warning

  tests/mysql_client_test.c@1.167.23.5, 2006-10-25 16:26:55+02:00, msvensson@neptunus.(none) +7 -1
    Fix memory leaks
    Remove one warning

ChangeSet@1.1810.2269.14, 2006-10-25 15:41:32+02:00, msvensson@neptunus.(none) +1 -0
  Test failure when compiled without innodb
  Disable warnings around the create table statements, we want to use innodb when possible but they work just fine without.

  mysql-test/t/ctype_utf8.test@1.84.8.1, 2006-10-25 15:41:31+02:00, msvensson@neptunus.(none) +4 -0
    Disable warnings around the create table statements, we want to use innodb when possible but they work just fine without.

ChangeSet@1.2303.10.21, 2006-10-25 15:34:47+02:00, mskold@mysql.com +1 -0
  Bug #21072  Duplicate key error in NDB references wrong key: Re-wrote string usage to avoid valgrind warnings

  sql/handler.cc@1.273.2.6, 2006-10-25 15:34:38+02:00, mskold@mysql.com +1 -3
    Bug #21072  Duplicate key error in NDB references wrong key: Re-wrote string usage to avoid valgrind warnings

ChangeSet@1.1616.2725.76, 2006-10-25 14:56:36+02:00, msvensson@neptunus.(none) +1 -0
  Update the binlog format parse routine to only be avaliable in 5.1 and allow for any binlog_format to be specified

  mysql-test/mysql-test-run.pl@1.8.9.76, 2006-10-25 14:56:35+02:00, msvensson@neptunus.(none) +8 -11
    Update the binlog format parse routine to only be avaliable in 5.1 and allow for any binlog_format to be specified

ChangeSet@1.1616.2725.75, 2006-10-25 14:34:18+02:00, msvensson@neptunus.(none) +2 -0
  Add valgrinding support for mysql_client_test
  Fix two memory leaks in mysql_client_test

  mysql-test/mysql-test-run.pl@1.8.9.75, 2006-10-25 14:34:16+02:00, msvensson@neptunus.(none) +54 -44
    Add valgrinding support for mysql_client_test

  tests/mysql_client_test.c@1.51.33.2, 2006-10-25 14:34:16+02:00, msvensson@neptunus.(none) +2 -0
    Fix two memory leaks

ChangeSet@1.1616.2725.74, 2006-10-25 12:40:33+02:00, msvensson@neptunus.(none) +1 -0
  Set flag opt_skip_ndbcluster_slave if no slaves are being used.
  Add comments
  Deperlify

  mysql-test/mysql-test-run.pl@1.8.9.74, 2006-10-25 12:40:32+02:00, msvensson@neptunus.(none) +19 -3
    Set flag opt_skip_ndbcluster_slave if no slaves are being used.
    Add comments
    Deperlify

ChangeSet@1.2303.10.18, 2006-10-25 20:37:10+10:00, stewart@willster.(none) +2 -0
  post merge fixes (from merging test fixes from bug 19914)

  mysql-test/r/ndb_multi.result@1.13, 2006-10-25 20:37:06+10:00, stewart@willster.(none) +4 -0
    update result file with post-merge results

  sql/ha_ndbcluster.cc@1.357.1.10, 2006-10-25 20:37:06+10:00, stewart@willster.(none) +7 -8
    update usage of ndb_get_table_statistics for changes made for bug 19914

ChangeSet@1.1616.2765.5, 2006-10-25 11:44:40+02:00, mskold@mysql.com +1 -0
  Bug #21072  Duplicate key error in NDB references wrong key: Re-wrote string usage to avoid valgrind warnings

  sql/handler.cc@1.103.19.20, 2006-10-25 11:43:06+02:00, mskold@mysql.com +1 -2
    Bug #21072  Duplicate key error in NDB references wrong key: Re-wrote string usage to avoid valgrind warnings

ChangeSet@1.2303.41.1, 2006-10-25 12:54:59+04:00, petr@mysql.com +2 -0
  fix test failures in the runtime tree

  sql/log.cc@1.237.1.4, 2006-10-25 12:54:54+04:00, petr@mysql.com +2 -0
    NULL table pointer during initilization

  sql/sql_table.cc@1.366.1.4, 2006-10-25 12:54:54+04:00, petr@mysql.com +27 -9
    don't lock the destination table with table lock, but use name lock instead

ChangeSet@1.1616.2828.1, 2006-10-25 10:37:53+02:00, knielsen@ymer.(none) +2 -0
  Fix two small problems in the source, potentially causing user-visible
  bugs.

  ndb/include/util/UtilBuffer.hpp@1.4.1.1, 2006-10-25 10:37:52+02:00, knielsen@ymer.(none) +6 -2
    Fix accessing memory after free(), if called with source and destination
    pointer the same (which should not really happen...).
    Fixes a problem in ndb_restore.

  ndb/src/common/util/SimpleProperties.cpp@1.5.4.1, 2006-10-25 10:37:52+02:00, knielsen@ymer.(none) +2 -2
    Fix typo in check of maxValue.

ChangeSet@1.2303.7.16, 2006-10-24 18:16:11-07:00, malff@weblab.(none) +1 -0
  Fixed build break.

  sql/sql_delete.cc@1.194.1.3, 2006-10-24 18:16:07-07:00, malff@weblab.(none) +4 -3
    Fixed build break.

ChangeSet@1.2303.14.28, 2006-10-25 02:24:08+02:00, msvensson@neptunus.(none) +1 -0
  partition.teest does not use innodb thus it can be run even without innodb

  mysql-test/t/partition.test@1.50, 2006-10-25 02:24:05+02:00, msvensson@neptunus.(none) +1 -1
    partition.teest does not use innodb thus it can be run even without innodb

ChangeSet@1.1616.2725.73, 2006-10-24 23:39:46+02:00, msvensson@neptunus.(none) +2 -0
  Adapt mysql-test-run.pl to mysqld in 5.1 using "mixed" binlog format by default 

  mysql-test/lib/mtr_cases.pl@1.6.2.13, 2006-10-24 23:39:45+02:00, msvensson@neptunus.(none) +1 -0
    Adapt mysql-test-run.pl to mysqld in 5.1 using "mixed" binlog format by default 

  mysql-test/mysql-test-run.pl@1.8.9.73, 2006-10-24 23:39:45+02:00, msvensson@neptunus.(none) +8 -0
    Adapt mysql-test-run.pl to mysqld in 5.1 using "mixed" binlog format by default 

ChangeSet@1.1810.2269.9, 2006-10-24 22:00:08+02:00, msvensson@neptunus.(none) +1 -0
  Update the reference file for mysql API/ABI for 5.0

  include/mysql_h_abi.ic@1.2, 2006-10-24 22:00:06+02:00, msvensson@neptunus.(none) +266 -214
    Update the reference file for mysql API/ABI

ChangeSet@1.1616.2725.72, 2006-10-24 21:02:04+02:00, msvensson@neptunus.(none) +2 -0
  Pass --core-file option to mysqld when bootstrapping

  BitKeeper/etc/ignore@1.153.1.87, 2006-10-24 21:02:02+02:00, msvensson@neptunus.(none) +1 -0
    Added mysql-test/r/blackhole.log to the ignore list

  mysql-test/mysql-test-run.pl@1.8.9.72, 2006-10-24 21:02:02+02:00, msvensson@neptunus.(none) +1 -0
    Pass --core-file option to mysqld when bootstrapping

ChangeSet@1.1616.2827.1, 2006-10-24 20:32:07+02:00, msvensson@neptunus.(none) +5 -0
  WL#3462 Add testing of MySQL client ABI to prevent unintentional ABI breaks
  BUG#23427 incompatible ABI change in 5.0.26?
     - Use the icheck tool if avaliable and compare the current mysql.h to a version
  controlled reference file 

  BitKeeper/etc/ignore@1.153.1.86, 2006-10-24 20:32:06+02:00, msvensson@neptunus.(none) +2 -0
    Added include/check_abi include/mysql_h.ic to the ignore list

  configure.in@1.201.64.13, 2006-10-24 20:32:06+02:00, msvensson@neptunus.(none) +4 -0
    Look for icheck in configure

  include/Makefile.am@1.48.1.2, 2006-10-24 20:32:06+02:00, msvensson@neptunus.(none) +26 -2
    Add rule to build mysql_h.ic if icheck is avaliable
    Add rule to compare mysql_h.ic to the version
    controlled reference file mysql_h_abi.ic

  include/mysql.h@1.135.2.1, 2006-10-24 20:32:06+02:00, msvensson@neptunus.(none) +11 -0
    Add comment about taking care when editing mysql.h
    Add example how to add reserved fiels in the structs to
    allow for features to be added without breaking ABI

  include/mysql_h_abi.ic@1.1, 2006-10-24 20:32:06+02:00, msvensson@neptunus.(none) +1244 -0
    Add new file describing the libmysqlclient ABI used as a reference to detect ABI breakage 

  include/mysql_h_abi.ic@1.0, 2006-10-24 20:32:06+02:00, msvensson@neptunus.(none) +0 -0

ChangeSet@1.1616.2725.70, 2006-10-24 19:22:27+02:00, msvensson@neptunus.(none) +1 -0
  Remove debug printout 

  mysql-test/mysql-test-run.pl@1.8.9.71, 2006-10-24 19:22:25+02:00, msvensson@neptunus.(none) +0 -2
    Remove debug printout 

ChangeSet@1.1810.2269.6, 2006-10-24 19:16:18+02:00, msvensson@neptunus.(none) +1 -0
  Bug#23037 Bug in field "Default" of query "SHOW COLUMNS FROM table"
   - Fix check in mysql_client_test to reflect the change of datatype
     for DEFAULT column

  tests/mysql_client_test.c@1.167.23.3, 2006-10-24 19:16:16+02:00, msvensson@neptunus.(none) +16 -4
    Update check of datatype for field DEFAULT returned from "explain"
    as datatype has changed after patch for bug 23037

ChangeSet@1.1616.2725.69, 2006-10-24 18:49:19+02:00, msvensson@neptunus.(none) +2 -0
  Run mysql_client_test without --silent
  Flush both stdout and stderr before abort'ing mysql_client_test

  mysql-test/mysql-test-run.pl@1.8.9.70, 2006-10-24 18:49:18+02:00, msvensson@neptunus.(none) +1 -1
    Run mysql_client_test wihtout --silent flag

  tests/mysql_client_test.c@1.51.33.1, 2006-10-24 18:49:18+02:00, msvensson@neptunus.(none) +2 -0
    Before aborting mysql_client_test in die, make sure
    to first flush stdout and finally after the error message 
    has been printed also fflush stderr 

ChangeSet@1.2303.14.23, 2006-10-24 18:21:23+02:00, msvensson@neptunus.(none) +1 -0
  Test "rpl_ndb_auto_inc" need ndb - add "include/have_ndb.inc" 

  mysql-test/t/rpl_ndb_auto_inc.test@1.4, 2006-10-24 18:21:20+02:00, msvensson@neptunus.(none) +1 -0
    Test need ndb

ChangeSet@1.1810.2269.3, 2006-10-24 17:54:45+02:00, msvensson@neptunus.(none) +6 -0
  Fix spelling errors in test files

  mysql-test/r/mysqldump-max.result@1.2.1.3, 2006-10-24 17:54:43+02:00, msvensson@neptunus.(none) +1 -18
    Update test result after fix of spelling error

  mysql-test/r/rpl_trigger.result@1.4.1.6, 2006-10-24 17:54:43+02:00, msvensson@neptunus.(none) +0 -2
    Update test result after fix of spelling error

  mysql-test/r/type_newdecimal.result@1.36.1.6, 2006-10-24 17:54:43+02:00, msvensson@neptunus.(none) +0 -2
    Update test result after fix of spelling error

  mysql-test/t/mysqldump-max.test@1.2, 2006-10-24 17:54:43+02:00, msvensson@neptunus.(none) +3 -8
    Fix spelling error "disable_warnings"
    Write shorter "drop table..."

  mysql-test/t/rpl_trigger.test@1.4.1.5, 2006-10-24 17:54:43+02:00, msvensson@neptunus.(none) +1 -1
    Fix spelling error, there is no --ignore_warnings

  mysql-test/t/type_newdecimal.test@1.33.1.6, 2006-10-24 17:54:43+02:00, msvensson@neptunus.(none) +2 -2
    Fix spelling error

ChangeSet@1.1616.2725.68, 2006-10-24 17:36:46+02:00, msvensson@neptunus.(none) +2 -0
  Add analyze_testcase_failure which is called when mysqltest has failed
  with error 1 and we are running with --force
  The specific "analyze" code is enclosed in a .test file fwich can easily
  be modified to be more advanced 

  mysql-test/include/analyze_failure_sync_with_master.test@1.1, 2006-10-24 17:36:45+02:00, msvensson@neptunus.(none) +15 -0
    New BitKeeper file ``mysql-test/include/analyze_failure_sync_with_master.test''

  mysql-test/include/analyze_failure_sync_with_master.test@1.0, 2006-10-24 17:36:45+02:00, msvensson@neptunus.(none) +0 -0

  mysql-test/mysql-test-run.pl@1.8.9.69, 2006-10-24 17:36:45+02:00, msvensson@neptunus.(none) +56 -0
    Attempt to run some quick queries to analyze the failure when mysqltest returns 1 indicating test has failed
    Initially only code to analyze "could not sync with master" is added as that is a blackbox
    and all problems looks the same

ChangeSet@1.1810.1698.148, 2006-10-25 00:41:55+10:00, stewart@willster.(none) +2 -0
  fix result file for ndb_multi

  mysql-test/r/ndb_multi.result@1.3.1.5, 2006-10-25 00:41:52+10:00, stewart@willster.(none) +4 -3
    update result file for new behaviour of correcting the 241 error on ha_open

  mysql-test/t/ndb_multi.test@1.5.1.4, 2006-10-25 00:41:52+10:00, stewart@willster.(none) +0 -2
    no longer errors on ha_open with 241

ChangeSet@1.2303.38.3, 2006-10-24 18:31:10+04:00, anozdrin@alik. +1 -0
  IM polishing: log more information in log.

  server-tools/instance-manager/log.cc@1.11, 2006-10-24 18:31:08+04:00, anozdrin@alik. +10 -8
    Add pid/thread id to the each log record; split date time fields.

ChangeSet@1.2303.38.2, 2006-10-24 18:25:24+04:00, anozdrin@alik. +1 -0
  Enable im_daemon_life_cycle.imtest, since BUG#22379 is closed.

  mysql-test/t/disabled.def@1.206.2.1, 2006-10-24 18:25:22+04:00, anozdrin@alik. +0 -2
    Enable im_daemon_life_cycle.imtest, since BUG#22379 is closed.

ChangeSet@1.2303.38.1, 2006-10-24 18:23:16+04:00, anozdrin@alik. +10 -0
  Fix for BUG#17486: IM: race condition on exit.
  
  The problem was that IM stoped guarded instances on shutdown,
  but didn't wait for them to stop.
  
  The fix is to wait for guarded instances to stop before exitting
  from the main thread.
  
  The idea is that Instance-monitoring thread should add itself
  to Thread_registry so that it will be taken into account on shutdown.
  However, Thread_registry should not signal it on shutdown in order to
  not interrupt wait()/waitpid().

  server-tools/instance-manager/guardian.cc@1.28, 2006-10-24 18:23:14+04:00, anozdrin@alik. +7 -1
    Be more verbose.

  server-tools/instance-manager/instance.cc@1.41, 2006-10-24 18:23:14+04:00, anozdrin@alik. +34 -9
    Register mysqld-monitoring thread in Thread_registry.

  server-tools/instance-manager/instance.h@1.17, 2006-10-24 18:23:14+04:00, anozdrin@alik. +3 -1
    Add reference to Thread_registry.

  server-tools/instance-manager/instance_map.cc@1.31, 2006-10-24 18:23:14+04:00, anozdrin@alik. +6 -4
    Pass Thread_registry reference to Instance.

  server-tools/instance-manager/instance_map.h@1.21, 2006-10-24 18:23:14+04:00, anozdrin@alik. +5 -1
    Add reference to Thread_registry.

  server-tools/instance-manager/listener.cc@1.31, 2006-10-24 18:23:14+04:00, anozdrin@alik. +13 -9
    Be more verbose.

  server-tools/instance-manager/manager.cc@1.37, 2006-10-24 18:23:14+04:00, anozdrin@alik. +22 -1
    Be more verbose.

  server-tools/instance-manager/mysql_connection.cc@1.17, 2006-10-24 18:23:14+04:00, anozdrin@alik. +18 -11
    Eliminate type-conversion warnings.

  server-tools/instance-manager/thread_registry.cc@1.12, 2006-10-24 18:23:14+04:00, anozdrin@alik. +85 -32
    Be more verbose.

  server-tools/instance-manager/thread_registry.h@1.7, 2006-10-24 18:23:14+04:00, anozdrin@alik. +10 -2
    Eliminate copy&paste, make impl-specific constructor private.

ChangeSet@1.1810.1698.147, 2006-10-24 23:26:58+10:00, stewart@willster.(none) +1 -0
  fix ndb_cache_multi2
  
  util thread wasn't behaving correctly after 241 error due to get_table_statistics
  not properly returning an error code

  sql/ha_ndbcluster.cc@1.175.1.109, 2006-10-24 23:26:55+10:00, stewart@willster.(none) +4 -1
    correctly call ndb_get_table_statistics in get_commitcount (don't report error)
    
    but also return an error code from get_table_statistics so that util thread
    gets error code

ChangeSet@1.1810.2268.1, 2006-10-24 15:26:41+03:00, gkodinov@macbook.gmz +8 -0
  Bug #21809: Error 1356 while selecting from view with grouping though underlying
              select OK.
  The SQL parser was using Item::name to transfer user defined function attributes
  to the user defined function (udf). It was not distinguishing between user defined 
  function call arguments and stored procedure call arguments. Setting Item::name 
  was causing Item_ref::print() method to print the argument as quoted identifiers 
  and caused views that reference aggregate functions as udf call arguments (and 
  rely on Item::print() for the text of the view to store) to throw an undefined 
  identifier error.
  Overloaded Item_ref::print to print aggregate functions as such when printing
  the references to aggregate functions taken out of context by split_sum_func2()
  Fixed the parser to properly detect using AS clause in stored procedure arguments
  as an error.
  Fixed printing the arguments of udf call to print properly the udf attribute.

  mysql-test/r/udf.result@1.3.1.5, 2006-10-24 15:26:29+03:00, gkodinov@macbook.gmz +79 -0
    Bug #21809: Error 1356 while selecting from view with grouping though underlying
                select OK.
     - test cases

  mysql-test/t/udf.test@1.8.1.1, 2006-10-24 15:26:30+03:00, gkodinov@macbook.gmz +44 -0
    Bug #21809: Error 1356 while selecting from view with grouping though underlying
                select OK.
     - test cases

  sql/item.cc@1.113.54.1, 2006-10-24 15:26:31+03:00, gkodinov@macbook.gmz +24 -2
    Bug #21809: Error 1356 while selecting from view with grouping though underlying
                select OK.
     - Don't print the refs to SUM functions as refs.

  sql/item_func.cc@1.270.27.1, 2006-10-24 15:26:32+03:00, gkodinov@macbook.gmz +14 -0
    Bug #21809: Error 1356 while selecting from view with grouping though underlying
                select OK.
     - print the aliases in the udf calls

  sql/item_func.h@1.136.19.1, 2006-10-24 15:26:33+03:00, gkodinov@macbook.gmz +1 -0
    Bug #21809: Error 1356 while selecting from view with grouping though underlying
                select OK.
     - print the aliases in the udf calls

  sql/sql_lex.cc@1.142.26.1, 2006-10-24 15:26:33+03:00, gkodinov@macbook.gmz +2 -0
    Bug #21809: Error 1356 while selecting from view with grouping though underlying
                select OK.
     - disable aliases for arguments in stored routine calls

  sql/sql_lex.h@1.175.25.1, 2006-10-24 15:26:34+03:00, gkodinov@macbook.gmz +2 -0
    Bug #21809: Error 1356 while selecting from view with grouping though underlying
                select OK.
     - disable aliases for arguments in stored routine calls

  sql/sql_yacc.yy@1.371.86.1, 2006-10-24 15:26:35+03:00, gkodinov@macbook.gmz +30 -11
    Bug #21809: Error 1356 while selecting from view with grouping though underlying
                select OK.
     - disable aliases for arguments in stored routine calls
     - fix bison duplicate symbol warnings

ChangeSet@1.1616.2825.1, 2006-10-24 17:19:02+05:00, holyfoot@mysql.com +3 -0
  Bug #23427 (incompatible ABI change)
  
  the incompatibility was caused by current_stmt member added to the MYSQL
  structure.
  It's possible to move it to THD structure instead which saves ABI

  include/mysql.h@1.135.1.9, 2006-10-24 17:19:00+05:00, holyfoot@mysql.com +0 -6
    member moved to the THD structure

  libmysqld/lib_sql.cc@1.75.1.54, 2006-10-24 17:19:00+05:00, holyfoot@mysql.com +5 -5
    now we use THD member here

  sql/sql_class.h@1.146.52.18, 2006-10-24 17:19:00+05:00, holyfoot@mysql.com +6 -0
    current_stmt member added for the embedded server

ChangeSet@1.1810.2267.4, 2006-10-24 13:52:50+02:00, msvensson@neptunus.(none) +1 -0
  Use same type for local variables as arguments, avoid compile error on NetWare

  client/mysqldump.c@1.214.1.34, 2006-10-24 13:52:45+02:00, msvensson@neptunus.(none) +2 -2
    Use same type for local variables as arguments, avoid compile error on NetWare

ChangeSet@1.1616.2725.67, 2006-10-24 13:34:10+02:00, msvensson@neptunus.(none) +1 -0
  Enable the ATTRIBUTE_FORMAT macros to check format of variable arg parameters

  client/mysqltest.c@1.92.21.25, 2006-10-24 13:34:06+02:00, msvensson@neptunus.(none) +4 -4
    Enable the ATTRIBUTE_FORMAT macros to check format of variable arg parameters

ChangeSet@1.1810.2267.3, 2006-10-24 13:12:34+02:00, msvensson@neptunus.(none) +2 -0
  Replace all refernces to .la libraries with direct references
  to their .libs/*.a library
  Add comment describing why mwldnlm is called with "x" flag

  configure.in@1.245.65.1, 2006-10-24 13:12:32+02:00, msvensson@neptunus.(none) +4 -0
    Replace references to yassl .la libraries with direct reference to
    the .a libraries  

  netware/BUILD/mwldnlm@1.8, 2006-10-24 13:12:32+02:00, msvensson@neptunus.(none) +7 -0
    Add comment about why mwldnlm is called with the "x" flag and how
    to avoid it

ChangeSet@1.1810.2139.24, 2006-10-24 12:31:18+02:00, joerg@trift2. +1 -0
  innobase/CMakeLists.txt  :  Change done by Ignacio Galarza (igalarza@mysql.com)
  
  Bug #19424 InnoDB: possibly a memory overrun of the buffer being freed (Windows 64)
  Fix is to reduce optimization if the compiler is "Visual Studio 8 2005 Win64".
  TAG: mysql-5.0.28

  innobase/CMakeLists.txt@1.1.1.1, 2006-10-24 12:31:15+02:00, joerg@trift2. +42 -0
    Change done by Ignacio Galarza (igalarza@mysql.com) discussed with Innobase Oy:
    
    Bug #19424 InnoDB: possibly a memory overrun of the buffer being freed (Windows 64)
    Fix is to reduce optimization if the compiler is "Visual Studio 8 2005 Win64".

ChangeSet@1.1810.2265.2, 2006-10-24 15:28:16+05:00, holyfoot@mysql.com +1 -0
  WL#3475 merging

  client/mysqltest.c@1.155.23.2, 2006-10-24 15:28:13+05:00, holyfoot@mysql.com +8 -7
    merging fixes

ChangeSet@1.2303.22.3, 2006-10-24 12:24:32+02:00, mskold@mysql.com +4 -0
  bug#21873 MySQLD Crash on ALTER...ADD..UNIQUE..USING HASH statement for NDB backed table: Use passed key_info to check for nullable fields

  mysql-test/r/ndb_index_unique.result@1.29, 2006-10-24 12:24:01+02:00, mskold@mysql.com +3 -0
    bug#21873 MySQLD Crash on ALTER...ADD..UNIQUE..USING HASH statement for NDB backed table: Use passed key_info to check for nullable fields

  mysql-test/t/ndb_index_unique.test@1.23, 2006-10-24 12:24:01+02:00, mskold@mysql.com +8 -0
    bug#21873 MySQLD Crash on ALTER...ADD..UNIQUE..USING HASH statement for NDB backed table: Use passed key_info to check for nullable fields

  sql/ha_ndbcluster.cc@1.357.5.1, 2006-10-24 12:24:00+02:00, mskold@mysql.com +2 -3
    bug#21873 MySQLD Crash on ALTER...ADD..UNIQUE..USING HASH statement for NDB backed table: Use passed key_info to check for nullable fields

  sql/ha_ndbcluster.h@1.154, 2006-10-24 12:24:00+02:00, mskold@mysql.com +1 -1
    bug#21873 MySQLD Crash on ALTER...ADD..UNIQUE..USING HASH statement for NDB backed table: Use passed key_info to check for nullable fields

ChangeSet@1.1810.2258.3, 2006-10-24 12:01:52+02:00, joerg@trift2. +1 -0
  Bump version from 5.0.27 to 28.

  configure.in@1.245.64.2, 2006-10-24 12:01:50+02:00, joerg@trift2. +2 -2
    Bump version from 5.0.27 to 28.

ChangeSet@1.1810.2267.2, 2006-10-24 11:16:53+02:00, msvensson@neptunus.(none) +2 -0
  Temporary fixes for building from source dist in pushbuild

  netware/BUILD/compile-netware-END@1.7.2.3, 2006-10-24 11:16:51+02:00, msvensson@neptunus.(none) +7 -2
    If running as user pushbuild don't run autotools again 

  netware/BUILD/mwenv@1.12.2.7, 2006-10-24 11:16:51+02:00, msvensson@neptunus.(none) +6 -0
    Set ARFLAGS to value of AR_FLAGS

ChangeSet@1.1810.2261.2, 2006-10-24 10:57:17+02:00, joerg@trift2. +1 -0
  Bump version number to 5.0.29, as 28 will be based directly on 27.

  configure.in@1.245.1.157, 2006-10-24 10:57:14+02:00, joerg@trift2. +2 -2
    Bump version number to 5.0.29, as 28 will be based directly on 27.

ChangeSet@1.1810.2267.1, 2006-10-24 10:43:15+02:00, msvensson@neptunus.(none) +2 -0
  When using yaSSL on NetWare some of the OpenSSL specifix hacks can be skipped

  vio/viossl.c@1.34.2.3, 2006-10-24 10:43:13+02:00, msvensson@neptunus.(none) +5 -0
    No need for special code to switch from WinSock to BSD sockets when using yaSSL

  vio/viosslfactories.c@1.26.2.1, 2006-10-24 10:43:13+02:00, msvensson@neptunus.(none) +4 -0
    The OpenSSL port to NetWare has added some extra functions to free up memory, no need
    to call them when using yaSSL 

ChangeSet@1.1616.2824.2, 2006-10-24 12:35:32+05:00, holyfoot@mysql.com +1 -0
  merging fix

  client/mysqltest.c@1.92.22.2, 2006-10-24 12:35:30+05:00, holyfoot@mysql.com +2 -2
    wrong 'while' was added instead of 'if'

ChangeSet@1.1616.2725.66, 2006-10-23 20:36:44+02:00, msvensson@neptunus.(none) +1 -0
  Avoid matching the trailing carriage return when parsing the mysqld.spec file
  This fixes problem where --replace_result failed in rpl000015 because the MYSQL_TCP_PORT variable was "3306\r"

  mysql-test/mysql-test-run.pl@1.8.9.68, 2006-10-23 20:36:43+02:00, msvensson@neptunus.(none) +2 -2
    Avoid matching the trailing carriage return when parsing the mysqld.spec file

ChangeSet@1.2303.7.13, 2006-10-23 20:08:00+04:00, kostja@bodhi.local +4 -0
  Post-merge fixes.

  mysql-test/r/sp.result@1.232, 2006-10-23 20:07:55+04:00, kostja@bodhi.local +156 -0
    Update results.

  mysql-test/r/view.result@1.188, 2006-10-23 20:07:55+04:00, kostja@bodhi.local +2 -0
    Update results.

  server-tools/instance-manager/guardian.cc@1.27, 2006-10-23 20:07:55+04:00, kostja@bodhi.local +5 -5
    Post-merge fixes (instance_name is a LEX_STRING).

  server-tools/instance-manager/instance.cc@1.40, 2006-10-23 20:07:55+04:00, kostja@bodhi.local +5 -5
    Post-merge fixes (instance_name is a LEX_STRING).

ChangeSet@1.2303.33.3, 2006-10-23 18:22:27+03:00, aelkin@dsl-hkigw8-febefb00-148.dhcp.inet.fi +1 -0
  Bug #22027 CREATE TABLE IF NOT EXISTS SELECT logged improperly with row-based binlog
  
  results of binlog_stm_binlog in sync

  mysql-test/r/binlog_stm_binlog.result@1.17, 2006-10-23 18:22:24+03:00, aelkin@dsl-hkigw8-febefb00-148.dhcp.inet.fi +1 -2
    results changed

ChangeSet@1.1616.2725.65, 2006-10-23 16:51:48+02:00, msvensson@neptunus.(none) +1 -0
  The vardir trick can only bge used on platforms with native symlinks - otherwise opt_vardir need to be set to default value.

  mysql-test/mysql-test-run.pl@1.8.9.67, 2006-10-23 16:51:47+02:00, msvensson@neptunus.(none) +7 -3
    The vardir trick can only bge used on platforms with native symlinks - otherwise opt_vardir need to be set to default value.

ChangeSet@1.1810.2266.2, 2006-10-24 00:18:57+10:00, stewart@willster.(none) +1 -0
  post merge fix

  sql/ha_ndbcluster.cc@1.175.60.2, 2006-10-24 00:18:52+10:00, stewart@willster.(none) +11 -7
    post merge fix

ChangeSet@1.1616.2700.16, 2006-10-23 23:46:35+10:00, stewart@willster.(none) +2 -0
  Bug #19914  	SELECT COUNT(*) sometimes returns MAX_INT on cluster tables
  
  fixes for ndb_* tests broken by previous fix
  
  be more careful in ndb about setting errors on failure of info call (especially
  in open) 

  sql/ha_ndbcluster.cc@1.114.3.77, 2006-10-23 23:46:33+10:00, stewart@willster.(none) +35 -8
    fix some ndb* tests failing due to fix for 19914
    
    be more careful about setting errors on failure of info call

  sql/ha_ndbcluster.h@1.40.7.3, 2006-10-23 23:46:33+10:00, stewart@willster.(none) +6 -2
    fix some ndb* tests failing due to fix for 19914
    
    be more careful about setting errors on failure of info call

ChangeSet@1.2303.34.2, 2006-10-23 15:11:24+02:00, andrey@example.com +1 -0
  after merge fix

  mysql-test/r/information_schema.result@1.137, 2006-10-23 15:11:18+02:00, andrey@example.com +1 -0
    after merge fix

ChangeSet@1.2303.33.2, 2006-10-23 15:09:04+03:00, aelkin@dsl-hkigw8-febefb00-148.dhcp.inet.fi +2 -0
  Bug #22762 create talbe if not exists like a-temp-table binlogged w/o "if not exists"
  Bug #22027 CREATE TABLE IF NOT EXISTS SELECT logged improperly with row-based binlog
      
  post-merge fix, also making results free from server's version number.

  mysql-test/extra/binlog_tests/binlog.test@1.15, 2006-10-23 15:09:02+03:00, aelkin@dsl-hkigw8-febefb00-148.dhcp.inet.fi +1 -1
    eliminating format-description line in show binlog events.

  mysql-test/r/binlog_row_binlog.result@1.10, 2006-10-23 15:09:02+03:00, aelkin@dsl-hkigw8-febefb00-148.dhcp.inet.fi +1 -2
    results changed

ChangeSet@1.1616.2725.64, 2006-10-23 13:32:20+02:00, msvensson@neptunus.(none) +1 -0
  Don't use the "4.1 vardir trick" on OS that does not have native symlink(i.e windows)

  mysql-test/mysql-test-run.pl@1.8.9.66, 2006-10-23 13:32:19+02:00, msvensson@neptunus.(none) +2 -1
    Don't use the "4.1 vardir trick" on OS that does not have native symlink(i.e windows)

ChangeSet@1.1810.2078.79, 2006-10-23 13:26:04+02:00, msvensson@neptunus.(none) +1 -0
  Netware uses size_t as socklen_t

  extra/yassl/testsuite/test.hpp@1.9, 2006-10-23 13:26:02+02:00, msvensson@neptunus.(none) +4 -1
    Netware uses size_t as socklen_t

ChangeSet@1.1810.2264.1, 2006-10-23 13:12:30+02:00, andrey@example.com +3 -0
  Fix for bug#23037 Bug in field "Default" of query "SHOW COLUMNS FROM table"
    
  To the documentor: The DEFAULT value in SHOW COLUMNS/SELECT FROM I_S.COLUMNS
  was truncated to NAME_LEN (which effectively is 64) characters.

  mysql-test/r/information_schema.result@1.87.1.28, 2006-10-23 13:12:26+02:00, andrey@example.com +14 -0
    Update result
    
    Because the length of I_S.COLUMNS.COLUMN_DEFAULT was increased to
    65535 the column changed it's type from varchar(64) to longtext
    The type is longtext if the length is > 65532 (the max varchar len)

  mysql-test/t/information_schema.test@1.65.1.21, 2006-10-23 13:12:26+02:00, andrey@example.com +43 -0
    test case for bug#23037: Bug in field "Default" of
    query "SHOW COLUMNS FROM table"
    
    Both SHOW COLUMNS and I_S.COLUMNS is TESTED as well the
    value returned by both. Using --replace_regex is unfeasible
    as the repetition value cannot be > 255.
    --replace_regex /A{256}/VALUE/ doesn't work, not to talk about
      /A{65532}/VALUE/
    /(A{255}){255}/VALUE/ is awfully slow. Thus, simple function with
    cursor is used to extract the value.

  sql/sql_show.cc@1.253.39.1, 2006-10-23 13:12:27+02:00, andrey@example.com +1 -1
    Default value can have TIMESTAMP, CHAR, VARCHAR, ENUM
    VARCHAR can have the longest value, up to 65535. However, because
    of table handler limitations the actual limit is 65532 characters,
    latin1 charset. However, here is used MAX_FIELD_VARCHARLENGTH macro,
    because there could be a storage engine without such limitation.

ChangeSet@1.1810.2078.78, 2006-10-23 12:56:25+02:00, msvensson@neptunus.(none) +1 -0
  When looking for libc the path need to be converted from wine to unix format before test that directory exists

  netware/BUILD/mwenv@1.12.2.6, 2006-10-23 12:56:20+02:00, msvensson@neptunus.(none) +2 -2
    When looking for libc the path need to be converted from wine to unix format before test that directory exists

ChangeSet@1.1616.2822.4, 2006-10-23 12:16:40+02:00, msvensson@neptunus.(none) +1 -0
  If "var" is a symlink which does not point to anything, remove it before creating real var

  mysql-test/mysql-test-run.pl@1.8.9.65, 2006-10-23 12:16:38+02:00, msvensson@neptunus.(none) +5 -0
    If "var" is a symlink which does not point to anything, remove it 

ChangeSet@1.1616.2822.3, 2006-10-23 12:02:56+02:00, msvensson@neptunus.(none) +1 -0
  As both ndb and im are components that may be disabled as well as the binaries may not exist. Look for 
  their binaries in a separate function and produce test casea failures for the test thet needs these components

  mysql-test/mysql-test-run.pl@1.8.9.64, 2006-10-23 12:02:55+02:00, msvensson@neptunus.(none) +118 -66
    As both ndb and im are components that may be disabled as well as the binaries may not exist. Look for 
    their binaries in a separate function and produce test casea failures for the test thet needs these components

ChangeSet@1.1616.2824.1, 2006-10-23 15:02:51+05:00, holyfoot@mysql.com +11 -0
  WL#3475 (Threads for the embedded server in mysqltest)
  
  Necessary code added to mysqltest.c.
  Disabled tests are available now.

  mysql-test/t/bdb-deadlock.test@1.9.1.1, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -8
    test is available for the embedded server now

  client/mysqltest.c@1.92.22.1, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +89 -13
    do_send_query function implemented, so now 'send' command will be
    run in separate thread for the embedded server.
    Mutex and condition added to the 'connection' struct for syncronisation
    purposes. Yes it'd be easier if we had pthread_join() command

  libmysql/libmysql.c@1.156.1.149, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -7
    this isn't actually needed and causes problems in embedded server

  mysql-test/t/innodb-deadlock.test@1.7.1.3, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -2
    test is available for the embedded server now

  mysql-test/t/flush.test@1.14.1.4, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -8
    test is available for the embedded server now

  mysql-test/t/flush_block_commit.test@1.5.1.4, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -3
    test is available for the embedded server now

  mysql-test/t/innodb-lock.test@1.7.1.4, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -2
    test is available for the embedded server now

  mysql-test/t/lock_multi.test@1.8.1.4, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -8
    test is available for the embedded server now

  mysql-test/t/rename.test@1.11.1.1, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -4
    test is available for the embedded server now

  mysql-test/t/show_check.test@1.33.2.8, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +1 -2
    test is available for the embedded server now

  mysql-test/t/status.test@1.12.1.1, 2006-10-23 15:02:49+05:00, holyfoot@mysql.com +0 -7
    test is available for the embedded server now

ChangeSet@1.1810.2214.17, 2006-10-23 13:55:29+04:00, kostja@bodhi.local +1 -0
  A post-merge fix.

  mysql-test/r/view.result@1.138.1.44, 2006-10-23 13:55:25+04:00, kostja@bodhi.local +2 -0
    A post-merge fix.

ChangeSet@1.2303.6.3, 2006-10-23 14:17:57+05:00, bar@mysql.com +3 -0
  Bug#22823 gt and lt operators appear to be reversed in ExtractValue() command
  Problem: "greater than" and "less than" XPath operators appeared to have been implemented in reverse.
  Fix: swap arguments to eq_func() and eq_func_reverse() to provide correct operation result.

  mysql-test/r/xml.result@1.19, 2006-10-23 14:17:49+05:00, bar@mysql.com +73 -0
    Adding test case

  mysql-test/t/xml.test@1.18, 2006-10-23 14:17:49+05:00, bar@mysql.com +30 -0
    Adding test case

  sql/item_xmlfunc.cc@1.21, 2006-10-23 14:17:49+05:00, bar@mysql.com +8 -8
    Pass argumemtns to eq_func() and eq_func_reverse() in correct order:
    nodeset argument first, then scalar argument.
    Also, fixing eq_func_reverse() to do correct conversion, e.g:
    "scalar > nodeset" into "nodeset < scalar" instead of wrong "nodeset <= scalar"
    "scalar >= nodeset" into "nodeset <= scalar" instead of wrong "nodeset < scalar".

ChangeSet@1.1616.2822.2, 2006-10-23 10:56:13+02:00, msvensson@neptunus.(none) +1 -0
  Copy *.cnf file from std_data/ when doing a binary distribution

  scripts/make_binary_distribution.sh@1.55.8.5, 2006-10-23 10:56:12+02:00, msvensson@neptunus.(none) +1 -0
    Copy *.cnf file from std_data/ when doing a binary distribution

ChangeSet@1.2303.10.15, 2006-10-22 08:24:31+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - 
    revert fix bug#21052 as it's wrong, and induces bus-error on node crashes

  storage/ndb/src/mgmsrv/Services.cpp@1.76, 2006-10-22 08:24:30+02:00, jonas@perch.ndb.mysql.com +1 -7
    revert fix bug#21052 as it's wrong, and induces bus-error on node crashes 

ChangeSet@1.2303.27.6, 2006-10-20 22:21:05-04:00, cmiller@zippy.cornsilk.net +1 -0
  Fix bad merge.

  sql/sql_trigger.cc@1.74, 2006-10-20 22:21:04-04:00, cmiller@zippy.cornsilk.net +1 -1
    Fix bad merge.

ChangeSet@1.1810.2260.2, 2006-10-21 01:22:16+02:00, kent@mysql.com +1 -0
  configure.in:
    Raised version number to 5.0.28

  configure.in@1.245.1.156, 2006-10-21 01:21:42+02:00, kent@mysql.com +2 -2
    Raised version number to 5.0.28

ChangeSet@1.1810.2258.2, 2006-10-21 00:57:08+02:00, kent@mysql.com +3 -0
  make_win_bin_dist:
    Copy udf examples and raid.h
    Create target "include" directory before copying files to it
  CMakeLists.txt:
    Only compile in bdb if configured
  configure.in:
    Raised version number to 5.0.27
  TAG: mysql-5.0.27

  CMakeLists.txt@1.1.3.1, 2006-10-21 00:43:01+02:00, kent@mysql.com +3 -1
    Only compile in bdb if configured

  scripts/make_win_bin_dist@1.1.2.1, 2006-10-21 00:41:19+02:00, kent@mysql.com +11 -4
    Copy udf examples and raid.h
    Create target "include" directory before copying files to it

  configure.in@1.245.64.1, 2006-10-21 00:46:07+02:00, kent@mysql.com +2 -2
    Raised version number to 5.0.27

ChangeSet@1.2273.161.1, 2006-10-20 17:44:03-04:00, cmiller@zippy.cornsilk.net +2 -0
  Fix bad merge from #14262.

  sql/sql_trigger.cc@1.71.1.1, 2006-10-20 17:44:01-04:00, cmiller@zippy.cornsilk.net +1 -1
    Correct previous patch regarding binlog-entry type.

  sql/sql_view.cc@1.101.4.8, 2006-10-20 16:40:00-04:00, cmiller@zippy.cornsilk.net +12 -1
    Fix bad merge from #14262.

ChangeSet@1.1810.2258.1, 2006-10-20 17:17:24-04:00, cmiller@zippy.cornsilk.net +2 -0
  Bug #23427: incompatible ABI change in 5.0.26?
  
  Revert 1 June change enough to restore ABI compatibility with previous
  versions.

  include/mysql.h@1.154.1.9, 2006-10-20 17:17:22-04:00, cmiller@zippy.cornsilk.net +0 -6
    Revert patch that breaks ABI compatibility

  libmysqld/lib_sql.cc@1.107.1.8, 2006-10-20 17:17:22-04:00, cmiller@zippy.cornsilk.net +0 -1
    Remove useless assignment.

ChangeSet@1.2245.8.2, 2006-10-20 21:50:08+02:00, mats@romeo.(none) +4 -0
  Documentation changes to MyTAP.

  unittest/README.txt@1.3.2.1, 2006-10-20 21:50:04+02:00, mats@romeo.(none) +9 -0
    Adding reference to generated documentation

  unittest/mytap/Doxyfile@1.4, 2006-10-20 21:50:04+02:00, mats@romeo.(none) +26 -25
    Some configuration changes to make Doxygen generate better documentation.

  unittest/mytap/tap.c@1.5.1.1, 2006-10-20 21:50:04+02:00, mats@romeo.(none) +246 -22
    Adding documentation and tags

  unittest/mytap/tap.h@1.5.1.1, 2006-10-20 21:50:04+02:00, mats@romeo.(none) +23 -14
    Adding tags to provide document-internal references.

ChangeSet@1.2303.27.3, 2006-10-20 13:44:49-06:00, tsmith@siva.hindu.god +3 -0
  Applied InnoDB snapshot 5.1-ss927
  
  Fixes:
  - Bug #23368: crash during insert, table has foreign key pointing into other schema,permission

  storage/innobase/dict/dict0dict.c@1.93, 2006-10-20 13:44:45-06:00, tsmith@siva.hindu.god +1 -11
    Applied InnoDB snapshot 5.1-ss927
    
    Revision r927:
    dict_print_info_on_foreign_key_in_create_format(): Use ut_print_name()
    instead of passing the wrong length to ut_print_namel().  (Bug #23368)
    
    ut_print_name(), ut_print_namel(): Document the special treatment of '/'.
    
    ut_print_namel(): Replace strchr() with memchr(), as the string might
    not be NUL-terminated.

  storage/innobase/include/ut0ut.h@1.22, 2006-10-20 13:44:46-06:00, tsmith@siva.hindu.god +8 -2
    Applied InnoDB snapshot 5.1-ss927
    
    Revision r927:
    dict_print_info_on_foreign_key_in_create_format(): Use ut_print_name()
    instead of passing the wrong length to ut_print_namel().  (Bug #23368)
    
    ut_print_name(), ut_print_namel(): Document the special treatment of '/'.
    
    ut_print_namel(): Replace strchr() with memchr(), as the string might
    not be NUL-terminated.

  storage/innobase/ut/ut0ut.c@1.38, 2006-10-20 13:44:46-06:00, tsmith@siva.hindu.god +9 -3
    Applied InnoDB snapshot 5.1-ss927
    
    Revision r927:
    dict_print_info_on_foreign_key_in_create_format(): Use ut_print_name()
    instead of passing the wrong length to ut_print_namel().  (Bug #23368)
    
    ut_print_name(), ut_print_namel(): Document the special treatment of '/'.
    
    ut_print_namel(): Replace strchr() with memchr(), as the string might
    not be NUL-terminated.

ChangeSet@1.1810.2255.4, 2006-10-20 12:41:27-07:00, igor@rurik.mysql.com +1 -0
  Adjustments after the merge for bug 23478.

  sql/item_subselect.cc@1.113.1.23, 2006-10-20 12:41:24-07:00, igor@rurik.mysql.com +2 -0
    Adjustments after the merge for bug 23478.

ChangeSet@1.2303.28.1, 2006-10-20 12:36:15-06:00, tsmith@siva.hindu.god +16 -0
  Apply InnoDB snapshot ss923
  
  Fixes:
  - Bug #18077: InnoDB uses full explicit table locks in stored FUNCTION

  storage/innobase/btr/btr0btr.c@1.52, 2006-10-20 12:36:11-06:00, tsmith@siva.hindu.god +0 -3
    Apply InnoDB snapshot ss923
    
    Revision r919:
    btr_page_get_father_for_rec(): Remove bogus comment about removed dict_tree_t.

  storage/innobase/dict/dict0dict.c@1.92, 2006-10-20 12:36:11-06:00, tsmith@siva.hindu.god +3 -19
    Apply InnoDB snapshot ss923
    
    Revision r892:
    Merge changes from MySQL AB.
    
    dict_col_copy_type_noninline(): Remove the return statement.
    Some compilers do not allow return expressions of void type.
    
    innobase_start_or_create_for_mysql(): Do not cap srv_max_threads to 1000
    on Windows.
    
    Makefile.am (EXTRA_DIST): Add plug.in
    
    
    Revision r897:
    dict_index_get_if_in_cache(): Enclose in #ifdef UNIV_DEBUG.
    Replace the search loop with a call to dict_index_find_on_id_low().

  storage/innobase/handler/ha_innodb.cc@1.306.1.1, 2006-10-20 12:36:11-06:00, tsmith@siva.hindu.god +7 -6
    Apply InnoDB snapshot ss923
    
    Revision r887:
    storage/innobase/handler: Merge changes from MySQL AB:
    
    ChangeSet
      2006/09/30 18:44:42-07:00 brian@zim.(none) 
      Merge zim.(none):/home/brian/mysql/merge-5.1
      into  zim.(none):/home/brian/mysql/arch-5.1
    
    ChangeSet
      2006/09/30 12:49:46-07:00 brian@zim.(none) 
      This patch adds handlerton passing to functions. NDB and Innodb still require a global hanlderton in the main code due to the nature of the sql_cache call back function (should be solveable... another patch).
      Partitioning now has a flag to allow disabling of engines from being compatible with partitioning. Cleaned up heap naming convention on panic call. 
    
    ChangeSet
      2006/09/29 17:19:02-07:00 brian@zim.(none) 
      This removes the passing of global hton to engine instance. 
    
    ChangeSet
      2006/09/28 13:22:56+02:00 gbichot@dl145h.mysql.com 
      Merge gbichot@bk-internal:/home/bk/mysql-5.1-arch
      into  dl145h.mysql.com:/users/gbichot/mysql-5.1-arch
    
    ChangeSet
      2006/09/28 13:19:43+02:00 gbichot@dl145h.mysql.com 
      In the handlerton, cursor creation function don't have an argument
      and so the engine calls current_thd to derive transaction information;
      instead we now pass THD to those functions, it looks more logical
      (it makes the implicit current_thd parameter more visible).
      Approved by Brian and Monty.
    
    ChangeSet
      2006/09/26 22:51:53-07:00 brian@zim.(none) 
      Merge zim.(none):/home/brian/mysql/merge-5.1
      into  zim.(none):/home/brian/mysql/arch-5.1
    
    
    Revision r895:
    Merge changes from MySQL AB, and remove two compilation warnings.
    
    ha_innodb.cc: innodb_mutex_show_status(): Add (ulong) casts to
    ulonglong expressions being passed to fprintf %lu.  The warnings
    were apparently introduced by MySQL AB developers.
    
    mysql_declare_plugin(innobase): Add PLUGIN_LICENSE_GPL.
    
    have_innodb.inc: Merge changes from MySQL AB.
    
    
    Revision r923:
    ha_innobase::store_lock(): When downgrading table locks, do not
    check thd->in_lock_tables but test if
    thd->lex->sql_command == SQLCOM_LOCK_TABLES
    instead.  Otherwise, stored functions will use table locks.  (Bug #18077)
    
    This patch is from Heikki.

  storage/innobase/include/dict0dict.h@1.48, 2006-10-20 12:36:11-06:00, tsmith@siva.hindu.god +1 -3
    Apply InnoDB snapshot ss923
    
    Revision r897:
    dict_index_get_if_in_cache(): Enclose in #ifdef UNIV_DEBUG.
    Replace the search loop with a call to dict_index_find_on_id_low().

  storage/innobase/include/mem0dbg.h@1.9, 2006-10-20 12:36:11-06:00, tsmith@siva.hindu.god +4 -9
    Apply InnoDB snapshot ss923
    
    Revision r901:
    Enclose some mem debug functions in #ifdef UNIV_DEBUG or #ifdef UNIV_MEM_DEBUG.

  storage/innobase/include/mtr0mtr.h@1.16, 2006-10-20 12:36:11-06:00, tsmith@siva.hindu.god +2 -0
    Apply InnoDB snapshot ss923
    
    Revision r866:
    mtr_print(), mtr_memo_contains(): Disable unless #ifdef UNIV_DEBUG.

  storage/innobase/include/mtr0mtr.ic@1.6, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +2 -0
    Apply InnoDB snapshot ss923
    
    Revision r866:
    mtr_print(), mtr_memo_contains(): Disable unless #ifdef UNIV_DEBUG.

  storage/innobase/include/sync0rw.h@1.17, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +3 -2
    Apply InnoDB snapshot ss923
    
    Revision r907:
    Send all SHOW ENGINE INNODB STATUS information to the client also when
    UNIV_SYNC_DEBUG is defined.
    
    rw_lock_list_print_info(): Add parameter "file".
    
    mutex_list_print_info(): Add parameter "file".  Make the function static.

  storage/innobase/include/sync0sync.h@1.28, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +0 -6
    Apply InnoDB snapshot ss923
    
    Revision r907:
    Send all SHOW ENGINE INNODB STATUS information to the client also when
    UNIV_SYNC_DEBUG is defined.
    
    rw_lock_list_print_info(): Add parameter "file".
    
    mutex_list_print_info(): Add parameter "file".  Make the function static.

  storage/innobase/include/univ.i@1.58, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +28 -37
    Apply InnoDB snapshot ss923
    
    Revision r894:
    univ.i: Indent some of the directives, and remove conditions about Windows
    in the "#else" branch of "#if building on Windows".

  storage/innobase/mem/mem0dbg.c@1.24, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +7 -7
    Apply InnoDB snapshot ss923
    
    Revision r901:
    Enclose some mem debug functions in #ifdef UNIV_DEBUG or #ifdef UNIV_MEM_DEBUG.
    
    
    Revision r902:
    mem0dbg.c: Enclose some more function definitions in #ifdef UNIV_MEM_DEBUG.
    The declarations were already enclosed in #ifdef UNIV_MEM_DEBUG.

  storage/innobase/mem/mem0pool.c@1.26, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +8 -9
    Apply InnoDB snapshot ss923
    
    Revision r896:
    mem0pool.c: Remove obsolete comments about the dictionary cache being
    managed with an LRU algorithm.

  storage/innobase/mtr/mtr0mtr.c@1.15, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +2 -0
    Apply InnoDB snapshot ss923
    
    Revision r866:
    mtr_print(), mtr_memo_contains(): Disable unless #ifdef UNIV_DEBUG.

  storage/innobase/row/row0purge.c@1.28, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +1 -1
    Apply InnoDB snapshot ss923
    
    Revision r869:
    row_purge_parse_undo_rec(): Correct a faulty condition.  Luckily, this
    bug would only surface if the InnoDB SQL interpreter were used for
    updating fixed-length columns.  Currently (as the UPD_NODE_NO_SIZE_CHANGE
    flag is never set), cmpl_info can only be 0 or UPD_NODE_NO_ORD_CHANGE.
    Luckily, UPD_NODE_NO_ORD_CHANGE is 1, and the condition was simplified
    to !cmpl_info.

  storage/innobase/sync/sync0rw.c@1.26, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +8 -7
    Apply InnoDB snapshot ss923
    
    Revision r907:
    Send all SHOW ENGINE INNODB STATUS information to the client also when
    UNIV_SYNC_DEBUG is defined.
    
    rw_lock_list_print_info(): Add parameter "file".
    
    mutex_list_print_info(): Add parameter "file".  Make the function static.

  storage/innobase/sync/sync0sync.c@1.43, 2006-10-20 12:36:12-06:00, tsmith@siva.hindu.god +10 -9
    Apply InnoDB snapshot ss923
    
    Revision r907:
    Send all SHOW ENGINE INNODB STATUS information to the client also when
    UNIV_SYNC_DEBUG is defined.
    
    rw_lock_list_print_info(): Add parameter "file".
    
    mutex_list_print_info(): Add parameter "file".  Make the function static.

ChangeSet@1.1810.2257.1, 2006-10-20 12:34:31-06:00, tsmith@siva.hindu.god +1 -0
  Apply InnoDB snapshot ss923
  
  Fixes:
  - Bug #18077: InnoDB uses full explicit table locks in stored FUNCTION

  sql/ha_innodb.cc@1.202.28.1, 2006-10-20 12:34:28-06:00, tsmith@siva.hindu.god +5 -4
    Apply InnoDB snapshot ss923
    
    Revision r922:
    ha_innobase::store_lock(): When downgrading table locks, do not
    check thd->in_lock_tables but test if
    thd->lex->sql_command == SQLCOM_LOCK_TABLES
    instead.  Otherwise, stored functions will use table locks.  (Bug #18077)

ChangeSet@1.1810.2214.15, 2006-10-20 22:26:40+04:00, anozdrin@alik. +5 -0
  Instance Manager polishing.

  server-tools/instance-manager/guardian.cc@1.20.1.4, 2006-10-20 22:26:38+04:00, anozdrin@alik. +29 -43
    1. Removed unused stop_instances_arg from request_shutdown() and
    stop_instances() methods.
    
    2. Changed log-output statements so that instance name is passed
    correctly (char *, not LEX_STRING)

  server-tools/instance-manager/guardian.h@1.12.1.1, 2006-10-20 22:26:38+04:00, anozdrin@alik. +2 -2
    Removed unused stop_instances_arg from request_shutdown() and
    stop_instances() methods.

  server-tools/instance-manager/instance.cc@1.32.1.3, 2006-10-20 22:26:38+04:00, anozdrin@alik. +12 -11
    Removed unused stop_instances_arg from request_shutdown() and
    stop_instances() methods.

  server-tools/instance-manager/listener.cc@1.24.1.3, 2006-10-20 22:26:38+04:00, anozdrin@alik. +2 -2
    Be more verbose in log.

  server-tools/instance-manager/manager.cc@1.32.1.4, 2006-10-20 22:26:38+04:00, anozdrin@alik. +2 -3
    Removed unused stop_instances argument.

ChangeSet@1.1810.2139.22, 2006-10-20 19:18:21+02:00, kent@mysql.com +2 -0
  make_win_bin_dist:
    Create target "include" directory before copying files to it
    Copy udf examples and raid.h
  CMakeLists.txt:
    Only compile in bdb if configured

  CMakeLists.txt@1.1.2.1, 2006-10-20 19:00:02+02:00, kent@mysql.com +3 -1
    Only compile in bdb if configured

  scripts/make_win_bin_dist@1.1.1.2, 2006-10-20 19:15:41+02:00, kent@mysql.com +2 -1
    Create target "include" directory before copying files to it

  scripts/make_win_bin_dist@1.1.1.1, 2006-10-20 19:03:25+02:00, kent@mysql.com +9 -3
    Copy udf examples and raid.h

ChangeSet@1.1616.2822.1, 2006-10-20 17:09:07+02:00, msvensson@neptunus.(none) +1 -0
  Init some variables that changes between test cases direclty in run_testcase
  This can not be done in run_testcase_start_servers as embedded never starts a server
  Add error if mysqld_start is called in embedded mode 

  mysql-test/mysql-test-run.pl@1.8.9.63, 2006-10-20 17:09:06+02:00, msvensson@neptunus.(none) +10 -6
    Init some variables that changes between test cases direclty in run_testcase
    This can not be done in run_testcase_start_servers as embedded never starts a server
    Add error if mysqld_start is called in embedded mode 

ChangeSet@1.2303.10.14, 2006-10-20 16:26:40+02:00, jonas@perch.ndb.mysql.com +1 -0
  merge

  storage/ndb/include/kernel/ndb_limits.h@1.26, 2006-10-20 16:26:39+02:00, jonas@perch.ndb.mysql.com +0 -1
    merge

ChangeSet@1.1616.2769.11, 2006-10-20 16:16:01+02:00, jonas@perch.ndb.mysql.com +3 -0
  ndb - bug#23499 and bug#23502
    Fix some too small buffers in backup
    

  ndb/include/kernel/ndb_limits.h@1.10.1.1, 2006-10-20 16:15:59+02:00, jonas@perch.ndb.mysql.com +2 -0
    backport for 5.1
    add MAX_WORDS_META_FILE for computing Backup::NO_OF_PAGES_META_FILE

  ndb/src/kernel/blocks/backup/Backup.cpp@1.11.3.1, 2006-10-20 16:16:00+02:00, jonas@perch.ndb.mysql.com +2 -3
    Make sure to set maxInsert so that we actually can handle NO_OF_META_PAGES

  ndb/src/kernel/blocks/backup/Backup.hpp@1.6.1.4, 2006-10-20 16:16:00+02:00, jonas@perch.ndb.mysql.com +4 -2
    backport for 5.1
    add MAX_WORDS_META_FILE for computing Backup::NO_OF_PAGES_META_FILE

ChangeSet@1.2308, 2006-10-20 22:47:28+10:00, stewart@willster.(none) +3 -0
  BUG#20839 Illegal error code: 155 returned downgrading from 5.1.12-> 5.1.11
  
  post-review fixups - magnus suggested creating dynstr_trunc instead of doing
  it manually.

  client/mysqldump.c@1.256, 2006-10-20 22:47:24+10:00, stewart@willster.(none) +2 -2
    use dynstr_trunc instead of manually fiddling with the string

  include/my_sys.h@1.206.2.1, 2006-10-20 22:47:24+10:00, stewart@willster.(none) +1 -0
    add dynstr_trunc

  mysys/string.c@1.9, 2006-10-20 22:47:24+10:00, stewart@willster.(none) +6 -0
    add dynstr_trunc

ChangeSet@1.2303.10.12, 2006-10-20 14:37:34+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#23494
      Fix bug in restore with table with many columns, Compute size of databuffer pool correctly

  storage/ndb/src/kernel/blocks/restore.cpp@1.10, 2006-10-20 14:37:32+02:00, jonas@perch.ndb.mysql.com +6 -1
    ndb - bug#23494
        Fix bug in restore with table with many columns, Compute size of databuffer pool correctly

ChangeSet@1.2303.10.11, 2006-10-20 14:36:39+02:00, jonas@perch.ndb.mysql.com +4 -0
  ndb -
      Add better error message if getting error in RESTORE

  storage/ndb/include/mgmapi/ndbd_exit_codes.h@1.13, 2006-10-20 14:36:37+02:00, jonas@perch.ndb.mysql.com +2 -0
    ndb -
        Add better error message if getting error in RESTORE

  storage/ndb/src/kernel/blocks/restore.cpp@1.9, 2006-10-20 14:36:37+02:00, jonas@perch.ndb.mysql.com +15 -3
    ndb -
        Add better error message if getting error in RESTORE

  storage/ndb/src/kernel/blocks/restore.hpp@1.6, 2006-10-20 14:36:37+02:00, jonas@perch.ndb.mysql.com +2 -1
    ndb -
        Add better error message if getting error in RESTORE

  storage/ndb/src/kernel/error/ndbd_exit_codes.c@1.14, 2006-10-20 14:36:37+02:00, jonas@perch.ndb.mysql.com +3 -1
    ndb -
        Add better error message if getting error in RESTORE

ChangeSet@1.2303.10.10, 2006-10-20 14:35:59+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#22838
      when doing create unique index which mysql will silently converts to PK, ndb is not informed
      so table will be useless.
    
      change so that we never do online add index wo/ primary key.
      this is not good, but it's better than a useless table

  sql/ha_ndbcluster.cc@1.357.1.7, 2006-10-20 14:35:57+02:00, jonas@perch.ndb.mysql.com +25 -0
    ndb - bug#22838
        when doing create unique index which mysql will silently converts to PK, ndb is not informed
        so table will be useless.
      
        change so that we never do online add index wo/ primary key.
        this is not good, but it's better than a useless table

ChangeSet@1.2303.10.9, 2006-10-20 14:35:22+02:00, jonas@perch.ndb.mysql.com +1 -0
  merge

  storage/ndb/src/kernel/blocks/dbdih/DbdihMain.cpp@1.89, 2006-10-20 14:35:21+02:00, jonas@perch.ndb.mysql.com +1 -1
    merge

ChangeSet@1.1810.2245.2, 2006-10-20 15:47:52+04:00, dlenev@mockturtle.local +3 -0
  Fix for bug#15228 "'invalid access to non-static data member'
  warnings in sql_trigger.cc and sql_view.cc".
  
  According to the current version of C++ standard offsetof() macro
  can't be used for non-POD types. So warnings were emitted when we
  tried to use this macro for TABLE_LIST and Table_triggers_list
  classes. Note that despite of these warnings it was probably safe
  thing to do.
  
  This fix tries to circumvent this limitation by implementing
  custom version of offsetof() macro to be used with these
  classes. This hack should go away once we will refactor
  File_parser class.
  
  Alternative approaches such as disabling this warning for
  sql_trigger.cc/sql_view.cc or for the whole server were
  considered less explicit. Also I was unable to find a way
  to disable particular warning for particular _part_ of
  file in GCC.

  sql/parse_file.h@1.13, 2006-10-20 15:47:49+04:00, dlenev@mockturtle.local +16 -0
    Introduced auxillary macro which can be used instead of offsetof()
    to get offsets of members in class for non-POD types without getting
    warnings (assuming that all instances of the class has same offsets
    for same members).

  sql/sql_trigger.cc@1.35.12.1, 2006-10-20 15:47:49+04:00, dlenev@mockturtle.local +4 -4
    Use my_offsetof() macro instead of standard offsetof() macro with
    Table_triggers_list class in order to avoid warnings (offsetof()
    cannot be used for non-POD types according to the standard).

  sql/sql_view.cc@1.78.15.1, 2006-10-20 15:47:49+04:00, dlenev@mockturtle.local +12 -12
    Use my_offsetof() macro instead of standard offsetof() macro with
    TABLE_LIST class in order to avoid warnings (offsetof() cannot
    be used for non-POD types according to the standard).

ChangeSet@1.1616.2769.10, 2006-10-20 13:38:15+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb -
    Fixed a 4.1/5.0 vs. 5.1 name change in latest SR bug fix

  ndb/src/kernel/blocks/dbdih/DbdihMain.cpp@1.14.5.8, 2006-10-20 13:38:13+02:00, jonas@perch.ndb.mysql.com +1 -1
    Fixed a 4.1/5.0 vs. 5.1 name change in latest SR bug fix

ChangeSet@1.1616.2820.1, 2006-10-20 14:31:47+04:00, kaa@polly.local +1 -0
  Fix for bug #23256 "doesn't build on alpha"
  - compilation on the Alpha platform was broken because the Alpha-specific code was not updated after replacing the SIGRETURN_FRAME_COUNT constant with a variable

  sql/stacktrace.c@1.16.3.1, 2006-10-20 14:31:44+04:00, kaa@polly.local +1 -1
    Fix for bug #23256 "doesn't build on alpha"
    - compilation on the Alpha platform was broken because the Alpha-specific code was not updated after replacing the SIGRETURN_FRAME_COUNT constant with a variable

ChangeSet@1.1616.2769.9, 2006-10-20 12:29:16+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb -
    Fix monster SR bug making SR with ordered indexes (or temporary tables) broken

  ndb/src/kernel/blocks/dbdih/DbdihMain.cpp@1.14.5.7, 2006-10-20 12:29:15+02:00, jonas@perch.ndb.mysql.com +4 -1
    Fix monster SR bug making SR with ordered indexes (or temporary tables) broken

ChangeSet@1.1810.2251.3, 2006-10-20 15:08:25+05:00, ramil@mysql.com +1 -0
  Fix for bug #22723: Host field blank when server started with skip-grant
  
  We set 'host_or_ip' to "" in the Security_context::skip_grants().
  
  

  sql/sql_show.cc@1.253.38.1, 2006-10-20 15:08:21+05:00, ramil@mysql.com +3 -1
    Fix for bug #22723: Host field blank when server started with skip-grant
      - as we set 'host_or_ip' to "" if skip-grant, use 'host' instead.

ChangeSet@1.2303.24.3, 2006-10-20 10:12:38+02:00, gkodinov@dl145s.mysql.com +4 -0
  sql_rename.cc, sql_table.cc, type_decimal.result, mix2_myisam.result:
    merge fixes

  mysql-test/r/mix2_myisam.result@1.4, 2006-10-20 10:10:31+02:00, gkodinov@dl145s.mysql.com +8 -8
    merge fixes

  mysql-test/r/type_decimal.result@1.45, 2006-10-20 10:10:38+02:00, gkodinov@dl145s.mysql.com +3 -3
    merge fixes

  sql/sql_rename.cc@1.37.1.2, 2006-10-20 10:11:48+02:00, gkodinov@dl145s.mysql.com +5 -4
    merge fixes

  sql/sql_table.cc@1.366.1.2, 2006-10-20 10:11:54+02:00, gkodinov@dl145s.mysql.com +5 -3
    merge fixes

ChangeSet@1.2303.26.1, 2006-10-20 14:55:14+08:00, gni@dev3-127.(none) +1 -0
  BUG #21858 Make sure retry when EINTR returns, which decreases memory leak chance.

  storage/ndb/src/common/util/File.cpp@1.14, 2006-10-20 14:55:12+08:00, gni@dev3-127.(none) +14 -2
    Avoid memory leak when EINTR error returns. Even though a close error happens, a ERROR message in out-file is given, and this shouldn't affect the normally running.

ChangeSet@1.1616.2819.2, 2006-10-19 23:05:53-07:00, igor@rurik.mysql.com +3 -0
  Fixed bug #23478.
  If elements a not top-level IN subquery were accessed by an index and 
  the subquery result set included  a NULL value then the quantified
  predicate that contained the subquery was evaluated to NULL when 
  it should return a non-null value.

  mysql-test/r/subselect.result@1.67.66.1, 2006-10-19 23:05:51-07:00, igor@rurik.mysql.com +15 -0
    Added a test case for bug #23478.

  mysql-test/t/subselect.test@1.58.47.1, 2006-10-19 23:05:51-07:00, igor@rurik.mysql.com +17 -0
    Added a test case for bug #23478.

  sql/item_subselect.cc@1.60.1.85, 2006-10-19 23:05:51-07:00, igor@rurik.mysql.com +3 -0
    Fixed bug #23478.
    If elements a not top-level IN subquery were accessed by an index and 
    the subquery result set included  a NULL value then the quantified
    predicate that contained the subquery was evaluated to NULL when 
    it should return a non-null value.

ChangeSet@1.2303.25.1, 2006-10-20 10:54:27+08:00, dli@dev3-76.dev.cn.tlan +1 -0
  ndb - bug#22548, Data nodes fail during starting if MaxNoOfUniqueHashIndexes has upper limit.
  
  added check in ndb_mgmd so that the sum of MaxNoOfTables, MaxNoOfOrderedIndexes, MaxNoOfUniqueHashIndexes and the number of System Tables must not overflow the max Uint32 number.

  storage/ndb/src/mgmsrv/ConfigInfo.cpp@1.91, 2006-10-20 10:54:24+08:00, dli@dev3-76.dev.cn.tlan +24 -0
    the sum of MaxNoOfTables, MaxNoOfOrderedIndexes, MaxNoOfUniqueHashIndexes and the number of System Tables must not overflow the max value of Uint32.

ChangeSet@1.1810.2214.13, 2006-10-19 11:39:51-07:00, malff@weblab.(none) +8 -0
  Bug#20028 (Function with select return no data)
  
  This patch reverts a change introduced by Bug 6951, which incorrectly
  set thd->abort_on_warning for stored procedures.
  
  As per internal discussions about the SQL_MODE=TRADITIONAL,
  the correct behavior is to *not* abort on warnings even inside an INSERT/UPDATE
  trigger.
  
  Tests for Stored Procedures, Stored Functions, Triggers involving SQL_MODE
  have been included or revised, to reflect the intended behavior.
  
  (reposting approved patch, to work around source control issues, no review needed)

  mysql-test/include/sp-vars.inc@1.2, 2006-10-19 11:39:48-07:00, malff@weblab.(none) +9 -0
    Tests for SQL_MODE='TRADITIONAL'

  mysql-test/r/sp-vars.result@1.1.1.4, 2006-10-19 11:39:48-07:00, malff@weblab.(none) +23 -0
    Tests for SQL_MODE='TRADITIONAL'

  mysql-test/r/sp.result@1.170.1.45, 2006-10-19 11:39:48-07:00, malff@weblab.(none) +129 -0
    Tests for SQL_MODE='TRADITIONAL'

  mysql-test/r/trigger.result@1.29.1.19, 2006-10-19 11:39:48-07:00, malff@weblab.(none) +60 -4
    Tests for SQL_MODE='TRADITIONAL'

  mysql-test/t/sp-vars.test@1.4, 2006-10-19 11:39:48-07:00, malff@weblab.(none) +10 -0
    Tests for SQL_MODE='TRADITIONAL'

  mysql-test/t/sp.test@1.174.23.2, 2006-10-19 11:39:48-07:00, malff@weblab.(none) +131 -0
    Tests for SQL_MODE='TRADITIONAL'

  mysql-test/t/trigger.test@1.34.1.20, 2006-10-19 11:39:48-07:00, malff@weblab.(none) +61 -2
    Tests for SQL_MODE='TRADITIONAL'

  sql/sp_head.cc@1.200.1.25, 2006-10-19 11:39:48-07:00, malff@weblab.(none) +1 -2
    For SQL_MODE='TRADITIONAL',
    thd->abort_on_warning should be set only when assigning a *column*

ChangeSet@1.1616.2818.3, 2006-10-19 20:33:32+02:00, msvensson@neptunus.(none) +2 -0
  Adapt to running from "binary dist"
  Add function mtr_exe_maybe_exists to look for binaries that is optional
  Skip ndb support if it's a binary dist where mysqld supports ndb but there is no ndbd

  mysql-test/lib/mtr_misc.pl@1.5.1.4, 2006-10-19 20:33:30+02:00, msvensson@neptunus.(none) +13 -1
    Add function mtr_exe_maybe_exists

  mysql-test/mysql-test-run.pl@1.8.9.62, 2006-10-19 20:33:30+02:00, msvensson@neptunus.(none) +33 -33
    Adapt to running from binary dist
    Add function mtr_exe_maybe_exists to look for binaries that is optional
    Skip ndb support if it's a binary dist where mysqld supports ndb but there is no ndbd

ChangeSet@1.1616.2818.2, 2006-10-19 20:29:33+02:00, msvensson@neptunus.(none) +1 -0
  Fix problem running rpl_timezone on powermacg5, it was not popular to set TZ to "" so now it's set 
  to a value wich is not our default

  mysql-test/lib/mtr_cases.pl@1.6.2.12, 2006-10-19 20:29:31+02:00, msvensson@neptunus.(none) +7 -5
    Fix problem running rpl_timezone on powermacg5, it was not popular to set TZ to "" so now it's set 
    to a value wich is not our default

ChangeSet@1.2303.7.8, 2006-10-19 20:29:12+05:00, svoj@mysql.com +1 -0
  After merge fix.

  mysql-test/r/repair.result@1.24, 2006-10-19 20:29:10+05:00, svoj@mysql.com +6 -6
    After merge fix.

ChangeSet@1.1810.2221.9, 2006-10-19 18:48:37+05:00, svoj@mysql.com +1 -0
  After merge fix.

  mysql-test/r/repair.result@1.18.1.4, 2006-10-19 18:48:35+05:00, svoj@mysql.com +3 -0
    After merge fix.

ChangeSet@1.2303.11.8, 2006-10-19 15:22:50+02:00, mskold@mysql.com +1 -0
  Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key: Added string initialization

  sql/handler.cc@1.273.2.4, 2006-10-19 15:22:36+02:00, mskold@mysql.com +1 -0
    Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key: Added string initialization

ChangeSet@1.1616.2765.4, 2006-10-19 14:57:04+02:00, mskold@mysql.com +1 -0
  Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key: Added string initialization

  sql/handler.cc@1.103.19.19, 2006-10-19 14:56:43+02:00, mskold@mysql.com +1 -0
    Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key: Added string initialization

ChangeSet@1.1810.2221.7, 2006-10-19 13:42:26+02:00, istruewing@chilla.local +1 -0
  Bug#21476 - Lost Database Connection During Query
  Backport from 5.1.
  Raised STACK_MIN_SIZE for Debian GNU/Linux Sid,
  Linux kernel 2.6.16,
  gcc version 3.3.6 (Debian 1:3.3.6-13),
  libc6-dbg 2.3.6.ds1-4,
  Pentium4 (x86),
  BUILD/compile-pentium-debug-max
  Raised about 100 Bytes above the required minimum.

  sql/mysql_priv.h@1.290.1.126, 2006-10-19 13:42:22+02:00, istruewing@chilla.local +1 -1
    Bug#21476 - Lost Database Connection During Query
    Backport from 5.1.
    Raised STACK_MIN_SIZE for Debian GNU/Linux Sid,
    Linux kernel 2.6.16,
    gcc version 3.3.6 (Debian 1:3.3.6-13),
    libc6-dbg 2.3.6.ds1-4,
    Pentium4 (x86),
    BUILD/compile-pentium-debug-max
    Raised about 100 Bytes above the required minimum.

ChangeSet@1.1616.2818.1, 2006-10-19 13:34:09+02:00, msvensson@neptunus.(none) +3 -0
  Add command "exit" to mysqltest, it will stop processing any more
  commands and go directly to result file processing

  client/mysqltest.c@1.92.21.24, 2006-10-19 13:34:08+02:00, msvensson@neptunus.(none) +10 -3
    Add command "exit" to mysqltest

  mysql-test/r/mysqltest.result@1.3.1.16, 2006-10-19 13:34:08+02:00, msvensson@neptunus.(none) +2 -0
    Add command "exit" to mysqltest

  mysql-test/t/mysqltest.test@1.3.1.20, 2006-10-19 13:34:08+02:00, msvensson@neptunus.(none) +14 -0
    Add command "exit" to mysqltest

ChangeSet@1.1810.2254.1, 2006-10-19 14:43:52+04:00, kroki@moonlight.intranet +4 -0
  BUG#21856: Prepared Statements: crash if bad create
  
  When statement to be prepared contained CREATE PROCEDURE, CREATE FUNCTION
  or CREATE TRIGGER statements with a syntax error in it, the preparation
  would fail with syntax error message, but the memory could be corrupted.
  
  The problem occurred because we switch memroot when parse stored
  routine or trigger definitions, and on parse error we restored the
  original memroot only after performing some memory operations.  In more
  detail:
   - prepared statement would activate its own memory root to parse
     the definition of the stored procedure.
   - SP would reset this memory root with its own memory root to
     parse SP statements
   - a syntax error would happen
   - prepared statement would restore the original memory root
   - stored procedure would restore what it thinks was the original
     memory root, but actually was the statement memory root.
  That led to double free - in destruction of the statement and in
  a next call to mysql_parse().
  
  The solution is to restore memroot right after the failed parsing.

  mysql-test/r/ps.result@1.56.8.1, 2006-10-19 14:43:49+04:00, kroki@moonlight.intranet +1 -0
    Add result for bug#21856: Prepared Statements: crash if bad create.

  mysql-test/t/ps.test@1.56.8.1, 2006-10-19 14:43:49+04:00, kroki@moonlight.intranet +20 -0
    Add test case for bug#21856: Prepared Statements: crash if bad create.

  sql/sql_parse.cc@1.426.114.1, 2006-10-19 14:43:49+04:00, kroki@moonlight.intranet +7 -2
    On parse error if thd->lex->sphead is set we have to free sp_head object
    to restore statement memroot, if it was switched during parsing.
    
    The change here is for safety, currently query_cache_abort() and
    lex->unit.cleanup() calls do not use current memroot.

  sql/sql_prepare.cc@1.142.19.1, 2006-10-19 14:43:49+04:00, kroki@moonlight.intranet +11 -0
    On parse error if thd->lex->sphead is set we have to free sp_head object
    to restore statement memroot, if it was switched during parsing.

ChangeSet@1.1616.2817.1, 2006-10-19 11:37:07+02:00, andrey@example.com +1 -0
  Fix for bug#23379 "wrong time value in SHOW PROCESSLIST"
    
  The value taken to be shown in SHOW PROCESSLIST is not
  initialized when THD is created and will be random for
  unauthenticated connections.
    
  To the documentor: Random value, instead of NULL, was shown,
  in SHOW PROCESSLIST for still non-authenticated connections.

  sql/sql_class.cc@1.105.42.1, 2006-10-19 11:37:04+02:00, andrey@example.com +1 -0
    Initialize time_after_lock.
    It is used from SHOW PROCESSLIST's code. If not initialized
    random value is shown for connected but still unauthenticated
    clients in the column Time.

ChangeSet@1.2301.1.11, 2006-10-19 11:20:04+02:00, jonas@perch.ndb.mysql.com +5 -0
  ndb - add temporary tables to hugo
    and use it for testOperations/testTransactions

  storage/ndb/test/include/NDBT_Test.hpp@1.18, 2006-10-19 11:20:02+02:00, jonas@perch.ndb.mysql.com +4 -0
    Add support for temporary tables in hugo

  storage/ndb/test/ndbapi/testOperations.cpp@1.14, 2006-10-19 11:20:03+02:00, jonas@perch.ndb.mysql.com +4 -2
    Make testOperations use temporary tables

  storage/ndb/test/ndbapi/testTransactions.cpp@1.9, 2006-10-19 11:20:03+02:00, jonas@perch.ndb.mysql.com +2 -0
    Make testTransactions use temporary tables

  storage/ndb/test/src/NDBT_Tables.cpp@1.22, 2006-10-19 11:20:03+02:00, jonas@perch.ndb.mysql.com +5 -0
    Add support for temporary tables in hugo

  storage/ndb/test/src/NDBT_Test.cpp@1.32, 2006-10-19 11:20:03+02:00, jonas@perch.ndb.mysql.com +22 -3
    Add support for temporary tables in hugo

ChangeSet@1.2301.1.10, 2006-10-19 11:18:04+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#22672
    fix another incorrect assertion

  storage/ndb/src/kernel/blocks/dbtc/DbtcMain.cpp@1.124, 2006-10-19 11:18:02+02:00, jonas@perch.ndb.mysql.com +1 -0
    clear m_transaction_nodes.clear()
    to avoid asserion in debug-compiled in releaseApiCon

ChangeSet@1.1616.2816.1, 2006-10-19 10:54:23+02:00, msvensson@neptunus.(none) +20 -0
  Backport test cases fixes from 5.0

  client/mysqldump.c@1.143.13.8, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +1 -0
    fflush stderr after printing of error message 

  mysql-test/t/rpl_log.test@1.20.1.6, 2006-10-19 10:54:22+02:00, msvensson@neptunus.(none) +1 -1
    Backport from 5.0

  mysql-test/t/rpl_max_relay_size.test@1.8.1.6, 2006-10-19 10:54:22+02:00, msvensson@neptunus.(none) +6 -6
    Backport from 5.0

  mysql-test/include/have_lowercase0.inc@1.1.1.1, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +2 -2
    Remove extra ; 

  mysql-test/r/rpl000015.result@1.30.1.2, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +3 -3
    Update result

  mysql-test/r/rpl_change_master.result@1.8.1.2, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +1 -1
    Update result

  mysql-test/r/rpl_error_ignored_table.result@1.8.1.7, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +1 -1
    Update result

  mysql-test/r/rpl_loaddata.result@1.20.1.3, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +3 -3
    Update result

  mysql-test/r/rpl_replicate_do.result@1.21.1.3, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +1 -1
    Update result

  mysql-test/r/rpl_log.result@1.50.1.7, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +1 -1
    Update result

  mysql-test/r/rpl_max_relay_size.result@1.12.1.3, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +18 -18
    Update result

  mysql-test/t/lowercase_table3.test@1.6.1.4, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +2 -6
    Backport from 5.0

  mysql-test/t/mysql_protocols.test@1.4.1.1, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +2 -0
    Backport from 5.0

  mysql-test/t/rpl000015.test@1.25.1.5, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +4 -4
    Backport from 5.0

  mysql-test/t/rpl_change_master.test@1.5.1.5, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +2 -1
    Backport from 5.0

  mysql-test/t/rpl_drop_db.test@1.5.1.1, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +2 -0
    Backport from 5.0

  mysql-test/t/rpl_error_ignored_table.test@1.4.1.12, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +1 -1
    Backport from 5.0

  mysql-test/t/rpl_loaddata.test@1.11.1.5, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +3 -3
    Backport from 5.0

  mysql-test/t/rpl_replicate_do.test@1.19.1.3, 2006-10-19 10:54:22+02:00, msvensson@neptunus.(none) +1 -1
    Backport from 5.0

  mysql-test/t/rpl_log-master.opt@1.3.1.1, 2006-10-19 10:54:21+02:00, msvensson@neptunus.(none) +1 -1
    Use --force-restart command in master.opt to force a restart for this test case

ChangeSet@1.2301.1.9, 2006-10-19 10:43:25+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - fix incorrect assertion
    Dont assert when getting gci=0 in read only transaction

  storage/ndb/src/ndbapi/NdbTransaction.cpp@1.59.1.2, 2006-10-19 10:43:23+02:00, jonas@perch.ndb.mysql.com +4 -2
    Dont assert when getting gci=0 in read only transaction

ChangeSet@1.1616.2815.1, 2006-10-19 12:52:37+05:00, ramil@mysql.com +6 -0
  Fix for bug #20732: Partial index and long sjis search with '>' fails sometimes
  
  We miss some records sometimes using RANGE method if we have
  partial key segments.
  Example:
    Create table t1(a char(2), key(a(1)));
    insert into t1 values ('a'), ('xx');
    select a from t1 where a > 'x';
  We call index_read() passing 'x' key and HA_READ_AFTER_KEY flag
  in the handler::read_range_first() wich is wrong because we have
  a partial key segment for the field and might miss records like 'xx'.
  
  Fix: don't use open segments in such a case.

  mysql-test/r/range.result@1.19.3.8, 2006-10-19 12:52:34+05:00, ramil@mysql.com +10 -0
    Fix for bug #20732: Partial index and long sjis search with '>' fails sometimes
      - test result.

  mysql-test/t/range.test@1.12.2.11, 2006-10-19 12:52:34+05:00, ramil@mysql.com +11 -1
    Fix for bug #20732: Partial index and long sjis search with '>' fails sometimes
      - test case.

  sql/opt_range.cc@1.98.2.52, 2006-10-19 12:52:34+05:00, ramil@mysql.com +5 -1
    Fix for bug #20732: Partial index and long sjis search with '>' fails sometimes
      - check if we have a partial key segment for a Item_func::GT_FUNC;
        if so, don't set NEAR_MIN flag in order to use HA_READ_KEY_OR_NEXT
        instead of HA_READ_AFTER_KEY.

  sql/opt_range.h@1.28.1.15, 2006-10-19 12:52:34+05:00, ramil@mysql.com +1 -1
    Fix for bug #20732: Partial index and long sjis search with '>' fails sometimes
      - key segment 'flag' slot added.

  sql/sql_select.cc@1.216.144.1, 2006-10-19 12:52:34+05:00, ramil@mysql.com +1 -1
    Fix for bug #20732: Partial index and long sjis search with '>' fails sometimes
      - test (HA_PART_KEY_SEG | HA_NULL_PART) as we split it in the sql/table.cc

  sql/table.cc@1.111.6.3, 2006-10-19 12:52:35+05:00, ramil@mysql.com +1 -1
    Fix for bug #20732: Partial index and long sjis search with '>' fails sometimes
      - set HA_NULL_PART flag instead of HA_PART_KEY_SEG in order not to mix them.

ChangeSet@1.1810.2124.17, 2006-10-19 09:27:58+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#23200
    this changes lock taken during peek, to decrease likelyhood of transaction abort
    

  sql/ha_ndbcluster.cc@1.175.50.2, 2006-10-19 09:27:57+02:00, jonas@perch.ndb.mysql.com +3 -1
    use exclusive lock in peek, as peek is used just before insert/update

ChangeSet@1.2303.1.10, 2006-10-19 13:49:32+08:00, gni@dev3-127.(none) +1 -0
  BUG #22547 LongMessageBuffer too large causes ndbd to exit and gives the exact paramter name in error log.

  storage/ndb/src/kernel/blocks/cmvmi/Cmvmi.cpp@1.33, 2006-10-19 13:49:30+08:00, gni@dev3-127.(none) +2 -1
    Add a parameter id parameter for setSize method. When allocating memory error results in ndbd exit can gives exact parameter name in error log.

ChangeSet@1.1810.2169.23, 2006-10-18 17:24:33-07:00, igor@rurik.mysql.com +2 -0
  Changed test case for bug 22342 to make it platform independent.

  mysql-test/r/group_min_max.result@1.23.1.4, 2006-10-18 17:24:29-07:00, igor@rurik.mysql.com +3 -3
    Changed test case for bug 22342 to make it platform independent.

  mysql-test/t/group_min_max.test@1.21.1.4, 2006-10-18 17:24:30-07:00, igor@rurik.mysql.com +1 -1
    Changed test case for bug 22342 to make it platform independent.

ChangeSet@1.2273.160.2, 2006-10-18 19:17:56-04:00, iggy@rolltop.ignatz42.dyndns.org +1 -0
  Post-Merge Fix.

  mysql-test/r/mysqldump.result@1.132, 2006-10-18 19:17:53-04:00, iggy@rolltop.ignatz42.dyndns.org +22 -23
    Post-Merge Fix.

ChangeSet@1.1810.2078.66, 2006-10-19 00:53:01+02:00, msvensson@neptunus.(none) +1 -0
  Change the ssl related variables to loose so they work also when the server is compiled without ssl 

  mysql-test/t/ssl_des-master.opt@1.2, 2006-10-19 00:52:59+02:00, msvensson@neptunus.(none) +1 -1
    Change the ssl related variables to loose so they work also when the server is compiled without ssl 

ChangeSet@1.1810.2251.1, 2006-10-18 18:43:51-04:00, iggy@rolltop.ignatz42.dyndns.org +3 -0
  Bug#19745: mysqldump --xml produces invalid xml
  
  The mysqldump command with both the --xml and --hex-blob options will output blob data encoded as hexBinary.  
  The proper XML datatype is xs:hexBinary.  
  The correct XML datatype is specified be setting the xsi_type attribute equal to xs:hexBinary for each encoded element.

  client/mysqldump.c@1.214.17.1, 2006-10-18 18:43:49-04:00, iggy@rolltop.ignatz42.dyndns.org +98 -36
    Bug#19745: mysqldump --xml produces invalid xml
    - Moved hex-blob code to it's own function.
    - Rewrote print_xml_tag function to accept zero or more attribute/value
      pair(s) which are appended to a separate tag name.
    - --xml option respects the --hex-blob option by ouputting blob data in hex
      encoded format.  Each hex encoded field tag will also contain an xsi:type
      attribute with an xs:hexBinary value.
    - --extended-insert and --xml are mutually exclusive. Otherwise, the xml file
      will contain INSERT commands.
    - Minor comment cleanup.

  mysql-test/r/mysqldump.result@1.83.1.34, 2006-10-18 18:43:49-04:00, iggy@rolltop.ignatz42.dyndns.org +22 -0
    Bug#19745: mysqldump --xml produces invalid xml
    -Added results.

  mysql-test/t/mysqldump.test@1.76.1.30, 2006-10-18 18:43:49-04:00, iggy@rolltop.ignatz42.dyndns.org +15 -0
    Bug#19745: mysqldump --xml produces invalid xml
    -Added test.

ChangeSet@1.1810.2078.63, 2006-10-18 22:47:30+02:00, msvensson@neptunus.(none) +1 -0
  Remove extra whitespace in result file

  mysql-test/r/show_check.result@1.75.1.7, 2006-10-18 22:47:28+02:00, msvensson@neptunus.(none) +6 -6
    Remove extra whitespace

ChangeSet@1.2301.1.7, 2006-10-18 20:54:25+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#23430
    make sure not to release log buffer twice (or several times) in case of abort of multi update

  storage/ndb/src/kernel/blocks/dbtup/DbtupAbort.cpp@1.12, 2006-10-18 20:54:23+02:00, jonas@perch.ndb.mysql.com +2 -1
    make sure not to release log buffer twice (or several times) in case of abort of multi update

ChangeSet@1.1616.2794.2, 2006-10-18 18:17:41+02:00, andrey@example.com +1 -0
  Fix for bug#23379 "wrong time value in SHOW PROCESSLIST"
  
  The value taken to be shown in SHOW PROCESSLIST is not
  initialized when THD is created and will be random for
  unauthenticated connections.
  
  To the documentor: Random value, instead of NULL, was shown,
  in SHOW PROCESSLIST for still non-authenticated connections.

  sql/sql_class.cc@1.105.41.1, 2006-10-18 18:17:37+02:00, andrey@example.com +1 -0
    Initialize time_after_lock.
    It is used from SHOW PROCESSLIST's code. If not initialized
    random value is shown for connected but still unauthenticated
    clients in the column Time.

ChangeSet@1.1616.2725.54, 2006-10-18 17:58:26+02:00, msvensson@shellback.(none) +1 -0
  Put the printf of failed ratio on its only line, printf was tricked
  into thinking the escaped % + w was a format specifier

  mysql-test/lib/mtr_report.pl@1.11.2.7, 2006-10-18 17:58:23+02:00, msvensson@shellback.(none) +3 -2
    Put the printf of failed ratio on its only line, printf was tricked
    into thinking the escaped % + w was a format specifier

ChangeSet@1.1616.2725.53, 2006-10-18 17:16:08+02:00, msvensson@shellback.(none) +1 -0
  Don't stop the time in mtr_timer_timeout, that will be done after testcase or when program exit

  mysql-test/lib/mtr_timer.pl@1.1.1.6, 2006-10-18 17:16:06+02:00, msvensson@shellback.(none) +2 -4
    Don't stop the time in mtr_timer_timeout, that will be done after testcase or when program exit

ChangeSet@1.1616.2769.8, 2006-10-18 16:48:44+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#23200
    Make sure postExecute is not run for blobs if AO_IgnoreError

  ndb/src/ndbapi/NdbConnection.cpp@1.30.7.1, 2006-10-18 16:48:43+02:00, jonas@perch.ndb.mysql.com +8 -1
    If AO_IgnoreError, error codes arent always set on individual operations, making postExecute impossible

ChangeSet@1.1616.2725.52, 2006-10-18 16:40:22+02:00, msvensson@shellback.(none) +2 -0
  Remove some junk

  mysql-test/lib/mtr_process.pl@1.15.3.4, 2006-10-18 16:40:20+02:00, msvensson@shellback.(none) +0 -2
    Remove some junk

  mysql-test/lib/mtr_timer.pl@1.1.1.5, 2006-10-18 16:40:20+02:00, msvensson@shellback.(none) +0 -3
    Remove some junk

ChangeSet@1.1616.2725.51, 2006-10-18 16:39:00+02:00, msvensson@shellback.(none) +1 -0
  Stop all timers before exiting when --start-and-exit 

  mysql-test/mysql-test-run.pl@1.8.9.61, 2006-10-18 16:38:57+02:00, msvensson@shellback.(none) +1 -0
    Stop all timers before exiting when --start-and-exit 

ChangeSet@1.1616.2725.50, 2006-10-18 16:30:51+02:00, msvensson@shellback.(none) +1 -0
  Fix bug where a timer was stopped by calling mtr_timer_stop with a "timer" instead of it's name

  mysql-test/lib/mtr_timer.pl@1.1.1.4, 2006-10-18 16:30:49+02:00, msvensson@shellback.(none) +1 -1
    Fix bug where a timer was stopped by calling mtr_timer_stop with a "timer" instead of it's name

ChangeSet@1.1616.2814.1, 2006-10-18 17:57:29+05:00, svoj@mysql.com +3 -0
  BUG#23175 - MYISAM crash/repair failed during repair
  
  Repair table could crash a server if there is not sufficient
  memory (myisam_sort_buffer_size) to operate. Affects not only
  repair, but also all statements that use create index by sort:
  repair by sort, parallel repair, bulk insert.
  
  Return an error if there is not sufficient memory to store at
  least one key per BUFFPEK.
  
  Also fixed memory leak if thr_find_all_keys returns an error.

  mysql-test/r/repair.result@1.14.2.1, 2006-10-18 17:57:28+05:00, svoj@mysql.com +28 -0
    A test case for BUG#23175.

  mysql-test/t/repair.test@1.12.2.1, 2006-10-18 17:57:28+05:00, svoj@mysql.com +28 -0
    A test case for BUG#23175.

  myisam/sort.c@1.35.1.13, 2006-10-18 17:57:28+05:00, svoj@mysql.com +6 -2
    maxbuffer is number of BUFFPEK-s for repair. It is calculated
    as records / keys. keys is number of keys that can be stored
    in memory (myisam_sort_buffer_size). There must be sufficient
    memory to store both BUFFPEK-s and keys. It was checked
    correctly before this patch. However there is another
    requirement that wasn't checked: there must be sufficient
    memory for at least one key per BUFFPEK, otherwise repair
    by sort/parallel repair cannot operate.
    
    Return an error if there is not sufficient memory to store at
    least one key per BUFFPEK.
    
    Also fixed memory leak if thr_find_all_keys returns an error.

ChangeSet@1.2303.20.2, 2006-10-18 22:31:48+10:00, stewart@willster.(none) +2 -0
  BUG#19914 SELECT COUNT(*) sometimes returns MAX_INT on cluster tables
  
  update partition engine for handler::info returning int

  sql/ha_partition.cc@1.72.2.5, 2006-10-18 22:31:45+10:00, stewart@willster.(none) +2 -2
    update for handler::info returning int.

  sql/ha_partition.h@1.27.1.2, 2006-10-18 22:31:45+10:00, stewart@willster.(none) +1 -1
    update for handler::info returning int.

ChangeSet@1.1616.2725.49, 2006-10-18 13:24:06+02:00, msvensson@shellback.(none) +2 -0
  Make --with-ndbcluster only be valid together with --bench
  Improve code that detects if ndb shuold be installed
  Remove call to stop_all_servers after install db, if any servers are still running 
  and need to be stopped they will be stopped atuomatically

  mysql-test/lib/mtr_cases.pl@1.6.2.11, 2006-10-18 13:24:03+02:00, msvensson@shellback.(none) +42 -39
    All tests that have "source include/have_ndb.inc" are ndb tests 

  mysql-test/mysql-test-run.pl@1.8.9.60, 2006-10-18 13:24:03+02:00, msvensson@shellback.(none) +29 -21
    Set --with-ndbcluster to only be valid together with --bench
    Rename opt_ndbcluster_supported to glob_ndbcluster_supported it's not an option
    Fix warnings

ChangeSet@1.1810.2214.11, 2006-10-18 15:20:34+04:00, kroki@moonlight.intranet +2 -0
  Fix for valgrind warning introduced by the fix for bug#21354:
  (COUNT(*) = 1) not working in SELECT inside prepared statement.
  Note: the warning was introduced in 5.0 and 5.1, 4.1 is OK with the
  original fix.
  
  The problem was that in 5.0 and 5.1 clear() for group functions may
  access hybrid_type member, and this member is initialized in
  fix_fields().
  
  So we should not call clear() from item cleanup() methods, as cleanup()
  may be called for unfixed items.

  sql/item_sum.cc@1.170.1.13, 2006-10-18 15:20:31+04:00, kroki@moonlight.intranet +1 -1
    Do not call clear() from item cleanup() methods, as cleanup() may be
    called for unfixed items, and clear() assumes the item was fixed.

  sql/item_sum.h@1.102.1.3, 2006-10-18 15:20:31+04:00, kroki@moonlight.intranet +5 -4
    Do not call clear() from item cleanup() methods, as cleanup() may be
    called for unfixed items, and clear() assumes the item was fixed.

ChangeSet@1.2303.17.1, 2006-10-18 18:12:55+08:00, gni@dev3-127.(none) +4 -0
  BUG #14612 If a restore is done on a slave cluster, yet the apply_status and schema tables don't exist,
             ndb_restore tool should create them.

  storage/ndb/tools/restore/consumer.hpp@1.12, 2006-10-18 18:12:53+08:00, gni@dev3-127.(none) +1 -0
    Add create apply_status and schema system table method when they don't exist.

  storage/ndb/tools/restore/consumer_restore.cpp@1.37, 2006-10-18 18:12:53+08:00, gni@dev3-127.(none) +27 -0
    Implement to create apply_status and schema system table method when they don't exist.

  storage/ndb/tools/restore/consumer_restore.hpp@1.15, 2006-10-18 18:12:53+08:00, gni@dev3-127.(none) +1 -0
    Add create apply_status and schema system table method when they don't exist.

  storage/ndb/tools/restore/restore_main.cpp@1.48.1.1, 2006-10-18 18:12:53+08:00, gni@dev3-127.(none) +9 -0
    if apply_status and schema system tables don't exist, create them also. 

ChangeSet@1.2303.13.4, 2006-10-18 18:19:16+10:00, stewart@willster.(none) +4 -0
  Bug #19148  	Backup causes cluster down if _really_ early abort happens
  
  Early abort, failing to allocate buffers, would go down the abort track and
   end up trying to sendDropTriggers (as the standard stop backup does). 
  However, it is possible to not have any tables yet defined in the backup 
  (due to allocating buffers is before this). Simple check in sendDropTrig 
  (and continue to next step). Files may be open, so we continue to close them.
  
  Also updated ERROR_Codes (and added one to test this bug).

  storage/ndb/src/kernel/blocks/ERROR_codes.txt@1.28, 2006-10-18 18:19:14+10:00, stewart@willster.(none) +6 -1
    update BACKUP error insert codes to reflect current reality.

  storage/ndb/src/kernel/blocks/backup/Backup.cpp@1.55, 2006-10-18 18:19:14+10:00, stewart@willster.(none) +32 -10
    Allow for early abort when no tables have been included in backup.
    
    Allow for abort when file records have been seized but not yet allocated
    to specific uses (is the case when buffer allocation fails)

  storage/ndb/src/kernel/blocks/backup/Backup.hpp@1.25, 2006-10-18 18:19:14+10:00, stewart@willster.(none) +1 -0
    initialize BackupRecord file Ptrs

  storage/ndb/test/src/NdbBackup.cpp@1.27, 2006-10-18 18:19:14+10:00, stewart@willster.(none) +4 -2
    Add extra failure codes for buffer allocation failure in backup

ChangeSet@1.2303.1.9, 2006-10-18 13:45:41+08:00, Justin.He@qa3-104.qa.cn.tlan +2 -0
  Bug#19454: Some values of MaxNoOfTriggers can stop a server
  
  correct segment fault in setSize(), 
  and improve the error message with displaying the specific parameter's name if malloc fail

  storage/ndb/src/kernel/blocks/dbtup/DbtupGen.cpp@1.29.1.1, 2006-10-18 13:45:34+08:00, Justin.He@qa3-104.qa.cn.tlan +1 -1
    add an argument refer to the ID of a parameter which will be malloced

  storage/ndb/src/kernel/vm/ArrayPool.hpp@1.13, 2006-10-18 13:45:34+08:00, Justin.He@qa3-104.qa.cn.tlan +23 -6
    in setSize(), correct the segment default due to overflow of two 32-bit interger's multiply

ChangeSet@1.2303.1.8, 2006-10-18 11:06:35+08:00, Justin.He@qa3-104.qa.cn.tlan +5 -0
  add a new mgmapi ndb_mgm_get_db_parameter_info, which retrieve parameter's name 

  storage/ndb/include/mgmapi/mgmapi.h@1.58, 2006-10-18 11:06:28+08:00, Justin.He@qa3-104.qa.cn.tlan +8 -0
    add a new function declaration

  storage/ndb/src/mgmapi/Makefile.am@1.16, 2006-10-18 11:06:28+08:00, Justin.He@qa3-104.qa.cn.tlan +1 -1
    add a link of a new file ParamInfo.cpp which locate in mgmsrv dir

  storage/ndb/src/mgmapi/mgmapi_configuration.cpp@1.5, 2006-10-18 11:06:28+08:00, Justin.He@qa3-104.qa.cn.tlan +38 -0
    add a new mgmapi function ndb_mgm_get_db_parameter_info

  storage/ndb/src/mgmsrv/ParamInfo.cpp@1.1, 2006-10-18 11:06:28+08:00, Justin.He@qa3-104.qa.cn.tlan +2113 -0
    New BitKeeper file ``storage/ndb/src/mgmsrv/ParamInfo.cpp''
    initialization information of all parameters, this copy from mgmsrv/ConfigInfo.cpp

  storage/ndb/src/mgmsrv/ParamInfo.cpp@1.0, 2006-10-18 11:06:28+08:00, Justin.He@qa3-104.qa.cn.tlan +0 -0

  storage/ndb/src/mgmsrv/ParamInfo.hpp@1.1, 2006-10-18 11:06:28+08:00, Justin.He@qa3-104.qa.cn.tlan +44 -0
    New BitKeeper file ``storage/ndb/src/mgmsrv/ParamInfo.hpp''

  storage/ndb/src/mgmsrv/ParamInfo.hpp@1.0, 2006-10-18 11:06:28+08:00, Justin.He@qa3-104.qa.cn.tlan +0 -0

ChangeSet@1.2303.14.4, 2006-10-17 16:22:44-04:00, cmiller@zippy.cornsilk.net +2 -0
  Merge fixes.

  mysql-test/r/func_time.result@1.84, 2006-10-17 16:22:42-04:00, cmiller@zippy.cornsilk.net +1 -25
    One update from errmsg.txt and removal of /two/ duplicate results.

  mysql-test/t/func_time.test@1.69, 2006-10-17 16:22:42-04:00, cmiller@zippy.cornsilk.net +0 -18
    Removed duplicate test.

ChangeSet@1.1810.2249.1, 2006-10-18 00:14:14+04:00, evgen@sunlight.local +1 -0
  sql_rename.cc:
    Cleanup of fix for bug#14959.

  sql/sql_rename.cc@1.31.1.3, 2006-10-18 00:13:45+04:00, evgen@sunlight.local +1 -1
    Cleanup of fix for bug#14959.

ChangeSet@1.2273.157.4, 2006-10-17 12:15:14-06:00, tsmith@siva.hindu.god +2 -0
  Update ps and show_check results to account for new -master.opt settings.

  mysql-test/r/ps.result@1.81.1.1, 2006-10-17 12:15:11-06:00, tsmith@siva.hindu.god +23 -8
    Update test results to account for new ps-master.opt settings

  mysql-test/r/show_check.result@1.105, 2006-10-17 12:15:11-06:00, tsmith@siva.hindu.god +20 -14
    Update test results to account for new show_check-master.opt settings

ChangeSet@1.1810.2139.21, 2006-10-17 19:12:34+02:00, tsmith@mysql.com +2 -0
  mysql.cc, log.cc:
    WL #3516: MySQL Enterprise: implement Version Display Specification

  client/mysql.cc@1.199.16.1, 2006-10-17 19:11:16+02:00, tsmith@mysql.com +44 -10
    WL #3516: MySQL Enterprise: implement Version Display Specification

  sql/log.cc@1.158.12.2, 2006-10-17 19:11:16+02:00, tsmith@mysql.com +7 -4
    WL #3516: MySQL Enterprise: implement Version Display Specification

ChangeSet@1.1810.2169.20, 2006-10-17 19:22:13+03:00, gkodinov@macbook.gmz +2 -0
  rename of the new members introduced in the fix for bug 21798

  sql/sql_select.cc@1.312.109.2, 2006-10-17 19:22:06+03:00, gkodinov@macbook.gmz +8 -8
    rename of the new members introduced in the fix for bug 21798

  sql/sql_select.h@1.92.1.19, 2006-10-17 19:22:07+03:00, gkodinov@macbook.gmz +4 -4
    rename of the new members introduced in the fix for bug 21798

ChangeSet@1.1810.2247.1, 2006-10-17 11:06:11-04:00, cmiller@zippy.cornsilk.net +4 -0
  Fix previous bad patch for Bug#14262.
  
  Remove table engine qualification where it's unnecessary.

  mysql-test/r/view.result@1.138.26.1, 2006-10-17 11:06:08-04:00, cmiller@zippy.cornsilk.net +2 -2
    Remove requirement for innodb where not needed.  (Running this test alone
    raised warnings that it was using myisam.)

  mysql-test/t/view.test@1.126.24.1, 2006-10-17 11:06:08-04:00, cmiller@zippy.cornsilk.net +2 -2
    Remove requirement for innodb where not needed.  (Running this test alone
    raised warnings that it was using myisam.)

  sql/sql_parse.cc@1.426.113.1, 2006-10-17 11:06:08-04:00, cmiller@zippy.cornsilk.net +2 -0
    Fix previous bad re-patch.

  sql/sql_view.cc@1.78.14.4, 2006-10-17 11:06:08-04:00, cmiller@zippy.cornsilk.net +0 -1
    Fix previous bad re-patch.

ChangeSet@1.1810.2246.1, 2006-10-17 16:20:26+03:00, gkodinov@macbook.gmz +8 -0
  Bug#21798: memory leak during query execution with subquery in column
              list using a function
  When executing dependent subqueries they are re-inited and re-exec() for 
  each row of the outer context.
  The cause for the bug is that during subquery reinitialization/re-execution,
  the optimizer reallocates JOIN::join_tab, JOIN::table in make_simple_join()
  and the local variable in 'sortorder' in create_sort_index(), which is
  allocated by make_unireg_sortorder().
  Care must be taken not to allocate anything into the thread's memory pool
  while re-initializing query plan structures between subquery re-executions.
  All such items mush be cached and reused because the thread's memory pool
  is freed at the end of the whole query.
  Note that they must be cached and reused even for queries that are not 
  otherwise cacheable because otherwise it will grow the thread's memory 
  pool every time a cacheable query is re-executed. 
  We provide additional members to the JOIN structure to store references 
  to the items that need to be cached.

  mysql-test/r/subselect.result@1.134.10.1, 2006-10-17 16:20:16+03:00, gkodinov@macbook.gmz +26 -0
    Bug#21798: memory leak during query execution with subquery in column
                list using a function
     - test case

  mysql-test/t/subselect.test@1.126.1.1, 2006-10-17 16:20:16+03:00, gkodinov@macbook.gmz +26 -0
    Bug#21798: memory leak during query execution with subquery in column
                list using a function
     - test case

  sql/mysql_priv.h@1.290.61.2, 2006-10-17 16:20:17+03:00, gkodinov@macbook.gmz +2 -1
    Bug#21798: memory leak during query execution with subquery in column
                list using a function
     - cache the entities allocated in the threads memory pool by
       JOIN::exec ().

  sql/sql_delete.cc@1.144.15.1, 2006-10-17 16:20:18+03:00, gkodinov@macbook.gmz +1 -1
    Bug#21798: memory leak during query execution with subquery in column
                list using a function
     - cache the SORT_ORDER, TABLE * and JOIN_TAB allocated in the thread's 
       memory pool by JOIN::exec ().

  sql/sql_select.cc@1.312.108.1, 2006-10-17 16:20:18+03:00, gkodinov@macbook.gmz +32 -8
    Bug#21798: memory leak during query execution with subquery in column
                list using a function
     - cache the SORT_ORDER, TABLE * and JOIN_TAB allocated in the thread's 
       memory pool by JOIN::exec ().

  sql/sql_select.h@1.92.1.18, 2006-10-17 16:20:19+03:00, gkodinov@macbook.gmz +15 -0
    Bug#21798: memory leak during query execution with subquery in column
                list using a function
     - cache the SORT_ORDER, TABLE * and JOIN_TAB allocated in the thread's 
       memory pool by JOIN::exec ().

  sql/sql_table.cc@1.239.36.1, 2006-10-17 16:20:20+03:00, gkodinov@macbook.gmz +1 -1
    Bug#21798: memory leak during query execution with subquery in column
                list using a function
     - cache the SORT_ORDER, TABLE * and JOIN_TAB allocated in the thread's 
       memory pool by JOIN::exec ().

  sql/sql_update.cc@1.154.23.1, 2006-10-17 16:20:20+03:00, gkodinov@macbook.gmz +1 -1
    Bug#21798: memory leak during query execution with subquery in column
                list using a function
     - cache the SORT_ORDER, TABLE * and JOIN_TAB allocated in the thread's 
       memory pool by JOIN::exec ().

ChangeSet@1.1810.2169.18, 2006-10-17 12:06:06+03:00, gkodinov@macbook.gmz +1 -0
  merge changes becuase of the fix for bug 22367

  mysql-test/r/select.result@1.121.7.2, 2006-10-17 12:06:00+03:00, gkodinov@macbook.gmz +3 -3
    merge changes becuase of the fix for bug 22367

ChangeSet@1.1616.2725.48, 2006-10-17 10:31:06+02:00, msvensson@shellback.(none) +2 -0
  Remove warnings
  Set comment properly before calling mtr_report_test failed and report_failure_restart 

  mysql-test/lib/mtr_report.pl@1.11.2.6, 2006-10-17 10:31:04+02:00, msvensson@shellback.(none) +1 -6
    Remove warnings
    No need to check ndb installed ok here, when that is detected comment is set to indicate the problem 

  mysql-test/mysql-test-run.pl@1.8.9.59, 2006-10-17 10:31:04+02:00, msvensson@shellback.(none) +11 -14
    Remove warnings
    Set comment properly before calling mtr_report_test failed and report_failure_restart 

ChangeSet@1.1616.2725.47, 2006-10-17 08:10:51+02:00, msvensson@shellback.(none) +1 -0
  When calculating what features to use for _this_ test run, don't look at test that already are deterined to be skipped

  mysql-test/mysql-test-run.pl@1.8.9.58, 2006-10-17 08:10:49+02:00, msvensson@shellback.(none) +2 -0
    When calculating what features to use for _this_ test run, don't look at test that already are deterined to be skipped

ChangeSet@1.1810.2242.1, 2006-10-16 14:25:28-07:00, igor@rurik.mysql.com +7 -0
  Fixed bug #19579: at range analysis optimizer did not take into 
  account predicates that become sargable after reading const tables.
  In some cases this resulted in choosing non-optimal execution plans.
  Now info of such potentially saragable predicates is saved in
  an array and after reading const tables we check whether this
  predicates has become saragable.
  

  mysql-test/r/select.result@1.121.1.20, 2006-10-16 14:25:24-07:00, igor@rurik.mysql.com +49 -0
    Added a test case for bug #19579.

  mysql-test/t/select.test@1.102.1.13, 2006-10-16 14:25:24-07:00, igor@rurik.mysql.com +45 -0
    Added a test case for bug #19579.

  sql/item_cmpfunc.cc@1.187.11.1, 2006-10-16 14:25:24-07:00, igor@rurik.mysql.com +2 -0
    Fixed bug #19579: at range analysis optimizer did not take into 
    account predicates that become sargable after reading const tables.
    Added a counter of between predicates.
    

  sql/sql_base.cc@1.235.73.2, 2006-10-16 14:25:24-07:00, igor@rurik.mysql.com +1 -0
    Fixed bug #19579: at range analysis optimizer did not take into 
    account predicates that become sargable after reading const tables.
    Added a counter of between predicates.

  sql/sql_lex.cc@1.142.25.1, 2006-10-16 14:25:24-07:00, igor@rurik.mysql.com +1 -1
    Fixed bug #19579: at range analysis optimizer did not take into 
    account predicates that become sargable after reading const tables.
    Added a counter of between predicates.

  sql/sql_lex.h@1.175.24.1, 2006-10-16 14:25:24-07:00, igor@rurik.mysql.com +2 -1
    Fixed bug #19579: at range analysis optimizer did not take into 
    account predicates that become sargable after reading const tables.
    Added a counter of between predicates.

  sql/sql_select.cc@1.312.1.149, 2006-10-16 14:25:24-07:00, igor@rurik.mysql.com +138 -33
    Fixed bug #19579: at range analysis optimizer did not take into 
    account predicates that become sargable after reading const tables.
    Now info of such potentially saragable predicates is saved in
    an array and after reading const tables we check whether this
    predicates has become saragable.
    

ChangeSet@1.2303.6.2, 2006-10-16 22:42:03+05:00, bar@mysql.com +4 -0
  Bug#21370: View renaming lacks tablename_to_filename encoding
    Problem: renaming of FRM file and ARC files didn't use file name
    encoding, so RENAME TABLE for views failed for views having
    "tricky" characters in their names.
    Fix: adding build_table_filename() in missing places.

  mysql-test/r/view.result@1.182.3.1, 2006-10-16 22:41:56+05:00, bar@mysql.com +19 -0
    Adding test case

  mysql-test/t/view.test@1.165.3.2, 2006-10-16 22:41:57+05:00, bar@mysql.com +19 -0
    Adding test case

  sql/parse_file.cc@1.25, 2006-10-16 22:41:57+05:00, bar@mysql.com +12 -11
    Adding build_table_filename()

  sql/sql_view.cc@1.111, 2006-10-16 22:41:57+05:00, bar@mysql.com +19 -20
    Adding build_table_filename()

ChangeSet@1.2255.83.1, 2006-10-16 19:57:33+03:00, jani@ua141d10.elisa.omakaista.fi +22 -0
  Changed several char* to LEX_STRING*.

  BUILD/SETUP.sh@1.60.1.1, 2006-10-16 19:57:28+03:00, jani@ua141d10.elisa.omakaista.fi +1 -1
    Added check for CCACHE_DISABLE. If set, do not
    use ccache at all.

  BUILD/compile-pentium-gcov@1.17, 2006-10-16 19:57:28+03:00, jani@ua141d10.elisa.omakaista.fi +14 -5
    Moved CCACHE_DISABLE up before going into SETUP.sh.
    
    Added debug_extra_flags to extra_flags.

  mysql-test/r/create.result@1.125.1.1, 2006-10-16 19:57:28+03:00, jani@ua141d10.elisa.omakaista.fi +16 -0
    Added tests for incorrect database names.

  mysql-test/r/ctype_create.result@1.8, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +4 -0
    Added tests for incorrect alter database names.

  mysql-test/r/events.result@1.36.2.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +6 -0
    Added tests for incorrect database names.

  mysql-test/r/grant.result@1.56.2.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +2 -2
    Output changed to capital letters.

  mysql-test/t/alter_table.test@1.52, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +0 -1
    Removed extra empty line

  mysql-test/t/create.test@1.83.1.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +21 -0
    Added tests for incorrect database names.

  mysql-test/t/ctype_create.test@1.8, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +5 -0
    Added tests for incorrect name handling

  mysql-test/t/events.test@1.32.2.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +11 -0
    Added tests for incorrect database names.

  sql/item_timefunc.cc@1.129.4.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +5 -0
    Added dummy case to avoid compiler warning.

  sql/mysql_priv.h@1.429.2.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +1 -1
    Changed argument from char pointer to LEX_STRING pointer.

  sql/mysqld.cc@1.564.11.2, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +2 -1
    Added a missing component from struct.

  sql/sql_class.h@1.304.10.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +7 -2
    Added function LEX_STRING_make that sets the string and length.

  sql/sql_db.cc@1.138.1.4, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +24 -22
    Changed several char pointers to lex_strings.

  sql/sql_lex.cc@1.190.3.2, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +2 -1
    name is now LEX_STRING

  sql/sql_lex.h@1.234.5.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +2 -1
    Changed name to LEX_STRING.

  sql/sql_parse.cc@1.567.7.1, 2006-10-16 19:57:29+03:00, jani@ua141d10.elisa.omakaista.fi +212 -140
    Changed several char pointers to lex_strings.
    
    db_length needed a trick, because in old client protocol there
    was an extra char zero added to the string.
    
    check_db_name() now takes LEX_STRING pointer as an argument.
    
    Changed remove_escape() to take LEX_STRING pointer as an argument.
    
    Removed COM_CREATE_DB and COM_DROP_DB. These are obsolete.

  sql/sql_table.cc@1.359.7.1, 2006-10-16 19:57:30+03:00, jani@ua141d10.elisa.omakaista.fi +1 -1
    char* -> LEX_STRING*

  sql/sql_yacc.yy@1.484.14.1, 2006-10-16 19:57:30+03:00, jani@ua141d10.elisa.omakaista.fi +21 -17
    Changed char* -> LEX_STRING*

  sql/table.cc@1.239.10.1, 2006-10-16 19:57:30+03:00, jani@ua141d10.elisa.omakaista.fi +21 -21
    check_db_name() now takes LEX_STRING* as argument instead of char*.
    
    Optimized code a bit.

  tests/mysql_client_test.c@1.204.4.1, 2006-10-16 19:57:30+03:00, jani@ua141d10.elisa.omakaista.fi +31 -3
    Added test for (short) status.
    
    After defining out (ifdef) COM_DROP_DB and COM_CREATE_DB
    in mysqld.cc mysql_client_test needed to be informed that
    failing in recognizing these commands is not fatal error
    anymore.

ChangeSet@1.1810.2237.2, 2006-10-16 18:36:33+02:00, msvensson@neptunus.(none) +2 -0
  yassl build fixes for hpux and netware

  extra/yassl/include/yassl_int.hpp@1.11.1.3, 2006-10-16 18:36:31+02:00, msvensson@neptunus.(none) +7 -0
    Netware and HPUX need the _POSIX_THREADS define to be forced

  extra/yassl/taocrypt/include/hmac.hpp@1.6, 2006-10-16 18:36:31+02:00, msvensson@neptunus.(none) +5 -5
    Prefix with HMAC as we get symbol conflicts on HPUX

ChangeSet@1.1810.2241.1, 2006-10-16 19:30:19+03:00, gkodinov@macbook.gmz +4 -0
  Bug #22342: No results returned for query using max and group by
   When using index for group by and range access the server isolates    
   a set of ranges based on the conditions over the key parts of the
   index used. Then it uses only the ranges over the GROUP BY fields to
   jump from one group to another. Since the GROUP BY fields may form a
   prefix over the index, we may use only a prefix of the ranges produced
   by the range optimizer.
   Each range contains a notion on whether it includes its border values.
   The problem is that when using a range prefix, the last range is open
   because it assumes that there is a range on the next keypart. Thus when
   we use a prefix range as it is, it excludes all border values.
   The solution is when ignoring the suffix of the range conditions 
   (to jump over the GROUP BY prefix only) the server must change the 
   remaining intervals so they always contain their borders, e.g. 
   if the whole range was :
   (1,-inf) <= (<group_by_col>,<min_max_arg_col>) < (1, 3) we must make
   (1) <= (<group_by_col>) <= (1) because (a,b) < (c1,c2) means :
   a < c1 OR (a = c1 AND b < c2).

  mysql-test/r/group_min_max.result@1.23.1.3, 2006-10-16 19:30:12+03:00, gkodinov@macbook.gmz +20 -0
    Bug #22342: No results returned for query using max and group by
     - test case

  mysql-test/t/group_min_max.test@1.21.1.3, 2006-10-16 19:30:13+03:00, gkodinov@macbook.gmz +16 -0
    Bug #22342: No results returned for query using max and group by
     - test case

  sql/opt_range.cc@1.159.27.1, 2006-10-16 19:30:14+03:00, gkodinov@macbook.gmz +37 -0
    Bug #22342: No results returned for query using max and group by
     - open the intervals for prefix select when there are more conditions
       than used for the prefix search. 

  sql/opt_range.h@1.57.3.1, 2006-10-16 19:30:14+03:00, gkodinov@macbook.gmz +2 -0
    Bug #22342: No results returned for query using max and group by
     - open the intervals for prefix select when there are more conditions
       than used for the prefix search. 

ChangeSet@1.1810.2240.1, 2006-10-16 18:09:58+03:00, gkodinov@macbook.gmz +6 -0
  Bug #22367: Optimizer uses ref join type instead of eq_ref for simple join on 
               strings
  MySQL is setting the flag HA_END_SPACE_KEYS for all the keys that reference
  text or varchar columns with collation different than binary.
  This was done to handle correctly the situation where a lookup on such a key
  may return more than 1 row because of the presence of many rows that differ
  only by the amount of trailing space in the table's string column.
  Inserting such values however appears to violate the unique checks on 
  INSERT/UPDATE. Thus that flag must not be set as it will prevent the optimizer
  from choosing a faster access method.
  This fix removes the setting of the HA_END_SPACE_KEYS flag.

  include/my_base.h@1.70.4.1, 2006-10-16 18:09:49+03:00, gkodinov@macbook.gmz +6 -1
    Bug #22367: Optimizer uses ref join type instead of eq_ref for simple join on 
                 strings
     - disabled HA_END_SPACE_KEY as it's no longer needed

  mysql-test/r/func_str.result@1.110.1.11, 2006-10-16 18:09:50+03:00, gkodinov@macbook.gmz +2 -2
    Bug #22367: Optimizer uses ref join type instead of eq_ref for simple join on 
                 strings
     - fixed explain in an existing case

  mysql-test/r/merge.result@1.43.3.1, 2006-10-16 18:09:50+03:00, gkodinov@macbook.gmz +1 -1
    Bug #22367: Optimizer uses ref join type instead of eq_ref for simple join on 
                 strings
     - fixed explain in an existing case

  mysql-test/r/select.result@1.121.6.1, 2006-10-16 18:09:51+03:00, gkodinov@macbook.gmz +10 -0
    Bug #22367: Optimizer uses ref join type instead of eq_ref for simple join on 
                 strings
     - test case

  mysql-test/r/subselect.result@1.134.9.1, 2006-10-16 18:09:52+03:00, gkodinov@macbook.gmz +5 -5
    Bug #22367: Optimizer uses ref join type instead of eq_ref for simple join on 
                 strings
     - fixed explain in an existing case

  mysql-test/t/select.test@1.102.3.1, 2006-10-16 18:09:52+03:00, gkodinov@macbook.gmz +14 -0
    Bug #22367: Optimizer uses ref join type instead of eq_ref for simple join on 
                 strings
     - test case

ChangeSet@1.2307, 2006-10-17 01:02:12+10:00, stewart@willster.(none) +2 -0
  BUG#20839 Illegal error code: 155 returned downgrading from 5.1.12-> 5.1.11
  
  post-review fixes.
  
  Magnus suggested use of DYNAMIC_STRING instead of futzing with c strings.
  also making usage of TABLEs clearer in store_schema_partitions_record.

  client/mysqldump.c@1.255, 2006-10-17 01:02:06+10:00, stewart@willster.(none) +78 -86
    Use DYNAMIC_STRING in code for dumping tablespaces

  sql/sql_show.cc@1.360.1.4, 2006-10-17 01:02:07+10:00, stewart@willster.(none) +4 -4
    Make use of schema_table versus the table we're showing info about in
    store_schema_partitions_record clearer

ChangeSet@1.2306, 2006-10-17 00:15:58+10:00, stewart@willster.(none) +1 -0
  BUG#20839 Illegal error code: 155 returned downgrading from 5.1.12-> 5.1.11
  
  Post review fix:
  Magnus suggested making sure that new mysqldump still worked flawlessly
  with old servers.

  client/mysqldump.c@1.254, 2006-10-17 00:15:55+10:00, stewart@willster.(none) +17 -1
    Print informational comment about not dumping tablespaces if connecting
    to a server that doesn't have the I_S.FILES table

ChangeSet@1.2303.13.2, 2006-10-16 16:13:03+02:00, pekka@orca.ndb.mysql.com +12 -0
  ndb - replace explain 'rows' by '#' in ndb*.test - stats are not deterministic

  mysql-test/r/ndb_basic.result@1.46, 2006-10-16 16:11:07+02:00, pekka@orca.ndb.mysql.com +1 -1
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/r/ndb_blob.result@1.20, 2006-10-16 16:11:07+02:00, pekka@orca.ndb.mysql.com +7 -7
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/r/ndb_charset.result@1.10.1.1, 2006-10-16 16:11:07+02:00, pekka@orca.ndb.mysql.com +0 -6
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/r/ndb_condition_pushdown.result@1.30, 2006-10-16 16:11:07+02:00, pekka@orca.ndb.mysql.com +37 -37
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/r/ndb_dd_sql_features.result@1.4, 2006-10-16 16:11:07+02:00, pekka@orca.ndb.mysql.com +1 -1
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/r/ndb_subquery.result@1.4, 2006-10-16 16:11:07+02:00, pekka@orca.ndb.mysql.com +8 -8
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/t/ndb_basic.test@1.45, 2006-10-16 16:11:08+02:00, pekka@orca.ndb.mysql.com +1 -0
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/t/ndb_blob.test@1.19, 2006-10-16 16:11:08+02:00, pekka@orca.ndb.mysql.com +7 -0
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/t/ndb_charset.test@1.12, 2006-10-16 16:11:08+02:00, pekka@orca.ndb.mysql.com +6 -4
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/t/ndb_condition_pushdown.test@1.23, 2006-10-16 16:11:08+02:00, pekka@orca.ndb.mysql.com +34 -0
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/t/ndb_dd_sql_features.test@1.3, 2006-10-16 16:11:08+02:00, pekka@orca.ndb.mysql.com +1 -0
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

  mysql-test/t/ndb_subquery.test@1.6, 2006-10-16 16:11:08+02:00, pekka@orca.ndb.mysql.com +4 -0
    replace explain 'rows' by '#' since it depends usually on non-deterministic index stats or non-exact row count

ChangeSet@1.1810.2238.2, 2006-10-16 16:27:06+03:00, gkodinov@macbook.gmz +1 -0
  Merge update of the fix for bug 14019 in 5.0

  mysql-test/r/group_by.result@1.69.1.6, 2006-10-16 16:27:01+03:00, gkodinov@macbook.gmz +4 -0
    Merge update of the fix for bug 14019 in 5.0

ChangeSet@1.2303.11.5, 2006-10-16 14:20:05+02:00, mskold@mysql.com +1 -0
   Bug #21072  Duplicate key error in NDB references wrong key: Added new printout for duplicate key error when key is unknown

  mysql-test/r/rpl_row_basic_7ndb.result@1.4, 2006-10-16 14:19:43+02:00, mskold@mysql.com +2 -2
     Bug #21072  Duplicate key error in NDB references wrong key: Added new printout for duplicate key error when key is unknown

ChangeSet@1.2303.11.4, 2006-10-16 12:14:38+02:00, mskold@mysql.com +4 -0
   Bug #21072  Duplicate key error in NDB references wrong key: Added new printout for duplicate key error when key is unknown

  mysql-test/r/ndb_charset.result@1.13, 2006-10-16 12:12:45+02:00, mskold@mysql.com +4 -4
     Bug #21072  Duplicate key error in NDB references wrong key: Added new printout for duplicate key error when key is unknown

  mysql-test/r/ndb_index_unique.result@1.28, 2006-10-16 12:12:45+02:00, mskold@mysql.com +6 -6
     Bug #21072  Duplicate key error in NDB references wrong key: Added new printout for duplicate key error when key is unknown

  mysql-test/r/ndb_update.result@1.13, 2006-10-16 12:14:11+02:00, mskold@mysql.com +1 -1
     Bug #21072  Duplicate key error in NDB references wrong key: Added new printout for duplicate key error when key is unknown

  sql/handler.cc@1.273.2.2, 2006-10-16 12:12:44+02:00, mskold@mysql.com +20 -8
     Bug #21072  Duplicate key error in NDB references wrong key: Added new printout for duplicate key error when key is unknown

ChangeSet@1.1616.2812.1, 2006-10-16 13:10:25+03:00, gkodinov@macbook.gmz +5 -0
  BUG#14019 : group by converts literal string to column name
     When resolving unqualified name references MySQL was not
     checking what is the item type for the reference. Thus
     e.g a string literal item that has by convention a name
     equal to its string value will also work as a reference to 
     a SELECT list item or a table field.
     Fixed by allowing only Item_ref or Item_field to referenced by
     (unqualified) name.

  mysql-test/r/func_gconcat.result@1.27.1.21, 2006-10-16 13:10:18+03:00, gkodinov@macbook.gmz +0 -5
    Bug #14019: group by converts literal string to column name
     - removed undeterministic testcase : order by a constant 
       means no order.

  mysql-test/r/group_by.result@1.38.1.15, 2006-10-16 13:10:18+03:00, gkodinov@macbook.gmz +45 -0
    Bug #14019: group by converts literal string to column name
     - test case

  mysql-test/t/func_gconcat.test@1.23.3.1, 2006-10-16 13:10:19+03:00, gkodinov@macbook.gmz +0 -1
    Bug #14019: group by converts literal string to column name
     - removed undeterministic testcase : order by a constant 
       means no order.

  mysql-test/t/group_by.test@1.36.1.8, 2006-10-16 13:10:19+03:00, gkodinov@macbook.gmz +23 -0
    Bug #14019: group by converts literal string to column name
     - test case

  sql/sql_base.cc@1.145.48.1, 2006-10-16 13:10:20+03:00, gkodinov@macbook.gmz +9 -2
    Bug #14019: group by converts literal string to column name
     - resolve unqualified by name refs only for real references

ChangeSet@1.1810.2234.4, 2006-10-16 11:54:54+02:00, mskold@mysql.com +2 -0
  Bug #21072  Duplicate key error in NDB references wrong key: re-generated test results

  mysql-test/r/ndb_charset.result@1.5.1.4, 2006-10-16 11:54:38+02:00, mskold@mysql.com +2 -2
    Bug #21072  Duplicate key error in NDB references wrong key: re-generated test results

  mysql-test/r/ndb_index_unique.result@1.16.1.3, 2006-10-16 11:54:38+02:00, mskold@mysql.com +1 -1
    Bug #21072  Duplicate key error in NDB references wrong key: re-generated test results

ChangeSet@1.1810.1698.143, 2006-10-16 17:41:29+10:00, stewart@willster.(none) +2 -0
  BUG#19914 	SELECT COUNT(*) sometimes returns MAX_INT on cluster tables
  
  update federated for fix

  sql/ha_federated.cc@1.24.12.2, 2006-10-16 17:41:26+10:00, stewart@willster.(none) +3 -3
    update federated for ::info returning int

  sql/ha_federated.h@1.18.1.10, 2006-10-16 17:41:27+10:00, stewart@willster.(none) +1 -1
    update federated for ::info returning int

ChangeSet@1.2303.10.3, 2006-10-16 17:01:01+10:00, stewart@willster.(none) +2 -0
  BUG#21253 NdbApi.h should not include my_config.h

  config/ac-macros/ha_ndbcluster.m4@1.20, 2006-10-16 17:00:56+10:00, stewart@willster.(none) +13 -0
    re-introduce NDB_SIZEOF substitutions to prevent NdbApi depending on my_config
    which causes problems for autotools enabled ndbapi programs

  storage/ndb/include/ndb_types.h.in@1.18, 2006-10-16 17:00:56+10:00, stewart@willster.(none) +6 -8
    remove dependency on my_config.h that was causing problems for ndbapi programs
    using autoconf

ChangeSet@1.1616.2725.46, 2006-10-15 15:38:56+02:00, msvensson@shellback.(none) +1 -0
  Cleanup mtr_timer
  Add verbose printouts making it possible to see what happens.
  Make it an error if trying to stop a non existing timer
  Print warning if fork fails.

  mysql-test/lib/mtr_timer.pl@1.1.1.3, 2006-10-15 15:38:54+02:00, msvensson@shellback.(none) +14 -8
    Cleanup mtr_timer
    Add verbose printouts making it possible to see what happens.
    Make it an error if trying to stop a non existing timer
    Print warning if fork fails.

ChangeSet@1.1616.2811.6, 2006-10-14 17:14:03+02:00, msvensson@shellback.(none) +1 -0
  No need to continue in 'mtr_report_test_failed' after timeout detected, return immediately after

  mysql-test/lib/mtr_report.pl@1.11.2.5, 2006-10-14 17:14:01+02:00, msvensson@shellback.(none) +1 -0
    No need to continue in 'mtr_report_test_failed' after timeout detected, return immediately after

ChangeSet@1.1616.2811.5, 2006-10-14 17:09:06+02:00, msvensson@shellback.(none) +2 -0
  Use char as datatype for the byte that are read with my_fgetc, fixes problem with
  mysqltest.test on Solaris and Mac. write_file produced nice files with all zeroes.

  client/mysqltest.c@1.92.21.23, 2006-10-14 17:09:03+02:00, msvensson@shellback.(none) +1 -1
    Use char as datatype for the byte that are read with my_fgetc

  mysql-test/mysql-test-run.pl@1.8.9.57, 2006-10-14 17:09:04+02:00, msvensson@shellback.(none) +1 -1
    Fix typo, add missing $

ChangeSet@1.1616.2811.4, 2006-10-14 17:02:43+02:00, msvensson@shellback.(none) +1 -0
  Improving debugging support in 'read_line' function

  client/mysqltest.c@1.92.21.22, 2006-10-14 17:02:41+02:00, msvensson@shellback.(none) +18 -8
    Improving debugging support in 'read_line' function

ChangeSet@1.1616.2811.3, 2006-10-14 16:31:20+02:00, msvensson@shellback.(none) +1 -0
  Skip looking for mysql_client_test in 4.1 on windows as it's not built by default

  mysql-test/mysql-test-run.pl@1.8.9.56, 2006-10-14 16:31:18+02:00, msvensson@shellback.(none) +17 -8
    Skip looking for mysql_client_test in 4.1 on windows as it's not built by default

ChangeSet@1.2303.10.2, 2006-10-14 00:42:39+02:00, mmj@tiger.local +1 -0
  DictTabInfo.cpp:
    Fix for bug#23169 - memset param switching

  storage/ndb/src/common/debugger/signaldata/DictTabInfo.cpp@1.19, 2006-10-14 00:41:03+02:00, mmj@tiger.local +1 -1
    Fix for bug#23169 - memset param switching

ChangeSet@1.1616.2811.2, 2006-10-13 20:29:27+02:00, msvensson@shellback.(none) +1 -0
  Look for client bindirs client_release and client_debug before other directories.

  mysql-test/mysql-test-run.pl@1.8.9.55, 2006-10-13 20:29:24+02:00, msvensson@shellback.(none) +4 -3
    Look for client bindirs client_release and client_debug before other directories.

ChangeSet@1.1616.2811.1, 2006-10-13 20:22:56+02:00, msvensson@shellback.(none) +1 -0
  rpl_empty_master_crash need a master restart so that all log files are deleted

  mysql-test/t/rpl_empty_master_crash-master.opt@1.1, 2006-10-13 20:22:54+02:00, msvensson@shellback.(none) +1 -0
    New BitKeeper file ``mysql-test/t/rpl_empty_master_crash-master.opt''

  mysql-test/t/rpl_empty_master_crash-master.opt@1.0, 2006-10-13 20:22:54+02:00, msvensson@shellback.(none) +0 -0

ChangeSet@1.1810.2169.14, 2006-10-13 21:59:52+04:00, evgen@moonbone.local +5 -0
  Bug#14959: ALTER TABLE isn't able to rename a view
  
  The mysql_alter_table() was able to rename only a table.
  
  The view/table renaming code is moved from the function rename_tables 
  to the new function called do_rename().
  The mysql_alter_table() function calls it when it needs to rename a view.

  mysql-test/r/rename.result@1.12.1.1, 2006-10-13 21:51:04+04:00, evgen@moonbone.local +10 -0
    Added a test case for bug#14959: ALTER TABLE isn't able to rename a view

  mysql-test/t/rename.test@1.13, 2006-10-13 21:47:00+04:00, evgen@moonbone.local +13 -0
    Added a test case for bug#14959: ALTER TABLE isn't able to rename a view

  sql/mysql_priv.h@1.290.69.1, 2006-10-13 21:56:45+04:00, evgen@moonbone.local +3 -0
    Bug#14959: ALTER TABLE isn't able to rename a view
    Added the prototype of the do_rename() function.

  sql/sql_rename.cc@1.31.1.2, 2006-10-13 21:57:58+04:00, evgen@moonbone.local +123 -71
    Bug#14959: ALTER TABLE isn't able to rename a view
    The view/table renaming code is moved from the function rename_tables
    to the new function called do_rename().

  sql/sql_table.cc@1.239.35.1, 2006-10-13 21:58:16+04:00, evgen@moonbone.local +47 -1
    Bug#14959: ALTER TABLE isn't able to rename a view
    Added handling of a view rename to the mysql_alter_table() function.

ChangeSet@1.1810.2236.2, 2006-10-13 10:57:50-04:00, cmiller@zippy.cornsilk.net +2 -0
  Merge fix-up.

  sql/sql_view.cc@1.78.14.3, 2006-10-13 10:57:47-04:00, cmiller@zippy.cornsilk.net +1 -1
    Merge fix-up.

  sql/sql_view.cc@1.78.14.2, 2006-10-13 09:21:26-04:00, cmiller@zippy.cornsilk.net +13 -0
    Move conflicted code from sql_parse.cc .

  vio/viossl.c@1.34.3.1, 2006-10-13 09:21:26-04:00, cmiller@zippy.cornsilk.net +2 -2
    We prefer "0x%lx" to "%p".

ChangeSet@1.2303.7.2, 2006-10-13 19:36:19+05:00, holyfoot@mysql.com +1 -0
  merging

  mysql-test/r/type_enum.result@1.30, 2006-10-13 19:36:16+05:00, holyfoot@mysql.com +2 -2
    test result fixed

ChangeSet@1.1616.2798.27, 2006-10-13 19:05:54+05:00, ramil@mysql.com +3 -0
  Fix for bug #23254: COMPRESS(NULL) makes all futher COMPRESS() calls on same Item return NULL
  
  We don't set null_value to 0 in the Item_func_compress::val_str() for 
  not-NULL results.

  mysql-test/r/func_compress.result@1.16.2.1, 2006-10-13 19:05:52+05:00, ramil@mysql.com +10 -0
    Fix for bug #23254: COMPRESS(NULL) makes all futher COMPRESS() calls on same Item return NULL
      - test result.

  mysql-test/t/func_compress.test@1.10.1.3, 2006-10-13 19:05:52+05:00, ramil@mysql.com +13 -1
    Fix for bug #23254: COMPRESS(NULL) makes all futher COMPRESS() calls on same Item return NULL
      - test case.

  sql/item_strfunc.cc@1.196.6.19, 2006-10-13 19:05:52+05:00, ramil@mysql.com +1 -0
    Fix for bug #23254: COMPRESS(NULL) makes all futher COMPRESS() calls on same Item return NULL
      - set null_value.

ChangeSet@1.2273.154.1, 2006-10-13 17:26:46+04:00, petr@mysql.com +15 -0
  Fix for Bug #17544 "Cannot do atomic log rotate",
  Bug #21785 "Server crashes after rename of the log table" and
  Bug #21966 "Strange warnings on create like/repair of the log
              tables"
  
  According to the patch, from now on, one should use RENAME to
  perform a log table rotation (this should also be reflected in
  the manual).
  
  Here is a sample:
  
  use mysql;
  CREATE TABLE IF NOT EXISTS general_log2 LIKE general_log;
  RENAME TABLE general_log TO general_log_backup, general_log2 TO general_log;
  
  The rules for Rename of the log tables are following:
        IF   1. Log tables are enabled
        AND  2. Rename operates on the log table and nothing is being
                renamed to the log table.
        DO   3. Throw an error message.
        ELSE 4. Perform rename.
   
  The very RENAME query will go the the old (backup) table. This is
  consistent with the behavoiur we have with binlog ROTATE LOGS
  statement.
  
  Other problems, which are solved by the patch are:
  
  1) Now REPAIR of the log table is exclusive operation (as it should be), this
     also eliminates lock-related warnings. and
  2) CREATE LIKE TABLE now usese usual read lock on the source table rather
     then name lock, which is too restrictive. This way we get rid of another
     log table-related warning, which occured because of the above fact
     (as a side-effect, name lock resulted in a warning).

  mysql-test/r/log_tables.result@1.8.2.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +68 -0
    update result file

  mysql-test/t/log_tables.test@1.12.1.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +83 -0
    Add tests for the bugs

  sql/handler.cc@1.262.2.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +3 -2
    update comment

  sql/handler.h@1.235.2.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +5 -1
    update function to reflect changes in log tables
    locking logic.

  sql/lock.cc@1.98, 2006-10-13 17:26:40+04:00, petr@mysql.com +2 -1
    Now we allow locking of the log tables for "privileged" threads
    Privileged thread must explicitly close and lock log tables. This
    is required for admin operations such as REPAIR.

  sql/log.cc@1.223.3.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +153 -81
    Changes to the file:
    1) Add checks for table schema. It's more important now,
       as we allow rename of the log tables. Since we should
       check for schema when writing to a log table.
       E.g. if one created a table with one-only comlumn and
       renamed it to general_log, the server should cope with
       it.
    2) refactor LOGGER::flush(), so that we can now use the same
       machinery as we use in FLUSH LOGS in other statements:
       whenever we have to perform  a serious operation on the log
       tables, we have to
       (a) lock logger, which blocks other concurrent statements (such 
       as selects) (b) close logs. Then perform an
       exclusive operation, c) reenable logs and d) unlock logger.
    3) Add a function to check if a given table is a log table.
    4) Add support for "privileged" thread
    5) merge is_[general/slow]_log_table_enabled() into one function.
    6) Add new function: reopen _log_tables, which reopens the tables,
       which were enabled (after temporary close, required for admin
       operation)

  sql/log.h@1.13.1.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +41 -8
    1) add a new call close_n_lock_tables(). Now we use it instead of
       LOGGER::flush() in FLUSH LOGS implementation.
    2) add a prototype for the function to check if a given
       table is a log table;
    3) add privileged table flag to table logger
    4) merge is_[general/slow]_log_table_enabled()
       into one function.

  sql/mysql_priv.h@1.433.2.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +0 -4
    move log table defines to log.h

  sql/share/errmsg.txt@1.110.10.1, 2006-10-13 17:26:41+04:00, petr@mysql.com +2 -0
    Add a new error message for rename of the log tables

  sql/sql_delete.cc@1.193.1.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +8 -20
    use new function check_if_log_table() instead of direct strcmp

  sql/sql_rename.cc@1.38, 2006-10-13 17:26:40+04:00, petr@mysql.com +101 -1
    Traverse the list of tables in mysql_rename_tables
    to make sure that log tables are processed correctly
    (that is, according to the rules specified in the
    main CS comment)

  sql/sql_table.cc@1.359.6.1, 2006-10-13 17:26:40+04:00, petr@mysql.com +73 -37
    1) mysql_admin_table() should disable logs if it performs
       exclusive admin operation on a log table. This way we
       also eliminate warning on REPAIR of the log table.
    2) mysql_create_like_table should read-lock the source table
       instead getting name lock on it. Name lock is too restrictive
       in this case.

  sql/table.cc@1.239.9.1, 2006-10-13 17:26:41+04:00, petr@mysql.com +9 -10
    use new function instead of direct strcmp.
    change my_strcasecmp() -> strcmp(), when
    comparing system db and table names

  storage/csv/ha_tina.cc@1.57.3.1, 2006-10-13 17:26:41+04:00, petr@mysql.com +2 -2
    update function to reflect changes in log tables
    locking logic.

  storage/myisam/ha_myisam.cc@1.190.2.1, 2006-10-13 17:26:41+04:00, petr@mysql.com +4 -4
    update function to reflect changes in log tables
    locking logic.

ChangeSet@1.1810.2235.1, 2006-10-13 13:59:25+02:00, pekka@orca.ndb.mysql.com +5 -0
  ndb - tux scan: use lock pool for better perf and mem usage

  ndb/src/kernel/blocks/dbtux/Dbtux.hpp@1.39.4.1, 2006-10-13 13:57:27+02:00, pekka@orca.ndb.mysql.com +22 -17
    use pool of lock ops (like tupscan) instead of array of 992

  ndb/src/kernel/blocks/dbtux/DbtuxDebug.cpp@1.20.2.1, 2006-10-13 13:57:27+02:00, pekka@orca.ndb.mysql.com +11 -5
    use pool of lock ops (like tupscan) instead of array of 992

  ndb/src/kernel/blocks/dbtux/DbtuxGen.cpp@1.18.3.1, 2006-10-13 13:57:27+02:00, pekka@orca.ndb.mysql.com +4 -0
    use pool of lock ops (like tupscan) instead of array of 992

  ndb/src/kernel/blocks/dbtux/DbtuxScan.cpp@1.27.2.1, 2006-10-13 13:57:27+02:00, pekka@orca.ndb.mysql.com +70 -47
    use pool of lock ops (like tupscan) instead of array of 992

  ndb/src/kernel/vm/DLFifoList.hpp@1.3.2.1, 2006-10-13 13:58:06+02:00, pekka@orca.ndb.mysql.com +2 -0
    add Head::isEmpty

ChangeSet@1.2301.1.6, 2006-10-13 13:54:47+02:00, jonas@perch.ndb.mysql.com +1 -0
  fix merge problem

  storage/ndb/src/kernel/blocks/dbtup/DbtupGen.cpp@1.31, 2006-10-13 13:54:45+02:00, jonas@perch.ndb.mysql.com +2 -2
    fix merge problem

ChangeSet@1.1810.2124.15, 2006-10-13 12:09:41+02:00, jonas@perch.ndb.mysql.com +4 -0
  ndb - bug#23203
    1) Handle not started nodes in dump 1000 (check for division by 0)
    2) Make sure to init variables in constructor

  ndb/src/common/debugger/EventLogger.cpp@1.21.5.1, 2006-10-13 12:09:39+02:00, jonas@perch.ndb.mysql.com +2 -2
    Handle not started nodes

  ndb/src/kernel/blocks/dbacc/DbaccInit.cpp@1.12.4.1, 2006-10-13 12:09:39+02:00, jonas@perch.ndb.mysql.com +1 -0
    Init variables in constructor

  ndb/src/kernel/blocks/dbacc/DbaccMain.cpp@1.49.10.1, 2006-10-13 12:09:39+02:00, jonas@perch.ndb.mysql.com +1 -1
    Handle not started nodes

  ndb/src/kernel/blocks/dbtup/DbtupGen.cpp@1.15.5.1, 2006-10-13 12:09:39+02:00, jonas@perch.ndb.mysql.com +2 -1
    Init variables in constructor
    Handle not started nodes

ChangeSet@1.1616.2725.43, 2006-10-13 11:53:19+02:00, msvensson@shellback.(none) +1 -0
  Optimize restarts by using --force-restart option

  mysql-test/t/rpl_dual_pos_advance-master.opt@1.3, 2006-10-13 11:53:16+02:00, msvensson@shellback.(none) +1 -1
    Optimize restarts by using --force-restart option

ChangeSet@1.1616.2725.42, 2006-10-13 11:38:32+02:00, msvensson@shellback.(none) +1 -0
  Use 'my_strnncoll_simple' instead of 'strncasecmp'

  client/mysqltest.c@1.92.21.21, 2006-10-13 11:38:29+02:00, msvensson@shellback.(none) +4 -2
    Use 'my_strnncoll_simple' instead of 'strncasecmp'

ChangeSet@1.1616.2725.41, 2006-10-13 11:05:46+02:00, msvensson@shellback.(none) +1 -0
  Improve the function that parses test files looking for what features it uses
  Now also detects "source nnnn;" command, previous version only detected
  "--source"

  mysql-test/lib/mtr_cases.pl@1.6.2.10, 2006-10-13 11:05:44+02:00, msvensson@shellback.(none) +9 -4
    Improve the function that parses test files looking for what features it uses
    Now also detects "source nnnn;" command, previous version only detected
    "--source"

ChangeSet@1.1616.2725.40, 2006-10-13 10:41:40+02:00, msvensson@shellback.(none) +1 -0
  Improve function that finds the reason why test was skipped, the old version only looked at the ast line, but there might be some additional debug info there so it's better to scan the whole file. 
  There should be only one line that says "reason: <reason>"

  mysql-test/mysql-test-run.pl@1.8.9.54, 2006-10-13 10:41:37+02:00, msvensson@shellback.(none) +28 -4
    Improve function that finds the reason why test was skipped, the old version only looked at the ast line, but there might be some additional debug info there so it's better to scan the whole file. 
    There should be only one line that says "reason: <reason>"

ChangeSet@1.1616.2725.39, 2006-10-13 08:48:47+02:00, msvensson@shellback.(none) +2 -0
  Add missing semicolon in test file

  mysql-test/r/csv.result@1.3.1.1, 2006-10-13 08:48:45+02:00, msvensson@shellback.(none) +1 -2
    Update result after add of missing semicolon

  mysql-test/t/csv.test@1.4.1.1, 2006-10-13 08:48:45+02:00, msvensson@shellback.(none) +1 -1
    Add missing semicolon in test file

ChangeSet@1.2303.1.7, 2006-10-13 12:48:05+08:00, dli@dev3-76.dev.cn.tlan +6 -0
  ndb - fixed for BUG#15021, binlog_index table become inconsistent if errors during purge of binlogs.
  if EMFILE error occured while purging binary logs, stop purging logs and report error message to user.

  mysys/my_open.c@1.30, 2006-10-13 12:48:01+08:00, dli@dev3-76.dev.cn.tlan +10 -2
    report EMFILE error when opening file failed.

  sql/log.cc@1.237.3.1, 2006-10-13 12:48:01+08:00, dli@dev3-76.dev.cn.tlan +12 -0
    report EMFILE error when purging logs, and stop purging logs when EMFILE error occured.

  sql/log.h@1.17, 2006-10-13 12:48:01+08:00, dli@dev3-76.dev.cn.tlan +2 -0
    added LOG_INFO_EMFILE error number.

  sql/share/errmsg.txt@1.130.1.1, 2006-10-13 12:48:02+08:00, dli@dev3-76.dev.cn.tlan +2 -1
    added EMFILE error message for purging binary logs.

  sql/sql_repl.cc@1.156, 2006-10-13 12:48:02+08:00, dli@dev3-76.dev.cn.tlan +1 -0
    added EMFILE error message.

  sql/table.cc@1.243.1.1, 2006-10-13 12:48:02+08:00, dli@dev3-76.dev.cn.tlan +11 -0
    report EMFILE error.

ChangeSet@1.1810.2207.3, 2006-10-12 17:10:34-06:00, tsmith@siva.hindu.god +9 -0
  Bug #19764:  SHOW commands end up in the slow log as table scans
  
  Do not consider SHOW commands slow queries, just because they don't use proper indexes.
  
  This bug fix is not needed in 5.1, and the code changes will be null merged.  However, the test cases will be propogated up to 5.1.

  mysql-test/r/ps.result@1.56.6.1, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +17 -0
    Add test case for bug 19764

  mysql-test/r/show_check.result@1.75.1.6, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +15 -0
    Add test case for bug 19764

  mysql-test/r/union.result@1.80.1.7, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +4 -4
    Adjust test case results based on bug #19764 changes

  mysql-test/t/ps-master.opt@1.1, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +1 -0
    Add log-slow-queries and --log-queries-not-using indexes, to test bug #19764

  mysql-test/t/ps-master.opt@1.0, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +0 -0

  mysql-test/t/ps.test@1.56.7.1, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +14 -0
    Add test case for bug 19764

  mysql-test/t/show_check-master.opt@1.3, 2006-10-12 13:48:09-06:00, tsmith@siva.hindu.god +0 -0
    Rename: BitKeeper/deleted/.del-show_check-master.opt -> mysql-test/t/show_check-master.opt

  mysql-test/t/show_check.test@1.54.1.7, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +12 -0
    Add test case for bug 19764

  sql/sql_parse.cc@1.426.109.3, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +4 -2
    Do not log SHOW commands as slow queries just because they don't use indexes.

  sql/sql_prepare.cc@1.142.18.1, 2006-10-12 17:10:30-06:00, tsmith@siva.hindu.god +6 -0
    Save stmt_backup.lex->orig_sql_command for use in log_slow_statement()

ChangeSet@1.2273.150.2, 2006-10-12 17:51:56-04:00, cmiller@zippy.cornsilk.net +3 -0
  Additional patch for 5.1 commit for Bug#14262.

  sql/sp.cc@1.128, 2006-10-12 17:51:52-04:00, cmiller@zippy.cornsilk.net +4 -4
    Update binlog-writing scheme to 5.1 model.

  sql/sql_acl.cc@1.218.2.2, 2006-10-12 17:51:52-04:00, cmiller@zippy.cornsilk.net +14 -14
    Update binlog-writing scheme to 5.1 model.

  sql/sql_trigger.cc@1.71, 2006-10-12 17:51:52-04:00, cmiller@zippy.cornsilk.net +2 -3
    Update binlog-writing scheme to 5.1 model.

ChangeSet@1.1616.2725.38, 2006-10-12 20:52:53+02:00, msvensson@shellback.(none) +1 -0
  Skip looking for ndbapi-examples in 4.1, not part of dist

  mysql-test/mysql-test-run.pl@1.8.9.53, 2006-10-12 20:52:51+02:00, msvensson@shellback.(none) +13 -7
    Skip looking for ndbapi-examples in 4.1, not part of dist

ChangeSet@1.1616.2725.37, 2006-10-12 20:15:56+02:00, msvensson@shellback.(none) +2 -0
  Add ATTRIBUTE_FORMAT specifier to _db_doprnt, which is used by DBUG_PRINT
  This will hopefully avoiid annoying crashes when running with --debug
  Fix warnings  from the above in mysqltest.c

  client/mysqltest.c@1.92.21.20, 2006-10-12 20:15:54+02:00, msvensson@shellback.(none) +3 -5
    Fix format specifier warnings in mysqltest.c

  include/my_dbug.h@1.10.1.2, 2006-10-12 20:15:54+02:00, msvensson@shellback.(none) +2 -1
    Add ATTRIBUTE_FORMAT specifier to _db_doprnt, which is used by DBUG_PRINT
    This will hopefully avoiid annoying crashes when running with --debug

ChangeSet@1.1810.2078.55, 2006-10-12 20:02:17+02:00, msvensson@shellback.(none) +1 -0
  Add ATTRIBUTE_FORMAT for _db_doprnt, it will catch problems
  with DBUG_PRINT format specifiers

  include/my_dbug.h@1.16.2.3, 2006-10-12 20:02:13+02:00, msvensson@shellback.(none) +2 -1
    Add ATTRIBUTE_FORMAT for _db_doprnt, it will catch problems with DBUG_PRINT format specifiers

ChangeSet@1.1810.2124.14, 2006-10-12 18:55:22+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - missing if for bug#21941
    note this does not happen in 5.0, but i'm committing it here to keep code same between 5.0 and 5.1

  ndb/src/ndbapi/NdbScanOperation.cpp@1.66.17.1, 2006-10-12 18:55:19+02:00, jonas@perch.ndb.mysql.com +2 -2
    missing if for bug#21941

ChangeSet@1.1810.2078.54, 2006-10-12 17:55:06+02:00, msvensson@shellback.(none) +1 -0
  Use autorun.sh from BUILD/ instead of netware specific version

  netware/BUILD/compile-netware-END@1.7.2.2, 2006-10-12 17:55:02+02:00, msvensson@shellback.(none) +3 -3
    Use autorun.sh from BUILD/ instead of netware specific version

ChangeSet@1.1810.2214.9, 2006-10-12 19:36:43+04:00, kroki@moonlight.intranet +1 -0
  Fix after manual merge.

  mysql-test/t/sp-error.test@1.100.4.2, 2006-10-12 19:36:40+04:00, kroki@moonlight.intranet +21 -22
    Move test for bug#20953 to the end of file.

ChangeSet@1.2273.142.6, 2006-10-12 18:30:59+04:00, kroki@moonlight.intranet +2 -0
  Fix after manual merge.

  mysql-test/r/sp-error.result@1.117, 2006-10-12 18:30:57+04:00, kroki@moonlight.intranet +4 -4
    After merge fix.

  mysql-test/t/sp-error.test@1.112.1.2, 2006-10-12 18:30:57+04:00, kroki@moonlight.intranet +30 -27
    Fix delimiter restoration.

ChangeSet@1.1616.2798.26, 2006-10-12 16:17:09+02:00, msvensson@shellback.(none) +1 -0
  Add missing semicolon

  mysql-test/mysql-test-run.pl@1.8.9.52, 2006-10-12 16:17:07+02:00, msvensson@shellback.(none) +1 -1
    Add missing semicolon

ChangeSet@1.1810.2231.1, 2006-10-12 18:02:57+04:00, kroki@moonlight.intranet +8 -0
  BUG#20953: create proc with a create view that uses local vars/params
             should fail to create
  
  The problem was that this type of errors was checked during view
  creation, which doesn't happen when CREATE VIEW is a statement of
  a created stored routine.
  
  The solution is to perform the checks at parse time.  The idea of the
  fix is that the parser checks if a construction just parsed is allowed
  in current circumstances by testing certain flags, and this flags are
  reset for VIEWs.
  
  The side effect of this change is that if the user already have
  such bogus routines, it will now get a error when trying to do
  
    SHOW CREATE PROCEDURE proc;
  
  (and some other) and when trying to execute such routine he will get
  
    ERROR 1457 (HY000): Failed to load routine test.p5. The table mysql.proc is missing, corrupt, or contains bad data (internal code -6)
  
  However there should be very few such users (if any), and they may
  (and should) drop these bogus routines.

  mysql-test/r/sp-error.result@1.102.3.1, 2006-10-12 18:02:54+04:00, kroki@moonlight.intranet +24 -0
    Add result for bug#20953: create proc with a create view that uses
    local vars/params should fail to create.

  mysql-test/r/view.result@1.138.25.1, 2006-10-12 18:02:54+04:00, kroki@moonlight.intranet +5 -5
    Update results.

  mysql-test/t/sp-error.test@1.100.3.1, 2006-10-12 18:02:54+04:00, kroki@moonlight.intranet +42 -0
    Add test case for bug#20953: create proc with a create view that uses
    local vars/params should fail to create.

  mysql-test/t/view.test@1.126.23.1, 2006-10-12 18:02:54+04:00, kroki@moonlight.intranet +6 -14
    Add second test for variable in a view.
    Remove SP variable in a view test, as it tests wrong behaviour.
    Add test for derived table in a view.

  sql/sql_lex.cc@1.142.23.1, 2006-10-12 18:02:54+04:00, kroki@moonlight.intranet +0 -1
    Remove LEX::variables_used.

  sql/sql_lex.h@1.175.22.1, 2006-10-12 18:02:54+04:00, kroki@moonlight.intranet +20 -1
    Remove LEX::variables_used and add st_parsing_options structure and
    LEX::parsing_options member.

  sql/sql_view.cc@1.78.13.1, 2006-10-12 18:02:55+04:00, kroki@moonlight.intranet +3 -19
    Move some error checking to sql/sql_yacc.yy.

  sql/sql_yacc.yy@1.371.85.1, 2006-10-12 18:02:55+04:00, kroki@moonlight.intranet +104 -35
    Check for disallowed syntax in a CREATE VIEW at parse time to rise a
    error when it is used inside CREATE PROCEDURE and CREATE FUNCTION, as
    well as by itself.

ChangeSet@1.1810.2078.51, 2006-10-12 14:14:54+02:00, msvensson@shellback.(none) +3 -0
  Make all compile-netware-* scripts executable

  netware/BUILD/compile-netware-max@1.2.1.1, 2006-10-12 14:13:16+02:00, msvensson@shellback.(none) +0 -0
    Change mode to -rwxrwxr-x

  netware/BUILD/compile-netware-max-debug@1.2.1.1, 2006-10-12 14:13:18+02:00, msvensson@shellback.(none) +0 -0
    Change mode to -rwxrwxr-x

  netware/BUILD/compile-netware-src@1.3, 2006-10-12 14:13:47+02:00, msvensson@shellback.(none) +0 -0
    Change mode to -rwxrwxr-x

ChangeSet@1.1616.2769.7, 2006-10-12 14:02:48+02:00, jonas@perch.ndb.mysql.com +2 -0
  ndb - bug#23210
    Fix race-condition between COPY_GCIREQ (GCP) and lcpSetActiveStatusEnd
    Solution is _not_ to copy sysfileData from COPY_GCIREQ from "self"

  ndb/src/kernel/blocks/ERROR_codes.txt@1.8.2.3, 2006-10-12 14:02:47+02:00, jonas@perch.ndb.mysql.com +3 -1
    Add error insert for dealying of copy sysfileData

  ndb/src/kernel/blocks/dbdih/DbdihMain.cpp@1.14.5.6, 2006-10-12 14:02:47+02:00, jonas@perch.ndb.mysql.com +32 -6
    1) Add error insert for delaying of sysfileData
    2) Change to that master is _not_ copying sysfileData from COPY_GCIREQ
       as it might be updating it while COPY_GCIREQ is "in the fly"

ChangeSet@1.1616.2798.25, 2006-10-12 13:50:50+02:00, msvensson@shellback.(none) +1 -0
  Move the reconnect variable to beginning of function
  Fix warning about value from "*ptr++" not being used. Changed it to ptr++ 

  client/mysqltest.c@1.92.21.19, 2006-10-12 13:50:48+02:00, msvensson@shellback.(none) +3 -3
    Move the reconnect variable to beginning of function
    Fix warning about value from "*ptr++" not being used. Changed it to ptr++ 

ChangeSet@1.1616.2798.24, 2006-10-12 13:49:12+02:00, msvensson@shellback.(none) +1 -0
  Add win paths for mysql_client_test

  mysql-test/mysql-test-run.pl@1.8.9.51, 2006-10-12 13:49:10+02:00, msvensson@shellback.(none) +4 -3
    Add win paths for mysql_client_test

ChangeSet@1.2273.98.42, 2006-10-12 13:31:41+02:00, msvensson@shellback.(none) +1 -0
  5.1 should use libc-2006 by default

  netware/BUILD/mwenv@1.19, 2006-10-12 13:31:37+02:00, msvensson@shellback.(none) +2 -2
    5.1 should use libc-2006 by default

ChangeSet@1.1810.2078.49, 2006-10-12 13:28:18+02:00, msvensson@shellback.(none) +1 -0
  Use libc-2003 if available else default to libc

  netware/BUILD/mwenv@1.12.2.5, 2006-10-12 13:28:15+02:00, msvensson@shellback.(none) +13 -2
    Use libc-2003 if available else default to libc

ChangeSet@1.1616.2798.23, 2006-10-12 12:19:23+02:00, msvensson@shellback.(none) +1 -0
  Look for mysql_client_test in $path_client_bindir

  mysql-test/mysql-test-run.pl@1.8.9.50, 2006-10-12 12:19:20+02:00, msvensson@shellback.(none) +1 -1
    Look for mysql_client_test in $path_client_bindir

ChangeSet@1.2273.98.39, 2006-10-12 12:14:50+02:00, msvensson@shellback.(none) +2 -0
  Only one switch for ssl(--with-ssl) in 5.1

  netware/BUILD/compile-netware-max@1.3, 2006-10-12 12:14:46+02:00, msvensson@shellback.(none) +1 -1
    Only one switch for ssl(--with-ssl) in 5.1

  netware/BUILD/compile-netware-max-debug@1.3, 2006-10-12 12:14:46+02:00, msvensson@shellback.(none) +1 -1
    Only one switch for ssl(--with-ssl) in 5.1

ChangeSet@1.1810.2078.47, 2006-10-12 12:11:23+02:00, msvensson@shellback.(none) +2 -0
  Switch to use yaSSL instead of OpenSSL on Netware

  netware/BUILD/compile-netware-max@1.2, 2006-10-12 12:11:16+02:00, msvensson@shellback.(none) +1 -1
    Switch to use yaSSL instead of OpenSSL on Netware

  netware/BUILD/compile-netware-max-debug@1.2, 2006-10-12 12:11:16+02:00, msvensson@shellback.(none) +1 -1
    Switch to use yaSSL instead of OpenSSL on Netware

ChangeSet@1.1616.2798.22, 2006-10-12 11:29:13+02:00, msvensson@shellback.(none) +2 -0
  Fix unhandled exception in mysql-test-run.pl, creating a dir that already exist

  mysql-test/lib/mtr_process.pl@1.15.3.3, 2006-10-12 11:29:11+02:00, msvensson@shellback.(none) +0 -13
    Remove junk code/comments
    Moved the creation of var/log out of function mtr_kill_leftovers

  mysql-test/mysql-test-run.pl@1.8.9.49, 2006-10-12 11:29:11+02:00, msvensson@shellback.(none) +12 -5
    Rename 'kill_running_server' to more appropriate name 'kill_running_servers'
    If no var/log dir exists when mtr_kill_leftovers is started it should be created
    Remove "unless" syntax, too perlish
    Fix typo

ChangeSet@1.1616.2798.21, 2006-10-12 10:49:59+02:00, msvensson@shellback.(none) +1 -0
  Only print cur_file->filename if cur_file->file is set
  MOve DBUG_ASSERT(result_file_name) to after DBUG_ENTER
  Change type of "reconnect" variable from int to my_bool, reconnect didn't work on Solaris without that

  client/mysqltest.c@1.92.21.18, 2006-10-12 10:49:56+02:00, msvensson@shellback.(none) +8 -3
    Only print cur_file->filename if cur_file->file is set
    MOve DBUG_ASSERT(result_file_name) to after DBUG_ENTER
    Change type of "reconnect" variable from int to my_bool, reconnect didn't work on Solaris without that

ChangeSet@1.1616.2798.20, 2006-10-12 10:27:44+02:00, msvensson@shellback.(none) +1 -0
  Add DBUG_ASSERT to check that mysql is not null when mysql_reconnect is called
  Add DBUG_PRINT to show the value of mysql->reconnect

  sql-common/client.c@1.46.1.48, 2006-10-12 10:27:42+02:00, msvensson@shellback.(none) +2 -0
    Add DBUG_ASSERT to check that mysql is not null when mysql_reconnect is called
    Add DBUG_PRINT to show the value of mysql->reconnect

ChangeSet@1.1810.2228.2, 2006-10-12 11:21:12+04:00, kaa@polly.local +2 -0
  5.0-specific fixes when merging the fix for bug #11655 and bug #20927 from 4.1

  mysql-test/r/func_time.result@1.47.13.2, 2006-10-12 11:21:10+04:00, kaa@polly.local +1 -1
    Fixed func_time test when merging the fix for bug #11655 and bug #20927 to 5.0

  sql/item_timefunc.cc@1.100.11.2, 2006-10-12 11:21:10+04:00, kaa@polly.local +6 -4
    Fixed compilation when merging the fix for bug #11655 and bug #20927 to 5.0

ChangeSet@1.1810.2207.2, 2006-10-11 23:35:52-06:00, tsmith@siva.hindu.god +7 -0
  Revert patch for bug #19764, which did not work with prepared statements.

  mysql-test/r/show_check.result@1.75.1.5, 2006-10-11 23:35:49-06:00, tsmith@siva.hindu.god +1 -16
    Revert patch for bug #19764, which did not work with prepared statements.

  BitKeeper/deleted/.del-show_check-master.opt@1.2, 2006-10-11 23:33:24-06:00, tsmith@siva.hindu.god +0 -0
    Delete: mysql-test/t/show_check-master.opt

  mysql-test/t/show_check.test@1.54.1.6, 2006-10-11 23:35:49-06:00, tsmith@siva.hindu.god +1 -13
    Revert patch for bug #19764, which did not work with prepared statements.

  sql/sql_lex.cc@1.142.1.61, 2006-10-11 23:35:49-06:00, tsmith@siva.hindu.god +0 -1
    Revert patch for bug #19764, which did not work with prepared statements.

  sql/sql_lex.h@1.175.20.5, 2006-10-11 23:35:49-06:00, tsmith@siva.hindu.god +0 -7
    Revert patch for bug #19764, which did not work with prepared statements.

  sql/sql_parse.cc@1.426.109.2, 2006-10-11 23:35:49-06:00, tsmith@siva.hindu.god +3 -3
    Revert patch for bug #19764, which did not work with prepared statements.

  sql/sql_yacc.yy@1.371.1.122, 2006-10-11 23:35:49-06:00, tsmith@siva.hindu.god +0 -1
    Revert patch for bug #19764, which did not work with prepared statements.

ChangeSet@1.2298.2.1, 2006-10-12 10:31:27+08:00, dli@dev3-76.dev.cn.tlan +3 -0
  fixed for BUG#21519, 'MySQLD Err msg "Management server closed connection" needs date & time stamp'.
  added date & time stamp for the messages that will be printed to the mysqld message file.

  storage/ndb/src/common/transporter/OSE_Receiver.cpp@1.6, 2006-10-12 10:31:24+08:00, dli@dev3-76.dev.cn.tlan +6 -6
    added date & time stamp for the messages.

  storage/ndb/src/common/transporter/TCP_Transporter.cpp@1.12, 2006-10-12 10:31:24+08:00, dli@dev3-76.dev.cn.tlan +14 -11
    added date & time stamp for the messages.

  storage/ndb/src/common/transporter/TransporterRegistry.cpp@1.66, 2006-10-12 10:31:24+08:00, dli@dev3-76.dev.cn.tlan +12 -12
    added date & time stamp for the messages.

ChangeSet@1.2303.5.1, 2006-10-11 18:02:12-07:00, brian@zim.(none) +2 -0
  Panic was being called twice!
  
  Both on its own and in the plugin shutdown.... not so good. The code is a bit simpler, and we could now technically remove the panic all entirely if we wanted to. 

  sql/handler.cc@1.274, 2006-10-11 18:02:09-07:00, brian@zim.(none) +3 -28
    Handler was returning from a panic failure. Bad idea! This means that the rest of the shutdown is not carried outin the engine.
    Removed panic specific calls. 
    
    Panic should also be called regardless of "startup". 

  sql/mysqld.cc@1.584, 2006-10-11 18:02:10-07:00, brian@zim.(none) +0 -1
    Removed ha_panic call (since its called in plugin shutdown)

ChangeSet@1.1616.2798.19, 2006-10-11 21:53:43+02:00, msvensson@shellback.(none) +2 -0
  Fixes for embedded server test

  client/mysqltest.c@1.92.21.17, 2006-10-11 21:53:42+02:00, msvensson@shellback.(none) +1 -1
    Fix typo

  mysql-test/mysql-test-run.pl@1.8.9.48, 2006-10-11 21:53:42+02:00, msvensson@shellback.(none) +14 -4
    Fixes for embedded server test

ChangeSet@1.1810.2078.44, 2006-10-11 19:40:55+02:00, msvensson@shellback.(none) +1 -0
  Check that TERM has been set to avoid problem "Error opening
  terminal: unknown" when the script is executed using non interactive ssh
  Set TERM to "linux" as default

  netware/BUILD/mwenv@1.12.2.4, 2006-10-11 19:40:53+02:00, msvensson@shellback.(none) +10 -0
    Check that TERM has been set to avoid problem "Error opening
    terminal: unknown" when the script is executed using non interactive ssh

ChangeSet@1.1810.2169.13, 2006-10-11 19:44:12+04:00, evgen@moonbone.local +3 -0
  Bug#22138: Unhandled NULL caused server crash
  
  The Cached_item_decimal::cmp() method wasn't checking for null pointer
  returned from the val_decimal() of the item being cached.
  This leads to server crash.
  
  The Cached_item_decimal::cmp() method now check for null values.

  mysql-test/r/type_decimal.result@1.38.1.4, 2006-10-11 19:43:53+04:00, evgen@moonbone.local +11 -0
    Added the test case for bug#22138: Unhandled NULL caused server crash

  mysql-test/t/type_decimal.test@1.32, 2006-10-11 19:43:54+04:00, evgen@moonbone.local +9 -0
    Added the test case for bug#22138: Unhandled NULL caused server crash

  sql/item_buff.cc@1.20, 2006-10-11 19:43:41+04:00, evgen@moonbone.local +9 -3
    Bug#22138: Unhandled NULL caused server crash
    The Cached_item_decimal::cmp() method now check for null values.

ChangeSet@1.1616.2807.1, 2006-10-11 20:34:20+05:00, svoj@mysql.com +3 -0
  BUG#22562 - REPAIR TABLE .. USE_FRM causes server crash on Windows and server
              hangs on Linux
  
  If REPAIR TABLE ... USE_FRM is issued for table that is located in different
  than default database server crash could happen.
  
  In reopen_name_locked_table take database name from table_list (user specified
  or default database) instead of from thd (default database).
  
  Affects 4.1 only.

  mysql-test/r/repair.result@1.14.1.5, 2006-10-11 20:34:19+05:00, svoj@mysql.com +7 -0
    A test case for BUG#22562.

  mysql-test/t/repair.test@1.12.1.4, 2006-10-11 20:34:19+05:00, svoj@mysql.com +10 -0
    A test case for BUG#22562.

  sql/sql_base.cc@1.145.1.128, 2006-10-11 20:34:19+05:00, svoj@mysql.com +1 -1
    In reopen_name_locked_table take database name from table_list (user specified
    or default database) instead of from thd (default database).

ChangeSet@1.2273.149.1, 2006-10-11 16:36:24+02:00, istruewing@chilla.local +1 -0
  Bug#21627 - Warnings in build of myisampack
  
  Added proper casts
  
  No test case. myisampack must be tested manually.

  storage/myisam/myisampack.c@1.55, 2006-10-11 16:36:19+02:00, istruewing@chilla.local +3 -3
    Bug#21627 - Warnings in build of myisampack
    Added proper casts

ChangeSet@1.1616.2798.18, 2006-10-11 15:45:35+02:00, msvensson@shellback.(none) +1 -0
  mtr_im_stop returns 1 if all is well

  mysql-test/mysql-test-run.pl@1.8.9.47, 2006-10-11 15:45:32+02:00, msvensson@shellback.(none) +1 -1
    mtr_im_stop returns 1 if all is well

ChangeSet@1.1616.2798.17, 2006-10-11 14:50:19+02:00, msvensson@shellback.(none) +4 -0
  Improve restart logic all code to detect restart is now in the functions
  'run_testcase_need_master/slave_restart'
  Remove the faulty qw
  Only look for mysql_fix_privilege_tables if not windows

  mysql-test/t/bdb-alter-table-2-master.opt@1.3.1.1, 2006-10-11 14:50:16+02:00, msvensson@shellback.(none) +1 -1
    Use --force-restart

  mysql-test/lib/mtr_cases.pl@1.6.2.9, 2006-10-11 14:50:16+02:00, msvensson@shellback.(none) +46 -57
    Move all code to determine when to restart into 'run_testcase_need_master/slave_restart' 
    Add possibility to wite --force-restart in -master.opt file, this will force a restart and
    since master is not started with any special options there is no need to restart
    again afterwards.

  mysql-test/mysql-test-run.pl@1.8.9.46, 2006-10-11 14:50:16+02:00, msvensson@shellback.(none) +69 -81
    Remove the qw surrounding ENV{'LD_LIBRARY_PATH'}
    Only look for the sh script mysql_fix_privileges when not on windows
    Remove warnings about using unitialized variables
    Improve the restart logic, eall code to determine when to restart is
    now in run_testcase_need_master_restart and run_testcase_need_slave_restart
     

  mysql-test/t/not_embedded_server-master.opt@1.2, 2006-10-11 14:50:16+02:00, msvensson@shellback.(none) +1 -1
    Use --force-restart

ChangeSet@1.1616.2806.1, 2006-10-11 13:42:48+02:00, Kristofer.Pettersson@naruto. +1 -0
  Cset exclude: Kristofer.Pettersson@naruto.|ChangeSet|20060922092201|15946

  sql/item_timefunc.cc@1.51.11.1, 2006-10-11 13:42:44+02:00, Kristofer.Pettersson@naruto. +0 -0
    Exclude

ChangeSet@1.2303.2.7, 2006-10-11 12:53:15+02:00, bteam@mysql.com +1 -0
  Raise version number

  configure.in@1.385.1.2, 2006-10-11 12:53:00+02:00, bteam@mysql.com +1 -1
    Raise version number

ChangeSet@1.1616.2804.1, 2006-10-11 12:24:59+02:00, istruewing@chilla.local +1 -0
  Bug#12240 - Rows Examined in Slow Log showing incorrect number?
  
  Examined rows are counted for every join part. The per-join-part
  counter was incremented over all iterations. The result variable
  was replaced at the end of every iteration. The final result was
  the number of examined rows by the join part that ended its
  execution as the last one. The numbers of other join parts was
  lost.
  
  Now we reset the per-join-part counter before every iteration and
  add it to the result variable at the end of the iteration. That
  way we get the sum of all iterations of all join parts.
  
  No test case. Testing this needs a look into the slow query log.
  I don't know of a way to do this portably with the test suite.

  sql/sql_select.cc@1.216.142.1, 2006-10-11 12:24:58+02:00, istruewing@chilla.local +18 -6
    Bug#12240 - Rows Examined in Slow Log showing incorrect number?
    Fixed reseting and accumulation of examined rows counts.

ChangeSet@1.1616.2798.16, 2006-10-11 11:21:44+02:00, msvensson@shellback.(none) +1 -0
  Fix some bad code in mysqltest.c which cause segfault

  client/mysqltest.c@1.92.21.16, 2006-10-11 11:19:51+02:00, msvensson@shellback.(none) +0 -7
    Remove vsnprintf() and DBUG_PRINT from die() function, as it's not portable to Windows, and it's not allowed to
    call vsnprintf() and then vfprintf() with the same args.
    Can't just print the buffer here, because the buffer is a fixed size.
    If the message is longer than will fit int he buffer, it would get
    truncated on Unix, and the full thing would be printed on Windows.
    This DBUG_PRINT isn't important enough for this hassle, so just get rid
    of it.
    

ChangeSet@1.1616.2800.2, 2006-10-11 11:07:25+02:00, andrey@example.com +1 -0
  Fix a typo regarding checking whether HA_VAR_LENGTH_KEY is
  set. This has always worked because when flag is !=0 then
  HA_VAR_LENGTH_KEY is always set. Therefore, a test case cannot
  reveal a faulty behavior.
  
  Fix for bug#23074: typo in myisam/sort.c

  myisam/sort.c@1.35.3.1, 2006-10-11 11:07:22+02:00, andrey@example.com +2 -2
    fix typo. Nevertheless, it has worked as expected
    because when a bit in flag is set HA_VAR_LENGTH_KEY has
    been always set too. Actually, no problem exposed through
    DDL.

ChangeSet@1.1616.2803.1, 2006-10-11 12:44:03+04:00, kaa@polly.local +3 -0
  Fix for bug #22728 "Handler_rollback value is growing".
  
  The bug is present only in 4.1, will be null-merged to 5.0
  
  For InnoDB, check value of thd->transaction.all.innodb_active_trans instead of thd->transaction.stmt.innobase_tid to see if we really need to rollback.

  mysql-test/t/innodb_mysql.test@1.3.6.1, 2006-10-11 12:44:01+04:00, kaa@polly.local +18 -0
    Added testcase for bug #22728 "Handler_rollback value is growing"

  mysql-test/r/innodb_mysql.result@1.3.6.1, 2006-10-11 12:44:01+04:00, kaa@polly.local +10 -0
    Added testcase for bug #22728 "Handler_rollback value is growing"

  sql/handler.cc@1.103.21.1, 2006-10-11 12:44:01+04:00, kaa@polly.local +1 -1
    For InnoDB, check value of thd->transaction.all.innodb_active_trans instead of thd->transaction.stmt.innobase_tid to see if we really need to rollback.

ChangeSet@1.2273.132.2, 2006-10-11 10:17:39+02:00, Kristofer.Pettersson@naruto. +2 -0
  BUG#21811 Odd casting with date + INTERVAL arithmetic
  - Type casting was not consequent, thus when adding a DATE type with
    a WEEK interval the result tpe was DATETIME and not DATE as is the
    norm.
  - By changing the order of the date type enumerations the type casting
    bug is resolved. To comply with the new order the array 
    interval_type_to_name needed to change accordingly.

  include/my_time.h@1.14.1.1, 2006-10-11 10:17:35+02:00, Kristofer.Pettersson@naruto. +15 -5
    Changed enumeration order to make week interval appear in a more
    logical order. This affects type casting when a date is added to an
    interval.

  sql/time.cc@1.68, 2006-10-11 10:17:35+02:00, Kristofer.Pettersson@naruto. +12 -1
    Moved string WEEK to match enumeration in interval_type

ChangeSet@1.1810.2225.3, 2006-10-11 11:07:20+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +1 -0
  bug#20697 - results in sync with the test

  mysql-test/r/rpl_deadlock.result@1.8.2.2, 2006-10-11 11:05:56+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +0 -87

ChangeSet@1.1810.2226.1, 2006-10-11 10:16:37+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +3 -0
  BUG#20697 slave fails to rollback replicated transaction hang over innodb_lock_wait_timeou
  
  Transaction on the slave sql thread got blocked against a slave's mysqld local ta's
  lock. Since the default, slave-transaction-retries=10, there was replaying of the 
  replicated ta. That failed because of a new started from 5.0.13 policy not to rollback
  a timed-out transaction. Effectively the first round of a timed-out ta becomes committed
  by the replaying's first "BEGIN".
  
  It was decided to backport already existed method working in 5.1 implemented in
  bug #16228 for handling symmetrical deadlock problem. That patch introduced end_trans
  execution whenever a replicated ta deadlocks or timed-out.
  
  Note, that this solution can be practically suboptimal - in the light of the changed behavior
  due to timeout we still could replay only the last statement -  only with a high rate of timeouting
  replicated transactions.

  mysql-test/t/rpl_deadlock.test@1.11.2.1, 2006-10-11 10:16:34+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +10 -6
    Refining the timeout part of the test to display that the timed-out transaction
    is rolled back prior its replaying by slave sql.
    Non-zero select's count would mean the first round work became persistent - wrong.

  mysql-test/r/rpl_deadlock.result@1.8.2.1, 2006-10-11 10:16:34+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +110 -15
    results changed

  sql/slave.cc@1.241.10.1, 2006-10-11 10:16:34+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +16 -7
    applying bug#16228 fix, approbated for deadlock use case in 5.1, almost verbatim. 
    Another alternative to replay only the offending statement requires significant
    efforts, incl design work.

ChangeSet@1.2273.141.4, 2006-10-11 00:03:21-06:00, tsmith@siva.hindu.god +2 -0
  Fix some bad code in mysqltest.c and mysql-test-run.pl which could cause segfault / wrong LD_LIBRARY_PATH settings.

  client/mysqltest.c@1.234, 2006-10-11 00:03:18-06:00, tsmith@siva.hindu.god +0 -7
    Remove vsnprintf() and DBUG_PRINT from die() function, as it's not portable to Windows, and it's not allowed to call vsnprintf() and then vfprintf() with the same args.
    
    Can't just print the buffer here, because the buffer is a fixed size.  If the message is longer than will fit int he buffer, it would get truncated on Unix, and the full thing would be printed on Windows.  This DBUG_PRINT isn't important enough for this hassle, so just get rid of it.

  mysql-test/mysql-test-run.pl@1.190.1.1, 2006-10-11 00:03:18-06:00, tsmith@siva.hindu.god +2 -2
    Remove bogus quoting of $ENV{LD_LIBRARY_PATH} and $ENV{DYLD_LIBRARY_PATH} in environment_setup().

ChangeSet@1.2273.141.3, 2006-10-11 07:08:32+04:00, ted@ted.mysql.internal +2 -0
  BUG#21524 ER_CANT_OPEN_LIBRARY output message used to confuse mysqltest on Solaris. Varying part of the message is now suppressed 

  mysql-test/r/ps.result@1.80, 2006-10-11 07:08:29+04:00, ted@ted.mysql.internal +3 -3
    ps.result updated

  mysql-test/t/ps.test@1.79, 2006-10-11 07:08:29+04:00, ted@ted.mysql.internal +3 -3
    The error code and the additional output grepped out of ER_CANT_OPEN_LIBRARY message due to the output varies across different platforms

ChangeSet@1.2273.141.2, 2006-10-11 02:36:36+04:00, ted@ted.mysql.internal +3 -0
  BUG#21524 ps.test updated to meet recent changes in SQL parser

  mysql-test/r/ps.result@1.79, 2006-10-11 02:36:33+04:00, ted@ted.mysql.internal +239 -222
    brand new ps.result recorded out of updated ps.test output

  mysql-test/t/disabled.def@1.208, 2006-10-11 02:36:33+04:00, ted@ted.mysql.internal +0 -1
    ps.test enabled anew

  mysql-test/t/ps.test@1.78, 2006-10-11 02:36:33+04:00, ted@ted.mysql.internal +48 -51
    ps.test updated to ensure FLUSH/RESET are not allowed in stored functions at both parse and execution time

ChangeSet@1.2273.146.2, 2006-10-10 21:19:34+02:00, andrey@example.com +1 -0
  fix build failure on Solaris10

  sql/mysql_priv.h@1.448.1.2, 2006-10-10 21:19:24+02:00, andrey@example.com +1 -1
    synchronize definition and declaration

ChangeSet@1.2273.139.5, 2006-10-10 20:30:33+02:00, istruewing@chilla.local +1 -0
  Bug#21476 - Lost Database Connection During Query
  Raised STACK_MIN_SIZE for Debian GNU/Linux Sid,
  Linux kernel 2.6.16,
  gcc version 3.3.6 (Debian 1:3.3.6-13),
  libc6-dbg 2.3.6.ds1-4,
  Pentium4 (x86),
  BUILD/compile-pentium-debug-max
  Raised about 100 Bytes above the required minimum.

  sql/mysql_priv.h@1.448.2.1, 2006-10-10 20:30:30+02:00, istruewing@chilla.local +1 -1
    Bug#21476 - Lost Database Connection During Query
    Raised STACK_MIN_SIZE for Debian GNU/Linux Sid,
    Linux kernel 2.6.16,
    gcc version 3.3.6 (Debian 1:3.3.6-13),
    libc6-dbg 2.3.6.ds1-4,
    Pentium4 (x86),
    BUILD/compile-pentium-debug-max
    Raised about 100 Bytes above the required minimum.

ChangeSet@1.2273.139.4, 2006-10-10 20:01:39+02:00, istruewing@chilla.local +1 -0
  Bug#8283 - OPTIMIZE TABLE causes data loss
  After merge fix. Renamed 'info' -> 'sort_param'.

  storage/myisam/sort.c@1.55, 2006-10-10 20:01:36+02:00, istruewing@chilla.local +1 -1
    Bug#8283 - OPTIMIZE TABLE causes data loss
    After merge fix. Renamed 'info' -> 'sort_param'.

ChangeSet@1.2273.145.1, 2006-10-10 17:59:46+02:00, andrey@example.com +5 -0
    Remove direct mapping of enum interval_type to mysql.event.interval_field
    This decoupling allows in further versions of MySQL enum interval_type to
    be reordered without this affecting any backward compatibility in the
    events code.
    This changeset doesn't change any exposed behavior but makes events' code
    more durable to changes outside of their code base.
    
    To the reviewer: There is no regression test included as it is impossible
    to construct one with the current infrastructure which can test it. To test
    the code one has create and event, then change the order of
    enum interval_type in my_time.h, update sql/time.cc, recompile the server
    and run it with scheduler running.

  include/my_time.h@1.16, 2006-10-10 17:59:36+02:00, andrey@example.com +2 -0
    Add a reminder to keep enum interval_type and
    interval_type_to_name in sync

  sql/event_data_objects.cc@1.78, 2006-10-10 17:59:36+02:00, andrey@example.com +21 -6
    When loading from disk don't use the integer value of
    mysql.event.interval_field because it could be different of the
    values of enum interval_type, if the latter is reordered in a later
    version of MySQL. Loaded from disk is the string value which is then
    resolved against interval_type_to_name to get the exact enum value we
    need for Event_queue_element::interval.

  sql/event_db_repository.cc@1.18, 2006-10-10 17:59:36+02:00, andrey@example.com +5 -5
    Use interval_type_to_name from sql/time.cc during storage thus
    decoupling the value stored on disk (the enum) from the integer
    representation in memory. interval_type can be changed and as
    long as interval_type_to_name is kept in sync correct values will
    be saved to disk.

  sql/mysql_priv.h@1.448.1.1, 2006-10-10 17:59:36+02:00, andrey@example.com +2 -0
    add proto of find_string_in_array

  sql/strfunc.cc@1.12, 2006-10-10 17:59:36+02:00, andrey@example.com +30 -0
    Add a function for searching a LEX_STRING in an array of LEX_STRINGs

ChangeSet@1.2273.144.2, 2006-10-10 18:06:08+04:00, kroki@moonlight.intranet +1 -0
  Fix after manual merge.

  mysql-test/r/ps.result@1.77.1.2, 2006-10-10 18:06:05+04:00, kroki@moonlight.intranet +97 -238
    Fix after manual merge.

ChangeSet@1.1810.2214.5, 2006-10-10 17:51:12+04:00, kroki@moonlight.intranet +1 -0
  Fix after manial merge.

  mysql-test/r/view.result@1.138.23.3, 2006-10-10 17:51:09+04:00, kroki@moonlight.intranet +14 -14
    Fix after manial merge.

ChangeSet@1.1616.2801.1, 2006-10-10 17:08:47+04:00, kroki@moonlight.intranet +5 -0
  BUG#21354: (COUNT(*) = 1) not working in SELECT inside prepared
             statement.
  
  The problem was that during statement re-execution if the result was
  empty the old result could be returned for group functions.
  
  The solution is to implement proper cleanup() method in group
  functions.

  mysql-test/r/ps.result@1.31.4.1, 2006-10-10 17:08:41+04:00, kroki@moonlight.intranet +97 -0
    Add result for bug#21354: (COUNT(*) = 1) not working in SELECT inside
    prepared statement.

  mysql-test/t/func_gconcat.test@1.23.1.15, 2006-10-10 17:08:41+04:00, kroki@moonlight.intranet +1 -1
    Add a comment that the test case is from bug#836.

  mysql-test/t/ps.test@1.27.4.1, 2006-10-10 17:08:41+04:00, kroki@moonlight.intranet +73 -1
    Add test case for bug#21354: (COUNT(*) = 1) not working in SELECT inside
    prepared statement.

  sql/item_sum.cc@1.89.12.1, 2006-10-10 17:08:41+04:00, kroki@moonlight.intranet +1 -0
    Call clear() in Item_sum_count::cleanup().

  sql/item_sum.h@1.48.1.36, 2006-10-10 17:08:41+04:00, kroki@moonlight.intranet +47 -1
    Add comments.
    Add proper cleanup() methods.
    Change Item_sum::no_rows_in_result() to call clear() instead of reset(),
    as the latter also issues add(), and there is nothing to add when there
    are no rows in result.

ChangeSet@1.1810.2220.1, 2006-10-10 13:44:04+04:00, kroki@moonlight.intranet +3 -0
  Bug#19111: TRIGGERs selecting from a VIEW on the firing base table fail.
  
  In a trigger or a function used in a statement it is possible to do
  SELECT from a table being modified by the statement.  However,
  encapsulation of such SELECT into a view and selecting from a view
  instead of direct SELECT was not possible.
  
  This happened because tables used by views (which in their turn
  were used from functions/triggers) were not excluded from checks
  in unique_table() routine as it happens for the rest of tables
  added to the statement table list for prelocking.
  
  With this fix we ignore all such tables in unique_table(), thus
  providing consistency: inside a trigger or a functions SELECT from
  a view may be used where plain SELECT is allowed.  Modification of
  the same table from function or trigger is still disallowed.  Also,
  this patch doesn't affect the case where SELECT from the table being
  modified is done outside of function of trigger, such SELECTs are
  still disallowed (this limitation and visibility problem when function
  select from a table being modified are subjects of bug 21326).  See
  also bug 22427.

  mysql-test/r/view.result@1.138.24.1, 2006-10-10 13:44:01+04:00, kroki@moonlight.intranet +16 -1
    Add result for bug#19111: TRIGGERs selecting from a VIEW on the
    firing base table fail.

  mysql-test/t/view.test@1.126.21.1, 2006-10-10 13:44:02+04:00, kroki@moonlight.intranet +38 -1
    Add test case for bug#19111: TRIGGERs selecting from a VIEW on the
    firing base table fail.

  sql/sql_base.cc@1.235.72.1, 2006-10-10 13:44:02+04:00, kroki@moonlight.intranet +8 -3
    In unique_table() do not check tables that are used in a stored
    function or a trigger ('prelocking_placeholder' is set).  If such
    function or a trigger will attempt to modify a table, the error will
    be given, however select is allowed there.

ChangeSet@1.1810.2218.2, 2006-10-09 18:50:12-04:00, cmiller@zippy.cornsilk.net +2 -0
  Bug#17583: mysql drops connection when stdout is not writable
  
  Porting forward tests to replacement files.

  mysql-test/r/mysql.result@1.15.3.1, 2006-10-09 18:50:10-04:00, cmiller@zippy.cornsilk.net +13 -0
    Ported changes from previous commit to new file.

  mysql-test/t/mysql.test@1.4.5.2, 2006-10-09 18:50:10-04:00, cmiller@zippy.cornsilk.net +17 -0
    Ported changes from previous commit to new file.

ChangeSet@1.1616.2800.1, 2006-10-09 18:28:06-04:00, cmiller@zippy.cornsilk.net +4 -0
  Bug#17583: mysql drops connection when stdout is not writable
  
  When the client program had its stdout file descriptor closed by the calling
  shell, after some amount of work (enough to fill a socket buffer) the server 
  would complain about a packet error and then disconnect the client.
  
  This is a serious security problem.  If stdout is closed before the mysql is
  exec()d, then the first socket() call allocates file number 1 to communicate
  with the server.  Subsequent write()s to that file number (as when printing
  results that come back from the database) go back to the server instead in 
  the command channel.  So, one should be able to craft data which, upon being
  selected back from the server to the client, and injected into the command
  stream become valid MySQL protocol to do something nasty when sent /back/ to 
  the server.
  
  The solution is to close explicitly the file descriptor that we *printf() to, 
  so that the libc layer and the OS layer both agree that the file is closed.

  BitKeeper/etc/collapsed@1.1, 2006-10-09 17:42:27-04:00, cmiller@zippy.cornsilk.net +1 -0
    BitKeeper file /home/cmiller/work/mysql/bug17583/my41-bug17583/BitKeeper/etc/collapsed

  BitKeeper/etc/collapsed@1.0, 2006-10-09 17:42:27-04:00, cmiller@zippy.cornsilk.net +0 -0

  mysql-test/r/mysql_client.result@1.2.2.1, 2006-10-09 18:28:04-04:00, cmiller@zippy.cornsilk.net +14 -0
    Prove that the problem of writing SQL output to the command socket no longer
    exists.

  mysql-test/t/mysql_client.test@1.2.2.1, 2006-10-09 18:28:04-04:00, cmiller@zippy.cornsilk.net +19 -0
    Prove that the problem of writing SQL output to the command socket no longer
    exists.

  client/mysql.cc@1.121.19.1, 2006-10-09 18:28:04-04:00, cmiller@zippy.cornsilk.net +15 -0
    If standard output is not open (specifically, if dup() of its file number 
    fails) then we explicitly close it so that future uses of the file descriptor
    behave correctly for a closed file.

ChangeSet@1.1810.2212.8, 2006-10-09 22:16:22+02:00, istruewing@chilla.local +1 -0
  Bug#8283 - OPTIMIZE TABLE causes data loss
  After merge fix. MyISAM version 10.

  mysql-test/r/myisam.result@1.71.1.18, 2006-10-09 22:16:15+02:00, istruewing@chilla.local +4 -4
    Bug#8283 - OPTIMIZE TABLE causes data loss
    After merge fix. MyISAM version 10.

ChangeSet@1.1810.2217.1, 2006-10-09 21:13:37+02:00, Kristofer.Pettersson@naruto. +2 -0
  Bug#23010 _my_b_read() passing illegal file handles to my_seek()
  - The io cache flag seek_not_done was not set properly in the reinit_
  io_chache function call and this led my_seek to be called despite an
  invalid file handle.
  - Added a test in reinit_io_cache to ensure we have a valid file handle
  before setting seek_not_done flag.

  mysys/mf_iocache.c@1.55.1.1, 2006-10-09 20:46:24+02:00, Kristofer.Pettersson@naruto. +5 -1
    Added a test to only trigger my_seek function calls if we have 
    a valid file descriptor.

  mysys/my_seek.c@1.11.1.2, 2006-10-09 20:46:25+02:00, Kristofer.Pettersson@naruto. +7 -2
    Refactored incomplete condition into an assertion. This also ensures that
    newpos is initialized.

ChangeSet@1.2303.1.3, 2006-10-09 20:46:29+02:00, pekka@orca.ndb.mysql.com +1 -0
  ndb - tux scan 5.1 post-merge fix

  storage/ndb/src/kernel/blocks/dbtux/Dbtux.hpp@1.48, 2006-10-09 20:46:03+02:00, pekka@orca.ndb.mysql.com +1 -2
    ndb - tux scan 5.1 post-merge fix

ChangeSet@1.1616.2799.1, 2006-10-09 19:26:55+02:00, istruewing@chilla.local +10 -0
  Bug#8283 - OPTIMIZE TABLE causes data loss
  
  OPTIMIZE TABLE with myisam_repair_threads > 1 performs a non-quick 
  parallel repair. This means that it does not only rebuild all 
  indexes, but also the data file.
  
  Non-quick parallel repair works so that there is one thread per 
  index. The first of the threads rebuilds also the new data file.
  
  The problem was that all threads shared the read io cache on the
  old data file. If there were holes (deleted records) in the table,
  the first thread skipped them, writing only contiguous, non-deleted
  records to the new data file. Then it built the new index so that
  its entries pointed to the correct record positions. But the other
  threads didn't know the new record positions, but put the positions
  from the old data file into the index.
  
  The new design is so that there is a shared io cache which is filled
  by the first thread (the data file writer) with the new contiguous
  records and read by the other threads. Now they know the new record
  positions.
  
  Another problem was that for the parallel repair of compressed
  tables a common bit_buff and rec_buff was used. I changed it so
  that thread specific buffers are used for parallel repair.
  
  A similar problem existed for checksum calculation. I made this
  multi-thread safe too.

  include/my_sys.h@1.116.4.1, 2006-10-09 19:26:51+02:00, istruewing@chilla.local +14 -8
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Redesign of io_cache_share.

  include/myisam.h@1.63.1.4, 2006-10-09 19:26:51+02:00, istruewing@chilla.local +1 -1
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Redesign of checksum calculation in mi_check.c.
    'calc_checksum' is now in myisamdef.h:st_mi_sort_param.

  mysql-test/r/myisam.result@1.45.7.1, 2006-10-09 19:26:52+02:00, istruewing@chilla.local +126 -0
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Added test results.

  mysql-test/t/myisam.test@1.33.9.1, 2006-10-09 19:26:52+02:00, istruewing@chilla.local +93 -0
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Added test cases.

  mysys/mf_iocache.c@1.47.1.2, 2006-10-09 19:26:52+02:00, istruewing@chilla.local +499 -81
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Redesign of io_cache_share.
    We do now allow a writer to synchronize himself with the
    readers of a shared cache. When all threads join in the lock,
    the writer copies the data from his write buffer to the shared
    read buffer.

  myisam/mi_check.c@1.105.9.1, 2006-10-09 19:26:52+02:00, istruewing@chilla.local +257 -49
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Implemented a new parallel repair design.
    Using a synchronized shared read/write cache.
    Allowed for thread specific bit_buff, rec_buff, and calc_checksum.

  myisam/mi_open.c@1.80.3.1, 2006-10-09 19:26:52+02:00, istruewing@chilla.local +4 -1
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Added DBUG output.

  myisam/mi_packrec.c@1.25.2.1, 2006-10-09 19:26:52+02:00, istruewing@chilla.local +44 -32
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Allowed for thread specific bit_buff and rec_buff.

  myisam/myisamdef.h@1.59.1.23, 2006-10-09 19:26:52+02:00, istruewing@chilla.local +21 -9
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Commented on checksum calculation variables.
    Allowed for thread specific bit_buff.
    Added DBUG output for better table crash detection.

  myisam/sort.c@1.35.2.1, 2006-10-09 19:26:52+02:00, istruewing@chilla.local +74 -52
    Bug#8283 - OPTIMIZE TABLE causes data loss
    Added implications of the new parallel repair design.
    Renamed 'info' -> 'sort_param'.
    Added DBUG output.

ChangeSet@1.1810.2204.2, 2006-10-09 09:59:02-07:00, malff@weblab.(none) +3 -0
  Bug#21462 (Stored procedures with no arguments require parenthesis)
  
  The syntax of the CALL statement, to invoke a stored procedure, has been
  changed to make the use of parenthesis optional in the argument list.
  With this change, "CALL p;" is equivalent to "CALL p();".
  
  While the SQL spec does not explicitely mandate this syntax, supporting it
  is needed for practical reasons, for integration with JDBC / ODBC connectors.
  
  Also, warnings in the sql/sql_yacc.yy file, which were not reported by Bison 2.1
  but are now reported by Bison 2.2, have been fixed.
  
  The warning found were:
  bison -y -p MYSQL  -d --debug --verbose sql_yacc.yy
  sql_yacc.yy:653.9-18: warning: symbol UNLOCK_SYM redeclared
  sql_yacc.yy:656.9-17: warning: symbol UNTIL_SYM redeclared
  sql_yacc.yy:658.9-18: warning: symbol UPDATE_SYM redeclared
  sql_yacc.yy:5169.11-5174.11: warning: unused value: $2
  sql_yacc.yy:5208.11-5220.11: warning: unused value: $5
  sql_yacc.yy:5221.11-5234.11: warning: unused value: $5
  conflicts: 249 shift/reduce
  
  "unused value: $2" correspond to the $$=$1 assignment in the 1st {} block
  in table_ref -> join_table {} {},
  which does not procude a result ($$) for the rule but an intermediate $2
  value for the action instead.
  "unused value: $5" are similar, with $$ assignments in {} actions blocks
  which are not for the final reduce.

  mysql-test/r/sp.result@1.170.1.44, 2006-10-09 09:59:00-07:00, malff@weblab.(none) +27 -0
    New test case for Bug#21462

  mysql-test/t/sp.test@1.174.23.1, 2006-10-09 09:59:00-07:00, malff@weblab.(none) +33 -0
    New test case for Bug#21462

  sql/sql_yacc.yy@1.371.84.1, 2006-10-09 09:59:00-07:00, malff@weblab.(none) +11 -9
    "CALL p;" syntax for calling a stored procedure
    Fixed bison 2.2 warnings.

ChangeSet@1.1810.2216.1, 2006-10-09 19:51:41+04:00, gkodinov@macbook.local +8 -0
  Bug #22781: SQL_BIG_RESULT fails to influence sort plan
   Currently SQL_BIG_RESULT is checked only at compile time.
   However, additional optimizations may take place after
   this check that change the sort method from 'filesort'
   to sorting via index. As a result the actual plan
   executed is not the one specified by the SQL_BIG_RESULT
   hint. Similarly, there is no such test when executing
   EXPLAIN, resulting in incorrect output.
   The patch corrects the problem by testing for
   SQL_BIG_RESULT both during the explain and execution
   phases.

  mysql-test/r/bdb.result@1.48.1.4, 2006-10-09 19:51:31+04:00, gkodinov@macbook.local +36 -36
    Bug #22781: SQL_BIG_RESULT fails to influence sort plan
     - updated sql_big_result testcase

  mysql-test/t/innodb_mysql.test@1.3.5.1, 2006-10-09 19:51:35+04:00, gkodinov@macbook.local +18 -0
    Bug #22781: SQL_BIG_RESULT fails to influence sort plan
     - test case with InnoDB

  mysql-test/r/group_by.result@1.69.1.4, 2006-10-09 19:51:32+04:00, gkodinov@macbook.local +65 -2
    Bug #22781: SQL_BIG_RESULT fails to influence sort plan
     - test case with MyISAM

  mysql-test/r/innodb.result@1.145.1.18, 2006-10-09 19:51:32+04:00, gkodinov@macbook.local +8 -8
    Bug #22781: SQL_BIG_RESULT fails to influence sort plan
     - updated sql_big_result testcase

  mysql-test/r/innodb_mysql.result@1.3.4.5, 2006-10-09 19:51:33+04:00, gkodinov@macbook.local +16 -0
    Bug #22781: SQL_BIG_RESULT fails to influence sort plan
     - test case with InnoDB

  mysql-test/r/myisam.result@1.71.8.1, 2006-10-09 19:51:34+04:00, gkodinov@macbook.local +8 -8
    Bug #22781: SQL_BIG_RESULT fails to influence sort plan
     - updated sql_big_result testcase

  mysql-test/t/group_by.test@1.59.1.1, 2006-10-09 19:51:34+04:00, gkodinov@macbook.local +22 -0
    Bug #22781: SQL_BIG_RESULT fails to influence sort plan
     - test case with MyISAM

  sql/sql_select.cc@1.312.102.1, 2006-10-09 19:51:36+04:00, gkodinov@macbook.local +10 -3
    Bug #22781: SQL_BIG_RESULT fails to influence sort plan
     - When SQL_BIG_RESULT is specified, disable the optimization performed
    at execution/explain time that decides to use an index instead
    of filesort.

ChangeSet@1.1810.2215.2, 2006-10-09 16:13:32+02:00, pekka@orca.ndb.mysql.com +6 -0
  ndb - bug#20446: fix + other TUX scan improvements

  ndb/src/kernel/blocks/dbtux/Dbtux.hpp@1.39.3.1, 2006-10-09 16:12:09+02:00, pekka@orca.ndb.mysql.com +46 -19
    fixes to move scan when entry removed: 1. do not check visibility to transaction 2. keep Blocked if moved to another version of same tuple 3. general improvements (remove m_match etc)

  ndb/src/kernel/blocks/dbtux/DbtuxDebug.cpp@1.20.1.1, 2006-10-09 16:12:10+02:00, pekka@orca.ndb.mysql.com +0 -1
    fixes to move scan when entry removed: 1. do not check visibility to transaction 2. keep Blocked if moved to another version of same tuple 3. general improvements (remove m_match etc)

  ndb/src/kernel/blocks/dbtux/DbtuxGen.cpp@1.18.2.1, 2006-10-09 16:12:10+02:00, pekka@orca.ndb.mysql.com +13 -0
    fixes to move scan when entry removed: 1. do not check visibility to transaction 2. keep Blocked if moved to another version of same tuple 3. general improvements (remove m_match etc)

  ndb/src/kernel/blocks/dbtux/DbtuxMaint.cpp@1.16.1.1, 2006-10-09 16:12:10+02:00, pekka@orca.ndb.mysql.com +7 -6
    fixes to move scan when entry removed: 1. do not check visibility to transaction 2. keep Blocked if moved to another version of same tuple 3. general improvements (remove m_match etc)

  ndb/src/kernel/blocks/dbtux/DbtuxScan.cpp@1.27.1.1, 2006-10-09 16:12:10+02:00, pekka@orca.ndb.mysql.com +139 -82
    fixes to move scan when entry removed: 1. do not check visibility to transaction 2. keep Blocked if moved to another version of same tuple 3. general improvements (remove m_match etc)

  ndb/src/kernel/blocks/dbtux/DbtuxSearch.cpp@1.9.1.1, 2006-10-09 16:12:10+02:00, pekka@orca.ndb.mysql.com +20 -37
    fixes to move scan when entry removed: 1. do not check visibility to transaction 2. keep Blocked if moved to another version of same tuple 3. general improvements (remove m_match etc)

ChangeSet@1.2305, 2006-10-10 00:03:46+10:00, stewart@willster.(none) +2 -0
  BUG#20839 Illegal error code: 155 returned downgrading from 5.1.12-> 5.1.11
  
  Update mysqldump to dump the needed tablespaces to create the tables
  for either the dbs or tables we're dumping.
  
  With --all-tablespaces, we still dump everything.

  client/mysqldump.c@1.253, 2006-10-10 00:03:40+10:00, stewart@willster.(none) +143 -26
    Add --no-tablespaces to force not dumping any tablespace information
    
    Change behaviour so that:
    If dumping all databases, all tablespaces are dumped
    If dumping with --all-tablespaces, all tablespaces are dumped
    If dumping a set of databases, dump only tablespaces used by tables in that database
    If dumping a set of tables, dump only tablespaces used by those tables
    
    If --no-tablespaces is specified, no tablespaces are dumped.
    
    Default behaviour is to dump a restorable dump - i.e. with the tablespaces.
    
    When connecting to old mysqld, --no-tablespaces should be specified.

  sql/sql_show.cc@1.360.1.3, 2006-10-10 00:03:41+10:00, stewart@willster.(none) +16 -5
    Use the TABLESPACE_NAME field of the INFORMATION_SCHEMA.PARTITIONS table.
    
    NOTE: *CHANGE* in behaviour: if no tablespace, TABLESPACE_NAME will be NULL.
    This is to support a tablespace called 'default' (which you can happily create).
    
    It is likely that the other fields with 'default' should change too.
    
    This should also happily continue to work in the future (from a user point of view)
    when we introduce tablespace per partition.

ChangeSet@1.1810.2215.1, 2006-10-09 12:35:11+02:00, pekka@orca.ndb.mysql.com +5 -0
  ndb - bug#20446: test case and cleanups (not fix)

  ndb/src/kernel/blocks/dbtux/Dbtux.hpp@1.39.2.1, 2006-10-09 12:27:56+02:00, pekka@orca.ndb.mysql.com +10 -127
    remove stupid Data abstraction which is not completely transparent

  ndb/src/kernel/blocks/dbtux/DbtuxCmp.cpp@1.12.1.1, 2006-10-09 12:27:56+02:00, pekka@orca.ndb.mysql.com +19 -19
    remove stupid Data abstraction which is not completely transparent

  ndb/src/kernel/blocks/dbtux/DbtuxGen.cpp@1.18.1.1, 2006-10-09 12:27:56+02:00, pekka@orca.ndb.mysql.com +4 -4
    remove stupid Data abstraction which is not completely transparent

  ndb/test/ndbapi/testOIBasic.cpp@1.39.4.1, 2006-10-09 12:25:41+02:00, pekka@orca.ndb.mysql.com +237 -99
    test -case h for parallel ordered update (bug#20446)

  ndb/test/run-test/daily-basic-tests.txt@1.27.17.1, 2006-10-09 12:26:09+02:00, pekka@orca.ndb.mysql.com +9 -1
    test -case h for parallel ordered update (bug#20446)

ChangeSet@1.1616.2798.15, 2006-10-08 17:48:01+02:00, msvensson@shellback.(none) +3 -0
  Print names of testcases that failed check_testcase, this makes it easier
  to run the whole testcase to find wich testcases need to be checked more carefully
  and the just "copy and paste" the suspicious test case names to 
  a new mysql-test-run.pl command. 

  mysql-test/include/check-testcase.test@1.1, 2006-10-08 17:47:57+02:00, msvensson@shellback.(none) +49 -0
    New BitKeeper file ``mysql-test/include/check-testcase.test''

  mysql-test/include/check-testcase.test@1.0, 2006-10-08 17:47:57+02:00, msvensson@shellback.(none) +0 -0

  mysql-test/lib/mtr_report.pl@1.11.2.4, 2006-10-08 17:47:57+02:00, msvensson@shellback.(none) +25 -1
    Print names of testcases that failed check_testcase, this makes it easier
    to run the whole testcase to find wich testcases need to be checked more carefully
    and the just "copy and paste" the suspicious test case names to 
    a new mysql-test-run.pl command. 

  mysql-test/mysql-test-run.pl@1.8.9.45, 2006-10-08 17:47:57+02:00, msvensson@shellback.(none) +10 -1
    Mark test cases that fails "check_testcase"
    Make run_check_testcase return  value indicating if check failed

ChangeSet@1.1616.2798.14, 2006-10-08 17:08:24+02:00, msvensson@shellback.(none) +1 -0
  Do the check of special mysqld exe for master or slave after command line args have been parsed

  mysql-test/mysql-test-run.pl@1.8.9.44, 2006-10-08 17:08:13+02:00, msvensson@shellback.(none) +6 -3
    Do the check of special mysqld exe for master or slave after command line args have been parsed

ChangeSet@1.1616.2798.13, 2006-10-08 17:05:17+02:00, msvensson@shellback.(none) +2 -0
  Move list of mysqls src dirs into lib/mtr_gcov.pl as it's only used from there

  mysql-test/lib/mtr_gcov.pl@1.2, 2006-10-08 17:05:10+02:00, msvensson@shellback.(none) +17 -1
    Move list of mysqls src dirs into lib/mtr_gcov.pl as it's only used from there

  mysql-test/mysql-test-run.pl@1.8.9.43, 2006-10-08 17:05:10+02:00, msvensson@shellback.(none) +0 -16
    Move list of mysqls src dirs into lib/mtr_gcov.pl as it's only used from there

ChangeSet@1.1616.2798.12, 2006-10-08 16:19:23+02:00, msvensson@shellback.(none) +1 -0
  vsnprintf is not available on win2003-x86 host, as this is just a debug functionality - disable it for now.

  client/mysqltest.c@1.92.21.15, 2006-10-08 16:19:19+02:00, msvensson@shellback.(none) +4 -0
    vsnprintf is not available on win2003-x86 host, as this is just a debug functionality - disable it for now.

ChangeSet@1.1616.2798.11, 2006-10-08 16:11:55+02:00, msvensson@shellback.(none) +1 -0
  When looking for client binary directories it necessary to look for the one s that are "deep down" first.

  mysql-test/mysql-test-run.pl@1.8.9.42, 2006-10-08 16:11:46+02:00, msvensson@shellback.(none) +3 -3
    When looking for client binary directories it necessary to look for the one s that are "deep down" first.

ChangeSet@1.1616.2798.10, 2006-10-08 15:50:16+02:00, msvensson@shellback.(none) +1 -0
  Reorder the order of feature checks a bit
  Make the mysqld_variables hash global so it can be used throughout the program 

  mysql-test/mysql-test-run.pl@1.8.9.41, 2006-10-08 15:50:03+02:00, msvensson@shellback.(none) +64 -39
    Reorder the order of feature checks a bit
    Make the mysqld_variables hash global so it can be used throughout the program 

ChangeSet@1.2273.98.24, 2006-10-07 20:22:25+02:00, msvensson@neptunus.(none) +3 -0
  Update result format

  mysql-test/r/binlog_row_mix_innodb_myisam.result@1.12.2.1, 2006-10-07 20:22:23+02:00, msvensson@neptunus.(none) +1 -1
    Update result format

  mysql-test/r/rpl_ndb_sp003.result@1.2, 2006-10-07 20:22:23+02:00, msvensson@neptunus.(none) +1 -1
    Update result format

  mysql-test/r/rpl_row_sp003.result@1.2, 2006-10-07 20:22:23+02:00, msvensson@neptunus.(none) +1 -1
    Update result format

ChangeSet@1.1616.2798.9, 2006-10-07 20:16:57+02:00, msvensson@neptunus.(none) +2 -0
  Fix spelling error

  mysql-test/t/rpl_slave_status.test@1.3.1.4, 2006-10-07 20:16:55+02:00, msvensson@neptunus.(none) +1 -1
    Fix spelling error

  mysql-test/t/system_mysql_db_fix.test@1.7.1.6, 2006-10-07 20:16:55+02:00, msvensson@neptunus.(none) +3 -3
    Fix spelling error

ChangeSet@1.1616.2798.8, 2006-10-07 20:14:21+02:00, msvensson@neptunus.(none) +1 -0
  Init "saved_expected_errors" at program start, avoids crash where --error is first command
  strcmp -> strncmp

  client/mysqltest.c@1.92.21.14, 2006-10-07 20:14:19+02:00, msvensson@neptunus.(none) +10 -6
    Init "saved_expected_errors" at program start, avoids crash where --error is first command
    strcmp -> strncmp

ChangeSet@1.1616.2798.7, 2006-10-07 19:47:42+02:00, msvensson@neptunus.(none) +1 -0
  Add comment and remove strange assignment in 'do_exec'

  client/mysqltest.c@1.92.21.13, 2006-10-07 19:47:41+02:00, msvensson@neptunus.(none) +1 -1
    Add comment and remove strange assignment in 'do_exec'

ChangeSet@1.1616.2798.6, 2006-10-07 19:11:37+02:00, msvensson@neptunus.(none) +1 -0
  Improve sort algorithm for reorder, all test with smae name except for ending digit should be run after each other. 
  Example of that is ndb_autodiscover[1-3]

  mysql-test/lib/mtr_cases.pl@1.6.2.8, 2006-10-07 19:11:35+02:00, msvensson@neptunus.(none) +53 -19
    Improve sort algorithm for reorder, all test with smae name except for ending digit should be run after each other. 
    Example of that is ndb_autodiscover[1-3]

ChangeSet@1.1616.2798.5, 2006-10-07 19:09:40+02:00, msvensson@neptunus.(none) +1 -0
  Two implementations of "get_err_code_from_name", one use if mysqld_ername.h is available and oe if it's not
  Declare "to_ptr" first in block 

  client/mysqltest.c@1.92.21.12, 2006-10-07 19:09:38+02:00, msvensson@neptunus.(none) +12 -11
    Two implementations of "get_err_code_from_name", one use if mysqld_ername.h is available and oe if it's not
    Declare "to_ptr" first in block 

ChangeSet@1.1616.2798.4, 2006-10-06 17:15:26+02:00, msvensson@neptunus.(none) +2 -0
  Add error handling of failure to start server to "run_testcase_start_servers"

  mysql-test/lib/mtr_report.pl@1.11.2.3, 2006-10-06 17:15:24+02:00, msvensson@neptunus.(none) +5 -3
    Use tinfo's comment as primary place to look for error message

  mysql-test/mysql-test-run.pl@1.8.9.40, 2006-10-06 17:15:24+02:00, msvensson@neptunus.(none) +34 -14
    Add error handling of failure to start server to "run_testcase_start_servers"

ChangeSet@1.2273.98.21, 2006-10-06 16:40:00+02:00, msvensson@neptunus.(none) +1 -0
  Remove commented out testcases from disabled.def
  Remove the im_* test, they are fixed according to the referenced bugs
   

  mysql-test/t/disabled.def@1.207, 2006-10-06 16:39:57+02:00, msvensson@neptunus.(none) +0 -13
    Remove commented out testcases from disabled.def
    Remove the im_* test, they are fixed according to the referenced bugs
     

ChangeSet@1.1616.2798.3, 2006-10-06 16:26:17+02:00, msvensson@neptunus.(none) +3 -0
  Fix problem with specifying vardir, mysql_version_id was not yet available when vardir arguments is checked
  Move the code to look for exe_mysqld earlier => to initial_setup
  Fix warnings detected by running with "diagnostics"
  Remove unused option "opt_result_ext"
  Init "path_ndb_examples_dir"

  mysql-test/lib/mtr_cases.pl@1.6.2.7, 2006-10-06 16:26:16+02:00, msvensson@neptunus.(none) +3 -6
    Set default number of slave to 0
    Remove unused/uninitialized "$opt_result_ext"

  mysql-test/lib/mtr_report.pl@1.11.2.2, 2006-10-06 16:26:16+02:00, msvensson@neptunus.(none) +0 -7
    Remove unused/uninitialized "$opt_result_ext"

  mysql-test/mysql-test-run.pl@1.8.9.39, 2006-10-06 16:26:16+02:00, msvensson@neptunus.(none) +64 -44
    Fix problem with specifying vardir, mysql_version_id was not yet available when vardir arguments is checked
    Move the code to look for exe_mysqld earlier => to initial_setup
    Fix warnings detected by running with "diagnostics"
    Remove unused option "opt_result_ext"
    Init "path_ndb_examples_dir"

ChangeSet@1.1616.2769.6, 2006-10-06 16:05:46+02:00, jonas@perch.ndb.mysql.com +2 -0
  ndb - bug#22893
    Add checking of REDO to earlier during SR
        so take-over of node can be performed
        if it can't be restarted using logs
        (which btw is really weird...as it _should_ be able to use logs of other node in node group)
  
    Otherwise cluster could be started and 1 fragment on one node could not have been restored
    Making the cluster inconsisten, VERY BAD

  ndb/src/kernel/blocks/dbdih/Dbdih.hpp@1.6.1.5, 2006-10-06 16:05:44+02:00, jonas@perch.ndb.mysql.com +2 -0
    Break-out methods which searches for REDO for a fragment, so it can be used earlier during SR

  ndb/src/kernel/blocks/dbdih/DbdihMain.cpp@1.14.5.5, 2006-10-06 16:05:44+02:00, jonas@perch.ndb.mysql.com +90 -71
    Add checking of REDO to earlier during SR
      so take-over of node can be performed
      if it can't be restarted using logs
      (which btw is really weird...as it _should_ be able to use logs of other node in node group)
    

ChangeSet@1.1810.2078.32, 2006-10-06 14:15:03+02:00, msvensson@neptunus.(none) +1 -0
  Turn on reconnect

  mysql-test/t/im_daemon_life_cycle.imtest@1.1.2.1, 2006-10-06 14:15:00+02:00, msvensson@neptunus.(none) +3 -0
    Turn on reconnect

ChangeSet@1.1616.2793.40, 2006-10-06 13:33:12+02:00, msvensson@neptunus.(none) +1 -0
  Modify regex for parsing mysqld version as the mysqld is sometimes a libtool wrapper and
  the "mysqld --version" command will print "/path/.libs/lt-mysqld  Ver x.x.x"

  mysql-test/mysql-test-run.pl@1.8.9.38, 2006-10-06 13:33:07+02:00, msvensson@neptunus.(none) +3 -1
    Modify regex for parsing mysqld version as the mysqld is sometimes a libtool wrapper and
    the "mysqld --version" command will print "/path/.libs/lt-mysqld"

ChangeSet@1.1616.2793.39, 2006-10-06 12:46:21+02:00, msvensson@neptunus.(none) +1 -0
  Always need restart for im_* tests

  mysql-test/mysql-test-run.pl@1.8.9.37, 2006-10-06 12:46:19+02:00, msvensson@neptunus.(none) +5 -0
    Always need restart for im_* tests

ChangeSet@1.1616.2793.38, 2006-10-06 11:49:31+02:00, msvensson@neptunus.(none) +1 -0
  Only print thesort order debug printout if using script-debug  

  mysql-test/lib/mtr_cases.pl@1.6.2.6, 2006-10-06 11:49:29+02:00, msvensson@neptunus.(none) +6 -6
    Only print thesort order debug printout if using script-debug  

ChangeSet@1.1616.2780.5, 2006-10-06 13:34:07+04:00, kroki@moonlight.intranet +13 -0
  BUG#21726: Incorrect result with multiple invocations of LAST_INSERT_ID.
  
  Note: bug#21726 does not directly apply to 4.1, as it doesn't have stored
  procedures.  However, 4.1 had some bugs that were fixed in 5.0 by the
  patch for bug#21726, and this patch is a backport of those fixes.
  Namely, in 4.1 it fixes:
  
    - LAST_INSERT_ID(expr) didn't return value of expr (4.1 specific).
  
    - LAST_INSERT_ID() could return the value generated by current
      statement if the call happens after the generation, like in
  
        CREATE TABLE t1 (i INT AUTO_INCREMENT PRIMARY KEY, j INT);
        INSERT INTO t1 VALUES (NULL, 0), (NULL, LAST_INSERT_ID());
  
    - Redundant binary log LAST_INSERT_ID_EVENTs could be generated.

  mysql-test/r/rpl_insert_id.result@1.10.1.4, 2006-10-06 13:34:04+04:00, kroki@moonlight.intranet +27 -0
    Add result for bug#21726: Incorrect result with multiple invocations
    of LAST_INSERT_ID.

  mysql-test/t/rpl_insert_id.test@1.9.1.5, 2006-10-06 13:34:04+04:00, kroki@moonlight.intranet +32 -0
    Add test case for bug#21726: Incorrect result with multiple invocations
    of LAST_INSERT_ID.

  sql/item_func.cc@1.124.49.1, 2006-10-06 13:34:04+04:00, kroki@moonlight.intranet +28 -3
    Add implementation of Item_func_last_insert_id::fix_fields(), where we
    set THD::last_insert_id_used when statement calls LAST_INSERT_ID().
    In Item_func_last_insert_id::val_int(), return THD::current_insert_id
    if called like LAST_INSERT_ID(), otherwise return value of argument if
    called like LAST_INSERT_ID(expr).

  sql/item_func.h@1.68.23.1, 2006-10-06 13:34:04+04:00, kroki@moonlight.intranet +1 -0
    Add declaration of Item_func_last_insert_id::fix_fields().

  sql/log_event.cc@1.113.12.1, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +0 -1
    Do not set THD::last_insert_id_used on LAST_INSERT_ID_EVENT.  Though we
    know the statement will call LAST_INSERT_ID(), it wasn't called yet.

  sql/set_var.cc@1.34.68.1, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +6 -2
    In sys_var_last_insert_id::value_ptr(), set THD::last_insert_id_used,
    and return THD::current_insert_id for @@LAST_INSERT_ID.

  sql/sql_class.h@1.146.59.1, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +33 -15
    Update comments.
    Remove THD::insert_id(), as it has lost its purpose now.

  sql/sql_insert.cc@1.86.2.87, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +3 -5
    Now it is OK to read THD::last_insert_id directly.

  sql/sql_load.cc@1.46.3.41, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +4 -8
    Now it is OK to read THD::last_insert_id directly.

  sql/sql_parse.cc@1.271.1.218, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +6 -0
    In mysql_execute_command(), remember THD::last_insert_id (first
    generated value of the previous statement) in THD::current_insert_id,
    which then will be returned for LAST_INSERT_ID() and @@LAST_INSERT_ID.

  sql/sql_select.cc@1.216.140.2, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +9 -2
    If "IS NULL" is replaced with "= <LAST_INSERT_ID>", use right value,
    which is THD::current_insert_id, and also set THD::last_insert_id_used
    to issue binary log LAST_INSERT_ID_EVENT.

  sql/sql_update.cc@1.83.21.1, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +2 -2
    Now it is OK to read THD::last_insert_id directly.

  tests/mysql_client_test.c@1.51.1.120, 2006-10-06 13:34:05+04:00, kroki@moonlight.intranet +38 -0
    Add test case for bug#21726: Incorrect result with multiple invocations
    of LAST_INSERT_ID.

ChangeSet@1.1616.2793.37, 2006-10-06 11:23:19+02:00, msvensson@neptunus.(none) +2 -0
  Improve 'run_testcase_need_master_restart' to require restart if master is not already started
  Improve 'run_testcase_need_slave_restart' to detect if a slave restart really is necessary. 
  So far all rpl test requires a slave restart, but for all other tests it can be skipped
  Improve the sort order used by --reorder

  mysql-test/lib/mtr_cases.pl@1.6.2.5, 2006-10-06 11:23:18+02:00, msvensson@neptunus.(none) +18 -13
    Improve the sort order used by reorder

  mysql-test/mysql-test-run.pl@1.8.9.36, 2006-10-06 11:23:18+02:00, msvensson@neptunus.(none) +33 -50
    Improve 'run_testcase_need_master_restart' to require restart if master is not already started
    Improve 'run_testcase_need_slave_restart' to detect if a slave restart really is necessary. 
    So far all rpl test requires a slave restart, but for all other tests it can be skipped

ChangeSet@1.1616.2793.36, 2006-10-06 01:22:33+02:00, msvensson@neptunus.(none) +1 -0
  Rename "snapshot_setup" to "datadir_setup" as that is what is done by it.
  Move call f dunction into "initialize_servers" so it's called also
  in stress and bench mode

  mysql-test/mysql-test-run.pl@1.8.9.35, 2006-10-06 01:22:32+02:00, msvensson@neptunus.(none) +5 -3
    Rename "snapshot_setup" to "datadir_setup" as that is what is done by it.
    Move call f dunction into "initialize_servers" so it's called also
    in stress and bench mode

ChangeSet@1.1616.2793.35, 2006-10-06 00:57:10+02:00, msvensson@neptunus.(none) +3 -0
  Add printout of file in which warning was detected
  Cleanup .progress, .reject, .log and .warnings files produced by mysqltest

  client/mysqltest.c@1.92.21.11, 2006-10-06 00:57:08+02:00, msvensson@neptunus.(none) +12 -1
    Add printout of file in which warning was detected

  mysql-test/include/ctype_like_escape.inc@1.2, 2006-10-06 00:57:08+02:00, msvensson@neptunus.(none) +2 -2
    Remove warnings, convert -- comments to # comments

  mysql-test/mysql-test-run.pl@1.8.9.34, 2006-10-06 00:57:08+02:00, msvensson@neptunus.(none) +8 -7
    Cleanup all files produced by mysqltest before starting mysqltest again

ChangeSet@1.2273.105.22, 2006-10-06 00:36:25+02:00, msvensson@neptunus.(none) +1 -0
  Fix warning detected, file_exist => file_exists

  mysql-test/t/partition.test@1.44.6.3, 2006-10-06 00:36:22+02:00, msvensson@neptunus.(none) +1 -1
    Fix warning detected, file_exist => file_exists

ChangeSet@1.2273.105.21, 2006-10-06 00:11:25+02:00, msvensson@neptunus.(none) +1 -0
  partition test relies heavily on innodb, add "have_innodb" requirement

  mysql-test/t/partition.test@1.44.6.2, 2006-10-06 00:11:22+02:00, msvensson@neptunus.(none) +1 -0
    partition test relies heavily on innodb, add "have_innodb" requirement

ChangeSet@1.2273.105.20, 2006-10-06 00:07:39+02:00, msvensson@neptunus.(none) +1 -0
  Turn on reconnect before crashing server

  mysql-test/t/crash_commit_before.test@1.2.1.1, 2006-10-06 00:07:36+02:00, msvensson@neptunus.(none) +3 -0
    Turn on reconnect before crashing server

ChangeSet@1.2273.105.19, 2006-10-06 00:06:53+02:00, msvensson@neptunus.(none) +2 -0
  Update partition test to use the new command "file_exist"

  mysql-test/r/partition.result@1.49.11.1, 2006-10-06 00:06:50+02:00, msvensson@neptunus.(none) +5 -31
    Update partition test to use the new command "file_exist"

  mysql-test/t/partition.test@1.44.6.1, 2006-10-06 00:06:50+02:00, msvensson@neptunus.(none) +32 -18
    Update partition test to use the new command "file_exist"

ChangeSet@1.1616.2793.34, 2006-10-05 23:19:32+02:00, msvensson@neptunus.(none) +1 -0
  Add target to Makefile which uses the much faster --mem switch to mysql-test-run.pl

  Makefile.am@1.60.1.15, 2006-10-05 23:19:29+02:00, msvensson@neptunus.(none) +5 -0
    Add target to Makefile which uses the much faster --mem switch to mysql-test-run.pl

ChangeSet@1.1616.2793.33, 2006-10-05 22:29:16+02:00, msvensson@neptunus.(none) +1 -0
  Print the newly found version number in human readable format

  mysql-test/mysql-test-run.pl@1.8.9.33, 2006-10-05 22:29:14+02:00, msvensson@neptunus.(none) +3 -2
    Print the newly found version number in human readable format

ChangeSet@1.1616.2793.32, 2006-10-05 22:06:29+02:00, msvensson@neptunus.(none) +1 -0
  Open input file with "<" not ">>"

  mysql-test/lib/mtr_io.pl@1.3.2.2, 2006-10-05 22:06:28+02:00, msvensson@neptunus.(none) +1 -1
    Open input file with "<" not ">>"

ChangeSet@1.1616.2793.31, 2006-10-05 22:05:42+02:00, msvensson@neptunus.(none) +2 -0
  Add policy directive about keeping mysqltest framework tools identical in all versions

  client/mysqltest.c@1.92.21.10, 2006-10-05 22:05:41+02:00, msvensson@neptunus.(none) +2 -0
    Add policy directive about keeping mysqltest framework tools identical in all versions

  mysql-test/mysql-test-run.pl@1.8.9.32, 2006-10-05 22:05:41+02:00, msvensson@neptunus.(none) +18 -31
    Add policy directive about keeping mysqltest framework tools identical in all versions
    Cleanup the initial comment to reflect current state

ChangeSet@1.1616.2793.30, 2006-10-05 20:45:16+02:00, msvensson@neptunus.(none) +1 -0
  No need to pass --valgrind to mysqltest anymore, the simple task of
  creating an environment variable is handled directly from the perl code.  

  mysql-test/mysql-test-run.pl@1.8.9.31, 2006-10-05 20:45:13+02:00, msvensson@neptunus.(none) +5 -5
    No need to pass --valgrind to mysqltest anymore, the simple task of
    creating an environment variable is handled directly from the perl code.  

ChangeSet@1.1616.2793.29, 2006-10-05 20:21:11+02:00, msvensson@neptunus.(none) +1 -0
  Make use of $opt_mem" and let 4.1 allow --vardir to be set. Still relies on the var/ directory
  but having it on tmpfs gives a big speedup. 

  mysql-test/mysql-test-run.pl@1.8.9.30, 2006-10-05 20:21:10+02:00, msvensson@neptunus.(none) +4 -1
    Make use of opt_mem and let 4.1 allow vardir to be set. Still relies on the var/ directory
    but having it on tmpfs gives a big speedup. 

ChangeSet@1.1810.2202.4, 2006-10-05 22:07:21+04:00, petr@mysql.com +2 -0
  Fix Bug #19368 Failure in "flush_instances" causes assert in Thread_registry
  
  Stop guardian and all the rest of threads before shutdown in case of an error

  server-tools/instance-manager/instance_map.cc@1.26.1.2, 2006-10-05 22:07:17+04:00, petr@mysql.com +3 -1
    flush_instances shouldn't reinit guardian, if it
    failed to load info about them

  server-tools/instance-manager/manager.cc@1.32.1.3, 2006-10-05 22:07:17+04:00, petr@mysql.com +17 -1
    On error we should 1) stop guardian 2) terminate all
    other threads and exit

ChangeSet@1.1616.2793.28, 2006-10-05 18:29:59+02:00, msvensson@neptunus.(none) +6 -0
  Use same --slave-load-tmpdir in all versions(backport from 5.0)

  mysql-test/mysql-test-run.sh@1.208.1.61, 2006-10-05 18:29:56+02:00, msvensson@neptunus.(none) +1 -1
    Use same location for slave-load-tmpdir in all versions

  mysql-test/mysql-test-run.pl@1.8.9.29, 2006-10-05 18:29:56+02:00, msvensson@neptunus.(none) +0 -4
    Use same location for slave-load-tmpdir in all versions

  mysql-test/r/rpl_loaddata.result@1.20.1.2, 2006-10-05 18:29:56+02:00, msvensson@neptunus.(none) +1 -1
    Update result after changing slave-load-tmpdir to use a shorter path

  mysql-test/r/rpl_loaddatalocal.result@1.4.1.1, 2006-10-05 18:29:56+02:00, msvensson@neptunus.(none) +2 -2
    Update result after changing slave-load-tmpdir to use a shorter path

  mysql-test/r/rpl_log.result@1.50.1.6, 2006-10-05 18:29:57+02:00, msvensson@neptunus.(none) +6 -6
    Update result after changing slave-load-tmpdir to use a shorter path

  mysql-test/t/rpl_loaddatalocal.test@1.3.1.3, 2006-10-05 18:29:57+02:00, msvensson@neptunus.(none) +5 -3
    Use MYSQLTEST_VARDIR when specifying path to load from(backport from 5.0)
    Use new command "remove_file" instead of s"ystem rm"

ChangeSet@1.1616.2793.27, 2006-10-05 18:00:20+02:00, msvensson@neptunus.(none) +1 -0
  Bug #20010  	mysql-test-run.pl: --record and --require conflict (test fails)
  - When --record is passed to mysqltest the whole testcase should be executed
  as it normally is while the output form the test is acumulating
  in ds_res. When test has finished ds_res should simply be written to the
  specified result file(if any) instead of comapring it against the result file.
  Simplify handling of --require and also the cecking of result files by splitting
  check_result function into one  function 'check_require' that is specialised in
  checking require's and leave 'check_result' to do just that.
  - "mysqltest --record" has been considered unsafe, but with this really simple
  logic, it should be safe to use.

  client/mysqltest.c@1.92.21.9, 2006-10-05 18:00:19+02:00, msvensson@neptunus.(none) +95 -86
    When --record is passed to mysqltest the whole testcase should be executed
    as it normally is while the output form the test is acumulating
    in ds_res. When test has finished ds_res should simply be written to the
    specified result file(if any) instead of comapring it against the result file.
    Simplify handling of --require and also the cecking of result files by splitting
    check_result function into one  function 'check_require' that is specialised in
    checking require's and leave 'check_result' to do just that.

ChangeSet@1.2298.1.2, 2006-10-06 00:39:22+10:00, stewart@willster.(none) +3 -0
  BUG#23013 make INFORMATION_SCHEMA.FILES easily usable by other engines

  sql/ha_ndbcluster.cc@1.356.1.1, 2006-10-06 00:39:17+10:00, stewart@willster.(none) +97 -191
    update fill_files_table to match new way of doing things

  sql/mysql_priv.h@1.437.1.1, 2006-10-06 00:39:18+10:00, stewart@willster.(none) +39 -0
    defines for INFORMATION_SCHEMA.FILES column numbers
    add init_fill_schema_files_row()

  sql/sql_show.cc@1.360.1.2, 2006-10-06 00:39:18+10:00, stewart@willster.(none) +10 -0
    add init_fill_schema_files_row(TABLE*) to help engines with filling schema files.

ChangeSet@1.2273.105.13, 2006-10-05 14:38:57+02:00, msvensson@neptunus.(none) +1 -0
  Update result file, --skip-bdb is not passed to mysqld's started by im in 5.1

  mysql-test/r/im_utils.result@1.12, 2006-10-05 14:38:54+02:00, msvensson@neptunus.(none) +0 -2
    Update result file, --skip-bdb is not passed to mysqld's started by im in 5.1

ChangeSet@1.1616.2793.26, 2006-10-05 14:37:46+02:00, msvensson@neptunus.(none) +1 -0
  Add new option --mem to mysql-test-run.pl. It will automatically setup a symlink
  from var/ to a tmpfs area and thereby speed up the execution of the testsuite
   significantly

  mysql-test/mysql-test-run.pl@1.8.9.28, 2006-10-05 14:37:45+02:00, msvensson@neptunus.(none) +63 -8
    Add new option --mem to mysql-test-run.pl. It will automatically setup a symlink
    from var/ to a tmpfs area and thereby speed up the execution of the testsuite
    significantly

ChangeSet@1.1616.2793.25, 2006-10-05 13:45:50+02:00, msvensson@neptunus.(none) +1 -0
  5.0 is also using the somewhat larger config for cluster

  mysql-test/mysql-test-run.pl@1.8.9.27, 2006-10-05 13:45:49+02:00, msvensson@neptunus.(none) +2 -2
    5.0 is also using the somewhat larger config for cluster

ChangeSet@1.1616.2793.24, 2006-10-05 13:38:08+02:00, msvensson@neptunus.(none) +1 -0
  Add regex to detect the empty line that end the variable list. 
  Some variable names in 5.1 is soo long that there is no space inbetween 
  name and value. Outputing a warning about it, as that should probably be fixed.
  At least one space should be put between the name and value.

  mysql-test/mysql-test-run.pl@1.8.9.26, 2006-10-05 13:38:06+02:00, msvensson@neptunus.(none) +13 -3
    Add regex to detect the empty line that end the variable list. 
    Some variable names in 5.1 is soo long that there is no space inbetween 
    name and value. Outputing a warning about it, as that should probably be fixed.
    At least one space should be put between the name and value.

ChangeSet@1.1616.2793.23, 2006-10-05 13:09:06+02:00, msvensson@neptunus.(none) +1 -0
  Print warning message if test was failed becuase of cluster install failure
  Improve check of wheter test case need slave cluster

  mysql-test/mysql-test-run.pl@1.8.9.25, 2006-10-05 13:09:05+02:00, msvensson@neptunus.(none) +16 -13
    Print warning message if test was failed becuase of cluster install failure
    Improve check of wheter test case need slave cluster

ChangeSet@1.1810.2203.18, 2006-10-05 12:41:26+02:00, msvensson@neptunus.(none) +1 -0
  Add missing semicolon

  mysql-test/t/wait_timeout.test@1.1.1.7, 2006-10-05 12:41:23+02:00, msvensson@neptunus.(none) +1 -1
    Add missing semicolon

ChangeSet@1.1616.2793.22, 2006-10-05 12:28:23+02:00, msvensson@neptunus.(none) +2 -0
  Set the environment variable NDB_STATUS_OK to indicate that cluster is installed ok. This is actually not needed for this script as it will
  skip ndb tests if cluster install failed. But provided for compatibility

  mysql-test/include/have_ndb.inc@1.4.1.3, 2006-10-05 12:28:21+02:00, msvensson@neptunus.(none) +1 -0
    Revert

  mysql-test/mysql-test-run.pl@1.8.9.24, 2006-10-05 12:28:21+02:00, msvensson@neptunus.(none) +13 -0
    Set the environment variable NDB_STATUS_OK to indicate that cluster is installed ok. This is actually not needed for this script as it will
    skip ndb tests if cluster install failed. But provided for compatibility

ChangeSet@1.1616.2793.21, 2006-10-05 12:25:24+02:00, msvensson@neptunus.(none) +3 -0
  Improve "check_eol_junk" to detect junk although there are multi line comments in the way.
  I.e take advantage of the fact that a # comment is always terminated by a new line 
  Add tests for the above

  client/mysqltest.c@1.92.21.8, 2006-10-05 12:25:22+02:00, msvensson@neptunus.(none) +36 -8
    Improve "check_eol_junk" to detect junk although there are multi line comments in the way.
    I.e take advantage of the fact that a # comment is always terminated by a new line 

  mysql-test/r/mysqltest.result@1.3.1.15, 2006-10-05 12:25:22+02:00, msvensson@neptunus.(none) +17 -0
    Update resut file

  mysql-test/t/mysqltest.test@1.3.1.19, 2006-10-05 12:25:22+02:00, msvensson@neptunus.(none) +68 -6
    Add test for improved check_eol_junk

ChangeSet@1.2273.105.9, 2006-10-05 00:36:03+02:00, msvensson@neptunus.(none) +2 -0
  Update result file
  Get server version from mysqld

  mysql-test/r/lock_multi.result@1.27, 2006-10-05 00:36:01+02:00, msvensson@neptunus.(none) +1 -1
    Update result format to latest version of mysqltest, remove leading scpace from query that has been "send"

  mysql-test/t/rpl_truncate_7ndb.test@1.7, 2006-10-05 00:36:01+02:00, msvensson@neptunus.(none) +1 -0
    get server version from mysqld

ChangeSet@1.1616.2793.20, 2006-10-05 00:19:24+02:00, msvensson@neptunus.(none) +1 -0
  Fix detection of debug binaries. If mysqld ouputs "debug xx" in the variable list it's a debug binary

  mysql-test/mysql-test-run.pl@1.8.9.23, 2006-10-05 00:19:22+02:00, msvensson@neptunus.(none) +1 -1
    Fix detection of debug binaries. If mysqld ouputs "debug xx" in the variable list it's a debug binary

ChangeSet@1.1616.2793.19, 2006-10-05 00:12:54+02:00, msvensson@neptunus.(none) +1 -0
  Set the small configuration a little bit larger for 4.1

  mysql-test/mysql-test-run.pl@1.8.9.22, 2006-10-05 00:12:52+02:00, msvensson@neptunus.(none) +16 -5
    Set the small configuration a little bit larger for 4.1

ChangeSet@1.1810.2203.15, 2006-10-05 00:00:34+02:00, msvensson@neptunus.(none) +1 -0
  Update result file

  mysql-test/r/im_utils.result@1.1.1.5, 2006-10-05 00:00:32+02:00, msvensson@neptunus.(none) +2 -2
    Change order of ouput, skip-bdb is now after skip-ndbcluster

ChangeSet@1.1616.2793.18, 2006-10-04 23:57:31+02:00, msvensson@neptunus.(none) +1 -0
  Add skip-bdb to im defaults file in 5.0

  mysql-test/mysql-test-run.pl@1.8.9.21, 2006-10-04 23:57:29+02:00, msvensson@neptunus.(none) +4 -1
    Add skip-bdb to im defaults file in 5.0

ChangeSet@1.2273.105.7, 2006-10-04 23:48:24+02:00, msvensson@neptunus.(none) +5 -0
  Update test results to new mysqltest
  Remove extra space for "send" commands

  mysql-test/extra/rpl_tests/rpl_truncate_helper.test@1.5, 2006-10-04 23:48:21+02:00, msvensson@neptunus.(none) +1 -0
    Get $SERVER_VERSION from the mysqld

  mysql-test/r/flush_table.result@1.11, 2006-10-04 23:48:21+02:00, msvensson@neptunus.(none) +3 -3
    Remove extra space for "send" commands 

  mysql-test/r/handler_innodb.result@1.17, 2006-10-04 23:48:21+02:00, msvensson@neptunus.(none) +2 -2
    Remove extra space for "send" commands 

  mysql-test/r/lock_multi.result@1.26, 2006-10-04 23:48:21+02:00, msvensson@neptunus.(none) +12 -12
    Remove extra space for "send" commands 

  mysql-test/r/log_tables.result@1.8.1.1, 2006-10-04 23:48:21+02:00, msvensson@neptunus.(none) +2 -2
    Remove extra space for "send" commands 

ChangeSet@1.1616.2793.17, 2006-10-04 23:34:05+02:00, msvensson@neptunus.(none) +1 -0
  Update "get_errcode_from_name"
   - add missing DBUG_RETURN
   - Change type of st_error->code to uint, that should be more than enough
     to hold the error numbers between 1000 and around 2000

  client/mysqltest.c@1.92.21.7, 2006-10-04 23:34:03+02:00, msvensson@neptunus.(none) +4 -5
    Update "get_errcode_from_name"
     - add missing DBUG_RETURN
     - Change type of st_error->code to uint, that should be more than enough
       to hold the error numbers between 1000 and around 2000

ChangeSet@1.1810.2202.3, 2006-10-05 01:24:53+04:00, petr@mysql.com +2 -0
  Fix Bug #22472 IM: --socket option should be removed from Windows version
  the option is useless on windows. It was removed from listing of
  mysqlmanager --help on Windows

  server-tools/instance-manager/options.cc@1.30.2.3, 2006-10-05 01:24:47+04:00, petr@mysql.com +2 -2
    move socket_file_name under unix-specific define

  server-tools/instance-manager/options.h@1.14.1.2, 2006-10-05 01:24:47+04:00, petr@mysql.com +1 -1
    move socket_file_name under unix-specific define

ChangeSet@1.1616.2793.16, 2006-10-04 23:19:06+02:00, msvensson@neptunus.(none) +1 -0
  Only setup cmdline_myslslap if exe_mysqlslap defined

  mysql-test/mysql-test-run.pl@1.8.9.20, 2006-10-04 23:19:04+02:00, msvensson@neptunus.(none) +13 -10
    Only setup cmdline_myslslap if exe_mysqlslap defined

ChangeSet@1.1616.2793.15, 2006-10-04 23:15:04+02:00, msvensson@neptunus.(none) +1 -0
  Look for mysqlslap from 5.1, it's also available on windows

  mysql-test/mysql-test-run.pl@1.8.9.19, 2006-10-04 23:15:01+02:00, msvensson@neptunus.(none) +14 -13
    Look for mysqlslap from 5.1, it's also available on windows

ChangeSet@1.1616.2793.14, 2006-10-04 23:07:49+02:00, msvensson@neptunus.(none) +1 -0
  Use switch --old-log-format to mysqld started by im only in 5.1 and up 

  mysql-test/mysql-test-run.pl@1.8.9.18, 2006-10-04 23:07:47+02:00, msvensson@neptunus.(none) +4 -1
    Use switch --old-log-format to mysqld started by im only in 5.1 and up 

ChangeSet@1.1616.2793.13, 2006-10-04 23:05:12+02:00, msvensson@neptunus.(none) +1 -0
  Clean up de_before_start_master/slave

  mysql-test/mysql-test-run.pl@1.8.9.17, 2006-10-04 23:05:10+02:00, msvensson@neptunus.(none) +21 -36
    Clean up de_before_start_master/slave

ChangeSet@1.1616.2793.12, 2006-10-04 22:52:44+02:00, msvensson@neptunus.(none) +2 -0
  Use replace_regex to mask the output of file_id= in "show binlog events" that depends on previous tests
  What is this? replace_regex in 4.1! :)

  mysql-test/t/rpl_charset.test@1.2.1.6, 2006-10-04 22:52:42+02:00, msvensson@neptunus.(none) +2 -0
    Use replace_regex to mask the output of file_id= in "show binlog events" that depends on previous tests

  mysql-test/r/rpl_charset.result@1.4.1.5, 2006-10-04 22:52:42+02:00, msvensson@neptunus.(none) +2 -2
    Use replace_regex to mask the output of file_id= in "show binlog events" that depends on previous tests

ChangeSet@1.1616.2793.11, 2006-10-04 22:50:34+02:00, msvensson@neptunus.(none) +1 -0
  Set slave_load_path to ../../var/tmp in version prior to 5.0 to be compatible with mysql-test-run.sh

  mysql-test/mysql-test-run.pl@1.8.9.16, 2006-10-04 22:50:32+02:00, msvensson@neptunus.(none) +6 -1
    Set slave_load_path to ../../var/tmp in version prior to 5.0 to be compatible with mysql-test-run.sh

ChangeSet@1.1616.2793.10, 2006-10-04 19:21:22+02:00, msvensson@neptunus.(none) +1 -0
  Create the mysqld.spec file with a unique name in mysql-test dir, $opt_var_dir haven't been created yet

  mysql-test/mysql-test-run.pl@1.8.9.15, 2006-10-04 19:21:20+02:00, msvensson@neptunus.(none) +1 -1
    Create the mysqld.spec file with a unique name in mysql-test dir, $opt_var_dir haven't been created yet

ChangeSet@1.1616.2793.9, 2006-10-04 18:48:22+02:00, msvensson@neptunus.(none) +1 -0
  --ndb-extra-logging option to mysqld is not available until 5.1

  mysql-test/mysql-test-run.pl@1.8.9.14, 2006-10-04 18:48:20+02:00, msvensson@neptunus.(none) +2 -2
    --ndb-extra-logging option to mysqld is not available until 5.1

ChangeSet@1.1810.2209.1, 2006-10-04 11:19:23-04:00, cmiller@zippy.cornsilk.net +4 -0
  Bug#19356: Assert on undefined @uservar in prepared statement execute
  
  The executing code had a safety assertion so that it refused to free Items
  that it didn't create.  However, there is a case, undefined user variables,
  which would put Items into the list to be freed.
  
  Instead, do something that is more risky in expectation that the code will 
  be refactored soon, as Kostja wants to do:  Remove the assertions from 
  prepare() and execute().  Put one assertion at a higher level, before 
  stmt->set_params_from_vars(), which may then create new to-be-freed Items .

  BitKeeper/etc/collapsed@1.4.2.1, 2006-10-04 09:41:50-04:00, cmiller@zippy.cornsilk.net +2 -0

  mysql-test/r/ps_11bugs.result@1.5, 2006-10-04 11:19:21-04:00, cmiller@zippy.cornsilk.net +33 -0
    Create tests to prove that undefined variables work, as keys and not, and 
    that variables explicitly assigned to Null work.

  mysql-test/t/ps_11bugs.test@1.7, 2006-10-04 11:19:21-04:00, cmiller@zippy.cornsilk.net +34 -0
    Create tests to prove that undefined variables work, as keys and not, and 
    that variables explicitly assigned to Null work.

  sql/sql_prepare.cc@1.142.1.41, 2006-10-04 11:19:21-04:00, cmiller@zippy.cornsilk.net +27 -6
    Move a safety assertion up one level and higher, because there is 
    legitimately a case where thd->free_list is not NULL going into 
    Prepared_statement::{prepare,execute} methods.
    
    Kostja plans to refactor this code so that it is both safe and works.  
    (Now it works, but isn't very safe.)

ChangeSet@1.1810.2181.3, 2006-10-04 10:49:39-04:00, iggy@rolltop.ignatz42.dyndns.org +3 -0
  Bug #19024- SHOW COUNT(*) WARNINGS not return Errors
    
  The server variable warning_count should include the number of warnings, errors and notes according to the manual

  mysql-test/r/user_var.result@1.37.1.6, 2006-10-04 10:49:37-04:00, iggy@rolltop.ignatz42.dyndns.org +9 -0
    Added warning_count results.

  mysql-test/t/user_var.test@1.35.1.3, 2006-10-04 10:49:37-04:00, iggy@rolltop.ignatz42.dyndns.org +9 -1
    Added test case for warning_count.

  sql/set_var.cc@1.125.14.1, 2006-10-04 10:49:37-04:00, iggy@rolltop.ignatz42.dyndns.org +1 -0
    Added number errors to warning_count.

ChangeSet@1.1616.2793.8, 2006-10-04 16:28:23+02:00, msvensson@neptunus.(none) +2 -0
  Fixup the regex's parsing the mysqld's version and variables
  Add paths for ndb binaries
  Some more backport issues

  mysql-test/include/have_ndb.inc@1.4.1.2, 2006-10-04 16:28:21+02:00, msvensson@neptunus.(none) +0 -1
    Remove the check for NDB_STATUS_OK, handled by mysql-test-run.pl

  mysql-test/mysql-test-run.pl@1.8.9.13, 2006-10-04 16:28:21+02:00, msvensson@neptunus.(none) +78 -26
    Fixup the regex's parsing the mysqld's version and variables
    Add paths for ndb binaries
    Some more backport issues

ChangeSet@1.1616.2794.1, 2006-10-04 17:13:32+04:00, kaa@polly.local +8 -0
  Fixes a number of problems with time/datetime <-> string conversion functions:
  
  - bug #11655 "Wrong time is returning from nested selects - maximum time exists
  - input and output TIME values were not validated properly in several conversion functions
  - bug #20927 "sec_to_time treats big unsigned as signed"
  - integer overflows were not checked in several functions. As a result, input values like 2^32 or 3600*2^32 were treated as 0
  - BIGINT UNSIGNED values were treated as SIGNED in several functions
  - in cases where both input string truncation and out-of-range TIME value occur, only 'truncated incorrect time value' warning was produced

  include/my_time.h@1.5.1.3, 2006-10-04 17:13:30+04:00, kaa@polly.local +13 -1
    Added defines for the TIME limits
    Added defines for the warning flags set by str_to_time() and check_time_range()
    Added check_time_range() declaration

  mysql-test/r/func_sapdb.result@1.2.1.9, 2006-10-04 17:13:30+04:00, kaa@polly.local +11 -4
    Fixed testcases which relied on incorrect TIMEDIFF() behaviour

  mysql-test/r/func_time.result@1.23.9.1, 2006-10-04 17:13:30+04:00, kaa@polly.local +91 -1
    Fixed testcase which relied on incorrect behaviour
    Added testcases for out-of-range values in SEC_TO_TIME(), TIME_TO_SEC(), ADDTIME(), SUBTIME() and EXTRACT()

  mysql-test/t/func_time.test@1.21.8.1, 2006-10-04 17:13:30+04:00, kaa@polly.local +44 -1
    Added testcases for out-of-range values in SEC_TO_TIME(), TIME_TO_SEC(), ADDTIME(), SUBTIME() and EXTRACT()

  sql-common/my_time.c@1.6.1.10, 2006-10-04 17:13:30+04:00, kaa@polly.local +69 -22
    Added check_time_range() to be used from str_to_time() and item_timefunc.cc
    Added new out-of-range flag to str_to_time() warnings
    Use '%u' instead of '%d' in my_*_to_str() because the arguments are unsigned

  sql/field.cc@1.197.14.1, 2006-10-04 17:13:30+04:00, kaa@polly.local +17 -18
    Replaced out-of-range checks with checks for flags returned by str_to_time()

  sql/item_timefunc.cc@1.51.9.1, 2006-10-04 17:13:30+04:00, kaa@polly.local +181 -45
    Added wrappers over make_datetime() and make_time() which perform out-of-range checks on input values
    Moved common code in Item_func_sec_to_time::val_str() and Item_func_sec_to_time::val_int() into a separate function sec_to_time()
    Replaced calls to make_datetime() with make_datetime_with_warn() in Item_func_add_time and Item_func_timediff
    Checks for 'unsigned int' overflows in Item_func_maketime
    Use make_time_with_warn() instead of make_time() in Item_func_maketime
    Fixed incorrect sizeof() in Item_func_str_to_date::get_time()

  sql/time.cc@1.49.1.5, 2006-10-04 17:13:30+04:00, kaa@polly.local +3 -3
    Check for return value of str_to_time() along with warning flags

ChangeSet@1.1810.2203.7, 2006-10-04 13:09:37+02:00, msvensson@neptunus.(none) +23 -0
  Update tests and result files after running with new mysqltest that better detects problems with test files

  mysql-test/r/csv.result@1.4.1.2, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -2
    Update after add of missing semicolon

  mysql-test/r/drop.result@1.28.1.2, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +2 -2
    Update result file, no space before commands that has been "sent"

  mysql-test/r/flush.result@1.16, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +2 -2
    Update result file, no space before commands that has been "sent"

  mysql-test/r/flush_block_commit.result@1.9.1.2, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -1
    Update result file, no space before commands that has been "sent"

  mysql-test/r/flush_read_lock_kill.result@1.2, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -1
    Update result file, no space before commands that has been "sent"

  mysql-test/r/grant2.result@1.25.2.8, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +4 -4
    Update result file, no space before commands that has been "sent"

  mysql-test/r/handler.result@1.25.1.2, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +2 -2
    Update result file, no space before commands that has been "sent"

  mysql-test/r/innodb_notembedded.result@1.3, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -1
    Update result file, no space before commands that has been "sent"

  mysql-test/r/kill.result@1.16, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +2 -2
    Update result file, no space before commands that has been "sent"

  mysql-test/r/lock_multi.result@1.15.1.6, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +6 -6
    Update result file, no space before commands that has been "sent"

  mysql-test/r/multi_update.result@1.44.1.1, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +2 -2
    Update result file, no space before commands that has been "sent"

  mysql-test/r/mysqltest.result@1.24.5.2, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -1
    Update result

  mysql-test/r/query_cache.result@1.65.5.1, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -2
    Update after add of missing semicolon

  mysql-test/r/query_cache_notembedded.result@1.2.1.5, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -1
    Update result file, no space before commands that has been "sent"

  mysql-test/r/sp-threads.result@1.6.1.1, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +2 -2
    Update result file, no space before commands that has been "sent"

  mysql-test/r/sp_notembedded.result@1.3.1.2, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -2
    Update after add of missing semicolon

  mysql-test/r/type_blob.result@1.49.2.4, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +0 -1
    Remove extra drop table 

  mysql-test/t/csv.test@1.5.1.2, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -1
    Add missing semicolon

  mysql-test/t/query_cache.test@1.49.1.6, 2006-10-04 13:09:34+02:00, msvensson@neptunus.(none) +1 -1
    Add missing semicolon

  mysql-test/t/sp-error.test@1.100.1.9, 2006-10-04 13:09:35+02:00, msvensson@neptunus.(none) +1 -1
    Remove "tab" from end of error declaration

  mysql-test/t/sp.test@1.174.22.1, 2006-10-04 13:09:35+02:00, msvensson@neptunus.(none) +5 -5
    Wrong delimiter, used ; instead of |

  mysql-test/t/sp_notembedded.test@1.5.1.1, 2006-10-04 13:09:35+02:00, msvensson@neptunus.(none) +6 -6
    Wrong delimiter, used ; instead of |

  mysql-test/t/view_grant.test@1.8.1.9, 2006-10-04 13:09:35+02:00, msvensson@neptunus.(none) +1 -1
    An incomplete error name specification was used.

ChangeSet@1.1616.2793.7, 2006-10-04 12:47:32+02:00, msvensson@shellback.(none) +9 -0
  Backport from 5.1
   -Add support for detecting version and features from mysqld binary
   - Autodetect netware
   - Disable some features not available below 5.0
   - Cleanup executable_setup to look for one executable at a time, only llok for the ones that are needed based on the selected testcases and settings

  mysql-test/lib/mtr_cases.pl@1.6.2.4, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +296 -69
    Backport from 5.1

  mysql-test/lib/mtr_im.pl@1.1, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +761 -0
    New BitKeeper file ``mysql-test/lib/mtr_im.pl''

  mysql-test/lib/mtr_im.pl@1.0, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +0 -0

  mysql-test/lib/mtr_io.pl@1.3.2.1, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +60 -6
    Backport from 5.1
    Add new function mtr_appendfile_to_file

  mysql-test/lib/mtr_misc.pl@1.5.1.3, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +30 -10
    Backport from 5.1

  mysql-test/lib/mtr_process.pl@1.15.3.2, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +452 -223
    Backport from 5.1

  mysql-test/lib/mtr_report.pl@1.11.2.1, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +106 -31
    Backport from 5.1

  mysql-test/lib/mtr_stress.pl@1.1, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +178 -0
    New BitKeeper file ``mysql-test/lib/mtr_stress.pl''

  mysql-test/lib/mtr_stress.pl@1.0, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +0 -0

  mysql-test/mysql-test-run.pl@1.8.9.12, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +2686 -947
    Add support for detecting version and features from mysqld binary
    Autodetect netware
    Disable some features not available below 5.0
    Cleanup executable_setup to look for one executable at a time, only llok for the ones that are needed based on the selected testcases and settings

  mysql-test/r/mysqltest.result@1.3.1.14, 2006-10-04 12:47:30+02:00, msvensson@shellback.(none) +1 -1
    Update result

ChangeSet@1.1616.2793.6, 2006-10-04 12:27:05+02:00, msvensson@shellback.(none) +1 -0
  Don't print version in error message, just too messy to test 

  client/mysqltest.c@1.92.21.6, 2006-10-04 12:26:53+02:00, msvensson@shellback.(none) +1 -1
    Don't print version in error message, just too messy to test 

ChangeSet@1.1616.2769.5, 2006-10-04 12:05:24+02:00, jonas@perch.ndb.mysql.com +1 -0
  ndb - bug#22892
      Make sure checkKeepGci is also run on oldStoredReplicas
        to prevent keepgci to move backwards when crash node restarts

  ndb/src/kernel/blocks/dbdih/DbdihMain.cpp@1.14.5.4, 2006-10-04 12:05:23+02:00, jonas@perch.ndb.mysql.com +1 -0
    Make sure checkKeepGci is also run on oldStoredReplicas
      to prevent keepgci to move backwards when crash node restarts

ChangeSet@1.1810.2207.1, 2006-10-03 21:26:55-06:00, tsmith@siva.hindu.god +7 -0
  Bug #19764: SHOW commands end up in the slow log as table scans
  
  Set a flag when a SHOW command is parsed, and check it in log_slow_statement().  SHOW commands are not counted as slow queries, even if they use table scans.

  mysql-test/r/show_check.result@1.75.1.4, 2006-10-03 21:26:52-06:00, tsmith@siva.hindu.god +17 -0
    Add test for bug #19764

  mysql-test/t/show_check-master.opt@1.1, 2006-10-03 21:18:26-06:00, tsmith@siva.hindu.god +1 -0
    BitKeeper file /usr/home/tim/m/bk/b19764/50/mysql-test/t/show_check-master.opt

  mysql-test/t/show_check-master.opt@1.0, 2006-10-03 21:18:26-06:00, tsmith@siva.hindu.god +0 -0

  mysql-test/t/show_check.test@1.54.1.5, 2006-10-03 21:26:52-06:00, tsmith@siva.hindu.god +15 -2
    Add test for bug #19764

  sql/sql_lex.cc@1.142.1.60, 2006-10-03 21:26:52-06:00, tsmith@siva.hindu.god +1 -0
    Set lex->is_show_command= FALSE in lex_start

  sql/sql_lex.h@1.175.20.4, 2006-10-03 21:26:52-06:00, tsmith@siva.hindu.god +7 -0
    Add LEX->is_slow_command flag to prevent SHOW commands from being written to the slow queries log

  sql/sql_parse.cc@1.426.109.1, 2006-10-03 21:26:52-06:00, tsmith@siva.hindu.god +3 -3
    Don't log slow statement if it is a SHOW command

  sql/sql_yacc.yy@1.371.1.121, 2006-10-03 21:26:52-06:00, tsmith@siva.hindu.god +1 -0
    Set lex->is_show_command for all SHOW commands

ChangeSet@1.1616.2793.5, 2006-10-04 01:20:08+02:00, msvensson@neptunus.(none) +1 -0
  Add possibility to send warnings about suspicious commands in .test file to <result_file_name>.warnings file
  Move detection of "parsing enabled" to after command has been read.
  Cleanup parsing enabled/disabled
  

  client/mysqltest.c@1.92.21.5, 2006-10-04 01:20:07+02:00, msvensson@neptunus.(none) +167 -58
    Add possibility to send warnings about suspicious commands in .test file to <result_file_name>.warnings file
    Move detection of "parsing enabled" to after command has been read.
    Cleanup parsing enabled/disabled
    

ChangeSet@1.1616.2793.4, 2006-10-03 23:11:47+02:00, msvensson@neptunus.(none) +1 -0
  Fix problem when both option SSL and COMPRESS specified

  client/mysqltest.c@1.92.21.4, 2006-10-03 23:11:45+02:00, msvensson@neptunus.(none) +6 -1
    Fix problem when both option SSL and COMPRESS specified

ChangeSet@1.1810.2206.2, 2006-10-03 13:40:55-04:00, cmiller@zippy.cornsilk.net +1 -0
  The behavior of "%p" varies.  We prefer "0x%lx".

  vio/viosocket.c@1.37.4.1, 2006-10-03 13:40:51-04:00, cmiller@zippy.cornsilk.net +7 -7
    The behavior of "%p" varies.  We prefer "0x%lx".

ChangeSet@1.1810.2206.1, 2006-10-03 13:38:25-04:00, cmiller@zippy.cornsilk.net +9 -0
  Bug #14262: SP: DROP PROCEDURE|VIEW (maybe more) write to binlog too late \
  	(race cond)
  
  It was possible for one thread to interrupt a Data Definition Language 
  statement and thereby get messages to the binlog out of order.  Consider:
  
  Connection 1: Drop Foo x
  Connection 2: Create or replace Foo x
  Connection 2: Log "Create or replace Foo x"
  Connection 1: Log "Drop Foo x"
  
  Local end would have Foo x, but the replicated slaves would not.
  
  The fix for this is to wrap all DDL and logging of a kind in the same mutex.  
  Since we already use mutexes for the various parts of altering the server, 
  this only entails moving the logging events down close to the action, inside 
  the mutex protection.

  BitKeeper/etc/collapsed@1.1, 2006-10-03 13:35:49-04:00, cmiller@zippy.cornsilk.net +5 -0
    BitKeeper file /home/cmiller/work/mysql/bug14262/my50-bug14262/BitKeeper/etc/collapsed
    ---
    BitKeeper file /home/cmiller/work/mysql/bug14262/my50-bug14262/BitKeeper/etc/collapsed
    ---
    BitKeeper file /home/cmiller/work/mysql/bug14262/my50-bug14262/BitKeeper/etc/collapsed
    ---
    BitKeeper file /home/cmiller/work/mysql/bug14262/my50-bug14262/BitKeeper/etc/collapsed
    ---
    BitKeeper file /home/cmiller/work/mysql/bug14262/my50-bug14262/BitKeeper/etc/collapsed
    ---
    BitKeeper file /home/cmiller/work/mysql/bug14262/my50-bug14262/BitKeeper/etc/collapsed
    ---
    BitKeeper file /home/cmiller/work/mysql/bug14262/my50-bug14262/BitKeeper/etc/collapsed
    ---
    BitKeeper file /home/cmiller/work/mysql/bug14262/my50-bug14262/BitKeeper/etc/collapsed

  BitKeeper/etc/collapsed@1.0, 2006-10-03 13:35:49-04:00, cmiller@zippy.cornsilk.net +0 -0

  sql/sp.cc@1.82.21.1, 2006-10-03 13:38:22-04:00, cmiller@zippy.cornsilk.net +23 -0
    Move logging inside the routine drop and update functions, so it can be 
    protected by a LOCK_open mutex.  (The "create" function already had such 
    a LOCK_open protection.)

  sql/sql_acl.cc@1.128.40.1, 2006-10-03 13:38:22-04:00, cmiller@zippy.cornsilk.net +66 -1
    Move logging inside the grant functions, so that it can be protected by 
    LOCK_grant .

  sql/sql_db.cc@1.120.6.1, 2006-10-03 13:38:22-04:00, cmiller@zippy.cornsilk.net +5 -0
    Add comments that describe how each logging event is protected.

  sql/sql_parse.cc@1.426.108.1, 2006-10-03 13:38:23-04:00, cmiller@zippy.cornsilk.net +26 -92
    Move all logging statements about DDL statements close to the actual event, 
    so each can be protected by the same mutex.

  sql/sql_table.cc@1.239.34.1, 2006-10-03 13:38:23-04:00, cmiller@zippy.cornsilk.net +8 -7
    Widen the scope of the mutex so that logging events are also protected.

  sql/sql_trigger.cc@1.35.11.1, 2006-10-03 13:38:23-04:00, cmiller@zippy.cornsilk.net +5 -3
    Widen the scope of the mutex so that logging events are also protected.

  sql/sql_view.cc@1.78.12.1, 2006-10-03 13:38:23-04:00, cmiller@zippy.cornsilk.net +43 -4
    Pass the head of the table linked-list so we can create a logging statement.
    
    Move the logging statement inside the worker function, and notably inside 
    the LOCK_open mutex.  Widen the same mutex a little to make room for logging.

  sql/sql_view.h@1.11.2.1, 2006-10-03 13:38:23-04:00, cmiller@zippy.cornsilk.net +1 -1
    Pass the head of the table linked-list so we can create a logging statement.

ChangeSet@1.1616.2774.3, 2006-10-03 11:26:50-04:00, iggy@rolltop.ignatz42.dyndns.org +1 -0
  Bug#19660 mysqldump --single-transaction should be with CONSISTENT SNAPSHOT

  client/mysqldump.c@1.143.14.1, 2006-10-03 11:26:47-04:00, iggy@rolltop.ignatz42.dyndns.org +3 -5
    Bug#19660 mysqldump --single-transaction should be with CONSISTENT SNAPSHOT
    
    - Remove old BEGIN syntax and replace with START TRANSATION. Add CONSISTENT SNAPSHOT option for servers that support it.

ChangeSet@1.1810.2204.1, 2006-10-03 18:42:59+04:00, anozdrin@alik. +4 -0
  Patch for BUG#15934: im_daemon_life_cycle fails sporadically.
  
  The problem was a race condition in a test case.
  
  The fix eliminates the race condition by explicit
  wait on UNIX socket to start accepting connections.
  
  The patch affects only test suite (i.e. does not touch
  server codebase).

  mysql-test/mysql-test-run.pl@1.30.45.1, 2006-10-03 18:42:58+04:00, anozdrin@alik. +6 -0
    Expose necessary environment variables.

  mysql-test/r/im_daemon_life_cycle.result@1.2.1.5, 2006-10-03 18:42:58+04:00, anozdrin@alik. +1 -0
    Update result file.

  mysql-test/t/im_daemon_life_cycle.imtest@1.1.1.5, 2006-10-03 18:42:58+04:00, anozdrin@alik. +6 -0
    Wait for Instance Manager to start accepting connections
    after restart.

  mysql-test/t/wait_for_socket.sh@1.1, 2006-10-03 18:42:58+04:00, anozdrin@alik. +62 -0
    Helper script: waits for UNIX socket to start accepting connections.

  mysql-test/t/wait_for_socket.sh@1.0, 2006-10-03 18:42:58+04:00, anozdrin@alik. +0 -0

ChangeSet@1.1810.2203.3, 2006-10-03 16:35:46+02:00, msvensson@shellback.(none) +1 -0
  Add mysys/my_copy.c as sources for mysqltest

  client/Makefile.am@1.52.1.7, 2006-10-03 16:35:43+02:00, msvensson@shellback.(none) +3 -1
    Add mysys/my_copy.c as sources for mysqltest

ChangeSet@1.1616.2793.3, 2006-10-03 16:34:44+02:00, msvensson@shellback.(none) +1 -0
  Fix typo
  - Change con_host to ds_connection_name.str

  client/mysqltest.c@1.92.21.3, 2006-10-03 16:34:42+02:00, msvensson@shellback.(none) +1 -1
    Change con_host to ds_connection_name.str

ChangeSet@1.1810.2203.1, 2006-10-03 15:59:56+02:00, msvensson@shellback.(none) +3 -0
  Delete files now moved into mysqltest.test

  BitKeeper/deleted/.del-mysqltest_while.inc@1.2, 2006-10-02 12:35:13+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/include/mysqltest_while.inc

  BitKeeper/deleted/.del-sourced.inc@1.2, 2006-10-02 11:43:42+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/include/sourced.inc

  BitKeeper/deleted/.del-sourced1.inc@1.2, 2006-10-02 21:13:01+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/include/sourced1.inc

ChangeSet@1.1616.2793.2, 2006-10-03 15:48:41+02:00, msvensson@shellback.(none) +2 -0
  Add two new result files

  mysql-test/r/init_file.result@1.1, 2006-10-03 15:48:39+02:00, msvensson@shellback.(none) +2 -0
    Add new file init_file.result

  mysql-test/r/init_file.result@1.0, 2006-10-03 15:48:39+02:00, msvensson@shellback.(none) +0 -0

  mysql-test/r/mysql_client_test.result@1.1, 2006-10-03 15:48:39+02:00, msvensson@shellback.(none) +1 -0
    Add new file mysql_client_test.result

  mysql-test/r/mysql_client_test.result@1.0, 2006-10-03 15:48:39+02:00, msvensson@shellback.(none) +0 -0

ChangeSet@1.1616.2793.1, 2006-10-03 15:33:44+02:00, msvensson@shellback.(none) +50 -0
  Update mysqltest to latest version
   - ie. backport from 5.1
   - also update testcase error dected by new version

  mysql-test/r/ps_6bdb.result@1.2.1.26, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +2 -0
    Update result as the output from query is now printed

  BitKeeper/deleted/.del-rpl000018.result@1.8.1.1, 2006-10-02 21:11:23+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/r/rpl000018.result

  BitKeeper/deleted/.del-rpl000018.test@1.10.1.2, 2006-10-02 21:11:31+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/t/rpl000018.test

  BitKeeper/deleted/.del-rpl_chain_temp_table.result@1.2.1.1, 2006-10-02 20:54:04+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/r/rpl_chain_temp_table.result

  BitKeeper/deleted/.del-rpl_chain_temp_table.test@1.5.1.1, 2006-10-02 20:53:57+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/t/rpl_chain_temp_table.test

  BitKeeper/deleted/.del-rpl_failsafe.result@1.8.1.1, 2006-10-02 20:54:35+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/r/rpl_failsafe.result

  BitKeeper/deleted/.del-rpl_failsafe.test@1.9.1.1, 2006-10-02 20:54:42+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/t/rpl_failsafe.test

  BitKeeper/deleted/.del-rpl_heap.result@1.4.1.1, 2006-10-02 20:59:02+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/r/rpl_heap.result

  BitKeeper/deleted/.del-rpl_heap.test@1.2.1.5, 2006-10-02 20:58:56+02:00, msvensson@shellback.(none) +0 -0
    Delete: mysql-test/t/rpl_heap.test

  mysql-test/include/show_msg.inc@1.1, 2006-10-02 15:09:20+02:00, msvensson@shellback.(none) +25 -0
    BitKeeper file /home/msvensson/mysql/same_tools/my41-same_tools/mysql-test/include/show_msg.inc

  mysql-test/include/show_msg.inc@1.0, 2006-10-02 15:09:20+02:00, msvensson@shellback.(none) +0 -0

  mysql-test/include/show_msg80.inc@1.1, 2006-10-02 15:09:22+02:00, msvensson@shellback.(none) +118 -0
    BitKeeper file /home/msvensson/mysql/same_tools/my41-same_tools/mysql-test/include/show_msg80.inc

  mysql-test/include/show_msg80.inc@1.0, 2006-10-02 15:09:22+02:00, msvensson@shellback.(none) +0 -0

  client/Makefile.am@1.32.1.14, 2006-10-03 15:33:40+02:00, msvensson@shellback.(none) +3 -1
    Link mysqltest with mysys/my_copy.c

  client/mysqltest.c@1.92.21.2, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +4620 -2598
    Update mysqltest to latest version

  mysql-test/t/rpl_flush_tables.test@1.5.1.4, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +2 -0
    Fetch $SERVER_VERSION from the db server

  mysql-test/include/have_multi_ndb.inc@1.1.1.1, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +8 -4
    Remove old syntax "@filename" in favor of "--require filename"

  mysql-test/include/master-slave.inc@1.11.1.1, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +4 -2
    Remove old syntax "@filename" in favor of "--require filename"

  mysql-test/include/ps_query.inc@1.11.1.1, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +0 -1
    Remove the comment about no output now when it does.

  mysql-test/r/mix_innodb_myisam_binlog.result@1.6.1.8, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/check.result@1.4.1.1, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/connect.result@1.1.1.12, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +20 -0
    Update result file for connect test after backport form 5.1

  mysql-test/r/flush.result@1.11.1.2, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +2 -2
    Update output from --send

  mysql-test/r/flush_block_commit.result@1.4.1.2, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +3 -3
    Update output from --send

  mysql-test/r/func_misc.result@1.16.1.5, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/grant2.result@1.8.8.3, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +4 -4
    Update output from --send

  mysql-test/r/handler.result@1.23.1.1, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/kill.result@1.3.1.6, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/lock_multi.result@1.9.1.2, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +6 -6
    Update output from --send

  mysql-test/r/mysqltest.result@1.3.1.13, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +169 -25
    Update mysqltest.result after backport

  mysql-test/r/ps_2myisam.result@1.2.1.26, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +2 -0
    Update result as the output from query is now printed

  mysql-test/r/ps_3innodb.result@1.2.1.27, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +2 -0
    Update result as the output from query is now printed

  mysql-test/r/ps_4heap.result@1.1.1.26, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +2 -0
    Update result as the output from query is now printed

  mysql-test/r/ps_5merge.result@1.2.1.25, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +4 -0
    Update result as the output from query is now printed

  mysql-test/r/ps_7ndb.result@1.10.1.12, 2006-10-03 15:33:41+02:00, msvensson@shellback.(none) +2 -0
    Update result as the output from query is now printed

  mysql-test/r/rename.result@1.7.1.3, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/rpl_error_ignored_table.result@1.8.1.6, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/rpl_master_pos_wait.result@1.6.2.1, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/rpl000001.result@1.27.2.1, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -1
    Update output from --send

  mysql-test/r/subselect.result@1.67.65.3, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -2
    Update result file after adding missing ;

  mysql-test/r/synchronization.result@1.2.1.1, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +20 -20
    Update output from --send

  mysql-test/r/type_blob.result@1.40.1.6, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -2
    Update result file after adding missing ;

  mysql-test/t/connect.test@1.9.1.5, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +43 -40
    Backport test from 5.1

  mysql-test/t/init_file.test@1.6.1.1, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +3 -2
    Update test so something is printed

  mysql-test/t/mysql_client_test.test@1.14.2.2, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +3 -3
    Update test so result is sent to file and something is printed 

  mysql-test/t/mysqltest.test@1.3.1.18, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +696 -49
    Backport latest mysqltest.test file

  mysql-test/t/ps.test@1.27.3.1, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +3 -3
    Move the --replace_column statement to just before the statetement it should replace 

  mysql-test/t/ps_1general.test@1.3.1.14, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -1
    Move the --replace_column statement to just before the statetement it should replace 

  mysql-test/t/ps_grant.test@1.2.1.4, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -1
    Remove the $DB, no other test uses it

  mysql-test/t/rpl_trunc_temp.test@1.1.1.1, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +0 -3
    Remove the selection of connection master after it's been disconnected already

  mysql-test/t/subselect.test@1.58.46.3, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -1
    Add missing ; 

  mysql-test/t/type_blob.test@1.23.1.3, 2006-10-03 15:33:42+02:00, msvensson@shellback.(none) +1 -1
    Add missing ;

ChangeSet@1.1616.2791.2, 2006-10-03 14:11:57+05:00, bar@mysql.com +4 -0
  Bug#22052 Trailing spaces are not removed from UNICODE fields in an index
    Fix: using charset-aware functions cs->cset->lengthsp() and cs->cset->fill()
    instead of single byte code which is not UCS2 compatible.

  mysql-test/r/ctype_ucs.result@1.11.1.24, 2006-10-03 14:11:54+05:00, bar@mysql.com +22 -0
    Adding test case

  mysql-test/t/ctype_ucs.test@1.15.1.20, 2006-10-03 14:11:54+05:00, bar@mysql.com +18 -0
    Adding test case

  myisam/mi_key.c@1.32.1.7, 2006-10-03 14:11:54+05:00, bar@mysql.com +8 -7
    Using character-set aware functions to trim and append spaces.
    

  myisam/mi_open.c@1.80.2.6, 2006-10-03 14:11:54+05:00, bar@mysql.com +2 -0
    Initialize charset for BINARY/VARBINARY to my_charset_bin,
        instead of NULL
    

ChangeSet@1.2273.70.18, 2006-10-02 15:52:29-04:00, mikael@dator5.(none) +8 -0
  BUG#18198: Partition function handling
  Fixes of after review fixes

  mysql-test/r/partition_hash.result@1.6, 2006-10-02 15:52:26-04:00, mikael@dator5.(none) +14 -0
    Fixed test cases

  mysql-test/r/partition_range.result@1.20, 2006-10-02 15:52:26-04:00, mikael@dator5.(none) +6 -6
    Fixed test cases

  mysql-test/t/partition_range.test@1.16, 2006-10-02 15:52:26-04:00, mikael@dator5.(none) +6 -6
    Fixed test cases

  sql/ha_ndbcluster.cc@1.348.12.1, 2006-10-02 15:52:26-04:00, mikael@dator5.(none) +7 -0
    Fixed error printout to avoid complex character set code in print_error

  sql/ha_partition.cc@1.76, 2006-10-02 15:52:26-04:00, mikael@dator5.(none) +4 -0
    Fixed error printout to avoid complex character set code in print_error

  sql/partition_info.cc@1.29, 2006-10-02 15:52:26-04:00, mikael@dator5.(none) +1 -1
    Fixed error printout to avoid complex character set code in print_error

  sql/partition_info.h@1.19, 2006-10-02 15:52:27-04:00, mikael@dator5.(none) +3 -2
    Fixed error printout to avoid complex character set code in print_error

  sql/sql_partition.cc@1.93, 2006-10-02 15:52:27-04:00, mikael@dator5.(none) +2 -2
    indendentation fix

ChangeSet@1.1810.2198.1, 2006-10-02 12:37:01+02:00, Kristofer.Pettersson@naruto. +5 -0
  Bug#21811 Odd casting with date + INTERVAL arithmetic
  - Type casting was not consequent, thus when adding a DATE type with
    a WEEK interval the result type was DATETIME and not DATE as is the
    norm.
  - By changing the order of the date internal enumerations the deviant
    type casting is resolved (Item_date_add_interval::fix_length_and_dec()
    which determines result type for this operation assumes that addition
    of any interval with value <= INTERVAL_DAY to date value will result
    in date). There are two independant places to change:
    interval_names[] and interval_type.

  mysql-test/r/func_date_add.result@1.10, 2006-10-02 12:36:56+02:00, Kristofer.Pettersson@naruto. +14 -0
    Updated result file for type casting test

  mysql-test/r/func_time.result@1.47.12.1, 2006-10-02 12:36:56+02:00, Kristofer.Pettersson@naruto. +2 -2
    Updated result file for type casting test

  mysql-test/t/func_date_add.test@1.9, 2006-10-02 12:36:57+02:00, Kristofer.Pettersson@naruto. +14 -1
    Added test for type casting when adding intervals to date.

  sql/item_timefunc.cc@1.100.10.1, 2006-10-02 12:36:57+02:00, Kristofer.Pettersson@naruto. +6 -2
    Changed order of "week" key word to match the date interval enumeration.

  sql/item_timefunc.h@1.63.1.6, 2006-10-02 12:36:58+02:00, Kristofer.Pettersson@naruto. +11 -8
    Changed the order of the enumeration to better follow interval sizes.

ChangeSet@1.2273.70.17, 2006-10-02 05:54:30-04:00, mikael@dator5.(none) +1 -0
  Bug fix

  sql/sql_partition.cc@1.92, 2006-10-02 05:54:28-04:00, mikael@dator5.(none) +4 -4
    Bug fix

ChangeSet@1.2273.1.37, 2006-10-01 16:05:53+02:00, pekka@orca.ndb.mysql.com +2 -0
  ndb - bug#21191: test pgm: testIndexStat

  storage/ndb/test/ndbapi/Makefile.am@1.33, 2006-10-01 16:04:20+02:00, pekka@orca.ndb.mysql.com +4 -1
    test records in range

  storage/ndb/test/ndbapi/testIndexStat.cpp@1.2, 2006-10-01 16:04:20+02:00, pekka@orca.ndb.mysql.com +1406 -0
    test records in range

  storage/ndb/test/ndbapi/testIndexStat.cpp@1.1, 2006-09-24 18:19:46+02:00, pekka@orca.ndb.mysql.com +0 -0
    BitKeeper file /export/home/space/pekka/ndb/version/my51-bug21191/storage/ndb/test/ndbapi/testIndexStat.cpp

  storage/ndb/test/ndbapi/testIndexStat.cpp@1.0, 2006-09-24 18:19:46+02:00, pekka@orca.ndb.mysql.com +0 -0

ChangeSet@1.1810.2195.1, 2006-10-01 16:36:26+05:00, holyfoot@mysql.com +3 -0
  bug #21790 (UNKNOWN ERROR message in geometry)
  
  We issued UNKNOWN ERROR initially in this place and forgot to
  fix it when we implemented informative error message for this

  mysql-test/r/gis-rtree.result@1.14.3.1, 2006-10-01 16:36:23+05:00, holyfoot@mysql.com +8 -0
    test result

  mysql-test/t/gis-rtree.test@1.17.1.1, 2006-10-01 16:36:23+05:00, holyfoot@mysql.com +12 -0
    test case

  sql/handler.cc@1.167.1.54, 2006-10-01 16:36:23+05:00, holyfoot@mysql.com +2 -2
    let's issue informative error message here

ChangeSet@1.2273.70.16, 2006-09-30 17:38:15-04:00, mikael@dator5.(none) +6 -0
  BUG#18198: Partition function handling
  Review fixes

  mysql-test/r/partition_range.result@1.19, 2006-09-30 17:38:13-04:00, mikael@dator5.(none) +34 -0
    New test cases

  mysql-test/t/partition_hash.test@1.6, 2006-09-30 17:38:13-04:00, mikael@dator5.(none) +12 -0
    New test cases

  mysql-test/t/partition_range.test@1.15, 2006-09-30 17:38:13-04:00, mikael@dator5.(none) +43 -0
    New test cases

  sql/item.h@1.212, 2006-09-30 17:38:13-04:00, mikael@dator5.(none) +11 -3
    Review fixes

  sql/partition_info.cc@1.28, 2006-09-30 17:38:13-04:00, mikael@dator5.(none) +5 -4
    Review fixes

  sql/sql_partition.cc@1.91, 2006-09-30 17:38:13-04:00, mikael@dator5.(none) +11 -2
    Review fixes

ChangeSet@1.1616.2784.2, 2006-09-29 20:02:53+04:00, evgen@moonbone.local +3 -0
  Fixed bug#20825: rollup puts non-equal values together
  
  Fix for bug 7894 replaces a field(s) in a non-aggregate function with a item
  reference if such a field was specified in the GROUP BY clause in order to
  get a correct result.
  When ROLLUP is involved this lead to a wrong result due to value of a such
  field is got through a copy function and copying happens after the function
  evaluation.
  Such replacement isn't needed if grouping is also done by such a function.
  
  The change_group_ref() function now isn't called for a function present in
  the group list.

  mysql-test/r/olap.result@1.11.1.12, 2006-09-29 20:02:29+04:00, evgen@moonbone.local +15 -0
    Added the test case for the bug#20825:  rollup puts non-equal values together

  mysql-test/t/olap.test@1.12.1.8, 2006-09-29 20:02:28+04:00, evgen@moonbone.local +9 -0
    Added the test case for the bug#20825:  rollup puts non-equal values together

  sql/sql_select.cc@1.216.125.11, 2006-09-29 20:02:30+04:00, evgen@moonbone.local +6 -1
    Fixed bug#20825: rollup puts non-equal values together
    The change_group_ref() function now isn't called for a function present in
    the group list.

ChangeSet@1.1810.2163.3, 2006-09-29 07:43:25-07:00, igor@rurik.mysql.com +3 -0
  Fixed bug #22753.
  After the patch for big 21698 equality propagation stopped
  working for BETWEEN and IN predicates with STRING arguments.
  This changeset completes the solution of the above patch.

  mysql-test/r/select.result@1.121.5.1, 2006-09-29 07:43:18-07:00, igor@rurik.mysql.com +29 -0
    Added a test case for bug #22735.

  mysql-test/t/select.test@1.102.2.1, 2006-09-29 07:43:18-07:00, igor@rurik.mysql.com +28 -1
    Added a test case for bug #22735.

  sql/item_cmpfunc.h@1.122.5.1, 2006-09-29 07:43:18-07:00, igor@rurik.mysql.com +1 -0
    Fixed bug #22753.
    After the patch for big 21698 equality propagation stopped
    working for BETWEEN and IN predicates with STRING arguments.
    This changeset completes the solution of the above patch.
    
    Added an implementation of the subst_argument_checker method
    for Item_func_opt_neg (the direct ancestor of Item_func_between
    and Item_func_in) which allows equality propagation for
    BETWEEN and IN predicates. 

ChangeSet@1.1616.2781.2, 2006-09-29 17:56:02+05:00, holyfoot@mysql.com +3 -0
  bug #21888 (Query on GEOMETRY field crashes the server)
  
  RTree keys are really different from BTree and need specific
  paramters to be set by optimizer to work.
  Sometimes optimizer doesn't set those properly.
  Here we decided just to add code to check that the parameters
  are correct. Hope to fix optimizer sometimes.

  mysql-test/r/gis-rtree.result@1.8.1.6, 2006-09-29 17:56:00+05:00, holyfoot@mysql.com +11 -0
    test result

  mysql-test/t/gis-rtree.test@1.9.1.5, 2006-09-29 17:56:00+05:00, holyfoot@mysql.com +10 -0
    test case

  myisam/mi_range.c@1.12.1.1, 2006-09-29 17:56:00+05:00, holyfoot@mysql.com +15 -0
    return the error if min_key is NULL

ChangeSet@1.2273.105.4, 2006-09-29 11:39:54+02:00, msvensson@shellback.(none) +1 -0
  No need to spcify start_lineno in die message, that is automatic

  client/mysqltest.c@1.227.1.3, 2006-09-29 11:39:50+02:00, msvensson@shellback.(none) +16 -16
    No need to spcify start_lineno in die message, that is automatic

ChangeSet@1.2241.1.16, 2006-09-29 11:32:40+02:00, msvensson@shellback.(none) +3 -0
  Add possibility to specify which delimiter to read until in "write_file" and "perl" commands
  fix memory leaks reported by valgrind

  client/mysqltest.c@1.214.1.9, 2006-09-29 11:32:35+02:00, msvensson@shellback.(none) +53 -19
    Add possibility to specify which delimiter to read until in "write_file" and "perl" commands
    fix memory leaks reported by valgrind

  mysql-test/r/mysqltest.result@1.41.1.1, 2006-09-29 11:32:35+02:00, msvensson@shellback.(none) +4 -0
    Update result file

  mysql-test/t/mysqltest.test@1.52.1.1, 2006-09-29 11:32:35+02:00, msvensson@shellback.(none) +26 -0
    Add tests for specifying delimiter

ChangeSet@1.1810.2189.1, 2006-09-29 12:16:07+05:00, holyfoot@mysql.com +3 -0
  bug #16813 (WITH CHECK OPTION fails with UPDATE)
  
  We use the condition from CHECK OPTION twice handling UPDATE command.
  First we construnct 'update_cond' AND 'option_cond'
  condition to select records to be updated, then we check the
  'option_cond' for the updated row.
  The problem is that first 'AND' condition is optimized during the 'select'
  which can break 'option_cond' structure, so it will be unusable for
  the sectond use - to check the updated row.
  Possible soultion is either use copy of the condition in the first
  use or to make optimization less traumatic for the operands.
  I picked the first one. 

  mysql-test/r/view.result@1.138.21.1, 2006-09-29 12:16:04+05:00, holyfoot@mysql.com +10 -0
    result fixed

  mysql-test/t/view.test@1.126.20.1, 2006-09-29 12:16:04+05:00, holyfoot@mysql.com +15 -0
    testcase

  sql/table.cc@1.160.36.1, 2006-09-29 12:16:04+05:00, holyfoot@mysql.com +3 -2
    now we use the copy of the CHECK OPTION condition to construct
    the select's condition

ChangeSet@1.1810.2185.1, 2006-09-29 00:50:00+04:00, evgen@moonbone.local +3 -0
  Fixed bug#20503: Server crash due to the ORDER clause not taken into account
  while space allocation
  
  Under some circumstances DISTINCT clause can be converted to grouping.
  In such cases grouping is performed by all items in the select list.
  If an ORDER clause is present then items from it is prepended to group list.
  But the case with ORDER wasn't taken into account when allocating the
  array for sum functions. This leads to memory corruption and crash.
  
  The JOIN::alloc_func_list() function now allocates additional space if there
  is an ORDER by clause is specified and DISTINCT -> GROUP BY optimization is
  possible.

  mysql-test/r/select.result@1.121.1.18, 2006-09-29 00:48:52+04:00, evgen@moonbone.local +6 -0
    Added the test case for bug#20503: Server crash due to the ORDER clause not taken into account while space allocation

  mysql-test/t/select.test@1.102.1.11, 2006-09-29 00:47:37+04:00, evgen@moonbone.local +10 -1
    Added the test case for bug#20503: Server crash due to the ORDER clause not taken into account while space allocation

  sql/sql_select.cc@1.312.95.3, 2006-09-29 00:49:11+04:00, evgen@moonbone.local +12 -0
    Fixed bug#20503: Server crash due to the ORDER clause not taken into account
    while space allocation
    The JOIN::alloc_func_list() function now allocates additional space if there
    is an ORDER by clause is specified and DISTINCT -> GROUP BY optimization is
    possible.

ChangeSet@1.2273.77.7, 2006-09-28 18:51:27+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +5 -0
  bug#22027: CREATE TABLE IF NOT EXISTS SELECT logged improperly with rbr binlog,
  and #22762: create talbe if not exists like a-temp-table binlogged w/o "if not exists"
      These are rbr bugs.
      store_create_info, which generates the create statement e.g for binlogging,
      did not account a lex option HA_LEX_CREATE_IF_NOT_EXISTS.
      
      The fix makes the generated query to include the parent's statement option
  if
    that was supplied.

  mysql-test/extra/binlog_tests/binlog.test@1.14, 2006-09-28 18:51:24+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +13 -0
    test cases for #22027, #22762

  mysql-test/r/binlog_row_binlog.result@1.9, 2006-09-28 18:51:24+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +27 -0
    results changed

  mysql-test/r/binlog_row_mix_innodb_myisam.result@1.13, 2006-09-28 18:51:24+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +1 -1
    results changed because of the test's query has "if not exists"

  mysql-test/r/binlog_stm_binlog.result@1.16, 2006-09-28 18:51:24+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +21 -0
    results changed

  sql/sql_show.cc@1.362.1.1, 2006-09-28 18:51:24+03:00, aelkin@dsl-hkigw8-feb9fb00-191.dhcp.inet.fi +3 -0
    store_create_info inserts "if not exists" into output when an input query contains
    the qualifier.

ChangeSet@1.1616.2700.14, 2006-09-28 23:41:37+10:00, stewart@willster.(none) +10 -0
  BUG#19914 SELECT COUNT(*) sometimes returns MAX_INT on cluster tables
  
  post-review fixes as indicated by Serg.
  
  manual testing of error cases done in 5.0 due to support for DBUG_EXECUTE_IF
  to insert errors.
  Unable to write test case for mysql-test until 5.1 due to support for setting
  debug options at runtime.

  sql/ha_isam.cc@1.29.5.1, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +2 -1
    update for handler::info() now returning int

  sql/ha_isam.h@1.28.2.1, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +1 -1
    update for handler::info() now returning int

  sql/ha_isammrg.cc@1.15.5.1, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +2 -1
    update for handler::info() now returning int

  sql/ha_isammrg.h@1.22.2.1, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +1 -1
    update for handler::info() now returning int

  sql/item_sum.cc@1.89.1.60, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +9 -1
    update for handler::info() now returning int.
    
    return error to user if info call fails

  sql/sql_delete.cc@1.99.2.41, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +6 -1
    update for handler::info() now returning int.
    
    return error to user if info call fails

  sql/sql_select.cc@1.216.137.4, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +6 -1
    update for handler::info() now returning int.
    
    return error to user if info call fails

  sql/sql_union.cc@1.74.1.72, 2006-09-28 23:41:34+10:00, stewart@willster.(none) +6 -1
    update for handler::info() now returning int.
    
    return error to user if info call fails

  sql/ha_blackhole.cc@1.2.1.11, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +2 -2
    update for handler::info() now returning int

  sql/ha_blackhole.h@1.3.1.2, 2006-09-28 23:41:33+10:00, stewart@willster.(none) +1 -1
    update for handler::info() now returning int

ChangeSet@1.1810.2177.1, 2006-09-28 15:13:40+02:00, msvensson@neptunus.(none) +7 -0
  Bug#22436 Four tests require "innodb" to be configured, fail in "classic" build
   - Disable warnings when creating the "innodb" tables if it works anyway.
   - Move test that are really innodb dependent to innodb_mysql 

  mysql-test/t/innodb_mysql.test@1.3.4.4, 2006-09-28 15:13:37+02:00, msvensson@neptunus.(none) +8 -0
    Move the innodb dependent test to innodb_mysql.test

  mysql-test/r/create.result@1.107.6.1, 2006-09-28 15:13:37+02:00, msvensson@neptunus.(none) +0 -6
    Move the innodb dependent test to innodb_mysql.test

  mysql-test/r/innodb_mysql.result@1.3.5.1, 2006-09-28 15:13:37+02:00, msvensson@neptunus.(none) +6 -0
    Move the innodb dependent test to innodb_mysql.test

  mysql-test/t/create.test@1.71.4.1, 2006-09-28 15:13:37+02:00, msvensson@neptunus.(none) +0 -8
    Move the innodb dependent test to innodb_mysql.test

  mysql-test/t/lock_multi.test@1.13.1.5, 2006-09-28 15:13:37+02:00, msvensson@neptunus.(none) +3 -0
    Disable warnings while creating the innodb table. If innodb is not available, the table will be created with default engine and thus create a warning. Regardless of this, test output should be the same.

  mysql-test/t/sp.test@1.174.21.1, 2006-09-28 15:13:37+02:00, msvensson@neptunus.(none) +3 -0
    Disable warnings while creating the innodb table. If innodb is not available, the table will be created with default engine and thus create a warning. Regardless of this, test output should be the same.

  mysql-test/t/view.test@1.126.18.1, 2006-09-28 15:13:37+02:00, msvensson@neptunus.(none) +5 -0
    Disable warnings while creating the innodb table. If innodb is not available, the table will be created with default engine and thus create a warning. Regardless of this, test output should be the same.

ChangeSet@1.2273.85.4, 2006-09-26 16:30:39-04:00, mikael@dator5.(none) +6 -0
  Final step of Take 7 on review fixes of this
  fairly complex bug

  mysql-test/r/partition.result@1.53, 2006-09-26 16:30:36-04:00, mikael@dator5.(none) +0 -5
    Merge fix

  sql/partition_info.cc@1.27, 2006-09-26 16:30:36-04:00, mikael@dator5.(none) +167 -1
    Moved method from sql_partition.cc to the partition_info class

  sql/partition_info.h@1.18, 2006-09-26 16:30:36-04:00, mikael@dator5.(none) +12 -6
    Introduced a number of charset related arrays
    Removed some bools that could be checked by checking arrays instead

  sql/sql_partition.cc@1.90, 2006-09-26 16:30:36-04:00, mikael@dator5.(none) +57 -138
    Introduced a number of charset related arrays
    Removed some bools that could be checked by checking arrays instead
    Made method of common complex if-statement
    Made that method and check of partition function fields public methods
    to enable use from partition_info class.
    Moved method to partition_info class
    Optimised copy_to_part_field_buffers method to avoid as much as possible
    calculations in those. Also avoided double calls when both subpartitioning
    and partitioning
    Handled review comments

  sql/sql_partition.h@1.10.1.1, 2006-09-26 16:30:36-04:00, mikael@dator5.(none) +3 -0
    New methods public for use in partition_info class

  sql/sql_yacc.yy@1.502.1.2, 2006-09-26 16:30:36-04:00, mikael@dator5.(none) +2 -3
    Missed this in previous merge and review fixes

ChangeSet@1.2273.85.3, 2006-09-26 02:30:40-04:00, mikael@dator5.(none) +1 -0
  BUG#18198
  Fixed interface to check_partition_func_processor

  sql/partition_info.cc@1.26, 2006-09-26 02:30:38-04:00, mikael@dator5.(none) +7 -15
    Fixed interface to check_partition_func_processor

ChangeSet@1.2273.85.2, 2006-09-26 02:25:23-04:00, mikael@dator5.(none) +6 -0
  BUG#18198
  Review comments

  sql/item.h@1.210, 2006-09-26 02:25:20-04:00, mikael@dator5.(none) +34 -17
    Added comment after review

  sql/item_cmpfunc.h@1.134, 2006-09-26 02:25:20-04:00, mikael@dator5.(none) +14 -15
    Changed to either return TRUE or FALSE (check_partition_func_processor)

  sql/item_func.h@1.148, 2006-09-26 02:25:20-04:00, mikael@dator5.(none) +30 -30
    Changed to either return TRUE or FALSE (check_partition_func_processor)

  sql/item_strfunc.h@1.120, 2006-09-26 02:25:20-04:00, mikael@dator5.(none) +14 -14
    Changed to either return TRUE or FALSE (check_partition_func_processor)

  sql/item_timefunc.h@1.75, 2006-09-26 02:25:20-04:00, mikael@dator5.(none) +30 -30
    Changed to either return TRUE or FALSE (check_partition_func_processor)

  sql/item_xmlfunc.h@1.6, 2006-09-26 02:25:21-04:00, mikael@dator5.(none) +1 -1
    Changed to either return TRUE or FALSE (check_partition_func_processor)

ChangeSet@1.2255.1.5, 2006-09-26 01:38:17-04:00, mikael@dator5.(none) +1 -0
  Fixed bugs in check_part_func_fields

  sql/sql_partition.cc@1.88, 2006-09-26 01:38:15-04:00, mikael@dator5.(none) +1 -4
    Fixed bugs in check_part_func_fields

ChangeSet@1.1810.2166.1, 2006-09-25 16:44:15+02:00, msvensson@neptunus.(none) +5 -0
  Bug#21868 Server crashes if encrypted certificate key provided
   - Add test case which runs the same tests as ssl.test but with a different DES encrypted key 

  mysql-test/r/ssl_des.result@1.1, 2006-09-25 16:44:13+02:00, msvensson@neptunus.(none) +2159 -0
    New BitKeeper file ``mysql-test/r/ssl_des.result''

  mysql-test/r/ssl_des.result@1.0, 2006-09-25 16:44:13+02:00, msvensson@neptunus.(none) +0 -0

  mysql-test/std_data/server-cert-des.pem@1.1, 2006-09-25 16:43:17+02:00, msvensson@neptunus.(none) +16 -0
    BitKeeper file /home/msvensson/mysql/bug21868/my50-bug21868/mysql-test/std_data/server-cert-des.pem

  mysql-test/std_data/server-cert-des.pem@1.0, 2006-09-25 16:43:17+02:00, msvensson@neptunus.(none) +0 -0

  mysql-test/std_data/server-key-des.pem@1.1, 2006-09-25 16:43:13+02:00, msvensson@neptunus.(none) +18 -0
    BitKeeper file /home/msvensson/mysql/bug21868/my50-bug21868/mysql-test/std_data/server-key-des.pem

  mysql-test/std_data/server-key-des.pem@1.0, 2006-09-25 16:43:13+02:00, msvensson@neptunus.(none) +0 -0

  mysql-test/t/ssl_des-master.opt@1.1, 2006-09-25 16:44:13+02:00, msvensson@neptunus.(none) +1 -0
    New BitKeeper file ``mysql-test/t/ssl_des-master.opt''

  mysql-test/t/ssl_des-master.opt@1.0, 2006-09-25 16:44:13+02:00, msvensson@neptunus.(none) +0 -0

  mysql-test/t/ssl_des.test@1.1, 2006-09-25 16:44:13+02:00, msvensson@neptunus.(none) +19 -0
    New BitKeeper file ``mysql-test/t/ssl_des.test''

  mysql-test/t/ssl_des.test@1.0, 2006-09-25 16:44:13+02:00, msvensson@neptunus.(none) +0 -0

ChangeSet@1.2273.52.14, 2006-09-22 20:58:16+02:00, msvensson@shellback.(none) +2 -0
  Immediately skip tests that need innodb if mysqld does not support it

  mysql-test/lib/mtr_cases.pl@1.34.1.1, 2006-09-22 20:58:10+02:00, msvensson@shellback.(none) +7 -0
    immediately skip tests that need innodb if mysqld does not support it

  mysql-test/mysql-test-run.pl@1.167.2.6, 2006-09-22 20:58:10+02:00, msvensson@shellback.(none) +22 -0
    Check if innodb is supported

ChangeSet@1.1616.2765.3, 2006-09-21 16:54:54+02:00, mskold@mysql.com +1 -0
  Bug #21072  Duplicate key error in NDB references wrong key: wrong indent for code block

  sql/handler.cc@1.103.19.18, 2006-09-21 16:54:46+02:00, mskold@mysql.com +2 -2
    Bug #21072  Duplicate key error in NDB references wrong key: wrong indent for code block

ChangeSet@1.1616.2765.2, 2006-09-21 16:49:07+02:00, mskold@mysql.com +5 -0
  Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key

  mysql-test/r/ndb_charset.result@1.3.1.2, 2006-09-21 16:48:31+02:00, mskold@mysql.com +2 -2
    Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key

  mysql-test/r/ndb_index_unique.result@1.11.1.2, 2006-09-21 16:48:31+02:00, mskold@mysql.com +5 -5
    Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key

  mysql-test/r/ndb_update.result@1.2.1.3, 2006-09-21 16:48:32+02:00, mskold@mysql.com +1 -1
    Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key

  sql/ha_ndbcluster.cc@1.114.23.4, 2006-09-21 16:48:31+02:00, mskold@mysql.com +8 -1
    Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key

  sql/handler.cc@1.103.19.17, 2006-09-21 16:48:31+02:00, mskold@mysql.com +15 -5
    Bug #21072  Duplicate key error in NDB references wrong key: use MAX_KEY to signal unknown key

ChangeSet@1.2273.57.11, 2006-09-19 11:40:21-04:00, mikael@dator5.(none) +1 -0
  Close the DDL log from 2 places => put into separate method
  Needed to close ddl log in recovery before deleting it

  sql/sql_table.cc@1.359.5.2, 2006-09-19 11:40:18-04:00, mikael@dator5.(none) +22 -5
    Close the DDL log from 2 places => put into separate method
    Needed to close ddl log in recovery before deleting it

ChangeSet@1.2273.62.1, 2006-09-19 02:56:02-04:00, mikael@dator5.(none) +2 -0
  BUG#22178: Scan ordered performed also on engines not supporting ordered scans
  Scan of ranges without start key should not use ordered scans unless it
  is requested.

  sql/ha_partition.cc@1.72.1.2, 2006-09-19 02:56:00-04:00, mikael@dator5.(none) +16 -1
    Scan of ranges without start key should not use ordered scans unless it
    is requested.

  sql/ha_partition.h@1.28, 2006-09-19 02:56:00-04:00, mikael@dator5.(none) +4 -3
    Scan of ranges without start key should not use ordered scans unless it
    is requested.

ChangeSet@1.1346.883.1, 2006-09-18 22:02:06+04:00, kroki@moonlight.intranet +4 -0
  BUG#9678: Client library hangs after network communication failure
            (back-port to 4.0)
  
  Socket timeouts in client library were used only on Windows.
  Additionally, in 4.0 write operations erroneously set read timeout.
  
  The solution is to use socket timeouts in client library on all
  systems were they are supported, and to differentiate between read
  and write timeouts.
  
  No test case is provided because it is impossible to simulate network
  failure in current test suite.

  libmysqld/lib_vio.c@1.11.3.1, 2006-09-18 22:02:04+04:00, kroki@moonlight.intranet +1 -0
    Add argument to vio_timeout() to determine which timeout should be set:
    for read (false) or for write (true).

  include/violite.h@1.21.3.8, 2006-09-18 22:02:04+04:00, kroki@moonlight.intranet +3 -3
    Add argument to vio_timeout() to determine which timeout should be set:
    for read (false) or for write (true).

  sql/net_serv.cc@1.46.1.19, 2006-09-18 22:02:04+04:00, kroki@moonlight.intranet +2 -2
    Add argument to vio_timeout() to determine which timeout should be set:
    for read (false) or for write (true).

  vio/viosocket.c@1.15.1.8, 2006-09-18 22:02:04+04:00, kroki@moonlight.intranet +20 -6
    Add argument to vio_timeout() to determine which timeout should be set:
    for read (false) or for write (true).
    Implement socket timeouts on POSIX systems.

ChangeSet@1.2273.45.8, 2006-09-14 23:29:44-06:00, tsmith@siva.hindu.god +5 -0
  Remove unused (and incorrect) my_lread() and my_lwrite()

  BitKeeper/deleted/.del-my_lread.c@1.7, 2006-09-14 23:27:02-06:00, tsmith@siva.hindu.god +0 -0
    Delete: mysys/my_lread.c

  BitKeeper/deleted/.del-my_lwrite.c@1.8, 2006-09-14 23:26:56-06:00, tsmith@siva.hindu.god +0 -0
    Delete: mysys/my_lwrite.c

  mysys/CMakeLists.txt@1.9, 2006-09-14 23:29:41-06:00, tsmith@siva.hindu.god +1 -1
    Remove unused (and incorrect) my_lread() and my_lwrite()

  mysys/Makefile.am@1.84, 2006-09-14 23:29:41-06:00, tsmith@siva.hindu.god +1 -1
    Remove unused (and incorrect) my_lread() and my_lwrite()

  mysys/make-ccc@1.3, 2006-09-14 23:29:41-06:00, tsmith@siva.hindu.god +1 -1
    Remove unused (and incorrect) my_lread() and my_lwrite()

ChangeSet@1.1346.882.1, 2006-09-14 23:19:24-06:00, tsmith@siva.hindu.god +6 -0
  Bug #4053: too many of "error 1236: 'binlog truncated in the middle of event' from master"
  
  - Fix my_read/my_write to handle return values from read/write correctly
  - Add debugging 'deprecated function' warning to my_lread/my_lwrite
  - Add debugging 'error, read/write interrupt not handled' warning to my_quick_read/my_quick_write
  
  There is no test case associated with these changes.  However, this is a conservative change,
  and no repeatable test case is available.

  mysys/my_lread.c@1.6, 2006-09-14 23:19:23-06:00, tsmith@siva.hindu.god +2 -0
    Warn about using deprecated function.

  mysys/my_lwrite.c@1.5.1.1, 2006-09-14 23:19:23-06:00, tsmith@siva.hindu.god +2 -0
    Warn about using deprecated function.

  mysys/my_pread.c@1.8.1.2, 2006-09-14 23:19:23-06:00, tsmith@siva.hindu.god +8 -4
    Handle interrupted read() or write() (EINTR) properly

  mysys/my_quick.c@1.5, 2006-09-14 23:19:23-06:00, tsmith@siva.hindu.god +25 -1
    Warn about interrupted read() or write(), which is not
    handled by my_quick_read() or my_quick_write().

  mysys/my_read.c@1.6.2.1, 2006-09-14 23:19:24-06:00, tsmith@siva.hindu.god +6 -2
    Handle interrupted read() (EINTR) properly

  mysys/my_write.c@1.8.1.3, 2006-09-14 23:19:24-06:00, tsmith@siva.hindu.god +13 -7
    Handle interrupted write() (EINTR) properly

ChangeSet@1.1616.2768.1, 2006-09-14 21:06:14-06:00, tsmith@siva.hindu.god +1 -0
  Bug #4053: too many of "error 1236: 'binlog truncated in the middle of event' from master"
  - Detect read failure in my_read_charset_file

  mysys/charset.c@1.135.1.9, 2006-09-14 21:05:03-06:00, tsmith@siva.hindu.god +9 -6
    Use my_read instead of read(), and detect read failure, in my_read_charset_file()

ChangeSet@1.1616.2144.173, 2006-09-14 10:05:07+05:00, bar@mysql.com +2 -0
  Better comment text (thanks to SergeyP for suggestions made for the b#20471 patch)

  include/m_ctype.h@1.102.1.7, 2006-09-14 10:05:02+05:00, bar@mysql.com +1 -1
    Better comment text (thanks to SergeyP for suggestions made for the b#20471 patch)

  strings/ctype-mb.c@1.34.1.10, 2006-09-14 10:05:02+05:00, bar@mysql.com +14 -7
    Better comment text (thanks to SergeyP for suggestions made for the b#20471 patch)

ChangeSet@1.2273.1.36, 2006-09-13 12:46:26+02:00, pekka@orca.ndb.mysql.com +1 -0
  ndb - bug#21191: ndb-index-stat-enable: one more suspicious default

  sql/mysqld.cc@1.564.16.2, 2006-09-13 12:45:09+02:00, pekka@orca.ndb.mysql.com +1 -1
    global_system_variables.ndb_index_stat_enable=FALSE

ChangeSet@1.2273.1.35, 2006-09-13 12:27:48+02:00, pekka@orca.ndb.mysql.com +2 -0
  ndb - bug#21191: ndb index stats OFF by default

  mysql-test/r/ndb_index_ordered.result@1.24, 2006-09-13 12:26:15+02:00, pekka@orca.ndb.mysql.com +2 -2
    ndb_index_stat_enable default = OFF
    remove other ndb_index_stat% from mysqld options (too many)

  sql/mysqld.cc@1.564.16.1, 2006-09-13 12:26:15+02:00, pekka@orca.ndb.mysql.com +1 -14
    ndb_index_stat_enable default = OFF
    remove other ndb_index_stat% from mysqld options (too many)

ChangeSet@1.1616.2763.1, 2006-09-12 00:19:05+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +7 -0
  BUG#19402 SQL close to the size of the max_allowed_packet fails on the slave
  
  A communication packet can also be a binlog event sent from the master to the slave.
  To be sent by master dump and accepted by slave io thread both have to have
  the value of max_allowed_packet bigger than one that client connection had.
  
  In the patch there is the MAX possible replicatio header size estimation for events
  in binlog that embedded user query. Only these events of query_log_event type, i.e
  just plain queries, require attention. 

  mysql-test/r/rpl_packet.result@1.1, 2006-09-12 00:19:02+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +21 -0
    BitKeeper file /home/elkin/MySQL/TEAM/FIXES/4.1/bug19402-max_allowed/mysql-test/r/rpl_packet.result

  mysql-test/r/rpl_packet.result@1.0, 2006-09-12 00:19:02+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +0 -0

  mysql-test/t/rpl_packet-master.opt@1.1, 2006-09-12 00:19:02+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +1 -0
    BitKeeper file /net/koti/usr_rh9/home/elkin.rh9/MySQL/TEAM/FIXES/4.1/bug19402-max_allowed/mysql-test/t/rpl_packet-master.opt

  mysql-test/t/rpl_packet-master.opt@1.0, 2006-09-12 00:19:02+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +0 -0

  mysql-test/t/rpl_packet-slave.opt@1.1, 2006-09-12 00:19:02+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +1 -0
    BitKeeper file /net/koti/usr_rh9/home/elkin.rh9/MySQL/TEAM/FIXES/4.1/bug19402-max_allowed/mysql-test/t/rpl_packet-slave.opt

  mysql-test/t/rpl_packet-slave.opt@1.0, 2006-09-12 00:19:02+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +0 -0

  mysql-test/t/rpl_packet.test@1.1, 2006-09-12 00:19:02+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +40 -0
    test examines repliation of a max-sized query when database name is set to have
    NAME_LEN bytes. This makes replication header size the maximum.

  mysql-test/t/rpl_packet.test@1.0, 2006-09-12 00:19:02+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +0 -0

  sql/log_event.h@1.90.1.10, 2006-09-12 00:19:01+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +6 -0
    MAX value of the header of the replication packet, i.e the value of exceeding
    the query string part.

  sql/slave.cc@1.188.19.1, 2006-09-12 00:19:01+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +10 -4
    Private value of max allowed packet slave io, sql threads can accept from master.
    The value is increased by the MAX possible size of replication event header.
    
    Note, that my_net_init is redundant for slave io because the thread uses instance of
    NET struct, embedded into MYSQL, as a client to server. We have left old code and even
    increment, redundantly as well, thd->net.max_packet_size just for the sake of
    consistency. TODO: eliminate my_net_init from execution path of slave io.

  sql/sql_repl.cc@1.102.9.1, 2006-09-12 00:19:01+03:00, aelkin@dsl-hkigw8-fe00f800-98.dhcp.inet.fi +2 -0
    Increasing the private max allowed packet that the dump thread reads from master
    binlog and sends to net. Note, that happened prior this writting to binlog is
    safe from the current artifact because it is done by steps that each chunk can not
    exceed @@global.max_allowed_packet.

ChangeSet@1.1616.2761.1, 2006-09-11 14:50:46+05:00, gluh@mysql.com +4 -0
  Bug#20922 mysql removes a name of first column in a table
  0xFF is internal separator for SET|ENUM names. 
  If this symbol is present in SET|ENUM names then we replace it with 
  ','(deprecated symbol for SET|ENUM names) during frm creation
  and restore to 0xFF during frm opening

  mysql-test/r/type_enum.result@1.24.1.2, 2006-09-11 14:50:43+05:00, gluh@mysql.com +9 -0
    Bug#20922 mysql removes a name of first column in a table
    test case

  mysql-test/t/type_enum.test@1.16, 2006-09-11 14:50:43+05:00, gluh@mysql.com +9 -0
    Bug#20922 mysql removes a name of first column in a table
    test case

  sql/table.cc@1.111.4.7, 2006-09-11 14:50:43+05:00, gluh@mysql.com +15 -1
    Bug#20922 mysql removes a name of first column in a table
    Replace all ',' symbols with NAMES_SEP_CHAR in interval names.

  sql/unireg.cc@1.43.1.7, 2006-09-11 14:50:43+05:00, gluh@mysql.com +15 -0
    Bug#20922 mysql removes a name of first column in a table
    if NAMES_SEP_CHAR symbols are present in interval name
    then replace all NAMES_SEP_CHAR symbols with ','

ChangeSet@1.2273.30.1, 2006-09-08 05:57:37-04:00, mikael@dator5.(none) +1 -0
  Need to set symbolic-links=1 for valgrind builds for the partition test

  mysql-test/t/partition-master.opt@1.1, 2006-09-08 05:50:38-04:00, mikael@dator5.(none) +1 -0
    BitKeeper file /home/pappa/valgrind_test/mysql-test/t/partition-master.opt

  mysql-test/t/partition-master.opt@1.0, 2006-09-08 05:50:38-04:00, mikael@dator5.(none) +0 -0

ChangeSet@1.2273.16.2, 2006-09-08 03:18:05-04:00, mikael@dator5.(none) +8 -0
  Rearranged test cases, move InnoDB test cases to partition_innodb

  mysql-test/r/partition.result@1.49.8.1, 2006-09-08 03:17:59-04:00, mikael@dator5.(none) +0 -37
    Rearranged test cases, move InnoDB test cases to partition_innodb

  mysql-test/r/partition_error.result@1.8.1.3, 2006-09-08 03:17:59-04:00, mikael@dator5.(none) +0 -24
    Rearranged test cases, move InnoDB test cases to partition_innodb

  mysql-test/r/partition_innodb.result@1.2, 2006-09-08 03:17:59-04:00, mikael@dator5.(none) +71 -0
    Rearranged test cases, move InnoDB test cases to partition_innodb

  mysql-test/r/partition_range.result@1.15.1.2, 2006-09-08 03:17:59-04:00, mikael@dator5.(none) +0 -10
    Rearranged test cases, move InnoDB test cases to partition_innodb

  mysql-test/t/partition.test@1.44.5.1, 2006-09-08 03:17:59-04:00, mikael@dator5.(none) +0 -37
    Rearranged test cases, move InnoDB test cases to partition_innodb

  mysql-test/t/partition_error.test@1.10.1.2, 2006-09-08 03:17:59-04:00, mikael@dator5.(none) +0 -17
    Rearranged test cases, move InnoDB test cases to partition_innodb

  mysql-test/t/partition_innodb.test@1.3, 2006-09-08 03:17:59-04:00, mikael@dator5.(none) +68 -0
    Rearranged test cases, move InnoDB test cases to partition_innodb

  mysql-test/t/partition_range.test@1.11.1.2, 2006-09-08 03:17:59-04:00, mikael@dator5.(none) +0 -12
    Rearranged test cases, move InnoDB test cases to partition_innodb

ChangeSet@1.1810.2103.3, 2006-09-07 16:44:18+02:00, msvensson@neptunus.(none) +2 -0
  Bug#17039 Cursor with procedure crashes client
   - Change 'get_unit_column_type" to return the field list for the procedure

  sql/sql_union.cc@1.130.1.3, 2006-09-07 16:44:13+02:00, msvensson@neptunus.(none) +13 -2
    Change 'get_unit_column_type' to return the procedure field list if this is the execution of a procedure.

  tests/mysql_client_test.c@1.167.21.1, 2006-09-07 16:44:13+02:00, msvensson@neptunus.(none) +14 -0
    Add test case for using "procedure" in cursor.

ChangeSet@1.2273.16.1, 2006-09-04 11:18:34-04:00, mikael@dator5.(none) +1 -0
  BUG#21210: ALTER TABLE t1 REORGANIZE PARTITION crashes when using InnoDB
  Inserted wrong handlers into the new_file_array which later caused
  havoc in rename_partitions

  sql/ha_partition.cc@1.71.1.1, 2006-09-04 11:18:32-04:00, mikael@dator5.(none) +9 -1
    Inserted wrong handlers into the new_file_array which later caused
    havoc in rename_partitions

ChangeSet@1.1616.2700.11, 2006-08-10 22:55:20+08:00, stewart@willster.(none) +21 -0
  BUG#19914 SELECT COUNT(*) sometimes returns MAX_INT on cluster tables
  
  allow handler::info to return an error code (that will be returned to the user)

  sql/ha_berkeley.cc@1.117.1.37, 2006-08-10 22:55:17+08:00, stewart@willster.(none) +2 -2
    update handler::info interface to return int

  sql/ha_berkeley.h@1.57.1.13, 2006-08-10 22:55:17+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

  sql/ha_ndbcluster.cc@1.114.3.75, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +16 -9
    update handler::info interface to return int

  sql/ha_ndbcluster.h@1.40.7.1, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +2 -2
    update handler::info interface to return int

  sql/handler.h@1.89.19.13, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

  sql/opt_sum.cc@1.33.7.1, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +6 -1
    If we get an error when using handler::info to get count(*),
    print and return the error.

  sql/sql_select.cc@1.216.133.1, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +2 -0
    if error, set fatal error.

  sql/examples/ha_archive.cc@1.13.8.1, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +2 -2
    update handler::info interface to return int

  sql/examples/ha_archive.h@1.9.1.7, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

  sql/examples/ha_tina.cc@1.3.1.8, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +2 -2
    update handler::info interface to return int

  sql/examples/ha_tina.h@1.2.1.1, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

  sql/examples/ha_example.cc@1.8.1.5, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +2 -2
    update handler::info interface to return int

  sql/examples/ha_example.h@1.9.1.1, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

  sql/ha_heap.cc@1.47.1.14, 2006-08-10 22:55:17+08:00, stewart@willster.(none) +2 -1
    update handler::info interface to return int

  sql/ha_heap.h@1.26.1.9, 2006-08-10 22:55:17+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

  sql/ha_innodb.cc@1.90.16.45, 2006-08-10 22:55:17+08:00, stewart@willster.(none) +3 -3
    update handler::info interface to return int

  sql/ha_innodb.h@1.57.6.5, 2006-08-10 22:55:17+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

  sql/ha_myisam.cc@1.115.1.48, 2006-08-10 22:55:17+08:00, stewart@willster.(none) +3 -1
    update handler::info interface to return int

  sql/ha_myisam.h@1.61.1.4, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

  sql/ha_myisammrg.cc@1.51.1.12, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +2 -1
    update handler::info interface to return int

  sql/ha_myisammrg.h@1.35.1.4, 2006-08-10 22:55:18+08:00, stewart@willster.(none) +1 -1
    update handler::info interface to return int

ChangeSet@1.2255.1.3, 2006-08-02 08:06:46-04:00, mikael@dator5.(none) +2 -0
  BUG#18198: Fixes
  ascii on varchar now allowed

  mysql-test/r/partition_error.result@1.12, 2006-08-02 08:06:44-04:00, mikael@dator5.(none) +1 -1
    ascii on varchar now allowed

  mysql-test/t/partition_error.test@1.14, 2006-08-02 08:06:44-04:00, mikael@dator5.(none) +1 -1
    ascii on varchar now allowed

ChangeSet@1.2245.1.3, 2006-08-02 06:40:25-04:00, mikael@dator5.(none) +4 -0
  BUG#18198: Fixes to handle VARCHAR strings properly
  
  New methods to handle VARCHAR strings and CHAR's which are not
  using a binary collation.
  Indentation fixes
  Now strings are run through strnxfrm before they are processed
  by the partition function
  We do not allow collations where strnxfrm expands the string since
  we want the resulting string to fit in the same value range as
  the original.

  mysql-test/r/partition_range.result@1.16, 2006-08-02 06:40:23-04:00, mikael@dator5.(none) +42 -0
    New test cases

  mysql-test/t/partition_range.test@1.12, 2006-08-02 06:40:23-04:00, mikael@dator5.(none) +30 -0
    New test cases

  sql/partition_info.h@1.17, 2006-08-02 06:40:23-04:00, mikael@dator5.(none) +27 -2
    New methods to handle VARCHAR strings and CHAR's which are not
    using a binary collation.

  sql/sql_partition.cc@1.85, 2006-08-02 06:40:23-04:00, mikael@dator5.(none) +387 -30
    New methods to handle VARCHAR strings and CHAR's which are not
    using a binary collation.
    Indentation fixes
    Now strings are run through strnxfrm before they are processed
    by the partition function
    We do not allow collations where strnxfrm expands the string since
    we want the resulting string to fit in the same value range as
    the original.

ChangeSet@1.2245.1.2, 2006-07-31 11:38:09-04:00, mikael@dator5.(none) +7 -0
  BUG#18198: More fixes

  mysql-test/r/partition.result@1.51, 2006-07-31 11:38:03-04:00, mikael@dator5.(none) +0 -5
    Removed test case no longer supported

  mysql-test/r/partition_error.result@1.11, 2006-07-31 11:38:03-04:00, mikael@dator5.(none) +1 -1
    Changed behaviour of test case

  mysql-test/r/partition_pruning.result@1.17.1.2, 2006-07-31 11:38:03-04:00, mikael@dator5.(none) +3 -9
    Changed behaviour of test case

  mysql-test/t/partition.test@1.46, 2006-07-31 11:38:03-04:00, mikael@dator5.(none) +7 -5
    Changed behaviour of test case

  mysql-test/t/partition_error.test@1.13, 2006-07-31 11:38:03-04:00, mikael@dator5.(none) +1 -1
    Changed behaviour of test case

  mysql-test/t/partition_pruning.test@1.14.1.2, 2006-07-31 11:38:04-04:00, mikael@dator5.(none) +11 -7
    Changed behaviour of test case

  sql/sql_partition.cc@1.84, 2006-07-31 11:38:04-04:00, mikael@dator5.(none) +5 -2
    Ensured PARTITION BY KEY can use any column type

ChangeSet@1.2181.171.5, 2006-07-31 05:35:57-04:00, mikael@dator5.(none) +1 -0
  Fix

  sql/item.h@1.207, 2006-07-31 05:35:54-04:00, mikael@dator5.(none) +0 -1
    Fix

ChangeSet@1.2241.1.15, 2006-07-30 19:46:04+02:00, msvensson@shellback.(none) +1 -0
  remove unneeded bugfix when read_line function in mysqltest has been fixed

  client/mysqltest.c@1.214.1.8, 2006-07-30 19:45:56+02:00, msvensson@shellback.(none) +2 -12
    Remove the hack "q_send_flag" which seems to be a bug fix for a buggy 'read_line' function

ChangeSet@1.2241.1.14, 2006-07-30 19:16:51+02:00, msvensson@shellback.(none) +4 -0
  Add new commands to mysqltest - to make it easier to write portable test scripts

  client/Makefile.am@1.74, 2006-07-30 19:16:19+02:00, msvensson@shellback.(none) +2 -1
    Link mysqltest with mysys library

  client/mysqltest.c@1.214.1.7, 2006-07-30 19:16:20+02:00, msvensson@shellback.(none) +412 -55
    Add new commands to mysqltest:
     - remove_file
     - copy_file
     - file_exists
     - write_file
     - perl

  mysql-test/r/mysqltest.result@1.41, 2006-07-30 19:16:20+02:00, msvensson@shellback.(none) +11 -0
    Update result file

  mysql-test/t/mysqltest.test@1.52, 2006-07-30 19:16:47+02:00, msvensson@shellback.(none) +75 -0
    Add tests for new commands

ChangeSet@1.2241.1.13, 2006-07-30 18:21:31+02:00, msvensson@shellback.(none) +1 -0
  Cleanup error messages in mysqltest

  client/mysqltest.c@1.214.1.6, 2006-07-30 18:21:27+02:00, msvensson@shellback.(none) +18 -20
    Cleanup error messages, no need to supply line number in calls to 'die' that is done automatically if needed.
    Set start_lineno to 0 as default.

ChangeSet@1.2241.1.12, 2006-07-30 18:01:42+02:00, msvensson@shellback.(none) +1 -0
  Remove outdated TODO list

  client/mysqltest.c@1.214.1.5, 2006-07-30 18:01:38+02:00, msvensson@shellback.(none) +0 -17
    Remove outdated TODO list

ChangeSet@1.2241.1.11, 2006-07-30 18:00:08+02:00, msvensson@shellback.(none) +1 -0
  Remove todo about better manual

  client/mysqltest.c@1.214.1.4, 2006-07-30 18:00:04+02:00, msvensson@shellback.(none) +1 -2
    Remove the TODO saying we need better manual since that has been fixed now.

ChangeSet@1.2241.1.10, 2006-07-30 17:57:15+02:00, msvensson@shellback.(none) +2 -0
  Improve and fix bugs in 'read_line' function of mysqltest

  client/mysqltest.c@1.214.1.3, 2006-07-30 17:57:10+02:00, msvensson@shellback.(none) +143 -58
    Fix bugs in 'read_line' function, add better comments and some DBUG printouts
    Add do_delimiter function so the "delimiter" command is parsed better, it should not be allowed to have emtpy delimiter 
    Add checks that disable/enable_pasring is not used when it's already disabled or enabled.
    Don't allow mysqltest to end with parsing disabled
    Add function 'convert_to_format_v1' as the bugs in read_line caused the queries to be read a little funny
    and we want to preserve the result file format(at this time)

  mysql-test/r/mysqltest.result@1.40, 2006-07-30 17:57:10+02:00, msvensson@shellback.(none) +2 -2
    Update result file

ChangeSet@1.2241.1.9, 2006-07-29 19:38:46+02:00, msvensson@shellback.(none) +2 -0
  Change faulty delimiter ; to | and remove junk in result file caused by that

  mysql-test/r/sp_notembedded.result@1.4.1.3, 2006-07-29 19:38:43+02:00, msvensson@shellback.(none) +1 -2
    Change faulty delimiter ; to | and remove junk in result file caused by that

  mysql-test/t/sp_notembedded.test@1.7, 2006-07-29 19:38:43+02:00, msvensson@shellback.(none) +6 -6
    Change faulty delimiter ; to |

ChangeSet@1.2241.1.8, 2006-07-29 19:36:11+02:00, msvensson@shellback.(none) +1 -0
  Change faulty delimiter ; to |

  mysql-test/t/sp.test@1.196, 2006-07-29 19:36:08+02:00, msvensson@shellback.(none) +5 -5
    Change faulty delimiter ; to |

ChangeSet@1.2241.1.7, 2006-07-29 18:11:19+02:00, msvensson@shellback.(none) +2 -0
  Add missing delimiter in subselect test

  mysql-test/r/subselect.result@1.149, 2006-07-29 18:11:15+02:00, msvensson@shellback.(none) +1 -2
    Add missing semicolon delimiter and junk caused by that

  mysql-test/t/subselect.test@1.119.1.1, 2006-07-29 18:11:15+02:00, msvensson@shellback.(none) +1 -1
    Add missing semicolon delimiter

ChangeSet@1.2241.1.6, 2006-07-29 13:03:17+02:00, msvensson@shellback.(none) +1 -0
  Add missing semicolon to wait_timeout test

  mysql-test/t/wait_timeout.test@1.10, 2006-07-29 13:03:14+02:00, msvensson@shellback.(none) +1 -1
    Add missing semicolon

ChangeSet@1.2241.1.5, 2006-07-29 13:02:28+02:00, msvensson@shellback.(none) +1 -0
  Remove spurious printout in result file caused by previous missing semicolon

  mysql-test/r/query_cache.result@1.78, 2006-07-29 13:02:25+02:00, msvensson@shellback.(none) +0 -1
    Remove spurious printout in result file caused by previous missing semicolon

ChangeSet@1.2241.1.4, 2006-07-29 13:01:07+02:00, msvensson@shellback.(none) +1 -0
  Remove spurios junk in result file caused by previous missing semicolon

  mysql-test/r/csv.result@1.11, 2006-07-29 13:01:03+02:00, msvensson@shellback.(none) +1 -2
    Remove spurios junk in result file caused by previous missing semicolon

ChangeSet@1.2241.1.3, 2006-07-29 12:35:30+02:00, msvensson@shellback.(none) +2 -0
  Add missing semicolon in query_cache test

  mysql-test/r/query_cache.result@1.77, 2006-07-29 12:35:25+02:00, msvensson@shellback.(none) +1 -1
    Add missing semicolon

  mysql-test/t/query_cache.test@1.62, 2006-07-29 12:35:25+02:00, msvensson@shellback.(none) +1 -1
    Add missing semicolon

ChangeSet@1.2241.1.2, 2006-07-29 12:33:59+02:00, msvensson@shellback.(none) +1 -0
  Add missing semicolon in csv test

  mysql-test/t/csv.test@1.13, 2006-07-29 12:33:55+02:00, msvensson@shellback.(none) +1 -1
    Add missing semicolon

ChangeSet@1.2241.1.1, 2006-07-28 10:21:47+02:00, msvensson@shellback.(none) +1 -0
  Add query_len variable to st_query, avoids a lot of strlen and allows better allocation of dynamic strings
  Tune some inital allocations of dynamic strings

  client/mysqltest.c@1.214.1.2, 2006-07-28 10:21:38+02:00, msvensson@shellback.(none) +17 -13
    Add query_len variable to st_query, avoids a lot of strlen and allows better allocation of dynamic strings
    Tune some inital allocations of dynamic strings

ChangeSet@1.1616.2629.2, 2006-07-26 11:44:52+10:00, stewart@willster.(none) +2 -0
  BUG#21204 ndb_size.pl doesn't take extended BLOB/TEXT size into account
  

  ndb/tools/ndb_size.pl@1.2.4.2, 2006-07-26 11:44:47+10:00, stewart@willster.(none) +76 -31
    disable 5.1-dd reporting as it's not ready yet.
    
    support BLOB tables with mostly accurate space estimate (our estimates
    will be slightly higher due to the fact we also calculate an ORDERED index
    on the BLOB table, something that NDB doesn't have).
    
    now have subroutine do_table that does the calculations for a table. We
    call this with a "fake" blob table to get estimates for blob usage.

  ndb/tools/ndb_size.tmpl@1.1.2.2, 2006-07-26 11:44:47+10:00, stewart@willster.(none) +2 -0
    Add column in columns table for if column is VARSIZED

ChangeSet@1.2181.161.3, 2006-07-21 10:23:32-04:00, mikael@dator5.(none) +10 -0
  BUG#18198: Partition function handling
  Review fixes

  sql/item.h@1.205, 2006-07-21 10:23:29-04:00, mikael@dator5.(none) +14 -32
    Review fixes

  sql/item_cmpfunc.h@1.131, 2006-07-21 10:23:29-04:00, mikael@dator5.(none) +14 -23
    Review fixes

  sql/item_func.h@1.142, 2006-07-21 10:23:29-04:00, mikael@dator5.(none) +30 -36
    Review fixes

  sql/item_strfunc.h@1.115, 2006-07-21 10:23:29-04:00, mikael@dator5.(none) +14 -26
    Review fixes

  sql/item_timefunc.h@1.74, 2006-07-21 10:23:29-04:00, mikael@dator5.(none) +30 -32
    Review fixes

  sql/item_xmlfunc.h@1.5, 2006-07-21 10:23:29-04:00, mikael@dator5.(none) +1 -2
    Review fixes

  sql/partition_info.cc@1.23, 2006-07-21 10:23:30-04:00, mikael@dator5.(none) +7 -6
    Review fixes

  sql/partition_info.h@1.16, 2006-07-21 10:23:30-04:00, mikael@dator5.(none) +1 -5
    Review fixes

  sql/sql_partition.cc@1.82, 2006-07-21 10:23:30-04:00, mikael@dator5.(none) +15 -14
    Review fixes

  sql/sql_yacc.yy@1.484.4.2, 2006-07-21 10:23:30-04:00, mikael@dator5.(none) +1 -1
    Review fixes

ChangeSet@1.1616.2144.171, 2006-07-20 15:52:48+05:00, bar@mysql.com +6 -0
  Bug#20471 LIKE search fails with indexed utf8 char column
  The main problem was already fixed by Igor under terms of 16674.
  Adding some additional minor fixes and tests.

  include/m_ctype.h@1.102.1.6, 2006-07-20 15:52:44+05:00, bar@mysql.com +4 -0
    Adding reference to CHARSET_INFO.txt

  mysql-test/r/ctype_utf8.result@1.45.6.5, 2006-07-20 15:52:44+05:00, bar@mysql.com +75 -0
    Adding test case

  mysql-test/t/ctype_utf8.test@1.57.6.5, 2006-07-20 15:52:44+05:00, bar@mysql.com +70 -0
    Adding test case

  strings/CHARSET_INFO.txt@1.4.1.1, 2006-07-20 15:52:44+05:00, bar@mysql.com +10 -2
    Adding comment about max_sort_char

  strings/ctype-mb.c@1.34.1.9, 2006-07-20 15:52:44+05:00, bar@mysql.com +17 -4
    Restiring that non-Unicode character sets use 0xFF as pad character
    for max_str. Only Unicode character sets use wc_mb.

  strings/ctype-utf8.c@1.78.1.12, 2006-07-20 15:52:44+05:00, bar@mysql.com +1 -1
    Fixed that max_sort_char for UTF8 from U+00FF to U+FFFF.

ChangeSet@1.2181.161.2, 2006-07-13 20:37:17-04:00, mikael@dator5.(none) +2 -0
  BUG#18198: Partition function bug
  Review fixes

  sql/item_cmpfunc.h@1.130, 2006-07-13 20:37:15-04:00, mikael@dator5.(none) +1 -1
    Fixes after review

  sql/item_strfunc.h@1.114, 2006-07-13 20:37:15-04:00, mikael@dator5.(none) +0 -14
    Fixes after review

ChangeSet@1.2181.82.2, 2006-07-12 11:22:13-04:00, mikael@dator5.(none) +1 -0
  BUG#18198: Fix

  sql/partition_info.cc@1.21, 2006-07-12 11:22:11-04:00, mikael@dator5.(none) +0 -2
    minor fix

ChangeSet@1.2181.51.2, 2006-06-23 01:21:26-04:00, mikael@dator5.(none) +12 -0
  BUG#18198: Less flexibility in defining partition functions
  Changed test for functions if they are supported.
  3 categories:
  1) Fully supported
  2) Supported for single character collations
  3) Supported for binary collations

  mysql-test/r/partition.result@1.38.8.1, 2006-06-23 01:21:21-04:00, mikael@dator5.(none) +1 -1
    Changed test case since no longer supported to use multicharacter collations
    in comparisons

  mysql-test/t/partition.test@1.40.8.1, 2006-06-23 01:21:21-04:00, mikael@dator5.(none) +1 -1
    Changed test case since no longer supported to use multicharacter collations
    in comparisons

  sql/item.h@1.204, 2006-06-23 01:21:21-04:00, mikael@dator5.(none) +43 -21
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/item_cmpfunc.h@1.128, 2006-06-23 01:21:21-04:00, mikael@dator5.(none) +24 -15
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/item_func.h@1.141, 2006-06-23 01:21:22-04:00, mikael@dator5.(none) +36 -31
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/item_strfunc.h@1.112, 2006-06-23 01:21:22-04:00, mikael@dator5.(none) +40 -24
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/item_timefunc.h@1.73, 2006-06-23 01:21:22-04:00, mikael@dator5.(none) +32 -30
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/item_xmlfunc.h@1.4, 2006-06-23 01:21:22-04:00, mikael@dator5.(none) +2 -1
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/partition_info.cc@1.20, 2006-06-23 01:21:22-04:00, mikael@dator5.(none) +28 -11
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/partition_info.h@1.14, 2006-06-23 01:21:22-04:00, mikael@dator5.(none) +7 -2
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/sql_partition.cc@1.78.1.1, 2006-06-23 01:21:22-04:00, mikael@dator5.(none) +47 -2
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

  sql/sql_table.cc@1.348.3.1, 2006-06-23 01:21:22-04:00, mikael@dator5.(none) +1 -1
    Changed test for functions if they are supported.
    3 categories:
    1) Fully supported
    2) Supported for single character collations
    3) Supported for binary collations

ChangeSet@1.2181.51.1, 2006-06-20 10:57:02-04:00, mikael@dator5.(none) +3 -0
  BUG#18198: Too flexible partition functions

  mysql-test/r/partition_error.result@1.9, 2006-06-20 10:56:58-04:00, mikael@dator5.(none) +17 -0
    New test cases

  mysql-test/t/partition_error.test@1.11, 2006-06-20 10:56:58-04:00, mikael@dator5.(none) +22 -0
    New test cases

  sql/sql_yacc.yy@1.482.1.1, 2006-06-20 10:56:58-04:00, mikael@dator5.(none) +9 -2
    Verify that partition function is allowed before "fixing" it

ChangeSet@1.1616.2629.1, 2006-06-07 01:37:29+10:00, stewart@mysql.com +2 -0
  WL#3310 Update ndb_size.pl for 5.1
  
  the "If I had a hammer" patch.
  
  Had to answer the question, did it in code.
  
  Much more accurrate results for 5.1

  ndb/tools/ndb_size.pl@1.2.4.1, 2006-06-07 01:37:12+10:00, stewart@mysql.com +50 -30
    Add experimental 5.1-dd support to ndb_size.pl
    Improve calculations with 5.1 and variable sized attributes.
    
    Now much more closely resembles reality.

  ndb/tools/ndb_size.tmpl@1.1.2.1, 2006-06-07 01:37:12+10:00, stewart@mysql.com +16 -2
    Comment on 5.1-dd exp support.
    
    Display:
    - nr varsized attributes
    - actual row overhead depending on version
    - overhead for varsized attributes

